<!DOCTYPE html>
<html>
<head>
    <title>Print</title>

    <script type="text/javascript" src="/apps/2.1/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("PrintApp",{extend:"Rally.app.App",componentCls:"app",theStore:void 0,theGrid:void 0,theFetch:["FormattedID","Name","Project","Owner","Size","DisplayColor","State","PreliminaryEstimate","Parent","ActualStartDate","ActualEndDate","PlannedStartDate","PlannedEndDate","c_QRWP","PortfolioItemType","c_OrderBookNumberOBN"],items:[{xtype:"container",itemId:"pulldown-container",margin:"5 5 5 5",layout:{type:"hbox",align:"stretch"}}],launch:function(){this._addFetchType()},onModelRetrieved:function(model){this.model=model,this.createDefect()},_addFetchType:function(){var me=this,iterComboBox=Ext.create("Rally.ui.combobox.PortfolioItemTypeComboBox",{itemId:"portfolio-combobox",fieldLabel:"Select",labelAlign:"left",width:300,defaultSelectionPosition:"first",listeners:{ready:function(){me._loadData(1),console.log(" Ready ",iterComboBox)},select:function(){me._loadData(2),console.log(" Change ",iterComboBox)},scope:me}});this.down("#pulldown-container").add(iterComboBox)},_getFilters:function(value){var theFilter=Ext.create("Rally.data.wsapi.Filter",{property:"PortfolioItemType",operation:"=",value:value});return console.log("Filter"),theFilter},_loadData:function(myX){console.log("f _loadData",myX);var me=this,selectedItem=this.down("#portfolio-combobox").getRecord().get("_ref"),myFilter=this._getFilters(selectedItem);console.log(myFilter),me.theStore?(me.theStore.setFilter(myFilter),me.theStore.load()):me.theStore=Ext.create("Rally.data.wsapi.Store",{model:"PortfolioItem",autoLoad:!0,filters:myFilter,type:"PortfolioItem",listeners:{load:function(myStore,myData,success){me.theGrid||me._createGrid(myStore)},scope:me},fetch:this.theFetch})},_createGrid:function(mytheStore){var me=this;me.theGrid=Ext.create("Rally.ui.grid.Grid",{store:mytheStore,columnCfgs:this.theFetch}),me.add(me.theGrid)}});

            Rally.launchApp('PrintApp', {
                name:"Print",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        
    </style>
</head>
<body>
</body>
</html>
