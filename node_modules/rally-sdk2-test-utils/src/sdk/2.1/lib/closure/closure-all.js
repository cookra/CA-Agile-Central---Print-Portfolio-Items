/*
Apache License, Version 2.0
*/
var COMPILED=!0,goog=goog||{};goog.global=this;goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.provide=function(d){if(!COMPILED){if(goog.isProvided_(d)){throw Error('Namespace "'+d+'" already declared.')}delete goog.implicitNamespaces_[d];for(var c=d;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);){goog.implicitNamespaces_[c]=!0}}goog.exportPath_(d)};goog.setTestOnly=function(b){if(COMPILED&&!goog.DEBUG){throw b=b||"",Error("Importing test-only code into non-debug environment"+b?": "+b:".")}};COMPILED||(goog.isProvided_=function(b){return !goog.implicitNamespaces_[b]&&!!goog.getObjectByName(b)},goog.implicitNamespaces_={});goog.exportPath_=function(f,e,h){f=f.split(".");h=h||goog.global;!(f[0] in h)&&h.execScript&&h.execScript("var "+f[0]);for(var g;f.length&&(g=f.shift());){!f.length&&goog.isDef(e)?h[g]=e:h=h[g]?h[g]:h[g]={}}};goog.getObjectByName=function(g,f){for(var j=g.split("."),i=f||goog.global,h;h=j.shift();){if(goog.isDefAndNotNull(i[h])){i=i[h]}else{return null}}return i};goog.globalize=function(f,e){var h=e||goog.global,g;for(g in f){h[g]=f[g]}};goog.addDependency=function(h,g,l){if(!COMPILED){var k;h=h.replace(/\\/g,"/");for(var j=goog.dependencies_,i=0;k=g[i];i++){j.nameToPath[k]=h,h in j.pathToNames||(j.pathToNames[h]={}),j.pathToNames[h][k]=!0}for(k=0;g=l[k];k++){h in j.requires||(j.requires[h]={}),j.requires[h][g]=!0}}};goog.ENABLE_DEBUG_LOADER=!0;goog.require=function(d){if(!COMPILED&&!goog.isProvided_(d)){if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(d);if(c){goog.included_[c]=!0;goog.writeScripts_();return}}d="goog.require could not find: "+d;goog.global.console&&goog.global.console.error(d);throw Error(d)}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(b){return b};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(b){b.getInstance=function(){if(b.instance_){return b.instance_}goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=b);return b.instance_=new b}};goog.instantiatedSingletons_=[];!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var b=goog.global.document;return"undefined"!=typeof b&&"write" in b},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH){goog.basePath=goog.global.CLOSURE_BASE_PATH}else{if(goog.inHtmlDocument_()){for(var f=goog.global.document.getElementsByTagName("script"),e=f.length-1;0<=e;--e){var h=f[e].src,g=h.lastIndexOf("?"),g=-1==g?h.length:g;if("base.js"==h.substr(g-7,7)){goog.basePath=h.substr(0,g-7);break}}}}},goog.importScript_=function(d){var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[d]&&c(d)&&(goog.dependencies_.written[d]=!0)},goog.writeScriptTag_=function(d){if(goog.inHtmlDocument_()){var c=goog.global.document;if("complete"==c.readyState){if(/\bdeps.js$/.test(d)){return !1}throw Error('Cannot write "'+d+'" after document load')}c.write('<script type="text/javascript" src="'+d+'">\x3c/script>');return !0}return !1},goog.writeScripts_=function(){function g(b){if(!(b in i.written)){if(!(b in i.visited)&&(i.visited[b]=!0,b in i.requires)){for(var a in i.requires[b]){if(!goog.isProvided_(a)){if(a in i.nameToPath){g(i.nameToPath[a])}else{throw Error("Undefined nameToPath for "+a)}}}}b in j||(j[b]=!0,f.push(b))}}var f=[],j={},i=goog.dependencies_,h;for(h in goog.included_){i.written[h]||g(h)}for(h=0;h<f.length;h++){if(f[h]){goog.importScript_(goog.basePath+f[h])}else{throw Error("Undefined script input")}}},goog.getPathFromDeps_=function(b){return b in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[b]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.typeOf=function(e){var d=typeof e;if("object"==d){if(e){if(e instanceof Array){return"array"}if(e instanceof Object){return d}var f=Object.prototype.toString.call(e);if("[object Window]"==f){return"object"}if("[object Array]"==f||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice")){return"array"}if("[object Function]"==f||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call")){return"function"}}else{return"null"}}else{if("function"==d&&"undefined"==typeof e.call){return"object"}}return d};goog.isDef=function(b){return void 0!==b};goog.isNull=function(b){return null===b};goog.isDefAndNotNull=function(b){return null!=b};goog.isArray=function(b){return"array"==goog.typeOf(b)};goog.isArrayLike=function(d){var c=goog.typeOf(d);return"array"==c||"object"==c&&"number"==typeof d.length};goog.isDateLike=function(b){return goog.isObject(b)&&"function"==typeof b.getFullYear};goog.isString=function(b){return"string"==typeof b};goog.isBoolean=function(b){return"boolean"==typeof b};goog.isNumber=function(b){return"number"==typeof b};goog.isFunction=function(b){return"function"==goog.typeOf(b)};goog.isObject=function(d){var c=typeof d;return"object"==c&&null!=d||"function"==c};goog.getUid=function(b){return b[goog.UID_PROPERTY_]||(b[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(d){"removeAttribute" in d&&d.removeAttribute(goog.UID_PROPERTY_);try{delete d[goog.UID_PROPERTY_]}catch(c){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(e){var d=goog.typeOf(e);if("object"==d||"array"==d){if(e.clone){return e.clone()}var d="array"==d?[]:{},f;for(f in e){d[f]=goog.cloneObject(e[f])}return d}return e};goog.bindNative_=function(e,d,f){return e.call.apply(e.bind,arguments)};goog.bindJs_=function(f,e,h){if(!f){throw Error()}if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(a,g);return f.apply(e,a)}}return function(){return f.apply(e,arguments)}};goog.bind=function(e,d,f){goog.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(e,d){var f=Array.prototype.slice.call(arguments,1);return function(){var a=Array.prototype.slice.call(arguments);a.unshift.apply(a,f);return e.apply(this,a)}};goog.mixin=function(e,d){for(var f in d){e[f]=d[f]}};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return +new Date};goog.globalEval=function(a){if(goog.global.execScript){goog.global.execScript(a,"JavaScript")}else{if(goog.global.eval){if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_){goog.global.eval(a)}else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);b.body.removeChild(c)}}else{throw Error("goog.globalEval not available")}}};goog.evalWorksForGlobals_=null;goog.getCssName=function(f,e){var h=function(b){return goog.cssNameMapping_[b]||b},g=function(i){i=i.split("-");for(var c=[],j=0;j<i.length;j++){c.push(h(i[j]))}return c.join("-")},g=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?h:g:function(b){return b};return e?f+"-"+g(e):g(f)};goog.setCssNameMapping=function(d,c){goog.cssNameMapping_=d;goog.cssNameMappingStyle_=c};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(g,f){var j=f||{},i;for(i in j){var h=(""+j[i]).replace(/\$/g,"$$$$");g=g.replace(RegExp("\\{\\$"+i+"\\}","gi"),h)}return g};goog.getMsgWithFallback=function(b){return b};goog.exportSymbol=function(e,d,f){goog.exportPath_(e,d,f)};goog.exportProperty=function(e,d,f){e[d]=f};goog.inherits=function(e,d){function f(){}f.prototype=d.prototype;e.superClass_=d.prototype;e.prototype=new f;e.prototype.constructor=e};goog.base=function(i,h,n){var m=arguments.callee.caller;if(m.superClass_){return m.superClass_.constructor.apply(i,Array.prototype.slice.call(arguments,1))}for(var l=Array.prototype.slice.call(arguments,2),k=!1,j=i.constructor;j;j=j.superClass_&&j.superClass_.constructor){if(j.prototype[h]===m){k=!0}else{if(k){return j.prototype[h].apply(i,l)}}}if(i[h]===m){return i.constructor.prototype[h].apply(i,l)}throw Error("goog.base called from a method of one name to a method of a different name")};goog.scope=function(b){b.call(goog.global)};goog.string={};goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(d,c){return 0==d.lastIndexOf(c,0)};goog.string.endsWith=function(e,d){var f=e.length-d.length;return 0<=f&&e.indexOf(d,f)==f};goog.string.caseInsensitiveStartsWith=function(d,c){return 0==goog.string.caseInsensitiveCompare(c,d.substr(0,c.length))};goog.string.caseInsensitiveEndsWith=function(d,c){return 0==goog.string.caseInsensitiveCompare(c,d.substr(d.length-c.length,c.length))};goog.string.subs=function(f,e){for(var h=1;h<arguments.length;h++){var g=String(arguments[h]).replace(/\$/g,"$$$$");f=f.replace(/\%s/,g)}return f};goog.string.collapseWhitespace=function(b){return b.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(b){return/^[\s\xa0]*$/.test(b)};goog.string.isEmptySafe=function(b){return goog.string.isEmpty(goog.string.makeSafe(b))};goog.string.isBreakingWhitespace=function(b){return !/[^\t\n\r ]/.test(b)};goog.string.isAlpha=function(b){return !/[^a-zA-Z]/.test(b)};goog.string.isNumeric=function(b){return !/[^0-9]/.test(b)};goog.string.isAlphaNumeric=function(b){return !/[^a-zA-Z0-9]/.test(b)};goog.string.isSpace=function(b){return" "==b};goog.string.isUnicodeChar=function(b){return 1==b.length&&" "<=b&&"~">=b||"\u0080"<=b&&"\ufffd">=b};goog.string.stripNewlines=function(b){return b.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(b){return b.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(b){return b.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(b){return b.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(b){return b.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(b){return b.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(b){return b.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(f,e){var h=String(f).toLowerCase(),g=String(e).toLowerCase();return h<g?-1:h==g?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;goog.string.numerateCompare=function(j,i){if(j==i){return 0}if(!j){return -1}if(!i){return 1}for(var p=j.toLowerCase().match(goog.string.numerateCompareRegExp_),o=i.toLowerCase().match(goog.string.numerateCompareRegExp_),n=Math.min(p.length,o.length),m=0;m<n;m++){var l=p[m],k=o[m];if(l!=k){return p=parseInt(l,10),!isNaN(p)&&(o=parseInt(k,10),!isNaN(o)&&p-o)?p-o:l<k?-1:1}}return p.length!=o.length?p.length-o.length:j<i?-1:1};goog.string.urlEncode=function(b){return encodeURIComponent(String(b))};goog.string.urlDecode=function(b){return decodeURIComponent(b.replace(/\+/g," "))};goog.string.newLineToBr=function(d,c){return d.replace(/(\r\n|\r|\n)/g,c?"<br />":"<br>")};goog.string.htmlEscape=function(d,c){if(c){return d.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;")}if(!goog.string.allRe_.test(d)){return d}-1!=d.indexOf("&")&&(d=d.replace(goog.string.amperRe_,"&amp;"));-1!=d.indexOf("<")&&(d=d.replace(goog.string.ltRe_,"&lt;"));-1!=d.indexOf(">")&&(d=d.replace(goog.string.gtRe_,"&gt;"));-1!=d.indexOf('"')&&(d=d.replace(goog.string.quotRe_,"&quot;"));return d};goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/\"/g;goog.string.allRe_=/[&<>\"]/;goog.string.unescapeEntities=function(b){return goog.string.contains(b,"&")?"document" in goog.global?goog.string.unescapeEntitiesUsingDom_(b):goog.string.unescapePureXmlEntities_(b):b};goog.string.unescapeEntitiesUsingDom_=function(e){var d={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},f=document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(b,i){var h=d[b];if(h){return h}if("#"==i.charAt(0)){var c=Number("0"+i.substr(1));isNaN(c)||(h=String.fromCharCode(c))}h||(f.innerHTML=b+" ",h=f.firstChild.nodeValue.slice(0,-1));return d[b]=h})};goog.string.unescapePureXmlEntities_=function(b){return b.replace(/&([^;]+);/g,function(e,g){switch(g){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==g.charAt(0)){var f=Number("0"+g.substr(1));if(!isNaN(f)){return String.fromCharCode(f)}}return e}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(d,c){return goog.string.newLineToBr(d.replace(/  /g," &#160;"),c)};goog.string.stripQuotes=function(g,f){for(var j=f.length,i=0;i<j;i++){var h=1==j?f:f.charAt(i);if(g.charAt(0)==h&&g.charAt(g.length-1)==h){return g.substring(1,g.length-1)}}return g};goog.string.truncate=function(e,d,f){f&&(e=goog.string.unescapeEntities(e));e.length>d&&(e=e.substring(0,d-3)+"...");f&&(e=goog.string.htmlEscape(e));return e};goog.string.truncateMiddle=function(g,f,j,i){j&&(g=goog.string.unescapeEntities(g));if(i&&g.length>f){i>f&&(i=f);var h=g.length-i;g=g.substring(0,f-i)+"..."+g.substring(h)}else{g.length>f&&(i=Math.floor(f/2),h=g.length-i,g=g.substring(0,i+f%2)+"..."+g.substring(h))}j&&(g=goog.string.htmlEscape(g));return g};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(g){g=String(g);if(g.quote){return g.quote()}for(var f=['"'],j=0;j<g.length;j++){var i=g.charAt(j),h=i.charCodeAt(0);f[j+1]=goog.string.specialEscapeChars_[i]||(31<h&&127>h?i:goog.string.escapeChar(i))}f.push('"');return f.join("")};goog.string.escapeString=function(e){for(var d=[],f=0;f<e.length;f++){d[f]=goog.string.escapeChar(e.charAt(f))}return d.join("")};goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_){return goog.string.jsEscapeCache_[e]}if(e in goog.string.specialEscapeChars_){return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e]}var d=e,f=e.charCodeAt(0);if(31<f&&127>f){d=e}else{if(256>f){if(d="\\x",16>f||256<f){d+="0"}}else{d="\\u",4096>f&&(d+="0")}d+=f.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[e]=d};goog.string.toMap=function(e){for(var d={},f=0;f<e.length;f++){d[e.charAt(f)]=!0}return d};goog.string.contains=function(d,c){return -1!=d.indexOf(c)};goog.string.countOf=function(d,c){return d&&c?d.split(c).length-1:0};goog.string.removeAt=function(f,e,h){var g=f;0<=e&&(e<f.length&&0<h)&&(g=f.substr(0,e)+f.substr(e+h,f.length-e-h));return g};goog.string.remove=function(e,d){var f=RegExp(goog.string.regExpEscape(d),"");return e.replace(f,"")};goog.string.removeAll=function(e,d){var f=RegExp(goog.string.regExpEscape(d),"g");return e.replace(f,"")};goog.string.regExpEscape=function(b){return String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(d,c){return Array(c+1).join(d)};goog.string.padNumber=function(e,d,f){e=goog.isDef(f)?e.toFixed(f):String(e);f=e.indexOf(".");-1==f&&(f=e.length);return goog.string.repeat("0",Math.max(0,d-f))+e};goog.string.makeSafe=function(b){return null==b?"":String(b)};goog.string.buildString=function(b){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};goog.string.compareVersions=function(B,A){for(var z=0,y=goog.string.trim(String(B)).split("."),x=goog.string.trim(String(A)).split("."),w=Math.max(y.length,x.length),v=0;0==z&&v<w;v++){var u=y[v]||"",t=x[v]||"",s=RegExp("(\\d*)(\\D*)","g"),r=RegExp("(\\d*)(\\D*)","g");do{var q=s.exec(u)||["","",""],o=r.exec(t)||["","",""];if(0==q[0].length&&0==o[0].length){break}var z=0==q[1].length?0:parseInt(q[1],10),i=0==o[1].length?0:parseInt(o[1],10),z=goog.string.compareElements_(z,i)||goog.string.compareElements_(0==q[2].length,0==o[2].length)||goog.string.compareElements_(q[2],o[2])}while(0==z)}return z};goog.string.compareElements_=function(d,c){return d<c?-1:d>c?1:0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(e){for(var d=0,f=0;f<e.length;++f){d=31*d+e.charCodeAt(f),d%=goog.string.HASHCODE_MAX_}return d};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(d){var c=Number(d);return 0==c&&goog.string.isEmpty(d)?NaN:c};goog.string.toCamelCase=function(b){return String(b).replace(/\-([a-z])/g,function(d,e){return e.toUpperCase()})};goog.string.toSelectorCase=function(b){return String(b).replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(e,d){var f=goog.isString(d)?goog.string.regExpEscape(d):"\\s";return e.replace(RegExp("(^"+(f?"|["+f+"]+":"")+")([a-z])","g"),function(h,g,i){return g+i.toUpperCase()})};goog.string.parseInt=function(b){isFinite(b)&&(b=String(b));return goog.isString(b)?/^\s*-?0x/i.test(b)?parseInt(b,16):parseInt(b,10):NaN};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return goog.global.navigator?goog.global.navigator.userAgent:null};goog.userAgent.getNavigator=function(){return goog.global.navigator};goog.userAgent.init_=function(){goog.userAgent.detectedOpera_=!1;goog.userAgent.detectedIe_=!1;goog.userAgent.detectedWebkit_=!1;goog.userAgent.detectedMobile_=!1;goog.userAgent.detectedGecko_=!1;var d;if(!goog.userAgent.BROWSER_KNOWN_&&(d=goog.userAgent.getUserAgentString())){var c=goog.userAgent.getNavigator();goog.userAgent.detectedOpera_=0==d.indexOf("Opera");goog.userAgent.detectedIe_=!goog.userAgent.detectedOpera_&&-1!=d.indexOf("MSIE");goog.userAgent.detectedWebkit_=!goog.userAgent.detectedOpera_&&-1!=d.indexOf("WebKit");goog.userAgent.detectedMobile_=goog.userAgent.detectedWebkit_&&-1!=d.indexOf("Mobile");goog.userAgent.detectedGecko_=!goog.userAgent.detectedOpera_&&!goog.userAgent.detectedWebkit_&&"Gecko"==c.product}};goog.userAgent.BROWSER_KNOWN_||goog.userAgent.init_();goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.userAgent.detectedOpera_;goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.userAgent.detectedIe_;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.userAgent.detectedGecko_;goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.userAgent.detectedWebkit_;goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.detectedMobile_;goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var b=goog.userAgent.getNavigator();return b&&b.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11;goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac");goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win");goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux");goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator().appVersion||"","X11")};goog.userAgent.PLATFORM_KNOWN_||goog.userAgent.initPlatform_();goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_;goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_;goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_;goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_;goog.userAgent.determineVersion_=function(){var d="",c;goog.userAgent.OPERA&&goog.global.opera?(d=goog.global.opera.version,d="function"==typeof d?d():d):(goog.userAgent.GECKO?c=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?c=/MSIE\s+([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(c=/WebKit\/(\S+)/),c&&(d=(d=c.exec(goog.userAgent.getUserAgentString()))?d[1]:""));return goog.userAgent.IE&&(c=goog.userAgent.getDocumentMode_(),c>parseFloat(d))?String(c):d};goog.userAgent.getDocumentMode_=function(){var b=goog.global.document;return b?b.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(d,c){return goog.string.compareVersions(d,c)};goog.userAgent.isVersionCache_={};goog.userAgent.isVersion=function(b){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionCache_[b]||(goog.userAgent.isVersionCache_[b]=0<=goog.string.compareVersions(goog.userAgent.VERSION,b))};goog.userAgent.isDocumentMode=function(b){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=b};goog.userAgent.DOCUMENT_MODE=function(){var b=goog.global.document;return !b||!goog.userAgent.IE?void 0:goog.userAgent.getDocumentMode_()||("CSS1Compat"==b.compatMode?parseInt(goog.userAgent.VERSION,10):5)}();goog.object={};goog.object.forEach=function(f,e,h){for(var g in f){e.call(h,f[g],g,f)}};goog.object.filter=function(g,f,j){var i={},h;for(h in g){f.call(j,g[h],h,g)&&(i[h]=g[h])}return i};goog.object.map=function(g,f,j){var i={},h;for(h in g){i[h]=f.call(j,g[h],h,g)}return i};goog.object.some=function(f,e,h){for(var g in f){if(e.call(h,f[g],g,f)){return !0}}return !1};goog.object.every=function(f,e,h){for(var g in f){if(!e.call(h,f[g],g,f)){return !1}}return !0};goog.object.getCount=function(e){var d=0,f;for(f in e){d++}return d};goog.object.getAnyKey=function(d){for(var c in d){return c}};goog.object.getAnyValue=function(d){for(var c in d){return d[c]}};goog.object.contains=function(d,c){return goog.object.containsValue(d,c)};goog.object.getValues=function(f){var e=[],h=0,g;for(g in f){e[h++]=f[g]}return e};goog.object.getKeys=function(f){var e=[],h=0,g;for(g in f){e[h++]=g}return e};goog.object.getValueByKeys=function(f,e){for(var h=goog.isArrayLike(e),g=h?e:arguments,h=h?0:1;h<g.length&&!(f=f[g[h]],!goog.isDef(f));h++){}return f};goog.object.containsKey=function(d,c){return c in d};goog.object.containsValue=function(e,d){for(var f in e){if(e[f]==d){return !0}}return !1};goog.object.findKey=function(f,e,h){for(var g in f){if(e.call(h,f[g],g,f)){return g}}};goog.object.findValue=function(e,d,f){return(d=goog.object.findKey(e,d,f))&&e[d]};goog.object.isEmpty=function(d){for(var c in d){return !1}return !0};goog.object.clear=function(d){for(var c in d){delete d[c]}};goog.object.remove=function(e,d){var f;(f=d in e)&&delete e[d];return f};goog.object.add=function(e,d,f){if(d in e){throw Error('The object already contains the key "'+d+'"')}goog.object.set(e,d,f)};goog.object.get=function(e,d,f){return d in e?e[d]:f};goog.object.set=function(e,d,f){e[d]=f};goog.object.setIfUndefined=function(e,d,f){return d in e?e[d]:e[d]=f};goog.object.clone=function(e){var d={},f;for(f in e){d[f]=e[f]}return d};goog.object.unsafeClone=function(e){var d=goog.typeOf(e);if("object"==d||"array"==d){if(e.clone){return e.clone()}var d="array"==d?[]:{},f;for(f in e){d[f]=goog.object.unsafeClone(e[f])}return d}return e};goog.object.transpose=function(e){var d={},f;for(f in e){d[e[f]]=f}return d};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.object.extend=function(h,g){for(var l,k,j=1;j<arguments.length;j++){k=arguments[j];for(l in k){h[l]=k[l]}for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++){l=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(k,l)&&(h[l]=k[l])}}};goog.object.create=function(f){var e=arguments.length;if(1==e&&goog.isArray(arguments[0])){return goog.object.create.apply(null,arguments[0])}if(e%2){throw Error("Uneven number of arguments")}for(var h={},g=0;g<e;g+=2){h[arguments[g]]=arguments[g+1]}return h};goog.object.createSet=function(f){var e=arguments.length;if(1==e&&goog.isArray(arguments[0])){return goog.object.createSet.apply(null,arguments[0])}for(var h={},g=0;g<e;g++){h[arguments[g]]=!0}return h};goog.object.createImmutableView=function(d){var c=d;Object.isFrozen&&!Object.isFrozen(d)&&(c=Object.create(d),Object.freeze(c));return c};goog.object.isImmutableView=function(b){return !!Object.isFrozen&&Object.isFrozen(b)};goog.reflect={};goog.reflect.object=function(d,c){return c};goog.reflect.sinkValue=function(b){goog.reflect.sinkValue[" "](b);return b};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(e,d){try{return goog.reflect.sinkValue(e[d]),!0}catch(f){}return !1};goog.functions={};goog.functions.constant=function(b){return function(){return b}};goog.functions.FALSE=goog.functions.constant(!1);goog.functions.TRUE=goog.functions.constant(!0);goog.functions.NULL=goog.functions.constant(null);goog.functions.identity=function(b){return b};goog.functions.error=function(b){return function(){throw Error(b)}};goog.functions.lock=function(d,c){c=c||0;return function(){return d.apply(this,Array.prototype.slice.call(arguments,0,c))}};goog.functions.withReturnValue=function(d,c){return goog.functions.sequence(d,goog.functions.constant(c))};goog.functions.compose=function(f,e){var h=arguments,g=h.length;return function(){var d;g&&(d=h[g-1].apply(this,arguments));for(var c=g-2;0<=c;c--){d=h[c].call(this,d)}return d}};goog.functions.sequence=function(e){var d=arguments,f=d.length;return function(){for(var b,c=0;c<f;c++){b=d[c].apply(this,arguments)}return b}};goog.functions.and=function(e){var d=arguments,f=d.length;return function(){for(var b=0;b<f;b++){if(!d[b].apply(this,arguments)){return !1}}return !0}};goog.functions.or=function(e){var d=arguments,f=d.length;return function(){for(var b=0;b<f;b++){if(d[b].apply(this,arguments)){return !0}}return !1}};goog.functions.not=function(b){return function(){return !b.apply(this,arguments)}};goog.functions.create=function(e,d){var f=function(){};f.prototype=e.prototype;f=new f;e.apply(f,Array.prototype.slice.call(arguments,1));return f};goog.editor={};goog.editor.Command={UNDO:"+undo",REDO:"+redo",LINK:"+link",FORMAT_BLOCK:"+formatBlock",INDENT:"+indent",OUTDENT:"+outdent",REMOVE_FORMAT:"+removeFormat",STRIKE_THROUGH:"+strikeThrough",HORIZONTAL_RULE:"+insertHorizontalRule",SUBSCRIPT:"+subscript",SUPERSCRIPT:"+superscript",UNDERLINE:"+underline",BOLD:"+bold",ITALIC:"+italic",FONT_SIZE:"+fontSize",FONT_FACE:"+fontName",FONT_COLOR:"+foreColor",EMOTICON:"+emoticon",EQUATION:"+equation",BACKGROUND_COLOR:"+backColor",ORDERED_LIST:"+insertOrderedList",UNORDERED_LIST:"+insertUnorderedList",TABLE:"+table",JUSTIFY_CENTER:"+justifyCenter",JUSTIFY_FULL:"+justifyFull",JUSTIFY_RIGHT:"+justifyRight",JUSTIFY_LEFT:"+justifyLeft",BLOCKQUOTE:"+BLOCKQUOTE",DIR_LTR:"ltr",DIR_RTL:"rtl",IMAGE:"image",EDIT_HTML:"editHtml",UPDATE_LINK_BUBBLE:"updateLinkBubble",DEFAULT_TAG:"+defaultTag",CLEAR_LOREM:"clearlorem",UPDATE_LOREM:"updatelorem",USING_LOREM:"usinglorem",MODAL_LINK_EDITOR:"link"};goog.structs={};goog.structs.Collection=function(){};goog.debug={};goog.debug.Error=function(b){Error.captureStackTrace?Error.captureStackTrace(this,goog.debug.Error):this.stack=Error().stack||"";b&&(this.message=String(b))};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(d,c){c.unshift(d);goog.debug.Error.call(this,goog.string.subs.apply(null,c));c.shift();this.messagePattern=d};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(h,g,l,k){var j="Assertion failed";if(l){var j=j+(": "+l),i=k}else{h&&(j+=": "+h,i=g)}throw new goog.asserts.AssertionError(""+j,i||[])};goog.asserts.assert=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.fail=function(d,c){if(goog.asserts.ENABLE_ASSERTS){throw new goog.asserts.AssertionError("Failure"+(d?": "+d:""),Array.prototype.slice.call(arguments,1))}};goog.asserts.assertNumber=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertString=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertFunction=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertObject=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertArray=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertBoolean=function(e,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],d,Array.prototype.slice.call(arguments,2));return e};goog.asserts.assertInstanceof=function(f,e,h,g){goog.asserts.ENABLE_ASSERTS&&!(f instanceof e)&&goog.asserts.doAssertFailure_("instanceof check failed.",null,h,Array.prototype.slice.call(arguments,3));return f};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;goog.array.peek=function(b){return b[b.length-1]};goog.array.ARRAY_PROTOTYPE_=Array.prototype;goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.indexOf?function(e,d,f){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(e,d,f)}:function(e,d,f){f=null==f?0:0>f?Math.max(0,e.length+f):f;if(goog.isString(e)){return !goog.isString(d)||1!=d.length?-1:e.indexOf(d,f)}for(;f<e.length;f++){if(f in e&&e[f]===d){return f}}return -1};goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.lastIndexOf?function(e,d,f){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(e,d,null==f?e.length-1:f)}:function(e,d,f){f=null==f?e.length-1:f;0>f&&(f=Math.max(0,e.length+f));if(goog.isString(e)){return !goog.isString(d)||1!=d.length?-1:e.lastIndexOf(d,f)}for(;0<=f;f--){if(f in e&&e[f]===d){return f}}return -1};goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.forEach?function(e,d,f){goog.asserts.assert(null!=e.length);goog.array.ARRAY_PROTOTYPE_.forEach.call(e,d,f)}:function(h,g,l){for(var k=h.length,j=goog.isString(h)?h.split(""):h,i=0;i<k;i++){i in j&&g.call(l,j[i],i,h)}};goog.array.forEachRight=function(g,f,j){for(var i=g.length,h=goog.isString(g)?g.split(""):g,i=i-1;0<=i;--i){i in h&&f.call(j,h[i],i,g)}};goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.filter?function(e,d,f){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.filter.call(e,d,f)}:function(r,q,p){for(var o=r.length,n=[],m=0,l=goog.isString(r)?r.split(""):r,k=0;k<o;k++){if(k in l){var i=l[k];q.call(p,i,k,r)&&(n[m++]=i)}}return n};goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.map?function(e,d,f){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.map.call(e,d,f)}:function(i,h,n){for(var m=i.length,l=Array(m),k=goog.isString(i)?i.split(""):i,j=0;j<m;j++){j in k&&(l[j]=h.call(n,k[j],j,i))}return l};goog.array.reduce=function(g,f,j,i){if(g.reduce){return i?g.reduce(goog.bind(f,i),j):g.reduce(f,j)}var h=j;goog.array.forEach(g,function(b,a){h=f.call(i,h,b,a,g)});return h};goog.array.reduceRight=function(g,f,j,i){if(g.reduceRight){return i?g.reduceRight(goog.bind(f,i),j):g.reduceRight(f,j)}var h=j;goog.array.forEachRight(g,function(b,a){h=f.call(i,h,b,a,g)});return h};goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.some?function(e,d,f){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.some.call(e,d,f)}:function(h,g,l){for(var k=h.length,j=goog.isString(h)?h.split(""):h,i=0;i<k;i++){if(i in j&&g.call(l,j[i],i,h)){return !0}}return !1};goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.every?function(e,d,f){goog.asserts.assert(null!=e.length);return goog.array.ARRAY_PROTOTYPE_.every.call(e,d,f)}:function(h,g,l){for(var k=h.length,j=goog.isString(h)?h.split(""):h,i=0;i<k;i++){if(i in j&&!g.call(l,j[i],i,h)){return !1}}return !0};goog.array.count=function(f,e,h){var g=0;goog.array.forEach(f,function(b,d,c){e.call(h,b,d,c)&&++g},h);return g};goog.array.find=function(e,d,f){d=goog.array.findIndex(e,d,f);return 0>d?null:goog.isString(e)?e.charAt(d):e[d]};goog.array.findIndex=function(h,g,l){for(var k=h.length,j=goog.isString(h)?h.split(""):h,i=0;i<k;i++){if(i in j&&g.call(l,j[i],i,h)){return i}}return -1};goog.array.findRight=function(e,d,f){d=goog.array.findIndexRight(e,d,f);return 0>d?null:goog.isString(e)?e.charAt(d):e[d]};goog.array.findIndexRight=function(g,f,j){for(var i=g.length,h=goog.isString(g)?g.split(""):g,i=i-1;0<=i;i--){if(i in h&&f.call(j,h[i],i,g)){return i}}return -1};goog.array.contains=function(d,c){return 0<=goog.array.indexOf(d,c)};goog.array.isEmpty=function(b){return 0==b.length};goog.array.clear=function(d){if(!goog.isArray(d)){for(var c=d.length-1;0<=c;c--){delete d[c]}}d.length=0};goog.array.insert=function(d,c){goog.array.contains(d,c)||d.push(c)};goog.array.insertAt=function(e,d,f){goog.array.splice(e,f,0,d)};goog.array.insertArrayAt=function(e,d,f){goog.partial(goog.array.splice,e,f,0).apply(null,d)};goog.array.insertBefore=function(f,e,h){var g;2==arguments.length||0>(g=goog.array.indexOf(f,h))?f.push(e):goog.array.insertAt(f,e,g)};goog.array.remove=function(f,e){var h=goog.array.indexOf(f,e),g;(g=0<=h)&&goog.array.removeAt(f,h);return g};goog.array.removeAt=function(d,c){goog.asserts.assert(null!=d.length);return 1==goog.array.ARRAY_PROTOTYPE_.splice.call(d,c,1).length};goog.array.removeIf=function(e,d,f){d=goog.array.findIndex(e,d,f);return 0<=d?(goog.array.removeAt(e,d),!0):!1};goog.array.concat=function(b){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.toArray=function(f){var e=f.length;if(0<e){for(var h=Array(e),g=0;g<e;g++){h[g]=f[g]}return h}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(j,i){for(var p=1;p<arguments.length;p++){var o=arguments[p],n;if(goog.isArray(o)||(n=goog.isArrayLike(o))&&Object.prototype.hasOwnProperty.call(o,"callee")){j.push.apply(j,o)}else{if(n){for(var m=j.length,l=o.length,k=0;k<l;k++){j[m+k]=o[k]}}else{j.push(o)}}}};goog.array.splice=function(f,e,h,g){goog.asserts.assert(null!=f.length);return goog.array.ARRAY_PROTOTYPE_.splice.apply(f,goog.array.slice(arguments,1))};goog.array.slice=function(e,d,f){goog.asserts.assert(null!=e.length);return 2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(e,d):goog.array.ARRAY_PROTOTYPE_.slice.call(e,d,f)};goog.array.removeDuplicates=function(j,i){for(var p=i||j,o={},n=0,m=0;m<j.length;){var l=j[m++],k=goog.isObject(l)?"o"+goog.getUid(l):(typeof l).charAt(0)+l;Object.prototype.hasOwnProperty.call(o,k)||(o[k]=!0,p[n++]=l)}p.length=n};goog.array.binarySearch=function(e,d,f){return goog.array.binarySearch_(e,f||goog.array.defaultCompare,!1,d)};goog.array.binarySelect=function(e,d,f){return goog.array.binarySearch_(e,d,!0,void 0,f)};goog.array.binarySearch_=function(t,s,r,q,p){for(var o=0,n=t.length,m;o<n;){var l=o+n>>1,i;i=r?s.call(p,t[l],l,t):s(q,t[l]);0<i?o=l+1:(n=l,m=!i)}return m?o:~o};goog.array.sort=function(d,c){goog.asserts.assert(null!=d.length);goog.array.ARRAY_PROTOTYPE_.sort.call(d,c||goog.array.defaultCompare)};goog.array.stableSort=function(f,e){for(var h=0;h<f.length;h++){f[h]={index:h,value:f[h]}}var g=e||goog.array.defaultCompare;goog.array.sort(f,function(d,c){return g(d.value,c.value)||d.index-c.index});for(h=0;h<f.length;h++){f[h]=f[h].value}};goog.array.sortObjectsByKey=function(f,e,h){var g=h||goog.array.defaultCompare;goog.array.sort(f,function(b,d){return g(b[e],d[e])})};goog.array.isSorted=function(g,f,j){f=f||goog.array.defaultCompare;for(var i=1;i<g.length;i++){var h=f(g[i-1],g[i]);if(0<h||0==h&&j){return !1}}return !0};goog.array.equals=function(g,f,j){if(!goog.isArrayLike(g)||!goog.isArrayLike(f)||g.length!=f.length){return !1}var i=g.length;j=j||goog.array.defaultCompareEquality;for(var h=0;h<i;h++){if(!j(g[h],f[h])){return !1}}return !0};goog.array.compare=function(e,d,f){return goog.array.equals(e,d,f)};goog.array.compare3=function(h,g,l){l=l||goog.array.defaultCompare;for(var k=Math.min(h.length,g.length),j=0;j<k;j++){var i=l(h[j],g[j]);if(0!=i){return i}}return goog.array.defaultCompare(h.length,g.length)};goog.array.defaultCompare=function(d,c){return d>c?1:d<c?-1:0};goog.array.defaultCompareEquality=function(d,c){return d===c};goog.array.binaryInsert=function(e,d,f){f=goog.array.binarySearch(e,d,f);return 0>f?(goog.array.insertAt(e,d,-(f+1)),!0):!1};goog.array.binaryRemove=function(e,d,f){d=goog.array.binarySearch(e,d,f);return 0<=d?goog.array.removeAt(e,d):!1};goog.array.bucket=function(h,g){for(var l={},k=0;k<h.length;k++){var j=h[k],i=g(j,k,h);goog.isDef(i)&&(l[i]||(l[i]=[])).push(j)}return l};goog.array.toObject=function(f,e,h){var g={};goog.array.forEach(f,function(b,a){g[e.call(h,b,a,f)]=b});return g};goog.array.repeat=function(f,e){for(var h=[],g=0;g<e;g++){h[g]=f}return h};goog.array.flatten=function(f){for(var e=[],h=0;h<arguments.length;h++){var g=arguments[h];goog.isArray(g)?e.push.apply(e,goog.array.flatten.apply(null,g)):e.push(g)}return e};goog.array.rotate=function(d,c){goog.asserts.assert(null!=d.length);d.length&&(c%=d.length,0<c?goog.array.ARRAY_PROTOTYPE_.unshift.apply(d,d.splice(-c,c)):0>c&&goog.array.ARRAY_PROTOTYPE_.push.apply(d,d.splice(0,-c)));return d};goog.array.zip=function(h){if(!arguments.length){return[]}for(var g=[],l=0;;l++){for(var k=[],j=0;j<arguments.length;j++){var i=arguments[j];if(l>=i.length){return g}k.push(i[l])}g.push(k)}};goog.array.shuffle=function(h,g){for(var l=g||Math.random,k=h.length-1;0<k;k--){var j=Math.floor(l()*(k+1)),i=h[k];h[k]=h[j];h[j]=i}};goog.structs.getCount=function(b){return"function"==typeof b.getCount?b.getCount():goog.isArrayLike(b)||goog.isString(b)?b.length:goog.object.getCount(b)};goog.structs.getValues=function(f){if("function"==typeof f.getValues){return f.getValues()}if(goog.isString(f)){return f.split("")}if(goog.isArrayLike(f)){for(var e=[],h=f.length,g=0;g<h;g++){e.push(f[g])}return e}return goog.object.getValues(f)};goog.structs.getKeys=function(e){if("function"==typeof e.getKeys){return e.getKeys()}if("function"!=typeof e.getValues){if(goog.isArrayLike(e)||goog.isString(e)){var d=[];e=e.length;for(var f=0;f<e;f++){d.push(f)}return d}return goog.object.getKeys(e)}};goog.structs.contains=function(d,c){return"function"==typeof d.contains?d.contains(c):"function"==typeof d.containsValue?d.containsValue(c):goog.isArrayLike(d)||goog.isString(d)?goog.array.contains(d,c):goog.object.containsValue(d,c)};goog.structs.isEmpty=function(b){return"function"==typeof b.isEmpty?b.isEmpty():goog.isArrayLike(b)||goog.isString(b)?goog.array.isEmpty(b):goog.object.isEmpty(b)};goog.structs.clear=function(b){"function"==typeof b.clear?b.clear():goog.isArrayLike(b)?goog.array.clear(b):goog.object.clear(b)};goog.structs.forEach=function(i,h,n){if("function"==typeof i.forEach){i.forEach(h,n)}else{if(goog.isArrayLike(i)||goog.isString(i)){goog.array.forEach(i,h,n)}else{for(var m=goog.structs.getKeys(i),l=goog.structs.getValues(i),k=l.length,j=0;j<k;j++){h.call(n,l[j],m&&m[j],i)}}}};goog.structs.filter=function(j,i,p){if("function"==typeof j.filter){return j.filter(i,p)}if(goog.isArrayLike(j)||goog.isString(j)){return goog.array.filter(j,i,p)}var o,n=goog.structs.getKeys(j),m=goog.structs.getValues(j),l=m.length;if(n){o={};for(var k=0;k<l;k++){i.call(p,m[k],n[k],j)&&(o[n[k]]=m[k])}}else{o=[];for(k=0;k<l;k++){i.call(p,m[k],void 0,j)&&o.push(m[k])}}return o};goog.structs.map=function(j,i,p){if("function"==typeof j.map){return j.map(i,p)}if(goog.isArrayLike(j)||goog.isString(j)){return goog.array.map(j,i,p)}var o,n=goog.structs.getKeys(j),m=goog.structs.getValues(j),l=m.length;if(n){o={};for(var k=0;k<l;k++){o[n[k]]=i.call(p,m[k],n[k],j)}}else{o=[];for(k=0;k<l;k++){o[k]=i.call(p,m[k],void 0,j)}}return o};goog.structs.some=function(i,h,n){if("function"==typeof i.some){return i.some(h,n)}if(goog.isArrayLike(i)||goog.isString(i)){return goog.array.some(i,h,n)}for(var m=goog.structs.getKeys(i),l=goog.structs.getValues(i),k=l.length,j=0;j<k;j++){if(h.call(n,l[j],m&&m[j],i)){return !0}}return !1};goog.structs.every=function(i,h,n){if("function"==typeof i.every){return i.every(h,n)}if(goog.isArrayLike(i)||goog.isString(i)){return goog.array.every(i,h,n)}for(var m=goog.structs.getKeys(i),l=goog.structs.getValues(i),k=l.length,j=0;j<k;j++){if(!h.call(n,l[j],m&&m[j],i)){return !1}}return !0};goog.iter={};goog.iter.StopIteration="StopIteration" in goog.global?goog.global.StopIteration:Error("StopIteration");goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration};goog.iter.Iterator.prototype.__iterator__=function(){return this};goog.iter.toIterator=function(e){if(e instanceof goog.iter.Iterator){return e}if("function"==typeof e.__iterator__){return e.__iterator__(!1)}if(goog.isArrayLike(e)){var d=0,f=new goog.iter.Iterator;f.next=function(){for(;;){if(d>=e.length){throw goog.iter.StopIteration}if(d in e){return e[d++]}d++}};return f}throw Error("Not implemented")};goog.iter.forEach=function(g,f,j){if(goog.isArrayLike(g)){try{goog.array.forEach(g,f,j)}catch(i){if(i!==goog.iter.StopIteration){throw i}}}else{g=goog.iter.toIterator(g);try{for(;;){f.call(j,g.next(),void 0,g)}}catch(h){if(h!==goog.iter.StopIteration){throw h}}}};goog.iter.filter=function(f,e,h){var g=goog.iter.toIterator(f);f=new goog.iter.Iterator;f.next=function(){for(;;){var b=g.next();if(e.call(h,b,void 0,g)){return b}}};return f};goog.iter.range=function(i,h,n){var m=0,l=i,k=n||1;1<arguments.length&&(m=i,l=h);if(0==k){throw Error("Range step argument must not be zero")}var j=new goog.iter.Iterator;j.next=function(){if(0<k&&m>=l||0>k&&m<=l){throw goog.iter.StopIteration}var b=m;m+=k;return b};return j};goog.iter.join=function(d,c){return goog.iter.toArray(d).join(c)};goog.iter.map=function(f,e,h){var g=goog.iter.toIterator(f);f=new goog.iter.Iterator;f.next=function(){for(;;){var b=g.next();return e.call(h,b,void 0,g)}};return f};goog.iter.reduce=function(g,f,j,i){var h=j;goog.iter.forEach(g,function(b){h=f.call(i,h,b)});return h};goog.iter.some=function(f,e,h){f=goog.iter.toIterator(f);try{for(;;){if(e.call(h,f.next(),void 0,f)){return !0}}}catch(g){if(g!==goog.iter.StopIteration){throw g}}return !1};goog.iter.every=function(f,e,h){f=goog.iter.toIterator(f);try{for(;;){if(!e.call(h,f.next(),void 0,f)){return !1}}}catch(g){if(g!==goog.iter.StopIteration){throw g}}return !0};goog.iter.chain=function(g){var f=arguments,j=f.length,i=0,h=new goog.iter.Iterator;h.next=function(){try{if(i>=j){throw goog.iter.StopIteration}return goog.iter.toIterator(f[i]).next()}catch(b){if(b!==goog.iter.StopIteration||i>=j){throw b}i++;return this.next()}};return h};goog.iter.dropWhile=function(g,f,j){var i=goog.iter.toIterator(g);g=new goog.iter.Iterator;var h=!0;g.next=function(){for(;;){var b=i.next();if(!h||!f.call(j,b,void 0,i)){return h=!1,b}}};return g};goog.iter.takeWhile=function(g,f,j){var i=goog.iter.toIterator(g);g=new goog.iter.Iterator;var h=!0;g.next=function(){for(;;){if(h){var b=i.next();if(f.call(j,b,void 0,i)){return b}h=!1}else{throw goog.iter.StopIteration}}};return g};goog.iter.toArray=function(d){if(goog.isArrayLike(d)){return goog.array.toArray(d)}d=goog.iter.toIterator(d);var c=[];goog.iter.forEach(d,function(b){c.push(b)});return c};goog.iter.equals=function(j,i){j=goog.iter.toIterator(j);i=goog.iter.toIterator(i);var p,o;try{for(;;){p=o=!1;var n=j.next();p=!0;var m=i.next();o=!0;if(n!=m){break}}}catch(l){if(l!==goog.iter.StopIteration){throw l}if(p&&!o){return !1}if(!o){try{i.next()}catch(k){if(k!==goog.iter.StopIteration){throw k}return !0}}}return !1};goog.iter.nextOrValue=function(e,d){try{return goog.iter.toIterator(e).next()}catch(f){if(f!=goog.iter.StopIteration){throw f}return d}};goog.iter.product=function(f){if(goog.array.some(arguments,function(b){return !b.length})||!arguments.length){return new goog.iter.Iterator}var e=new goog.iter.Iterator,h=arguments,g=goog.array.repeat(0,h.length);e.next=function(){if(g){for(var d=goog.array.map(g,function(j,i){return h[i][j]}),c=g.length-1;0<=c;c--){goog.asserts.assert(g);if(g[c]<h[c].length-1){g[c]++;break}if(0==c){g=null;break}g[c]=0}return d}throw goog.iter.StopIteration};return e};goog.iter.cycle=function(g){var f=goog.iter.toIterator(g),j=[],i=0;g=new goog.iter.Iterator;var h=!1;g.next=function(){var b=null;if(!h){try{return b=f.next(),j.push(b),b}catch(c){if(c!=goog.iter.StopIteration||goog.array.isEmpty(j)){throw c}h=!0}}b=j[i];i=(i+1)%j.length;return b};return g};goog.structs.Map=function(f,e){this.map_={};this.keys_=[];var h=arguments.length;if(1<h){if(h%2){throw Error("Uneven number of arguments")}for(var g=0;g<h;g+=2){this.set(arguments[g],arguments[g+1])}}else{f&&this.addAll(f)}};goog.structs.Map.prototype.count_=0;goog.structs.Map.prototype.version_=0;goog.structs.Map.prototype.getCount=function(){return this.count_};goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var d=[],c=0;c<this.keys_.length;c++){d.push(this.map_[this.keys_[c]])}return d};goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(b){return goog.structs.Map.hasKey_(this.map_,b)};goog.structs.Map.prototype.containsValue=function(e){for(var d=0;d<this.keys_.length;d++){var f=this.keys_[d];if(goog.structs.Map.hasKey_(this.map_,f)&&this.map_[f]==e){return !0}}return !1};goog.structs.Map.prototype.equals=function(g,f){if(this===g){return !0}if(this.count_!=g.getCount()){return !1}var j=f||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var i,h=0;i=this.keys_[h];h++){if(!j(this.get(i),g.get(i))){return !1}}return !0};goog.structs.Map.defaultEquals=function(d,c){return d===c};goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_};goog.structs.Map.prototype.clear=function(){this.map_={};this.version_=this.count_=this.keys_.length=0};goog.structs.Map.prototype.remove=function(b){return goog.structs.Map.hasKey_(this.map_,b)?(delete this.map_[b],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0):!1};goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var f=0,e=0;f<this.keys_.length;){var h=this.keys_[f];goog.structs.Map.hasKey_(this.map_,h)&&(this.keys_[e++]=h);f++}this.keys_.length=e}if(this.count_!=this.keys_.length){for(var g={},e=f=0;f<this.keys_.length;){h=this.keys_[f],goog.structs.Map.hasKey_(g,h)||(this.keys_[e++]=h,g[h]=1),f++}this.keys_.length=e}};goog.structs.Map.prototype.get=function(d,c){return goog.structs.Map.hasKey_(this.map_,d)?this.map_[d]:c};goog.structs.Map.prototype.set=function(d,c){goog.structs.Map.hasKey_(this.map_,d)||(this.count_++,this.keys_.push(d),this.version_++);this.map_[d]=c};goog.structs.Map.prototype.addAll=function(e){var d;e instanceof goog.structs.Map?(d=e.getKeys(),e=e.getValues()):(d=goog.object.getKeys(e),e=goog.object.getValues(e));for(var f=0;f<d.length;f++){this.set(d[f],e[f])}};goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){for(var e=new goog.structs.Map,d=0;d<this.keys_.length;d++){var f=this.keys_[d];e.set(this.map_[f],f)}return e};goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var e={},d=0;d<this.keys_.length;d++){var f=this.keys_[d];e[f]=this.map_[f]}return e};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(!0)};goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(!1)};goog.structs.Map.prototype.__iterator__=function(i){this.cleanupKeysArray_();var h=0,n=this.keys_,m=this.map_,l=this.version_,k=this,j=new goog.iter.Iterator;j.next=function(){for(;;){if(l!=k.version_){throw Error("The map has changed since the iterator was created")}if(h>=n.length){throw goog.iter.StopIteration}var a=n[h++];return i?a:m[a]}};return j};goog.structs.Map.hasKey_=function(d,c){return Object.prototype.hasOwnProperty.call(d,c)};goog.structs.Set=function(b){this.map_=new goog.structs.Map;b&&this.addAll(b)};goog.structs.Set.getKey_=function(d){var c=typeof d;return"object"==c&&d||"function"==c?"o"+goog.getUid(d):c.substr(0,1)+d};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(b){this.map_.set(goog.structs.Set.getKey_(b),b)};goog.structs.Set.prototype.addAll=function(e){e=goog.structs.getValues(e);for(var d=e.length,f=0;f<d;f++){this.add(e[f])}};goog.structs.Set.prototype.removeAll=function(e){e=goog.structs.getValues(e);for(var d=e.length,f=0;f<d;f++){this.remove(e[f])}};goog.structs.Set.prototype.remove=function(b){return this.map_.remove(goog.structs.Set.getKey_(b))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};goog.structs.Set.prototype.contains=function(b){return this.map_.containsKey(goog.structs.Set.getKey_(b))};goog.structs.Set.prototype.containsAll=function(b){return goog.structs.every(b,this.contains,this)};goog.structs.Set.prototype.intersection=function(f){var e=new goog.structs.Set;f=goog.structs.getValues(f);for(var h=0;h<f.length;h++){var g=f[h];this.contains(g)&&e.add(g)}return e};goog.structs.Set.prototype.difference=function(d){var c=this.clone();c.removeAll(d);return c};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};goog.structs.Set.prototype.equals=function(b){return this.getCount()==goog.structs.getCount(b)&&this.isSubsetOf(b)};goog.structs.Set.prototype.isSubsetOf=function(d){var c=goog.structs.getCount(d);if(this.getCount()>c){return !1}!(d instanceof goog.structs.Set)&&5<c&&(d=new goog.structs.Set(d));return goog.structs.every(this,function(a){return goog.structs.contains(d,a)})};goog.structs.Set.prototype.__iterator__=function(){return this.map_.__iterator__(!1)};goog.debug.catchErrors=function(g,f,j){j=j||goog.global;var i=j.onerror,h=!!f;goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("535.3")&&(h=!h);j.onerror=function(a,e,d){i&&i(a,e,d);g({message:a,fileName:e,line:d});return h}};goog.debug.expose=function(h,g){if("undefined"==typeof h){return"undefined"}if(null==h){return"NULL"}var l=[],k;for(k in h){if(g||!goog.isFunction(h[k])){var j=k+" = ";try{j+=h[k]}catch(i){j+="*** "+i+" ***"}l.push(j)}}return l.join("\n")};goog.debug.deepExpose=function(g,f){var j=new goog.structs.Set,i=[],h=function(b,l){var e=l+"  ";try{if(goog.isDef(b)){if(goog.isNull(b)){i.push("NULL")}else{if(goog.isString(b)){i.push('"'+b.replace(/\n/g,"\n"+l)+'"')}else{if(goog.isFunction(b)){i.push(String(b).replace(/\n/g,"\n"+l))}else{if(goog.isObject(b)){if(j.contains(b)){i.push("*** reference loop detected ***")}else{j.add(b);i.push("{");for(var d in b){if(f||!goog.isFunction(b[d])){i.push("\n"),i.push(e),i.push(d+" = "),h(b[d],e)}}i.push("\n"+l+"}")}}else{i.push(b)}}}}}else{i.push("undefined")}}catch(c){i.push("*** "+c+" ***")}};h(g,"");return i.join("")};goog.debug.exposeArray=function(e){for(var d=[],f=0;f<e.length;f++){goog.isArray(e[f])?d.push(goog.debug.exposeArray(e[f])):d.push(e[f])}return"[ "+d.join(", ")+" ]"};goog.debug.exposeException=function(f,e){try{var h=goog.debug.normalizeErrorObject(f);return"Message: "+goog.string.htmlEscape(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+goog.string.htmlEscape(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+goog.string.htmlEscape(goog.debug.getStacktrace(e)+"-> ")}catch(g){return"Exception trying to expose exception! You win, we lose. "+g}};goog.debug.normalizeErrorObject=function(i){var h=goog.getObjectByName("window.location.href");if(goog.isString(i)){return{message:i,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"}}var n,m,l=!1;try{n=i.lineNumber||i.line||"Not available"}catch(k){n="Not available",l=!0}try{m=i.fileName||i.filename||i.sourceURL||h}catch(j){m="Not available",l=!0}return l||!i.lineNumber||!i.fileName||!i.stack?{message:i.message,name:i.name,lineNumber:n,fileName:m,stack:i.stack||"Not available"}:i};goog.debug.enhanceError=function(f,e){var h="string"==typeof f?Error(f):f;h.stack||(h.stack=goog.debug.getStacktrace(arguments.callee.caller));if(e){for(var g=0;h["message"+g];){++g}h["message"+g]=String(e)}return h};goog.debug.getStacktraceSimple=function(g){for(var f=[],j=arguments.callee.caller,i=0;j&&(!g||i<g);){f.push(goog.debug.getFunctionName(j));f.push("()\n");try{j=j.caller}catch(h){f.push("[exception trying to get caller]\n");break}i++;if(i>=goog.debug.MAX_STACK_DEPTH){f.push("[...long stack...]");break}}g&&i>=g?f.push("[...reached max depth limit...]"):f.push("[end]");return f.join("")};goog.debug.MAX_STACK_DEPTH=50;goog.debug.getStacktrace=function(b){return goog.debug.getStacktraceHelper_(b||arguments.callee.caller,[])};goog.debug.getStacktraceHelper_=function(i,h){var n=[];if(goog.array.contains(h,i)){n.push("[...circular reference...]")}else{if(i&&h.length<goog.debug.MAX_STACK_DEPTH){n.push(goog.debug.getFunctionName(i)+"(");for(var m=i.arguments,l=0;l<m.length;l++){0<l&&n.push(", ");var k;k=m[l];switch(typeof k){case"object":k=k?"object":"null";break;case"string":break;case"number":k=String(k);break;case"boolean":k=k?"true":"false";break;case"function":k=(k=goog.debug.getFunctionName(k))?k:"[fn]";break;default:k=typeof k}40<k.length&&(k=k.substr(0,40)+"...");n.push(k)}h.push(i);n.push(")\n");try{n.push(goog.debug.getStacktraceHelper_(i.caller,h))}catch(j){n.push("[exception trying to get caller]\n")}}else{i?n.push("[...long stack...]"):n.push("[end]")}}return n.join("")};goog.debug.setFunctionResolver=function(b){goog.debug.fnNameResolver_=b};goog.debug.getFunctionName=function(d){if(goog.debug.fnNameCache_[d]){return goog.debug.fnNameCache_[d]}if(goog.debug.fnNameResolver_){var c=goog.debug.fnNameResolver_(d);if(c){return goog.debug.fnNameCache_[d]=c}}d=String(d);goog.debug.fnNameCache_[d]||(c=/function ([^\(]+)/.exec(d),goog.debug.fnNameCache_[d]=c?c[1]:"[Anonymous]");return goog.debug.fnNameCache_[d]};goog.debug.makeWhitespaceVisible=function(b){return b.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};goog.debug.fnNameCache_={};goog.debug.LogRecord=function(g,f,j,i,h){this.reset(g,f,j,i,h)};goog.debug.LogRecord.prototype.sequenceNumber_=0;goog.debug.LogRecord.prototype.exception_=null;goog.debug.LogRecord.prototype.exceptionText_=null;goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS=!0;goog.debug.LogRecord.nextSequenceNumber_=0;goog.debug.LogRecord.prototype.reset=function(g,f,j,i,h){goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS&&(this.sequenceNumber_="number"==typeof h?h:goog.debug.LogRecord.nextSequenceNumber_++);this.time_=i||goog.now();this.level_=g;this.msg_=f;this.loggerName_=j;delete this.exception_;delete this.exceptionText_};goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_};goog.debug.LogRecord.prototype.getException=function(){return this.exception_};goog.debug.LogRecord.prototype.setException=function(b){this.exception_=b};goog.debug.LogRecord.prototype.getExceptionText=function(){return this.exceptionText_};goog.debug.LogRecord.prototype.setExceptionText=function(b){this.exceptionText_=b};goog.debug.LogRecord.prototype.setLoggerName=function(b){this.loggerName_=b};goog.debug.LogRecord.prototype.getLevel=function(){return this.level_};goog.debug.LogRecord.prototype.setLevel=function(b){this.level_=b};goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_};goog.debug.LogRecord.prototype.setMessage=function(b){this.msg_=b};goog.debug.LogRecord.prototype.getMillis=function(){return this.time_};goog.debug.LogRecord.prototype.setMillis=function(b){this.time_=b};goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_};goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY.");this.clear()};goog.debug.LogBuffer.getInstance=function(){goog.debug.LogBuffer.instance_||(goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer);return goog.debug.LogBuffer.instance_};goog.debug.LogBuffer.CAPACITY=0;goog.debug.LogBuffer.prototype.addRecord=function(f,e,h){var g=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;this.curIndex_=g;if(this.isFull_){return g=this.buffer_[g],g.reset(f,e,h),g}this.isFull_=g==goog.debug.LogBuffer.CAPACITY-1;return this.buffer_[g]=new goog.debug.LogRecord(f,e,h)};goog.debug.LogBuffer.isBufferingEnabled=function(){return 0<goog.debug.LogBuffer.CAPACITY};goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=Array(goog.debug.LogBuffer.CAPACITY);this.curIndex_=-1;this.isFull_=!1};goog.debug.LogBuffer.prototype.forEachRecord=function(f){var e=this.buffer_;if(e[0]){var h=this.curIndex_,g=this.isFull_?h:-1;do{g=(g+1)%goog.debug.LogBuffer.CAPACITY,f(e[g])}while(g!=h)}};goog.debug.Logger=function(b){this.name_=b};goog.debug.Logger.prototype.parent_=null;goog.debug.Logger.prototype.level_=null;goog.debug.Logger.prototype.children_=null;goog.debug.Logger.prototype.handlers_=null;goog.debug.Logger.ENABLE_HIERARCHY=!0;goog.debug.Logger.ENABLE_HIERARCHY||(goog.debug.Logger.rootHandlers_=[]);goog.debug.Logger.Level=function(d,c){this.name=d;this.value=c};goog.debug.Logger.Level.prototype.toString=function(){return this.name};goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",Infinity);goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200);goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1000);goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900);goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800);goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700);goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500);goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400);goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300);goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0);goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL];goog.debug.Logger.Level.predefinedLevelsCache_=null;goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var d=0,c;c=goog.debug.Logger.Level.PREDEFINED_LEVELS[d];d++){goog.debug.Logger.Level.predefinedLevelsCache_[c.value]=c,goog.debug.Logger.Level.predefinedLevelsCache_[c.name]=c}};goog.debug.Logger.Level.getPredefinedLevel=function(b){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();return goog.debug.Logger.Level.predefinedLevelsCache_[b]||null};goog.debug.Logger.Level.getPredefinedLevelByValue=function(e){goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_();if(e in goog.debug.Logger.Level.predefinedLevelsCache_){return goog.debug.Logger.Level.predefinedLevelsCache_[e]}for(var d=0;d<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++d){var f=goog.debug.Logger.Level.PREDEFINED_LEVELS[d];if(f.value<=e){return f}}return null};goog.debug.Logger.getLogger=function(b){return goog.debug.LogManager.getLogger(b)};goog.debug.Logger.logToProfilers=function(b){goog.global.console&&(goog.global.console.timeStamp?goog.global.console.timeStamp(b):goog.global.console.markTimeline&&goog.global.console.markTimeline(b));goog.global.msWriteProfilerMark&&goog.global.msWriteProfilerMark(b)};goog.debug.Logger.prototype.getName=function(){return this.name_};goog.debug.Logger.prototype.addHandler=function(b){goog.debug.Logger.ENABLE_HIERARCHY?(this.handlers_||(this.handlers_=[]),this.handlers_.push(b)):(goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootHandlers_.push(b))};goog.debug.Logger.prototype.removeHandler=function(d){var c=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return !!c&&goog.array.remove(c,d)};goog.debug.Logger.prototype.getParent=function(){return this.parent_};goog.debug.Logger.prototype.getChildren=function(){this.children_||(this.children_={});return this.children_};goog.debug.Logger.prototype.setLevel=function(b){goog.debug.Logger.ENABLE_HIERARCHY?this.level_=b:(goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootLevel_=b)};goog.debug.Logger.prototype.getLevel=function(){return this.level_};goog.debug.Logger.prototype.getEffectiveLevel=function(){if(!goog.debug.Logger.ENABLE_HIERARCHY){return goog.debug.Logger.rootLevel_}if(this.level_){return this.level_}if(this.parent_){return this.parent_.getEffectiveLevel()}goog.asserts.fail("Root logger has no level set.");return null};goog.debug.Logger.prototype.isLoggable=function(b){return b.value>=this.getEffectiveLevel().value};goog.debug.Logger.prototype.log=function(e,d,f){this.isLoggable(e)&&this.doLogRecord_(this.getLogRecord(e,d,f))};goog.debug.Logger.prototype.getLogRecord=function(f,e,h){var g=goog.debug.LogBuffer.isBufferingEnabled()?goog.debug.LogBuffer.getInstance().addRecord(f,e,this.name_):new goog.debug.LogRecord(f,String(e),this.name_);h&&(g.setException(h),g.setExceptionText(goog.debug.exposeException(h,arguments.callee.caller)));return g};goog.debug.Logger.prototype.shout=function(d,c){this.log(goog.debug.Logger.Level.SHOUT,d,c)};goog.debug.Logger.prototype.severe=function(d,c){this.log(goog.debug.Logger.Level.SEVERE,d,c)};goog.debug.Logger.prototype.warning=function(d,c){this.log(goog.debug.Logger.Level.WARNING,d,c)};goog.debug.Logger.prototype.info=function(d,c){this.log(goog.debug.Logger.Level.INFO,d,c)};goog.debug.Logger.prototype.config=function(d,c){this.log(goog.debug.Logger.Level.CONFIG,d,c)};goog.debug.Logger.prototype.fine=function(d,c){this.log(goog.debug.Logger.Level.FINE,d,c)};goog.debug.Logger.prototype.finer=function(d,c){this.log(goog.debug.Logger.Level.FINER,d,c)};goog.debug.Logger.prototype.finest=function(d,c){this.log(goog.debug.Logger.Level.FINEST,d,c)};goog.debug.Logger.prototype.logRecord=function(b){this.isLoggable(b.getLevel())&&this.doLogRecord_(b)};goog.debug.Logger.prototype.doLogRecord_=function(e){goog.debug.Logger.logToProfilers("log:"+e.getMessage());if(goog.debug.Logger.ENABLE_HIERARCHY){for(var d=this;d;){d.callPublish_(e),d=d.getParent()}}else{for(var d=0,f;f=goog.debug.Logger.rootHandlers_[d++];){f(e)}}};goog.debug.Logger.prototype.callPublish_=function(e){if(this.handlers_){for(var d=0,f;f=this.handlers_[d];d++){f(e)}}};goog.debug.Logger.prototype.setParent_=function(b){this.parent_=b};goog.debug.Logger.prototype.addChild_=function(d,c){this.getChildren()[d]=c};goog.debug.LogManager={};goog.debug.LogManager.loggers_={};goog.debug.LogManager.rootLogger_=null;goog.debug.LogManager.initialize=function(){goog.debug.LogManager.rootLogger_||(goog.debug.LogManager.rootLogger_=new goog.debug.Logger(""),goog.debug.LogManager.loggers_[""]=goog.debug.LogManager.rootLogger_,goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG))};goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_};goog.debug.LogManager.getRoot=function(){goog.debug.LogManager.initialize();return goog.debug.LogManager.rootLogger_};goog.debug.LogManager.getLogger=function(b){goog.debug.LogManager.initialize();return goog.debug.LogManager.loggers_[b]||goog.debug.LogManager.createLogger_(b)};goog.debug.LogManager.createFunctionForCatchErrors=function(b){return function(a){(b||goog.debug.LogManager.getRoot()).severe("Error: "+a.message+" ("+a.fileName+" @ Line: "+a.line+")")}};goog.debug.LogManager.createLogger_=function(f){var e=new goog.debug.Logger(f);if(goog.debug.Logger.ENABLE_HIERARCHY){var h=f.lastIndexOf("."),g=f.substr(0,h),h=f.substr(h+1),g=goog.debug.LogManager.getLogger(g);g.addChild_(h,e);e.setParent_(g)}return goog.debug.LogManager.loggers_[f]=e};goog.disposable={};goog.disposable.IDisposable=function(){};goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(this.creationStack=Error().stack,goog.Disposable.instances_[goog.getUid(this)]=this)};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.Disposable.MONITORING_MODE=0;goog.Disposable.instances_={};goog.Disposable.getUndisposedObjects=function(){var d=[],c;for(c in goog.Disposable.instances_){goog.Disposable.instances_.hasOwnProperty(c)&&d.push(goog.Disposable.instances_[Number(c)])}return d};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=!1;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var b=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(b)){throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call")}delete goog.Disposable.instances_[b]}};goog.Disposable.prototype.registerDisposable=function(b){this.dependentDisposables_||(this.dependentDisposables_=[]);this.dependentDisposables_.push(b)};goog.Disposable.prototype.addOnDisposeCallback=function(d,c){this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]);this.onDisposeCallbacks_.push(goog.bind(d,c))};goog.Disposable.prototype.disposeInternal=function(){this.dependentDisposables_&&goog.disposeAll.apply(null,this.dependentDisposables_);if(this.onDisposeCallbacks_){for(;this.onDisposeCallbacks_.length;){this.onDisposeCallbacks_.shift()()}}};goog.Disposable.isDisposed=function(b){return b&&"function"==typeof b.isDisposed?b.isDisposed():!1};goog.dispose=function(b){b&&"function"==typeof b.dispose&&b.dispose()};goog.disposeAll=function(f){for(var e=0,h=arguments.length;e<h;++e){var g=arguments[e];goog.isArrayLike(g)?goog.disposeAll.apply(null,g):goog.dispose(g)}};goog.events={};goog.events.Event=function(d,c){this.type=d;this.currentTarget=this.target=c};goog.events.Event.prototype.disposeInternal=function(){};goog.events.Event.prototype.dispose=function(){};goog.events.Event.prototype.propagationStopped_=!1;goog.events.Event.prototype.defaultPrevented=!1;goog.events.Event.prototype.returnValue_=!0;goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0;this.returnValue_=!1};goog.events.Event.stopPropagation=function(b){b.stopPropagation()};goog.events.Event.preventDefault=function(b){b.preventDefault()};goog.events.Listenable=function(){};goog.events.Listenable.USE_LISTENABLE_INTERFACE=!1;goog.events.Listenable.IMPLEMENTED_BY_PROP_="__closure_listenable";goog.events.Listenable.addImplementation=function(b){b.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP_]=!0};goog.events.Listenable.isImplementedBy=function(b){return !(!b||!b[goog.events.Listenable.IMPLEMENTED_BY_PROP_])};goog.events.ListenableKey=function(){};goog.events.Listener=function(){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack)};goog.events.Listener.counter_=0;goog.events.Listener.ENABLE_MONITORING=!1;goog.events.Listener.prototype.key=0;goog.events.Listener.prototype.removed=!1;goog.events.Listener.prototype.callOnce=!1;goog.events.Listener.prototype.init=function(h,g,l,k,j,i){if(goog.isFunction(h)){this.isFunctionListener_=!0}else{if(h&&h.handleEvent&&goog.isFunction(h.handleEvent)){this.isFunctionListener_=!1}else{throw Error("Invalid listener argument")}}this.listener=h;this.proxy=g;this.src=l;this.type=k;this.capture=!!j;this.handler=i;this.callOnce=!1;this.key=++goog.events.Listener.counter_;this.removed=!1};goog.events.Listener.prototype.handleEvent=function(b){return this.isFunctionListener_?this.listener.call(this.handler||this.src,b):this.listener.handleEvent.call(this.listener,b)};goog.debug.errorHandlerWeakDep={protectEntryPoint:function(b){return b}};goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersion("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersion("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersion("8")||goog.userAgent.OPERA&&goog.userAgent.isVersion("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersion("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersion("8")||goog.userAgent.IE&&!goog.userAgent.isVersion("9"),TOUCH_ENABLED:"ontouchstart" in goog.global||!(!goog.global.document||!(document.documentElement&&"ontouchstart" in document.documentElement))||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)};goog.debug.entryPointRegistry={};goog.debug.EntryPointMonitor=function(){};goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=!1;goog.debug.entryPointRegistry.register=function(e){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=e;if(goog.debug.entryPointRegistry.monitorsMayExist_){for(var d=goog.debug.entryPointRegistry.monitors_,f=0;f<d.length;f++){e(goog.bind(d[f].wrap,d[f]))}}};goog.debug.entryPointRegistry.monitorAll=function(e){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var d=goog.bind(e.wrap,e),f=0;f<goog.debug.entryPointRegistry.refList_.length;f++){goog.debug.entryPointRegistry.refList_[f](d)}goog.debug.entryPointRegistry.monitors_.push(e)};goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(e){var d=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(e==d[d.length-1],"Only the most recent monitor can be unwrapped.");e=goog.bind(e.unwrap,e);for(var f=0;f<goog.debug.entryPointRegistry.refList_.length;f++){goog.debug.entryPointRegistry.refList_[f](e)}d.length--};goog.events.EventWrapper=function(){};goog.events.EventWrapper.prototype.listen=function(){};goog.events.EventWrapper.prototype.unlisten=function(){};goog.events.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",SELECTSTART:"selectstart",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONTEXTMENU:"contextmenu",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",TRANSITIONEND:goog.userAgent.WEBKIT?"webkitTransitionEnd":goog.userAgent.OPERA?"oTransitionEnd":"transitionend",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROVER:"MSPointerOver",MSPOINTEROUT:"MSPointerOut",MSPOINTERUP:"MSPointerUp",TEXTINPUT:"textinput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend"};goog.events.BrowserEvent=function(d,c){d&&this.init(d,c)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];goog.events.BrowserEvent.prototype.target=null;goog.events.BrowserEvent.prototype.relatedTarget=null;goog.events.BrowserEvent.prototype.offsetX=0;goog.events.BrowserEvent.prototype.offsetY=0;goog.events.BrowserEvent.prototype.clientX=0;goog.events.BrowserEvent.prototype.clientY=0;goog.events.BrowserEvent.prototype.screenX=0;goog.events.BrowserEvent.prototype.screenY=0;goog.events.BrowserEvent.prototype.button=0;goog.events.BrowserEvent.prototype.keyCode=0;goog.events.BrowserEvent.prototype.charCode=0;goog.events.BrowserEvent.prototype.ctrlKey=!1;goog.events.BrowserEvent.prototype.altKey=!1;goog.events.BrowserEvent.prototype.shiftKey=!1;goog.events.BrowserEvent.prototype.metaKey=!1;goog.events.BrowserEvent.prototype.platformModifierKey=!1;goog.events.BrowserEvent.prototype.event_=null;goog.events.BrowserEvent.prototype.init=function(f,e){var h=this.type=f.type;goog.events.Event.call(this,h);this.target=f.target||f.srcElement;this.currentTarget=e;var g=f.relatedTarget;g?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(g,"nodeName")||(g=null)):h==goog.events.EventType.MOUSEOVER?g=f.fromElement:h==goog.events.EventType.MOUSEOUT&&(g=f.toElement);this.relatedTarget=g;this.offsetX=goog.userAgent.WEBKIT||void 0!==f.offsetX?f.offsetX:f.layerX;this.offsetY=goog.userAgent.WEBKIT||void 0!==f.offsetY?f.offsetY:f.layerY;this.clientX=void 0!==f.clientX?f.clientX:f.pageX;this.clientY=void 0!==f.clientY?f.clientY:f.pageY;this.screenX=f.screenX||0;this.screenY=f.screenY||0;this.button=f.button;this.keyCode=f.keyCode||0;this.charCode=f.charCode||("keypress"==h?f.keyCode:0);this.ctrlKey=f.ctrlKey;this.altKey=f.altKey;this.shiftKey=f.shiftKey;this.metaKey=f.metaKey;this.platformModifierKey=goog.userAgent.MAC?f.metaKey:f.ctrlKey;this.state=f.state;this.event_=f;f.defaultPrevented&&this.preventDefault();delete this.propagationStopped_};goog.events.BrowserEvent.prototype.isButton=function(b){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==b:"click"==this.type?b==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[b])};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var d=this.event_;if(d.preventDefault){d.preventDefault()}else{if(d.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT){try{if(d.ctrlKey||112<=d.keyCode&&123>=d.keyCode){d.keyCode=-1}}catch(c){}}}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.events.BrowserEvent.prototype.disposeInternal=function(){};goog.events.listeners_={};goog.events.listenerTree_={};goog.events.sources_={};goog.events.onString_="on";goog.events.onStringMap_={};goog.events.keySeparator_="_";goog.events.listen=function(h,g,l,k,j){if(goog.isArray(g)){for(var i=0;i<g.length;i++){goog.events.listen(h,g[i],l,k,j)}return null}return goog.events.listen_(h,g,l,!1,k,j)};goog.events.listen_=function(t,s,r,q,p,o){if(!s){throw Error("Invalid event type")}p=!!p;var n=goog.events.listenerTree_;s in n||(n[s]={count_:0,remaining_:0});n=n[s];p in n||(n[p]={count_:0,remaining_:0},n.count_++);var n=n[p],m=goog.getUid(t),l;n.remaining_++;if(n[m]){l=n[m];for(var i=0;i<l.length;i++){if(n=l[i],n.listener==r&&n.handler==o){if(n.removed){break}q||(l[i].callOnce=!1);return l[i].key}}}else{l=n[m]=[],n.count_++}i=goog.events.getProxy();i.src=t;n=new goog.events.Listener;n.init(r,i,t,s,p,o);n.callOnce=q;r=n.key;i.key=r;l.push(n);goog.events.listeners_[r]=n;goog.events.sources_[m]||(goog.events.sources_[m]=[]);goog.events.sources_[m].push(n);t.addEventListener?(t==goog.global||!t.customEvent_)&&t.addEventListener(s,i,p):t.attachEvent(goog.events.getOnString_(s),i);return r};goog.events.getProxy=function(){var d=goog.events.handleBrowserEvent_,c=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(a){return d.call(c.src,c.key,a)}:function(a){a=d.call(c.src,c.key,a);if(!a){return a}};return c};goog.events.listenOnce=function(h,g,l,k,j){if(goog.isArray(g)){for(var i=0;i<g.length;i++){goog.events.listenOnce(h,g[i],l,k,j)}return null}return goog.events.listen_(h,g,l,!0,k,j)};goog.events.listenWithWrapper=function(g,f,j,i,h){f.listen(g,j,i,h)};goog.events.unlisten=function(h,g,l,k,j){if(goog.isArray(g)){for(var i=0;i<g.length;i++){goog.events.unlisten(h,g[i],l,k,j)}return null}k=!!k;h=goog.events.getListeners_(h,g,k);if(!h){return !1}for(i=0;i<h.length;i++){if(h[i].listener==l&&h[i].capture==k&&h[i].handler==j){return goog.events.unlistenByKey(h[i].key)}}return !1};goog.events.unlistenByKey=function(h){if(!goog.events.listeners_[h]){return !1}var g=goog.events.listeners_[h];if(g.removed){return !1}var l=g.src,k=g.type,j=g.proxy,i=g.capture;l.removeEventListener?(l==goog.global||!l.customEvent_)&&l.removeEventListener(k,j,i):l.detachEvent&&l.detachEvent(goog.events.getOnString_(k),j);l=goog.getUid(l);goog.events.sources_[l]&&(j=goog.events.sources_[l],goog.array.remove(j,g),0==j.length&&delete goog.events.sources_[l]);g.removed=!0;if(g=goog.events.listenerTree_[k][i][l]){g.needsCleanup_=!0,goog.events.cleanUp_(k,i,l,g)}delete goog.events.listeners_[h];return !0};goog.events.unlistenWithWrapper=function(g,f,j,i,h){f.unlisten(g,j,i,h)};goog.events.cleanUp_=function(h,g,l,k){if(!k.locked_&&k.needsCleanup_){for(var j=0,i=0;j<k.length;j++){k[j].removed?k[j].proxy.src=null:(j!=i&&(k[i]=k[j]),i++)}k.length=i;k.needsCleanup_=!1;0==i&&(delete goog.events.listenerTree_[h][g][l],goog.events.listenerTree_[h][g].count_--,0==goog.events.listenerTree_[h][g].count_&&(delete goog.events.listenerTree_[h][g],goog.events.listenerTree_[h].count_--),0==goog.events.listenerTree_[h].count_&&delete goog.events.listenerTree_[h])}};goog.events.removeAll=function(i,h){var n=0,m=null==h;if(null!=i){var l=goog.getUid(i);if(goog.events.sources_[l]){for(var l=goog.events.sources_[l],k=l.length-1;0<=k;k--){var j=l[k];if(m||h==j.type){goog.events.unlistenByKey(j.key),n++}}}}else{goog.object.forEach(goog.events.listeners_,function(d,c){goog.events.unlistenByKey(c);n++})}return n};goog.events.getListeners=function(e,d,f){return goog.events.getListeners_(e,d,f)||[]};goog.events.getListeners_=function(f,e,h){var g=goog.events.listenerTree_;return e in g&&(g=g[e],h in g&&(g=g[h],f=goog.getUid(f),g[f]))?g[f]:null};goog.events.getListener=function(g,f,j,i,h){i=!!i;if(g=goog.events.getListeners_(g,f,i)){for(f=0;f<g.length;f++){if(!g[f].removed&&g[f].listener==j&&g[f].capture==i&&g[f].handler==h){return g[f]}}}return null};goog.events.hasListener=function(h,g,l){h=goog.getUid(h);var k=goog.events.sources_[h];if(k){var j=goog.isDef(g),i=goog.isDef(l);return j&&i?(k=goog.events.listenerTree_[g],!!k&&!!k[l]&&h in k[l]):!j&&!i?!0:goog.array.some(k,function(b){return j&&b.type==g||i&&b.capture==l})}return !1};goog.events.expose=function(e){var d=[],f;for(f in e){e[f]&&e[f].id?d.push(f+" = "+e[f]+" ("+e[f].id+")"):d.push(f+" = "+e[f])}return d.join("\n")};goog.events.getOnString_=function(b){return b in goog.events.onStringMap_?goog.events.onStringMap_[b]:goog.events.onStringMap_[b]=goog.events.onString_+b};goog.events.fireListeners=function(g,f,j,i){var h=goog.events.listenerTree_;return f in h&&(h=h[f],j in h)?goog.events.fireListeners_(h[j],g,f,j,i):!0};goog.events.fireListeners_=function(v,u,t,s,r){var q=1;u=goog.getUid(u);if(v[u]){var p=--v.remaining_,o=v[u];o.locked_?o.locked_++:o.locked_=1;try{for(var n=o.length,m=0;m<n;m++){var i=o[m];i&&!i.removed&&(q&=!1!==goog.events.fireListener(i,r))}}finally{v.remaining_=Math.max(p,v.remaining_),o.locked_--,goog.events.cleanUp_(t,s,u,o)}}return Boolean(q)};goog.events.fireListener=function(d,c){d.callOnce&&goog.events.unlistenByKey(d.key);return d.handleEvent(c)};goog.events.getTotalListenerCount=function(){return goog.object.getCount(goog.events.listeners_)};goog.events.dispatchEvent=function(j,i){var p=i.type||i,o=goog.events.listenerTree_;if(!(p in o)){return !0}if(goog.isString(i)){i=new goog.events.Event(i,j)}else{if(i instanceof goog.events.Event){i.target=i.target||j}else{var n=i;i=new goog.events.Event(p,j);goog.object.extend(i,n)}}var n=1,m,o=o[p],p=!0 in o,l;if(p){m=[];for(l=j;l;l=l.getParentEventTarget()){m.push(l)}l=o[!0];l.remaining_=l.count_;for(var k=m.length-1;!i.propagationStopped_&&0<=k&&l.remaining_;k--){i.currentTarget=m[k],n&=goog.events.fireListeners_(l,m[k],i.type,!0,i)&&!1!=i.returnValue_}}if(!1 in o){if(l=o[!1],l.remaining_=l.count_,p){for(k=0;!i.propagationStopped_&&k<m.length&&l.remaining_;k++){i.currentTarget=m[k],n&=goog.events.fireListeners_(l,m[k],i.type,!1,i)&&!1!=i.returnValue_}}else{for(o=j;!i.propagationStopped_&&o&&l.remaining_;o=o.getParentEventTarget()){i.currentTarget=o,n&=goog.events.fireListeners_(l,o,i.type,!1,i)&&!1!=i.returnValue_}}}return Boolean(n)};goog.events.protectBrowserEventEntryPoint=function(b){goog.events.handleBrowserEvent_=b.protectEntryPoint(goog.events.handleBrowserEvent_)};goog.events.handleBrowserEvent_=function(z,y){if(!goog.events.listeners_[z]){return !0}var x=goog.events.listeners_[z],w=x.type,v=goog.events.listenerTree_;if(!(w in v)){return !0}var v=v[w],u,t;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){u=y||goog.getObjectByName("window.event");var s=!0 in v,r=!1 in v;if(s){if(goog.events.isMarkedIeEvent_(u)){return !0}goog.events.markIeEvent_(u)}var q=new goog.events.BrowserEvent;q.init(u,this);u=!0;try{if(s){for(var p=[],o=q.currentTarget;o;o=o.parentNode){p.push(o)}t=v[!0];t.remaining_=t.count_;for(var i=p.length-1;!q.propagationStopped_&&0<=i&&t.remaining_;i--){q.currentTarget=p[i],u&=goog.events.fireListeners_(t,p[i],w,!0,q)}if(r){t=v[!1];t.remaining_=t.count_;for(i=0;!q.propagationStopped_&&i<p.length&&t.remaining_;i++){q.currentTarget=p[i],u&=goog.events.fireListeners_(t,p[i],w,!1,q)}}}else{u=goog.events.fireListener(x,q)}}finally{p&&(p.length=0)}return u}w=new goog.events.BrowserEvent(y,this);return u=goog.events.fireListener(x,w)};goog.events.markIeEvent_=function(e){var d=!1;if(0==e.keyCode){try{e.keyCode=-1;return}catch(f){d=!0}}if(d||void 0==e.returnValue){e.returnValue=!0}};goog.events.isMarkedIeEvent_=function(b){return 0>b.keyCode||void 0!=b.returnValue};goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(b){return b+"_"+goog.events.uniqueIdCounter_++};goog.debug.entryPointRegistry.register(function(b){goog.events.handleBrowserEvent_=b(goog.events.handleBrowserEvent_)});goog.events.EventTarget=function(){goog.Disposable.call(this);goog.events.Listenable.USE_LISTENABLE_INTERFACE&&(this.eventTargetListeners_={})};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.Listenable.USE_LISTENABLE_INTERFACE&&goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.prototype.customEvent_=!0;goog.events.EventTarget.prototype.parentEventTarget_=null;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};goog.events.EventTarget.prototype.setParentEventTarget=function(b){this.parentEventTarget_=b};goog.events.EventTarget.prototype.addEventListener=function(f,e,h,g){goog.events.listen(this,f,e,h,g)};goog.events.EventTarget.prototype.removeEventListener=function(f,e,h,g){goog.events.unlisten(this,f,e,h,g)};goog.events.EventTarget.prototype.dispatchEvent=function(e){if(goog.events.Listenable.USE_LISTENABLE_INTERFACE){if(this.isDisposed()){return !0}var d,f=this.getParentEventTarget();if(f){for(d=[];f;f=f.getParentEventTarget()){d.push(f)}}return goog.events.EventTarget.dispatchEventInternal_(this,e,d)}return goog.events.dispatchEvent(this,e)};goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);goog.events.Listenable.USE_LISTENABLE_INTERFACE?this.removeAllListeners():goog.events.removeAll(this);this.parentEventTarget_=null};goog.events.Listenable.USE_LISTENABLE_INTERFACE&&(goog.events.EventTarget.prototype.listen=function(f,e,h,g){return this.listenInternal_(f,e,!1,h,g)},goog.events.EventTarget.prototype.listenOnce=function(f,e,h,g){return this.listenInternal_(f,e,!0,h,g)},goog.events.EventTarget.prototype.listenInternal_=function(i,h,n,m,l){goog.asserts.assert(!this.isDisposed());var k=this.eventTargetListeners_[i]||(this.eventTargetListeners_[i]=[]),j;j=goog.events.EventTarget.findListenerIndex_(k,h,m,l);if(-1<j){return j=k[j],n||(j.callOnce=!1),j}j=new goog.events.Listener;j.init(h,null,this,i,!!m,l);j.callOnce=n;k.push(j);return j},goog.events.EventTarget.prototype.unlisten=function(f,e,h,g){goog.asserts.assert(!this.isDisposed());if(!(f in this.eventTargetListeners_)){return !1}f=this.eventTargetListeners_[f];e=goog.events.EventTarget.findListenerIndex_(f,e,h,g);return -1<e?(f[e].removed=!0,goog.array.removeAt(f,e)):!1},goog.events.EventTarget.prototype.unlistenByKey=function(d){goog.asserts.assert(!this.isDisposed());var c=d.type;return !(c in this.eventTargetListeners_)?!1:goog.array.remove(this.eventTargetListeners_[c],d)},goog.events.EventTarget.prototype.removeAllListeners=function(f){var e=0,h;for(h in this.eventTargetListeners_){if(!f||h==f){var g=this.eventTargetListeners_[h],e=e+g.length;g.length=0}}return e},goog.events.EventTarget.prototype.fireListeners=function(h,g,l){goog.asserts.assert(!this.isDisposed());if(!(h in this.eventTargetListeners_)){return !0}var k=!0;h=goog.array.clone(this.eventTargetListeners_[h]);for(var j=0;j<h.length;++j){var i=h[j];i&&(!i.removed&&i.capture==g)&&(i.callOnce&&this.unlistenByKey(i),k=!1!==i.handleEvent(l)&&k)}return k&&!1!=l.returnValue_},goog.events.EventTarget.prototype.getListeners=function(h,g){var l=this.eventTargetListeners_[h],k=[];if(l){for(var j=0;j<l.length;++j){var i=l[j];i.capture==g&&k.push(i)}}return k},goog.events.EventTarget.dispatchEventInternal_=function(i,h,n){var m=h.type||h;if(goog.isString(h)){h=new goog.events.Event(h,i)}else{if(h instanceof goog.events.Event){h.target=h.target||i}else{var l=h;h=new goog.events.Event(m,i);goog.object.extend(h,l)}}var l=!0,k;if(n){for(var j=n.length-1;!h.propagationStopped_&&0<=j;j--){k=h.currentTarget=n[j],l=k.fireListeners(m,!0,h)&&l}}h.propagationStopped_||(k=h.currentTarget=i,l=k.fireListeners(m,!0,h)&&l,h.propagationStopped_||(l=k.fireListeners(m,!1,h)&&l));if(n){for(j=0;!h.propagationStopped_&&j<n.length;j++){k=h.currentTarget=n[j],l=k.fireListeners(m,!1,h)&&l}}return l},goog.events.EventTarget.findListenerIndex_=function(h,g,l,k){for(var j=0;j<h.length;++j){var i=h[j];if(i.listener==g&&i.capture==!!l&&i.handler==k){return j}}return -1});goog.editor.Plugin=function(){goog.events.EventTarget.call(this);this.enabled_=this.activeOnUneditableFields()};goog.inherits(goog.editor.Plugin,goog.events.EventTarget);goog.editor.Plugin.prototype.fieldObject=null;goog.editor.Plugin.prototype.getFieldDomHelper=function(){return this.getFieldObject()&&this.getFieldObject().getEditableDomHelper()};goog.editor.Plugin.prototype.autoDispose_=!0;goog.editor.Plugin.prototype.logger=goog.debug.Logger.getLogger("goog.editor.Plugin");goog.editor.Plugin.prototype.getFieldObject=function(){return this.fieldObject};goog.editor.Plugin.prototype.setFieldObject=function(b){this.fieldObject=b};goog.editor.Plugin.prototype.registerFieldObject=function(b){this.setFieldObject(b)};goog.editor.Plugin.prototype.unregisterFieldObject=function(){this.getFieldObject()&&(this.disable(this.getFieldObject()),this.setFieldObject(null))};goog.editor.Plugin.prototype.enable=function(b){this.getFieldObject()==b?this.enabled_=!0:this.logger.severe("Trying to enable an unregistered field with this plugin.")};goog.editor.Plugin.prototype.disable=function(b){this.getFieldObject()==b?this.enabled_=!1:this.logger.severe("Trying to disable an unregistered field with this plugin.")};goog.editor.Plugin.prototype.isEnabled=function(b){return this.getFieldObject()==b?this.enabled_:!1};goog.editor.Plugin.prototype.setAutoDispose=function(b){this.autoDispose_=b};goog.editor.Plugin.prototype.isAutoDispose=function(){return this.autoDispose_};goog.editor.Plugin.prototype.activeOnUneditableFields=goog.functions.FALSE;goog.editor.Plugin.prototype.isSilentCommand=goog.functions.FALSE;goog.editor.Plugin.prototype.disposeInternal=function(){this.getFieldObject()&&this.unregisterFieldObject(this.getFieldObject());goog.editor.Plugin.superClass_.disposeInternal.call(this)};goog.editor.Plugin.Op={KEYDOWN:1,KEYPRESS:2,KEYUP:3,SELECTION:4,SHORTCUT:5,EXEC_COMMAND:6,QUERY_COMMAND:7,PREPARE_CONTENTS_HTML:8,CLEAN_CONTENTS_HTML:10,CLEAN_CONTENTS_DOM:11};goog.editor.Plugin.OPCODE=goog.object.transpose(goog.reflect.object(goog.editor.Plugin,{handleKeyDown:goog.editor.Plugin.Op.KEYDOWN,handleKeyPress:goog.editor.Plugin.Op.KEYPRESS,handleKeyUp:goog.editor.Plugin.Op.KEYUP,handleSelectionChange:goog.editor.Plugin.Op.SELECTION,handleKeyboardShortcut:goog.editor.Plugin.Op.SHORTCUT,execCommand:goog.editor.Plugin.Op.EXEC_COMMAND,queryCommandValue:goog.editor.Plugin.Op.QUERY_COMMAND,prepareContentsHtml:goog.editor.Plugin.Op.PREPARE_CONTENTS_HTML,cleanContentsHtml:goog.editor.Plugin.Op.CLEAN_CONTENTS_HTML,cleanContentsDom:goog.editor.Plugin.Op.CLEAN_CONTENTS_DOM}));goog.editor.Plugin.IRREPRESSIBLE_OPS=goog.object.createSet(goog.editor.Plugin.Op.PREPARE_CONTENTS_HTML,goog.editor.Plugin.Op.CLEAN_CONTENTS_HTML,goog.editor.Plugin.Op.CLEAN_CONTENTS_DOM);goog.editor.Plugin.prototype.execCommand=function(f,e){var h=this.isSilentCommand(f);h||(goog.userAgent.GECKO&&this.getFieldObject().stopChangeEvents(!0,!0),this.getFieldObject().dispatchBeforeChange());try{var g=this.execCommandInternal.apply(this,arguments)}finally{h||(this.getFieldObject().dispatchChange(),this.getFieldObject().dispatchSelectionChangeEvent())}return g};goog.editor.Plugin.prototype.isSupportedCommand=function(){return !1};goog.editor.plugins={};goog.editor.plugins.HeaderFormatter=function(){goog.editor.Plugin.call(this)};goog.inherits(goog.editor.plugins.HeaderFormatter,goog.editor.Plugin);goog.editor.plugins.HeaderFormatter.prototype.getTrogClassId=function(){return"HeaderFormatter"};goog.editor.plugins.HeaderFormatter.HEADER_COMMAND={H1:"H1",H2:"H2",H3:"H3",H4:"H4"};goog.editor.plugins.HeaderFormatter.prototype.handleKeyboardShortcut=function(e,d,f){if(!f){return !1}f=null;switch(d){case"1":f=goog.editor.plugins.HeaderFormatter.HEADER_COMMAND.H1;break;case"2":f=goog.editor.plugins.HeaderFormatter.HEADER_COMMAND.H2;break;case"3":f=goog.editor.plugins.HeaderFormatter.HEADER_COMMAND.H3;break;case"4":f=goog.editor.plugins.HeaderFormatter.HEADER_COMMAND.H4}return f?(this.getFieldObject().execCommand(goog.editor.Command.FORMAT_BLOCK,f),goog.userAgent.GECKO&&e.stopPropagation(),!0):!1};goog.math={};goog.math.randomInt=function(b){return Math.floor(Math.random()*b)};goog.math.uniformRandom=function(d,c){return d+Math.random()*(c-d)};goog.math.clamp=function(e,d,f){return Math.min(Math.max(e,d),f)};goog.math.modulo=function(e,d){var f=e%d;return 0>f*d?f+d:f};goog.math.lerp=function(e,d,f){return e+f*(d-e)};goog.math.nearlyEquals=function(e,d,f){return Math.abs(e-d)<=(f||0.000001)};goog.math.standardAngle=function(b){return goog.math.modulo(b,360)};goog.math.toRadians=function(b){return b*Math.PI/180};goog.math.toDegrees=function(b){return 180*b/Math.PI};goog.math.angleDx=function(d,c){return c*Math.cos(goog.math.toRadians(d))};goog.math.angleDy=function(d,c){return c*Math.sin(goog.math.toRadians(d))};goog.math.angle=function(f,e,h,g){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(g-e,h-f)))};goog.math.angleDifference=function(e,d){var f=goog.math.standardAngle(d)-goog.math.standardAngle(e);180<f?f-=360:-180>=f&&(f=360+f);return f};goog.math.sign=function(b){return 0==b?0:0>b?-1:1};goog.math.longestCommonSubsequence=function(t,s,r,q){r=r||function(d,c){return d==c};q=q||function(a){return t[a]};for(var p=t.length,o=s.length,n=[],m=0;m<p+1;m++){n[m]=[],n[m][0]=0}for(var l=0;l<o+1;l++){n[0][l]=0}for(m=1;m<=p;m++){for(l=1;l<=p;l++){n[m][l]=r(t[m-1],s[l-1])?n[m-1][l-1]+1:Math.max(n[m-1][l],n[m][l-1])}}for(var i=[],m=p,l=o;0<m&&0<l;){r(t[m-1],s[l-1])?(i.unshift(q(m-1,l-1)),m--,l--):n[m-1][l]>n[m][l-1]?m--:l--}return i};goog.math.sum=function(b){return goog.array.reduce(arguments,function(d,e){return d+e},0)};goog.math.average=function(b){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.standardDeviation=function(e){var d=arguments.length;if(2>d){return 0}var f=goog.math.average.apply(null,arguments),d=goog.math.sum.apply(null,goog.array.map(arguments,function(b){return Math.pow(b-f,2)}))/(d-1);return Math.sqrt(d)};goog.math.isInt=function(b){return isFinite(b)&&0==b%1};goog.math.isFiniteNumber=function(b){return isFinite(b)&&!isNaN(b)};goog.math.Coordinate=function(d,c){this.x=goog.isDef(d)?d:0;this.y=goog.isDef(c)?c:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"});goog.math.Coordinate.equals=function(d,c){return d==c?!0:!d||!c?!1:d.x==c.x&&d.y==c.y};goog.math.Coordinate.distance=function(f,e){var h=f.x-e.x,g=f.y-e.y;return Math.sqrt(h*h+g*g)};goog.math.Coordinate.magnitude=function(b){return Math.sqrt(b.x*b.x+b.y*b.y)};goog.math.Coordinate.azimuth=function(b){return goog.math.angle(0,0,b.x,b.y)};goog.math.Coordinate.squaredDistance=function(f,e){var h=f.x-e.x,g=f.y-e.y;return h*h+g*g};goog.math.Coordinate.difference=function(d,c){return new goog.math.Coordinate(d.x-c.x,d.y-c.y)};goog.math.Coordinate.sum=function(d,c){return new goog.math.Coordinate(d.x+c.x,d.y+c.y)};goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};goog.math.Coordinate.prototype.translate=function(d,c){d instanceof goog.math.Coordinate?(this.x+=d.x,this.y+=d.y):(this.x+=d,goog.isNumber(c)&&(this.y+=c));return this};goog.math.Coordinate.prototype.scale=function(e,d){var f=goog.isNumber(d)?d:e;this.x*=e;this.y*=f;return this};goog.math.Box=function(f,e,h,g){this.top=f;this.right=e;this.bottom=h;this.left=g};goog.math.Box.boundingBox=function(f){for(var e=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),h=1;h<arguments.length;h++){var g=arguments[h];e.top=Math.min(e.top,g.y);e.right=Math.max(e.right,g.x);e.bottom=Math.max(e.bottom,g.y);e.left=Math.min(e.left,g.x)}return e};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"});goog.math.Box.prototype.contains=function(b){return goog.math.Box.contains(this,b)};goog.math.Box.prototype.expand=function(f,e,h,g){goog.isObject(f)?(this.top-=f.top,this.right+=f.right,this.bottom+=f.bottom,this.left-=f.left):(this.top-=f,this.right+=e,this.bottom+=h,this.left-=g);return this};goog.math.Box.prototype.expandToInclude=function(b){this.left=Math.min(this.left,b.left);this.top=Math.min(this.top,b.top);this.right=Math.max(this.right,b.right);this.bottom=Math.max(this.bottom,b.bottom)};goog.math.Box.equals=function(d,c){return d==c?!0:!d||!c?!1:d.top==c.top&&d.right==c.right&&d.bottom==c.bottom&&d.left==c.left};goog.math.Box.contains=function(d,c){return !d||!c?!1:c instanceof goog.math.Box?c.left>=d.left&&c.right<=d.right&&c.top>=d.top&&c.bottom<=d.bottom:c.x>=d.left&&c.x<=d.right&&c.y>=d.top&&c.y<=d.bottom};goog.math.Box.relativePositionX=function(d,c){return c.x<d.left?c.x-d.left:c.x>d.right?c.x-d.right:0};goog.math.Box.relativePositionY=function(d,c){return c.y<d.top?c.y-d.top:c.y>d.bottom?c.y-d.bottom:0};goog.math.Box.distance=function(f,e){var h=goog.math.Box.relativePositionX(f,e),g=goog.math.Box.relativePositionY(f,e);return Math.sqrt(h*h+g*g)};goog.math.Box.intersects=function(d,c){return d.left<=c.right&&c.left<=d.right&&d.top<=c.bottom&&c.top<=d.bottom};goog.math.Box.intersectsWithPadding=function(e,d,f){return e.left<=d.right+f&&d.left<=e.right+f&&e.top<=d.bottom+f&&d.top<=e.bottom+f};goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(d,c){d instanceof goog.math.Coordinate?(this.left+=d.x,this.right+=d.x,this.top+=d.y,this.bottom+=d.y):(this.left+=d,this.right+=d,goog.isNumber(c)&&(this.top+=c,this.bottom+=c));return this};goog.math.Box.prototype.scale=function(e,d){var f=goog.isNumber(d)?d:e;this.left*=e;this.right*=e;this.top*=f;this.bottom*=f;return this};goog.math.Size=function(d,c){this.width=d;this.height=c};goog.math.Size.equals=function(d,c){return d==c?!0:!d||!c?!1:d.width==c.width&&d.height==c.height};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"});goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return !this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Size.prototype.fitsInside=function(b){return this.width<=b.width&&this.height<=b.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(e,d){var f=goog.isNumber(d)?d:e;this.width*=e;this.height*=f;return this};goog.math.Size.prototype.scaleToFit=function(b){b=this.aspectRatio()>b.aspectRatio()?b.width/this.width:b.height/this.height;return this.scale(b)};goog.math.Rect=function(f,e,h,g){this.left=f;this.top=e;this.width=h;this.height=g};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)};goog.math.Rect.createFromBox=function(b){return new goog.math.Rect(b.left,b.top,b.right-b.left,b.bottom-b.top)};goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"});goog.math.Rect.equals=function(d,c){return d==c?!0:!d||!c?!1:d.left==c.left&&d.width==c.width&&d.top==c.top&&d.height==c.height};goog.math.Rect.prototype.intersection=function(f){var e=Math.max(this.left,f.left),h=Math.min(this.left+this.width,f.left+f.width);if(e<=h){var g=Math.max(this.top,f.top);f=Math.min(this.top+this.height,f.top+f.height);if(g<=f){return this.left=e,this.top=g,this.width=h-e,this.height=f-g,!0}}return !1};goog.math.Rect.intersection=function(h,g){var l=Math.max(h.left,g.left),k=Math.min(h.left+h.width,g.left+g.width);if(l<=k){var j=Math.max(h.top,g.top),i=Math.min(h.top+h.height,g.top+g.height);if(j<=i){return new goog.math.Rect(l,j,k-l,i-j)}}return null};goog.math.Rect.intersects=function(d,c){return d.left<=c.left+c.width&&c.left<=d.left+d.width&&d.top<=c.top+c.height&&c.top<=d.top+d.height};goog.math.Rect.prototype.intersects=function(b){return goog.math.Rect.intersects(this,b)};goog.math.Rect.difference=function(r,q){var p=goog.math.Rect.intersection(r,q);if(!p||!p.height||!p.width){return[r.clone()]}var p=[],o=r.top,n=r.height,m=r.left+r.width,l=r.top+r.height,k=q.left+q.width,i=q.top+q.height;q.top>r.top&&(p.push(new goog.math.Rect(r.left,r.top,r.width,q.top-r.top)),o=q.top,n-=q.top-r.top);i<l&&(p.push(new goog.math.Rect(r.left,i,r.width,l-i)),n=i-o);q.left>r.left&&p.push(new goog.math.Rect(r.left,o,q.left-r.left,n));k<m&&p.push(new goog.math.Rect(k,o,m-k,n));return p};goog.math.Rect.prototype.difference=function(b){return goog.math.Rect.difference(this,b)};goog.math.Rect.prototype.boundingRect=function(e){var d=Math.max(this.left+this.width,e.left+e.width),f=Math.max(this.top+this.height,e.top+e.height);this.left=Math.min(this.left,e.left);this.top=Math.min(this.top,e.top);this.width=d-this.left;this.height=f-this.top};goog.math.Rect.boundingRect=function(e,d){if(!e||!d){return null}var f=e.clone();f.boundingRect(d);return f};goog.math.Rect.prototype.contains=function(b){return b instanceof goog.math.Rect?this.left<=b.left&&this.left+this.width>=b.left+b.width&&this.top<=b.top&&this.top+this.height>=b.top+b.height:b.x>=this.left&&b.x<=this.left+this.width&&b.y>=this.top&&b.y<=this.top+this.height};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(d,c){d instanceof goog.math.Coordinate?(this.left+=d.x,this.top+=d.y):(this.left+=d,goog.isNumber(c)&&(this.top+=c));return this};goog.math.Rect.prototype.scale=function(e,d){var f=goog.isNumber(d)?d:e;this.left*=e;this.width*=e;this.top*=f;this.height*=f;return this};goog.dom={};goog.dom.vendor={};goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null};goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null};goog.dom.classes={};goog.dom.classes.set=function(d,c){d.className=c};goog.dom.classes.get=function(b){b=b.className;return goog.isString(b)&&b.match(/\S+/g)||[]};goog.dom.classes.add=function(g,f){var j=goog.dom.classes.get(g),i=goog.array.slice(arguments,1),h=j.length+i.length;goog.dom.classes.add_(j,i);goog.dom.classes.set(g,j.join(" "));return j.length==h};goog.dom.classes.remove=function(g,f){var j=goog.dom.classes.get(g),i=goog.array.slice(arguments,1),h=goog.dom.classes.getDifference_(j,i);goog.dom.classes.set(g,h.join(" "));return h.length==j.length-i.length};goog.dom.classes.add_=function(e,d){for(var f=0;f<d.length;f++){goog.array.contains(e,d[f])||e.push(d[f])}};goog.dom.classes.getDifference_=function(d,c){return goog.array.filter(d,function(b){return !goog.array.contains(c,b)})};goog.dom.classes.swap=function(h,g,l){for(var k=goog.dom.classes.get(h),j=!1,i=0;i<k.length;i++){k[i]==g&&(goog.array.splice(k,i--,1),j=!0)}j&&(k.push(l),goog.dom.classes.set(h,k.join(" ")));return j};goog.dom.classes.addRemove=function(f,e,h){var g=goog.dom.classes.get(f);goog.isString(e)?goog.array.remove(g,e):goog.isArray(e)&&(g=goog.dom.classes.getDifference_(g,e));goog.isString(h)&&!goog.array.contains(g,h)?g.push(h):goog.isArray(h)&&goog.dom.classes.add_(g,h);goog.dom.classes.set(f,g.join(" "))};goog.dom.classes.has=function(d,c){return goog.array.contains(goog.dom.classes.get(d),c)};goog.dom.classes.enable=function(e,d,f){f?goog.dom.classes.add(e,d):goog.dom.classes.remove(e,d)};goog.dom.classes.toggle=function(e,d){var f=!goog.dom.classes.has(e,d);goog.dom.classes.enable(e,d,f);return f};goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"};goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentMode(9)||goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersion("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE};goog.dom.ASSUME_QUIRKS_MODE=!1;goog.dom.ASSUME_STANDARDS_MODE=!1;goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.dom.getDomHelper=function(b){return b?new goog.dom.DomHelper(goog.dom.getOwnerDocument(b)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};goog.dom.getDocument=function(){return document};goog.dom.getElement=function(b){return goog.isString(b)?document.getElementById(b):b};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagNameAndClass=function(e,d,f){return goog.dom.getElementsByTagNameAndClass_(document,e,d,f)};goog.dom.getElementsByClass=function(e,d){var f=d||document;return goog.dom.canUseQuerySelector_(f)?f.querySelectorAll("."+e):f.getElementsByClassName?f.getElementsByClassName(e):goog.dom.getElementsByTagNameAndClass_(document,"*",e,d)};goog.dom.getElementByClass=function(f,e){var h=e||document,g=null;return(g=goog.dom.canUseQuerySelector_(h)?h.querySelector("."+f):goog.dom.getElementsByClass(f,e)[0])||null};goog.dom.canUseQuerySelector_=function(b){return !(!b.querySelectorAll||!b.querySelector)};goog.dom.getElementsByTagNameAndClass_=function(i,h,n,m){i=m||i;h=h&&"*"!=h?h.toUpperCase():"";if(goog.dom.canUseQuerySelector_(i)&&(h||n)){return i.querySelectorAll(h+(n?"."+n:""))}if(n&&i.getElementsByClassName){i=i.getElementsByClassName(n);if(h){m={};for(var l=0,k=0,j;j=i[k];k++){h==j.nodeName&&(m[l++]=j)}m.length=l;return m}return i}i=i.getElementsByTagName(h||"*");if(n){m={};for(k=l=0;j=i[k];k++){h=j.className,"function"==typeof h.split&&goog.array.contains(h.split(/\s+/),n)&&(m[l++]=j)}m.length=l;return m}return i};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;goog.dom.setProperties=function(d,c){goog.object.forEach(c,function(a,e){"style"==e?d.style.cssText=a:"class"==e?d.className=a:"for"==e?d.htmlFor=a:e in goog.dom.DIRECT_ATTRIBUTE_MAP_?d.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[e],a):goog.string.startsWith(e,"aria-")||goog.string.startsWith(e,"data-")?d.setAttribute(e,a):d[e]=a})};goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(b){return goog.dom.getViewportSize_(b||window)};goog.dom.getViewportSize_=function(b){b=b.document;b=goog.dom.isCss1CompatMode_(b)?b.documentElement:b.body;return new goog.math.Size(b.clientWidth,b.clientHeight)};goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeight_=function(g){var f=g.document,j=0;if(f){g=goog.dom.getViewportSize_(g).height;var j=f.body,i=f.documentElement;if(goog.dom.isCss1CompatMode_(f)&&i.scrollHeight){j=i.scrollHeight!=g?i.scrollHeight:i.offsetHeight}else{var f=i.scrollHeight,h=i.offsetHeight;i.clientHeight!=h&&(f=j.scrollHeight,h=j.offsetHeight);j=f>g?f>h?f:h:f<h?f:h}}return j};goog.dom.getPageScroll=function(b){return goog.dom.getDomHelper((b||goog.global||window).document).getDocumentScroll()};goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};goog.dom.getDocumentScroll_=function(d){var c=goog.dom.getDocumentScrollElement_(d);d=goog.dom.getWindow_(d);return new goog.math.Coordinate(d.pageXOffset||c.scrollLeft,d.pageYOffset||c.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};goog.dom.getDocumentScrollElement_=function(b){return !goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(b)?b.documentElement:b.body};goog.dom.getWindow=function(b){return b?goog.dom.getWindow_(b):window};goog.dom.getWindow_=function(b){return b.parentWindow||b.defaultView};goog.dom.createDom=function(e,d,f){return goog.dom.createDom_(document,arguments)};goog.dom.createDom_=function(g,f){var j=f[0],i=f[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&i&&(i.name||i.type)){j=["<",j];i.name&&j.push(' name="',goog.string.htmlEscape(i.name),'"');if(i.type){j.push(' type="',goog.string.htmlEscape(i.type),'"');var h={};goog.object.extend(h,i);delete h.type;i=h}j.push(">");j=j.join("")}j=g.createElement(j);i&&(goog.isString(i)?j.className=i:goog.isArray(i)?goog.dom.classes.add.apply(null,[j].concat(i)):goog.dom.setProperties(j,i));2<f.length&&goog.dom.append_(g,j,f,2);return j};goog.dom.append_=function(h,g,l,k){function j(a){a&&g.appendChild(goog.isString(a)?h.createTextNode(a):a)}for(;k<l.length;k++){var i=l[k];goog.isArrayLike(i)&&!goog.dom.isNodeLike(i)?goog.array.forEach(goog.dom.isNodeList(i)?goog.array.toArray(i):i,j):j(i)}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(b){return document.createElement(b)};goog.dom.createTextNode=function(b){return document.createTextNode(String(b))};goog.dom.createTable=function(e,d,f){return goog.dom.createTable_(document,e,d,!!f)};goog.dom.createTable_=function(h,g,l,k){for(var j=["<tr>"],i=0;i<l;i++){j.push(k?"<td>&nbsp;</td>":"<td></td>")}j.push("</tr>");j=j.join("");l=["<table>"];for(i=0;i<g;i++){l.push(j)}l.push("</table>");h=h.createElement(goog.dom.TagName.DIV);h.innerHTML=l.join("");return h.removeChild(h.firstChild)};goog.dom.htmlToDocumentFragment=function(b){return goog.dom.htmlToDocumentFragment_(document,b)};goog.dom.htmlToDocumentFragment_=function(f,e){var h=f.createElement("div");goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(h.innerHTML="<br>"+e,h.removeChild(h.firstChild)):h.innerHTML=e;if(1==h.childNodes.length){return h.removeChild(h.firstChild)}for(var g=f.createDocumentFragment();h.firstChild;){g.appendChild(h.firstChild)}return g};goog.dom.getCompatMode=function(){return goog.dom.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};goog.dom.isCss1CompatMode_=function(b){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==b.compatMode};goog.dom.canHaveChildren=function(b){if(b.nodeType!=goog.dom.NodeType.ELEMENT){return !1}switch(b.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return !1}return !0};goog.dom.appendChild=function(d,c){d.appendChild(c)};goog.dom.append=function(d,c){goog.dom.append_(goog.dom.getOwnerDocument(d),d,arguments,1)};goog.dom.removeChildren=function(d){for(var c;c=d.firstChild;){d.removeChild(c)}};goog.dom.insertSiblingBefore=function(d,c){c.parentNode&&c.parentNode.insertBefore(d,c)};goog.dom.insertSiblingAfter=function(d,c){c.parentNode&&c.parentNode.insertBefore(d,c.nextSibling)};goog.dom.insertChildAt=function(e,d,f){e.insertBefore(d,e.childNodes[f]||null)};goog.dom.removeNode=function(b){return b&&b.parentNode?b.parentNode.removeChild(b):null};goog.dom.replaceNode=function(e,d){var f=d.parentNode;f&&f.replaceChild(e,d)};goog.dom.flattenElement=function(e){var d,f=e.parentNode;if(f&&f.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(e.removeNode){return e.removeNode(!1)}for(;d=e.firstChild;){f.insertBefore(d,e)}return goog.dom.removeNode(e)}};goog.dom.getChildren=function(b){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=b.children?b.children:goog.array.filter(b.childNodes,function(c){return c.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(b){return void 0!=b.firstElementChild?b.firstElementChild:goog.dom.getNextElementNode_(b.firstChild,!0)};goog.dom.getLastElementChild=function(b){return void 0!=b.lastElementChild?b.lastElementChild:goog.dom.getNextElementNode_(b.lastChild,!1)};goog.dom.getNextElementSibling=function(b){return void 0!=b.nextElementSibling?b.nextElementSibling:goog.dom.getNextElementNode_(b.nextSibling,!0)};goog.dom.getPreviousElementSibling=function(b){return void 0!=b.previousElementSibling?b.previousElementSibling:goog.dom.getNextElementNode_(b.previousSibling,!1)};goog.dom.getNextElementNode_=function(d,c){for(;d&&d.nodeType!=goog.dom.NodeType.ELEMENT;){d=c?d.nextSibling:d.previousSibling}return d};goog.dom.getNextNode=function(b){if(!b){return null}if(b.firstChild){return b.firstChild}for(;b&&!b.nextSibling;){b=b.parentNode}return b?b.nextSibling:null};goog.dom.getPreviousNode=function(b){if(!b){return null}if(!b.previousSibling){return b.parentNode}for(b=b.previousSibling;b&&b.lastChild;){b=b.lastChild}return b};goog.dom.isNodeLike=function(b){return goog.isObject(b)&&0<b.nodeType};goog.dom.isElement=function(b){return goog.isObject(b)&&b.nodeType==goog.dom.NodeType.ELEMENT};goog.dom.isWindow=function(b){return goog.isObject(b)&&b.window==b};goog.dom.getParentElement=function(b){if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY){return b.parentElement}b=b.parentNode;return goog.dom.isElement(b)?b:null};goog.dom.contains=function(d,c){if(d.contains&&c.nodeType==goog.dom.NodeType.ELEMENT){return d==c||d.contains(c)}if("undefined"!=typeof d.compareDocumentPosition){return d==c||Boolean(d.compareDocumentPosition(c)&16)}for(;c&&d!=c;){c=c.parentNode}return c==d};goog.dom.compareNodeOrder=function(h,g){if(h==g){return 0}if(h.compareDocumentPosition){return h.compareDocumentPosition(g)&2?1:-1}if(goog.userAgent.IE&&!goog.userAgent.isDocumentMode(9)){if(h.nodeType==goog.dom.NodeType.DOCUMENT){return -1}if(g.nodeType==goog.dom.NodeType.DOCUMENT){return 1}}if("sourceIndex" in h||h.parentNode&&"sourceIndex" in h.parentNode){var l=h.nodeType==goog.dom.NodeType.ELEMENT,k=g.nodeType==goog.dom.NodeType.ELEMENT;if(l&&k){return h.sourceIndex-g.sourceIndex}var j=h.parentNode,i=g.parentNode;return j==i?goog.dom.compareSiblingOrder_(h,g):!l&&goog.dom.contains(j,g)?-1*goog.dom.compareParentsDescendantNodeIe_(h,g):!k&&goog.dom.contains(i,h)?goog.dom.compareParentsDescendantNodeIe_(g,h):(l?h.sourceIndex:j.sourceIndex)-(k?g.sourceIndex:i.sourceIndex)}k=goog.dom.getOwnerDocument(h);l=k.createRange();l.selectNode(h);l.collapse(!0);k=k.createRange();k.selectNode(g);k.collapse(!0);return l.compareBoundaryPoints(goog.global.Range.START_TO_END,k)};goog.dom.compareParentsDescendantNodeIe_=function(f,e){var h=f.parentNode;if(h==e){return -1}for(var g=e;g.parentNode!=h;){g=g.parentNode}return goog.dom.compareSiblingOrder_(g,f)};goog.dom.compareSiblingOrder_=function(e,d){for(var f=d;f=f.previousSibling;){if(f==e){return -1}}return 1};goog.dom.findCommonAncestor=function(j){var i,p=arguments.length;if(p){if(1==p){return arguments[0]}}else{return null}var o=[],n=Infinity;for(i=0;i<p;i++){for(var m=[],l=arguments[i];l;){m.unshift(l),l=l.parentNode}o.push(m);n=Math.min(n,m.length)}m=null;for(i=0;i<n;i++){for(var l=o[0][i],k=1;k<p;k++){if(l!=o[k][i]){return m}}m=l}return m};goog.dom.getOwnerDocument=function(b){return b.nodeType==goog.dom.NodeType.DOCUMENT?b:b.ownerDocument||b.document};goog.dom.getFrameContentDocument=function(b){return b.contentDocument||b.contentWindow.document};goog.dom.getFrameContentWindow=function(b){return b.contentWindow||goog.dom.getWindow_(goog.dom.getFrameContentDocument(b))};goog.dom.setTextContent=function(e,d){if("textContent" in e){e.textContent=d}else{if(e.firstChild&&e.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;e.lastChild!=e.firstChild;){e.removeChild(e.lastChild)}e.firstChild.data=d}else{goog.dom.removeChildren(e);var f=goog.dom.getOwnerDocument(e);e.appendChild(f.createTextNode(String(d)))}}};goog.dom.getOuterHtml=function(d){if("outerHTML" in d){return d.outerHTML}var c=goog.dom.getOwnerDocument(d).createElement("div");c.appendChild(d.cloneNode(!0));return c.innerHTML};goog.dom.findNode=function(e,d){var f=[];return goog.dom.findNodes_(e,d,f,!0)?f[0]:void 0};goog.dom.findNodes=function(e,d){var f=[];goog.dom.findNodes_(e,d,f,!1);return f};goog.dom.findNodes_=function(f,e,h,g){if(null!=f){for(f=f.firstChild;f;){if(e(f)&&(h.push(f),g)||goog.dom.findNodes_(f,e,h,g)){return !0}f=f.nextSibling}}return !1};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};goog.dom.isFocusableTabIndex=function(d){var c=d.getAttributeNode("tabindex");return c&&c.specified?(d=d.tabIndex,goog.isNumber(d)&&0<=d&&32768>d):!1};goog.dom.setFocusableTabIndex=function(d,c){c?d.tabIndex=0:(d.tabIndex=-1,d.removeAttribute("tabIndex"))};goog.dom.getTextContent=function(d){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText" in d){d=goog.string.canonicalizeNewlines(d.innerText)}else{var c=[];goog.dom.getTextContent_(d,c,!0);d=c.join("")}d=d.replace(/ \xAD /g," ").replace(/\xAD/g,"");d=d.replace(/\u200B/g,"");goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(d=d.replace(/ +/g," "));" "!=d&&(d=d.replace(/^\s*/,""));return d};goog.dom.getRawTextContent=function(d){var c=[];goog.dom.getTextContent_(d,c,!1);return c.join("")};goog.dom.getTextContent_=function(e,d,f){if(!(e.nodeName in goog.dom.TAGS_TO_IGNORE_)){if(e.nodeType==goog.dom.NodeType.TEXT){f?d.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):d.push(e.nodeValue)}else{if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_){d.push(goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName])}else{for(e=e.firstChild;e;){goog.dom.getTextContent_(e,d,f),e=e.nextSibling}}}}};goog.dom.getNodeTextLength=function(b){return goog.dom.getTextContent(b).length};goog.dom.getNodeTextOffset=function(g,f){for(var j=f||goog.dom.getOwnerDocument(g).body,i=[];g&&g!=j;){for(var h=g;h=h.previousSibling;){i.unshift(goog.dom.getTextContent(h))}g=g.parentNode}return goog.string.trimLeft(i.join("")).replace(/ +/g," ").length};goog.dom.getNodeAtOffset=function(h,g,l){h=[h];for(var k=0,j=null;0<h.length&&k<g;){if(j=h.pop(),!(j.nodeName in goog.dom.TAGS_TO_IGNORE_)){if(j.nodeType==goog.dom.NodeType.TEXT){var i=j.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," "),k=k+i.length}else{if(j.nodeName in goog.dom.PREDEFINED_TAG_VALUES_){k+=goog.dom.PREDEFINED_TAG_VALUES_[j.nodeName].length}else{for(i=j.childNodes.length-1;0<=i;i--){h.push(j.childNodes[i])}}}}}goog.isObject(l)&&(l.remainder=j?j.nodeValue.length+g-k-1:0,l.node=j);return j};goog.dom.isNodeList=function(b){if(b&&"number"==typeof b.length){if(goog.isObject(b)){return"function"==typeof b.item||"string"==typeof b.item}if(goog.isFunction(b)){return"function"==typeof b.item}}return !1};goog.dom.getAncestorByTagNameAndClass=function(f,e,h){if(!e&&!h){return null}var g=e?e.toUpperCase():null;return goog.dom.getAncestor(f,function(b){return(!g||b.nodeName==g)&&(!h||goog.dom.classes.has(b,h))},!0)};goog.dom.getAncestorByClass=function(d,c){return goog.dom.getAncestorByTagNameAndClass(d,null,c)};goog.dom.getAncestor=function(g,f,j,i){j||(g=g.parentNode);j=null==i;for(var h=0;g&&(j||h<=i);){if(f(g)){return g}g=g.parentNode;h++}return null};goog.dom.getActiveElement=function(d){try{return d&&d.activeElement}catch(c){}return null};goog.dom.DomHelper=function(b){this.document_=b||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;goog.dom.DomHelper.prototype.setDocument=function(b){this.document_=b};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(b){return goog.isString(b)?this.document_.getElementById(b):b};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(e,d,f){return goog.dom.getElementsByTagNameAndClass_(this.document_,e,d,f)};goog.dom.DomHelper.prototype.getElementsByClass=function(d,c){return goog.dom.getElementsByClass(d,c||this.document_)};goog.dom.DomHelper.prototype.getElementByClass=function(d,c){return goog.dom.getElementByClass(d,c||this.document_)};goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(b){return goog.dom.getViewportSize(b||this.getWindow())};goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.DomHelper.prototype.createDom=function(e,d,f){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(b){return this.document_.createElement(b)};goog.dom.DomHelper.prototype.createTextNode=function(b){return this.document_.createTextNode(String(b))};goog.dom.DomHelper.prototype.createTable=function(e,d,f){return goog.dom.createTable_(this.document_,e,d,!!f)};goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(b){return goog.dom.htmlToDocumentFragment_(this.document_,b)};goog.dom.DomHelper.prototype.getCompatMode=function(){return this.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.getActiveElement=function(b){return goog.dom.getActiveElement(b||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.style={};goog.style.setStyle=function(e,d,f){goog.isString(d)?goog.style.setStyle_(e,f,d):goog.object.forEach(d,goog.partial(goog.style.setStyle_,e))};goog.style.setStyle_=function(e,d,f){(f=goog.style.getVendorJsStyleName_(e,f))&&(e.style[f]=d)};goog.style.getVendorJsStyleName_=function(f,e){var h=goog.string.toCamelCase(e);if(void 0===f.style[h]){var g=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(e);if(void 0!==f.style[g]){return g}}return h};goog.style.getVendorStyleName_=function(e,d){var f=goog.string.toCamelCase(d);return void 0===e.style[f]&&(f=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(d),void 0!==e.style[f])?goog.dom.vendor.getVendorPrefix()+"-"+d:d};goog.style.getStyle=function(e,d){var f=e.style[goog.string.toCamelCase(d)];return"undefined"!==typeof f?f:e.style[goog.style.getVendorJsStyleName_(e,d)]||""};goog.style.getComputedStyle=function(e,d){var f=goog.dom.getOwnerDocument(e);return f.defaultView&&f.defaultView.getComputedStyle&&(f=f.defaultView.getComputedStyle(e,null))?f[d]||f.getPropertyValue(d)||"":""};goog.style.getCascadedStyle=function(d,c){return d.currentStyle?d.currentStyle[c]:null};goog.style.getStyle_=function(d,c){return goog.style.getComputedStyle(d,c)||goog.style.getCascadedStyle(d,c)||d.style&&d.style[c]};goog.style.getComputedPosition=function(b){return goog.style.getStyle_(b,"position")};goog.style.getBackgroundColor=function(b){return goog.style.getStyle_(b,"backgroundColor")};goog.style.getComputedOverflowX=function(b){return goog.style.getStyle_(b,"overflowX")};goog.style.getComputedOverflowY=function(b){return goog.style.getStyle_(b,"overflowY")};goog.style.getComputedZIndex=function(b){return goog.style.getStyle_(b,"zIndex")};goog.style.getComputedTextAlign=function(b){return goog.style.getStyle_(b,"textAlign")};goog.style.getComputedCursor=function(b){return goog.style.getStyle_(b,"cursor")};goog.style.setPosition=function(g,f,j){var i,h=goog.userAgent.GECKO&&(goog.userAgent.MAC||goog.userAgent.X11)&&goog.userAgent.isVersion("1.9");f instanceof goog.math.Coordinate?(i=f.x,f=f.y):(i=f,f=j);g.style.left=goog.style.getPixelStyleValue_(i,h);g.style.top=goog.style.getPixelStyleValue_(f,h)};goog.style.getPosition=function(b){return new goog.math.Coordinate(b.offsetLeft,b.offsetTop)};goog.style.getClientViewportElement=function(b){b=b?goog.dom.getOwnerDocument(b):goog.dom.getDocument();return goog.userAgent.IE&&!goog.userAgent.isDocumentMode(9)&&!goog.dom.getDomHelper(b).isCss1CompatMode()?b.body:b.documentElement};goog.style.getViewportPageOffset=function(d){var c=d.body;d=d.documentElement;return new goog.math.Coordinate(c.scrollLeft||d.scrollLeft,c.scrollTop||d.scrollTop)};goog.style.getBoundingClientRect_=function(d){var c=d.getBoundingClientRect();goog.userAgent.IE&&(d=d.ownerDocument,c.left-=d.documentElement.clientLeft+d.body.clientLeft,c.top-=d.documentElement.clientTop+d.body.clientTop);return c};goog.style.getOffsetParent=function(f){if(goog.userAgent.IE&&!goog.userAgent.isDocumentMode(8)){return f.offsetParent}var e=goog.dom.getOwnerDocument(f),h=goog.style.getStyle_(f,"position"),g="fixed"==h||"absolute"==h;for(f=f.parentNode;f&&f!=e;f=f.parentNode){if(h=goog.style.getStyle_(f,"position"),g=g&&"static"==h&&f!=e.documentElement&&f!=e.body,!g&&(f.scrollWidth>f.clientWidth||f.scrollHeight>f.clientHeight||"fixed"==h||"absolute"==h||"relative"==h)){return f}}return null};goog.style.getVisibleRectForElement=function(j){for(var i=new goog.math.Box(0,Infinity,Infinity,0),p=goog.dom.getDomHelper(j),o=p.getDocument().body,n=p.getDocument().documentElement,m=p.getDocumentScrollElement();j=goog.style.getOffsetParent(j);){if((!goog.userAgent.IE||0!=j.clientWidth)&&(!goog.userAgent.WEBKIT||0!=j.clientHeight||j!=o)&&j!=o&&j!=n&&"visible"!=goog.style.getStyle_(j,"overflow")){var l=goog.style.getPageOffset(j),k=goog.style.getClientLeftTop(j);l.x+=k.x;l.y+=k.y;i.top=Math.max(i.top,l.y);i.right=Math.min(i.right,l.x+j.clientWidth);i.bottom=Math.min(i.bottom,l.y+j.clientHeight);i.left=Math.max(i.left,l.x)}}o=m.scrollLeft;m=m.scrollTop;i.left=Math.max(i.left,o);i.top=Math.max(i.top,m);p=p.getViewportSize();i.right=Math.min(i.right,o+p.width);i.bottom=Math.min(i.bottom,m+p.height);return 0<=i.top&&0<=i.left&&i.bottom>i.top&&i.right>i.left?i:null};goog.style.getContainerOffsetToScrollInto=function(i,h,n){var m=goog.style.getPageOffset(i),l=goog.style.getPageOffset(h),k=goog.style.getBorderBox(h),j=m.x-l.x-k.left,m=m.y-l.y-k.top,l=h.clientWidth-i.offsetWidth;i=h.clientHeight-i.offsetHeight;k=h.scrollLeft;h=h.scrollTop;n?(k+=j-l/2,h+=m-i/2):(k+=Math.min(j,Math.max(j-l,0)),h+=Math.min(m,Math.max(m-i,0)));return new goog.math.Coordinate(k,h)};goog.style.scrollIntoContainerView=function(e,d,f){e=goog.style.getContainerOffsetToScrollInto(e,d,f);d.scrollLeft=e.x;d.scrollTop=e.y};goog.style.getClientLeftTop=function(e){if(goog.userAgent.GECKO&&!goog.userAgent.isVersion("1.9")){var d=parseFloat(goog.style.getComputedStyle(e,"borderLeftWidth"));if(goog.style.isRightToLeft(e)){var f=e.offsetWidth-e.clientWidth-d-parseFloat(goog.style.getComputedStyle(e,"borderRightWidth")),d=d+f}return new goog.math.Coordinate(d,parseFloat(goog.style.getComputedStyle(e,"borderTopWidth")))}return new goog.math.Coordinate(e.clientLeft,e.clientTop)};goog.style.getPageOffset=function(i){var h,n=goog.dom.getOwnerDocument(i),m=goog.style.getStyle_(i,"position");goog.asserts.assertObject(i,"Parameter is required");var l=goog.userAgent.GECKO&&n.getBoxObjectFor&&!i.getBoundingClientRect&&"absolute"==m&&(h=n.getBoxObjectFor(i))&&(0>h.screenX||0>h.screenY),k=new goog.math.Coordinate(0,0),j=goog.style.getClientViewportElement(n);if(i==j){return k}if(i.getBoundingClientRect){h=goog.style.getBoundingClientRect_(i),i=goog.dom.getDomHelper(n).getDocumentScroll(),k.x=h.left+i.x,k.y=h.top+i.y}else{if(n.getBoxObjectFor&&!l){h=n.getBoxObjectFor(i),i=n.getBoxObjectFor(j),k.x=h.screenX-i.screenX,k.y=h.screenY-i.screenY}else{h=i;do{k.x+=h.offsetLeft;k.y+=h.offsetTop;h!=i&&(k.x+=h.clientLeft||0,k.y+=h.clientTop||0);if(goog.userAgent.WEBKIT&&"fixed"==goog.style.getComputedPosition(h)){k.x+=n.body.scrollLeft;k.y+=n.body.scrollTop;break}h=h.offsetParent}while(h&&h!=i);if(goog.userAgent.OPERA||goog.userAgent.WEBKIT&&"absolute"==m){k.y-=n.body.offsetTop}for(h=i;(h=goog.style.getOffsetParent(h))&&h!=n.body&&h!=j;){if(k.x-=h.scrollLeft,!goog.userAgent.OPERA||"TR"!=h.tagName){k.y-=h.scrollTop}}}}return k};goog.style.getPageOffsetLeft=function(b){return goog.style.getPageOffset(b).x};goog.style.getPageOffsetTop=function(b){return goog.style.getPageOffset(b).y};goog.style.getFramedPageOffset=function(h,g){var l=new goog.math.Coordinate(0,0),k=goog.dom.getWindow(goog.dom.getOwnerDocument(h)),j=h;do{var i=k==g?goog.style.getPageOffset(j):goog.style.getClientPosition(j);l.x+=i.x;l.y+=i.y}while(k&&k!=g&&(j=k.frameElement)&&(k=k.parent));return l};goog.style.translateRectForAnotherFrame=function(f,e,h){if(e.getDocument()!=h.getDocument()){var g=e.getDocument().body;h=goog.style.getFramedPageOffset(g,h.getWindow());h=goog.math.Coordinate.difference(h,goog.style.getPageOffset(g));goog.userAgent.IE&&!e.isCss1CompatMode()&&(h=goog.math.Coordinate.difference(h,e.getDocumentScroll()));f.left+=h.x;f.top+=h.y}};goog.style.getRelativePosition=function(f,e){var h=goog.style.getClientPosition(f),g=goog.style.getClientPosition(e);return new goog.math.Coordinate(h.x-g.x,h.y-g.y)};goog.style.getClientPosition=function(f){var e=new goog.math.Coordinate;if(f.nodeType==goog.dom.NodeType.ELEMENT){if(f.getBoundingClientRect){var h=goog.style.getBoundingClientRect_(f);e.x=h.left;e.y=h.top}else{var h=goog.dom.getDomHelper(f).getDocumentScroll(),g=goog.style.getPageOffset(f);e.x=g.x-h.x;e.y=g.y-h.y}goog.userAgent.GECKO&&!goog.userAgent.isVersion(12)&&(e=goog.math.Coordinate.sum(e,goog.style.getCssTranslation(f)))}else{h=goog.isFunction(f.getBrowserEvent),g=f,f.targetTouches?g=f.targetTouches[0]:h&&f.getBrowserEvent().targetTouches&&(g=f.getBrowserEvent().targetTouches[0]),e.x=g.clientX,e.y=g.clientY}return e};goog.style.setPageOffset=function(f,e,h){var g=goog.style.getPageOffset(f);e instanceof goog.math.Coordinate&&(h=e.y,e=e.x);goog.style.setPosition(f,f.offsetLeft+(e-g.x),f.offsetTop+(h-g.y))};goog.style.setSize=function(e,d,f){if(d instanceof goog.math.Size){f=d.height,d=d.width}else{if(void 0==f){throw Error("missing height argument")}}goog.style.setWidth(e,d);goog.style.setHeight(e,f)};goog.style.getPixelStyleValue_=function(d,c){"number"==typeof d&&(d=(c?Math.round(d):d)+"px");return d};goog.style.setHeight=function(d,c){d.style.height=goog.style.getPixelStyleValue_(c,!0)};goog.style.setWidth=function(d,c){d.style.width=goog.style.getPixelStyleValue_(c,!0)};goog.style.getSize=function(g){if("none"!=goog.style.getStyle_(g,"display")){return goog.style.getSizeWithDisplay_(g)}var f=g.style,j=f.display,i=f.visibility,h=f.position;f.visibility="hidden";f.position="absolute";f.display="inline";g=goog.style.getSizeWithDisplay_(g);f.display=j;f.position=h;f.visibility=i;return g};goog.style.getSizeWithDisplay_=function(f){var e=f.offsetWidth,h=f.offsetHeight,g=goog.userAgent.WEBKIT&&!e&&!h;return(!goog.isDef(e)||g)&&f.getBoundingClientRect?(f=goog.style.getBoundingClientRect_(f),new goog.math.Size(f.right-f.left,f.bottom-f.top)):new goog.math.Size(e,h)};goog.style.getBounds=function(d){var c=goog.style.getPageOffset(d);d=goog.style.getSize(d);return new goog.math.Rect(c.x,c.y,d.width,d.height)};goog.style.toCamelCase=function(b){return goog.string.toCamelCase(String(b))};goog.style.toSelectorCase=function(b){return goog.string.toSelectorCase(b)};goog.style.getOpacity=function(d){var c=d.style;d="";"opacity" in c?d=c.opacity:"MozOpacity" in c?d=c.MozOpacity:"filter" in c&&(c=c.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(d=String(c[1]/100));return""==d?d:Number(d)};goog.style.setOpacity=function(e,d){var f=e.style;"opacity" in f?f.opacity=d:"MozOpacity" in f?f.MozOpacity=d:"filter" in f&&(f.filter=""===d?"":"alpha(opacity="+100*d+")")};goog.style.setTransparentBackgroundImage=function(e,d){var f=e.style;goog.userAgent.IE&&!goog.userAgent.isVersion("8")?f.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+d+'", sizingMethod="crop")':(f.backgroundImage="url("+d+")",f.backgroundPosition="top left",f.backgroundRepeat="no-repeat")};goog.style.clearTransparentBackgroundImage=function(b){b=b.style;"filter" in b?b.filter="":b.backgroundImage="none"};goog.style.showElement=function(d,c){d.style.display=c?"":"none"};goog.style.isElementShown=function(b){return"none"!=b.style.display};goog.style.installStyles=function(g,f){var j=goog.dom.getDomHelper(f),i=null;if(goog.userAgent.IE){i=j.getDocument().createStyleSheet(),goog.style.setStyles(i,g)}else{var h=j.getElementsByTagNameAndClass("head")[0];h||(i=j.getElementsByTagNameAndClass("body")[0],h=j.createDom("head"),i.parentNode.insertBefore(h,i));i=j.createDom("style");goog.style.setStyles(i,g);j.appendChild(h,i)}return i};goog.style.uninstallStyles=function(b){goog.dom.removeNode(b.ownerNode||b.owningElement||b)};goog.style.setStyles=function(d,c){goog.userAgent.IE?d.cssText=c:d.innerHTML=c};goog.style.setPreWrap=function(b){b=b.style;goog.userAgent.IE&&!goog.userAgent.isVersion("8")?(b.whiteSpace="pre",b.wordWrap="break-word"):b.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"};goog.style.setInlineBlock=function(b){b=b.style;b.position="relative";goog.userAgent.IE&&!goog.userAgent.isVersion("8")?(b.zoom="1",b.display="inline"):b.display=goog.userAgent.GECKO?goog.userAgent.isVersion("1.9a")?"inline-block":"-moz-inline-box":"inline-block"};goog.style.isRightToLeft=function(b){return"rtl"==goog.style.getStyle_(b,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null;goog.style.isUnselectable=function(b){return goog.style.unselectableStyle_?"none"==b.style[goog.style.unselectableStyle_].toLowerCase():goog.userAgent.IE||goog.userAgent.OPERA?"on"==b.getAttribute("unselectable"):!1};goog.style.setUnselectable=function(g,f,j){j=!j?g.getElementsByTagName("*"):null;var i=goog.style.unselectableStyle_;if(i){if(f=f?"none":"",g.style[i]=f,j){g=0;for(var h;h=j[g];g++){h.style[i]=f}}}else{if(goog.userAgent.IE||goog.userAgent.OPERA){if(f=f?"on":"",g.setAttribute("unselectable",f),j){for(g=0;h=j[g];g++){h.setAttribute("unselectable",f)}}}}};goog.style.getBorderBoxSize=function(b){return new goog.math.Size(b.offsetWidth,b.offsetHeight)};goog.style.setBorderBoxSize=function(g,f){var j=goog.dom.getOwnerDocument(g),i=goog.dom.getDomHelper(j).isCss1CompatMode();if(goog.userAgent.IE&&(!i||!goog.userAgent.isVersion("8"))){if(j=g.style,i){var i=goog.style.getPaddingBox(g),h=goog.style.getBorderBox(g);j.pixelWidth=f.width-h.left-i.left-i.right-h.right;j.pixelHeight=f.height-h.top-i.top-i.bottom-h.bottom}else{j.pixelWidth=f.width,j.pixelHeight=f.height}}else{goog.style.setBoxSizingSize_(g,f,"border-box")}};goog.style.getContentBoxSize=function(e){var d=goog.dom.getOwnerDocument(e),f=goog.userAgent.IE&&e.currentStyle;if(f&&goog.dom.getDomHelper(d).isCss1CompatMode()&&"auto"!=f.width&&"auto"!=f.height&&!f.boxSizing){return d=goog.style.getIePixelValue_(e,f.width,"width","pixelWidth"),e=goog.style.getIePixelValue_(e,f.height,"height","pixelHeight"),new goog.math.Size(d,e)}f=goog.style.getBorderBoxSize(e);d=goog.style.getPaddingBox(e);e=goog.style.getBorderBox(e);return new goog.math.Size(f.width-e.left-d.left-d.right-e.right,f.height-e.top-d.top-d.bottom-e.bottom)};goog.style.setContentBoxSize=function(g,f){var j=goog.dom.getOwnerDocument(g),i=goog.dom.getDomHelper(j).isCss1CompatMode();if(goog.userAgent.IE&&(!i||!goog.userAgent.isVersion("8"))){if(j=g.style,i){j.pixelWidth=f.width,j.pixelHeight=f.height}else{var i=goog.style.getPaddingBox(g),h=goog.style.getBorderBox(g);j.pixelWidth=f.width+h.left+i.left+i.right+h.right;j.pixelHeight=f.height+h.top+i.top+i.bottom+h.bottom}}else{goog.style.setBoxSizingSize_(g,f,"content-box")}};goog.style.setBoxSizingSize_=function(e,d,f){e=e.style;goog.userAgent.GECKO?e.MozBoxSizing=f:goog.userAgent.WEBKIT?e.WebkitBoxSizing=f:e.boxSizing=f;e.width=Math.max(d.width,0)+"px";e.height=Math.max(d.height,0)+"px"};goog.style.getIePixelValue_=function(h,g,l,k){if(/^\d+px?$/.test(g)){return parseInt(g,10)}var j=h.style[l],i=h.runtimeStyle[l];h.runtimeStyle[l]=h.currentStyle[l];h.style[l]=g;g=h.style[k];h.style[l]=j;h.runtimeStyle[l]=i;return g};goog.style.getIePixelDistance_=function(e,d){var f=goog.style.getCascadedStyle(e,d);return f?goog.style.getIePixelValue_(e,f,"left","pixelLeft"):0};goog.style.getBox_=function(h,g){if(goog.userAgent.IE){var l=goog.style.getIePixelDistance_(h,g+"Left"),k=goog.style.getIePixelDistance_(h,g+"Right"),j=goog.style.getIePixelDistance_(h,g+"Top"),i=goog.style.getIePixelDistance_(h,g+"Bottom");return new goog.math.Box(j,k,i,l)}l=goog.style.getComputedStyle(h,g+"Left");k=goog.style.getComputedStyle(h,g+"Right");j=goog.style.getComputedStyle(h,g+"Top");i=goog.style.getComputedStyle(h,g+"Bottom");return new goog.math.Box(parseFloat(j),parseFloat(k),parseFloat(i),parseFloat(l))};goog.style.getPaddingBox=function(b){return goog.style.getBox_(b,"padding")};goog.style.getMarginBox=function(b){return goog.style.getBox_(b,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};goog.style.getIePixelBorder_=function(e,d){if("none"==goog.style.getCascadedStyle(e,d+"Style")){return 0}var f=goog.style.getCascadedStyle(e,d+"Width");return f in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[f]:goog.style.getIePixelValue_(e,f,"left","pixelLeft")};goog.style.getBorderBox=function(f){if(goog.userAgent.IE){var e=goog.style.getIePixelBorder_(f,"borderLeft"),h=goog.style.getIePixelBorder_(f,"borderRight"),g=goog.style.getIePixelBorder_(f,"borderTop");f=goog.style.getIePixelBorder_(f,"borderBottom");return new goog.math.Box(g,h,f,e)}e=goog.style.getComputedStyle(f,"borderLeftWidth");h=goog.style.getComputedStyle(f,"borderRightWidth");g=goog.style.getComputedStyle(f,"borderTopWidth");f=goog.style.getComputedStyle(f,"borderBottomWidth");return new goog.math.Box(parseFloat(g),parseFloat(h),parseFloat(f),parseFloat(e))};goog.style.getFontFamily=function(f){var e=goog.dom.getOwnerDocument(f),h="";if(e.body.createTextRange){e=e.body.createTextRange();e.moveToElementText(f);try{h=e.queryCommandValue("FontName")}catch(g){h=""}}h||(h=goog.style.getStyle_(f,"fontFamily"));f=h.split(",");1<f.length&&(h=f[0]);return goog.string.stripQuotes(h,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;goog.style.getLengthUnits=function(b){return(b=b.match(goog.style.lengthUnitRegex_))&&b[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};goog.style.getFontSize=function(e){var d=goog.style.getStyle_(e,"fontSize"),f=goog.style.getLengthUnits(d);if(d&&"px"==f){return parseInt(d,10)}if(goog.userAgent.IE){if(f in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_){return goog.style.getIePixelValue_(e,d,"left","pixelLeft")}if(e.parentNode&&e.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&f in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_){return e=e.parentNode,f=goog.style.getStyle_(e,"fontSize"),goog.style.getIePixelValue_(e,d==f?"1em":d,"left","pixelLeft")}}f=goog.dom.createDom("span",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(e,f);d=f.offsetHeight;goog.dom.removeNode(f);return d};goog.style.parseStyleAttribute=function(d){var c={};goog.array.forEach(d.split(/\s*;\s*/),function(b){b=b.split(/\s*:\s*/);2==b.length&&(c[goog.string.toCamelCase(b[0].toLowerCase())]=b[1])});return c};goog.style.toStyleAttribute=function(d){var c=[];goog.object.forEach(d,function(b,e){c.push(goog.string.toSelectorCase(e),":",b,";")});return c.join("")};goog.style.setFloat=function(d,c){d.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=c};goog.style.getFloat=function(b){return b.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};goog.style.getScrollbarWidth=function(d){var c=goog.dom.createElement("div");d&&(c.className=d);c.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";d=goog.dom.createElement("div");goog.style.setSize(d,"200px","200px");c.appendChild(d);goog.dom.appendChild(goog.dom.getDocument().body,c);d=c.offsetWidth-c.clientWidth;goog.dom.removeNode(c);return d};goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;goog.style.getCssTranslation=function(e){var d;goog.userAgent.IE?d="-ms-transform":goog.userAgent.WEBKIT?d="-webkit-transform":goog.userAgent.OPERA?d="-o-transform":goog.userAgent.GECKO&&(d="-moz-transform");var f;d&&(f=goog.style.getStyle_(e,d));f||(f=goog.style.getStyle_(e,"transform"));if(!f){return new goog.math.Coordinate(0,0)}e=f.match(goog.style.MATRIX_TRANSLATION_REGEX_);return !e?new goog.math.Coordinate(0,0):new goog.math.Coordinate(parseFloat(e[1]),parseFloat(e[2]))};goog.editor.defines={};goog.editor.defines.USE_CONTENTEDITABLE_IN_FIREFOX_3=!1;goog.userAgent.product={};goog.userAgent.product.ASSUME_FIREFOX=!1;goog.userAgent.product.ASSUME_CAMINO=!1;goog.userAgent.product.ASSUME_IPHONE=!1;goog.userAgent.product.ASSUME_IPAD=!1;goog.userAgent.product.ASSUME_ANDROID=!1;goog.userAgent.product.ASSUME_CHROME=!1;goog.userAgent.product.ASSUME_SAFARI=!1;goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_CAMINO||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI;goog.userAgent.product.init_=function(){goog.userAgent.product.detectedFirefox_=!1;goog.userAgent.product.detectedCamino_=!1;goog.userAgent.product.detectedIphone_=!1;goog.userAgent.product.detectedIpad_=!1;goog.userAgent.product.detectedAndroid_=!1;goog.userAgent.product.detectedChrome_=!1;goog.userAgent.product.detectedSafari_=!1;var b=goog.userAgent.getUserAgentString();b&&(-1!=b.indexOf("Firefox")?goog.userAgent.product.detectedFirefox_=!0:-1!=b.indexOf("Camino")?goog.userAgent.product.detectedCamino_=!0:-1!=b.indexOf("iPhone")||-1!=b.indexOf("iPod")?goog.userAgent.product.detectedIphone_=!0:-1!=b.indexOf("iPad")?goog.userAgent.product.detectedIpad_=!0:-1!=b.indexOf("Android")?goog.userAgent.product.detectedAndroid_=!0:-1!=b.indexOf("Chrome")?goog.userAgent.product.detectedChrome_=!0:-1!=b.indexOf("Safari")&&(goog.userAgent.product.detectedSafari_=!0))};goog.userAgent.product.PRODUCT_KNOWN_||goog.userAgent.product.init_();goog.userAgent.product.OPERA=goog.userAgent.OPERA;goog.userAgent.product.IE=goog.userAgent.IE;goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.userAgent.product.detectedFirefox_;goog.userAgent.product.CAMINO=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CAMINO:goog.userAgent.product.detectedCamino_;goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.detectedIphone_;goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.userAgent.product.detectedIpad_;goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.userAgent.product.detectedAndroid_;goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.userAgent.product.detectedChrome_;goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.detectedSafari_;goog.userAgent.product.determineVersion_=function(){if(goog.userAgent.product.FIREFOX){return goog.userAgent.product.getFirstRegExpGroup_(/Firefox\/([0-9.]+)/)}if(goog.userAgent.product.IE||goog.userAgent.product.OPERA){return goog.userAgent.VERSION}if(goog.userAgent.product.CHROME){return goog.userAgent.product.getFirstRegExpGroup_(/Chrome\/([0-9.]+)/)}if(goog.userAgent.product.SAFARI){return goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/)}if(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD){var b=goog.userAgent.product.execRegExp_(/Version\/(\S+).*Mobile\/(\S+)/);if(b){return b[1]+"."+b[2]}}else{if(goog.userAgent.product.ANDROID){return(b=goog.userAgent.product.getFirstRegExpGroup_(/Android\s+([0-9.]+)/))?b:goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/)}if(goog.userAgent.product.CAMINO){return goog.userAgent.product.getFirstRegExpGroup_(/Camino\/([0-9.]+)/)}}return""};goog.userAgent.product.getFirstRegExpGroup_=function(b){return(b=goog.userAgent.product.execRegExp_(b))?b[1]:""};goog.userAgent.product.execRegExp_=function(b){return b.exec(goog.userAgent.getUserAgentString())};goog.userAgent.product.VERSION=goog.userAgent.product.determineVersion_();goog.userAgent.product.isVersion=function(b){return 0<=goog.string.compareVersions(goog.userAgent.product.VERSION,b)};goog.editor.BrowserFeature={HAS_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentMode(9),HAS_W3C_RANGES:goog.userAgent.GECKO||goog.userAgent.WEBKIT||goog.userAgent.OPERA||goog.userAgent.IE&&goog.userAgent.isDocumentMode(9),HAS_CONTENT_EDITABLE:goog.userAgent.IE||goog.userAgent.WEBKIT||goog.userAgent.OPERA||goog.editor.defines.USE_CONTENTEDITABLE_IN_FIREFOX_3&&goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9"),USE_MUTATION_EVENTS:goog.userAgent.GECKO,HAS_DOM_SUBTREE_MODIFIED_EVENT:goog.userAgent.WEBKIT||goog.editor.defines.USE_CONTENTEDITABLE_IN_FIREFOX_3&&goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9"),HAS_DOCUMENT_INDEPENDENT_NODES:goog.userAgent.GECKO,PUTS_CURSOR_BEFORE_FIRST_BLOCK_ELEMENT_ON_FOCUS:goog.userAgent.GECKO,CLEARS_SELECTION_WHEN_FOCUS_LEAVES:goog.userAgent.IE||goog.userAgent.WEBKIT||goog.userAgent.OPERA,HAS_UNSELECTABLE_STYLE:goog.userAgent.GECKO||goog.userAgent.WEBKIT,FORMAT_BLOCK_WORKS_FOR_BLOCKQUOTES:goog.userAgent.GECKO||goog.userAgent.WEBKIT||goog.userAgent.OPERA,CREATES_MULTIPLE_BLOCKQUOTES:goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("534.16")||goog.userAgent.OPERA,WRAPS_BLOCKQUOTE_IN_DIVS:goog.userAgent.OPERA,PREFERS_READY_STATE_CHANGE_EVENT:goog.userAgent.IE,TAB_FIRES_KEYPRESS:!goog.userAgent.IE,NEEDS_99_WIDTH_IN_STANDARDS_MODE:goog.userAgent.IE,USE_DOCUMENT_FOR_KEY_EVENTS:goog.userAgent.GECKO&&!goog.editor.defines.USE_CONTENTEDITABLE_IN_FIREFOX_3,SHOWS_CUSTOM_ATTRS_IN_INNER_HTML:goog.userAgent.IE,COLLAPSES_EMPTY_NODES:goog.userAgent.GECKO||goog.userAgent.WEBKIT||goog.userAgent.OPERA,CONVERT_TO_B_AND_I_TAGS:goog.userAgent.GECKO||goog.userAgent.OPERA,TABS_THROUGH_IMAGES:goog.userAgent.IE,UNESCAPES_URLS_WITHOUT_ASKING:goog.userAgent.IE&&!goog.userAgent.isVersion("7.0"),HAS_STYLE_WITH_CSS:goog.userAgent.GECKO&&goog.userAgent.isVersion("1.8")||goog.userAgent.WEBKIT||goog.userAgent.OPERA,FOLLOWS_EDITABLE_LINKS:goog.userAgent.WEBKIT||goog.userAgent.IE&&goog.userAgent.isVersion("9"),HAS_ACTIVE_ELEMENT:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9"),HAS_SET_CAPTURE:goog.userAgent.IE,EATS_EMPTY_BACKGROUND_COLOR:goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("527"),SUPPORTS_FOCUSIN:goog.userAgent.IE||goog.userAgent.OPERA,SELECTS_IMAGES_ON_CLICK:goog.userAgent.IE||goog.userAgent.OPERA,MOVES_STYLE_TO_HEAD:goog.userAgent.WEBKIT,COLLAPSES_SELECTION_ONMOUSEDOWN:!1,CARET_INSIDE_SELECTION:goog.userAgent.OPERA,FOCUSES_EDITABLE_BODY_ON_HTML_CLICK:!0,USES_KEYDOWN:goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersion("525"),ADDS_NBSPS_IN_REMOVE_FORMAT:goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("531"),GETS_STUCK_IN_LINKS:goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("528"),NORMALIZE_CORRUPTS_EMPTY_TEXT_NODES:goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9")||goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT&&goog.userAgent.isVersion("531"),NORMALIZE_CORRUPTS_ALL_TEXT_NODES:goog.userAgent.IE,NESTS_SUBSCRIPT_SUPERSCRIPT:goog.userAgent.IE||goog.userAgent.GECKO||goog.userAgent.OPERA,CAN_SELECT_EMPTY_ELEMENT:!goog.userAgent.IE&&!goog.userAgent.WEBKIT,FORGETS_FORMATTING_WHEN_LISTIFYING:goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("526"),LEAVES_P_WHEN_REMOVING_LISTS:goog.userAgent.IE||goog.userAgent.OPERA,CAN_LISTIFY_BR:!goog.userAgent.IE&&!goog.userAgent.OPERA,DOESNT_OVERRIDE_FONT_SIZE_IN_STYLE_ATTR:!goog.userAgent.WEBKIT,SUPPORTS_HTML5_FILE_DRAGGING:goog.userAgent.product.CHROME&&goog.userAgent.product.isVersion("4")||goog.userAgent.product.SAFARI&&goog.userAgent.isVersion("533")||goog.userAgent.GECKO&&goog.userAgent.isVersion("2.0")||goog.userAgent.IE&&goog.userAgent.isVersion("10"),SUPPORTS_OPERA_DEFAULTBLOCK_COMMAND:goog.userAgent.OPERA&&goog.userAgent.isVersion("11.10"),SUPPORTS_FILE_PASTING:goog.userAgent.product.CHROME&&goog.userAgent.product.isVersion("12")};goog.editor.style={};goog.editor.style.getComputedOrCascadedStyle_=function(d,c){return d.nodeType!=goog.dom.NodeType.ELEMENT?null:goog.userAgent.IE?goog.style.getCascadedStyle(d,c):goog.style.getComputedStyle(d,c)};goog.editor.style.isDisplayBlock=function(b){return"block"==goog.editor.style.getComputedOrCascadedStyle_(b,"display")};goog.editor.style.isContainer=function(d){var c=d&&d.nodeName.toLowerCase();return !(!d||!goog.editor.style.isDisplayBlock(d)&&!("td"==c||"table"==c||"li"==c))};goog.editor.style.getContainer=function(b){return goog.dom.getAncestor(b,goog.editor.style.isContainer,!0)};goog.editor.style.SELECTABLE_INPUT_TYPES_=goog.object.createSet("text","file","url");goog.editor.style.cancelMouseDownHelper_=function(d){var c=d.target.tagName;c!=goog.dom.TagName.TEXTAREA&&c!=goog.dom.TagName.INPUT&&d.preventDefault()};goog.editor.style.makeUnselectable=function(h,g){goog.editor.BrowserFeature.HAS_UNSELECTABLE_STYLE&&g.listen(h,goog.events.EventType.MOUSEDOWN,goog.editor.style.cancelMouseDownHelper_,!0);goog.style.setUnselectable(h,!0);for(var l=h.getElementsByTagName(goog.dom.TagName.INPUT),k=0,j=l.length;k<j;k++){var i=l[k];i.type in goog.editor.style.SELECTABLE_INPUT_TYPES_&&goog.editor.style.makeSelectable(i)}goog.array.forEach(h.getElementsByTagName(goog.dom.TagName.TEXTAREA),goog.editor.style.makeSelectable)};goog.editor.style.makeSelectable=function(g){goog.style.setUnselectable(g,!1);if(goog.editor.BrowserFeature.HAS_UNSELECTABLE_STYLE){var f=g;for(g=g.parentNode;g&&g.tagName!=goog.dom.TagName.HTML;){if(goog.style.isUnselectable(g)){goog.style.setUnselectable(g,!1,!0);for(var j=0,i=g.childNodes.length;j<i;j++){var h=g.childNodes[j];h!=f&&h.nodeType==goog.dom.NodeType.ELEMENT&&goog.style.setUnselectable(g.childNodes[j],!0)}}f=g;g=g.parentNode}}};goog.dom.iter={};goog.dom.iter.SiblingIterator=function(e,d,f){this.node_=e;this.reverse_=!!f;e&&!d&&this.next()};goog.inherits(goog.dom.iter.SiblingIterator,goog.iter.Iterator);goog.dom.iter.SiblingIterator.prototype.next=function(){var b=this.node_;if(!b){throw goog.iter.StopIteration}this.node_=this.reverse_?b.previousSibling:b.nextSibling;return b};goog.dom.iter.ChildIterator=function(e,d,f){goog.isDef(f)||(f=d&&e.childNodes.length?e.childNodes.length-1:0);goog.dom.iter.SiblingIterator.call(this,e.childNodes[f],!0,d)};goog.inherits(goog.dom.iter.ChildIterator,goog.dom.iter.SiblingIterator);goog.dom.iter.AncestorIterator=function(d,c){(this.node_=d)&&!c&&this.next()};goog.inherits(goog.dom.iter.AncestorIterator,goog.iter.Iterator);goog.dom.iter.AncestorIterator.prototype.next=function(){var b=this.node_;if(!b){throw goog.iter.StopIteration}this.node_=b.parentNode;return b};goog.editor.node={};goog.editor.node.BLOCK_TAG_NAMES_=goog.object.createSet(goog.dom.TagName.ADDRESS,goog.dom.TagName.ARTICLE,goog.dom.TagName.ASIDE,goog.dom.TagName.BLOCKQUOTE,goog.dom.TagName.BODY,goog.dom.TagName.CAPTION,goog.dom.TagName.CENTER,goog.dom.TagName.COL,goog.dom.TagName.COLGROUP,goog.dom.TagName.DETAILS,goog.dom.TagName.DIR,goog.dom.TagName.DIV,goog.dom.TagName.DL,goog.dom.TagName.DD,goog.dom.TagName.DT,goog.dom.TagName.FIELDSET,goog.dom.TagName.FIGCAPTION,goog.dom.TagName.FIGURE,goog.dom.TagName.FOOTER,goog.dom.TagName.FORM,goog.dom.TagName.H1,goog.dom.TagName.H2,goog.dom.TagName.H3,goog.dom.TagName.H4,goog.dom.TagName.H5,goog.dom.TagName.H6,goog.dom.TagName.HEADER,goog.dom.TagName.HGROUP,goog.dom.TagName.HR,goog.dom.TagName.ISINDEX,goog.dom.TagName.OL,goog.dom.TagName.LI,goog.dom.TagName.MAP,goog.dom.TagName.MENU,goog.dom.TagName.NAV,goog.dom.TagName.OPTGROUP,goog.dom.TagName.OPTION,goog.dom.TagName.P,goog.dom.TagName.PRE,goog.dom.TagName.SECTION,goog.dom.TagName.SUMMARY,goog.dom.TagName.TABLE,goog.dom.TagName.TBODY,goog.dom.TagName.TD,goog.dom.TagName.TFOOT,goog.dom.TagName.TH,goog.dom.TagName.THEAD,goog.dom.TagName.TR,goog.dom.TagName.UL);goog.editor.node.NON_EMPTY_TAGS_=goog.object.createSet(goog.dom.TagName.IMG,goog.dom.TagName.IFRAME,goog.dom.TagName.EMBED);goog.editor.node.isStandardsMode=function(b){return goog.dom.getDomHelper(b).isCss1CompatMode()};goog.editor.node.getRightMostLeaf=function(d){for(var c;c=goog.editor.node.getLastChild(d);){d=c}return d};goog.editor.node.getLeftMostLeaf=function(d){for(var c;c=goog.editor.node.getFirstChild(d);){d=c}return d};goog.editor.node.getFirstChild=function(b){return goog.editor.node.getChildHelper_(b,!1)};goog.editor.node.getLastChild=function(b){return goog.editor.node.getChildHelper_(b,!0)};goog.editor.node.getPreviousSibling=function(b){return goog.editor.node.getFirstValue_(goog.iter.filter(new goog.dom.iter.SiblingIterator(b,!1,!0),goog.editor.node.isImportant))};goog.editor.node.getNextSibling=function(b){return goog.editor.node.getFirstValue_(goog.iter.filter(new goog.dom.iter.SiblingIterator(b),goog.editor.node.isImportant))};goog.editor.node.getChildHelper_=function(d,c){return !d||d.nodeType!=goog.dom.NodeType.ELEMENT?null:goog.editor.node.getFirstValue_(goog.iter.filter(new goog.dom.iter.ChildIterator(d,c),goog.editor.node.isImportant))};goog.editor.node.getFirstValue_=function(d){try{return d.next()}catch(c){return null}};goog.editor.node.isImportant=function(b){return b.nodeType==goog.dom.NodeType.ELEMENT||b.nodeType==goog.dom.NodeType.TEXT&&!goog.editor.node.isAllNonNbspWhiteSpace(b)};goog.editor.node.isAllNonNbspWhiteSpace=function(b){return goog.string.isBreakingWhitespace(b.nodeValue)};goog.editor.node.isEmpty=function(f,e){var h=goog.dom.getRawTextContent(f);if(f.getElementsByTagName){for(var g in goog.editor.node.NON_EMPTY_TAGS_){if(f.tagName==g||0<f.getElementsByTagName(g).length){return !1}}}return !e&&h==goog.string.Unicode.NBSP||goog.string.isBreakingWhitespace(h)};goog.editor.node.getLength=function(b){return b.length||b.childNodes.length};goog.editor.node.findInChildren=function(f,e){for(var h=0,g=f.childNodes.length;h<g;h++){if(e(f.childNodes[h])){return h}}return null};goog.editor.node.findHighestMatchingAncestor=function(f,e){for(var h=f.parentNode,g=null;h&&e(h);){g=h,h=h.parentNode}return g};goog.editor.node.isBlockTag=function(b){return !!goog.editor.node.BLOCK_TAG_NAMES_[b.tagName]};goog.editor.node.skipEmptyTextNodes=function(b){for(;b&&b.nodeType==goog.dom.NodeType.TEXT&&!b.nodeValue;){b=b.nextSibling}return b};goog.editor.node.isEditableContainer=function(b){return b.getAttribute&&"true"==b.getAttribute("g_editable")};goog.editor.node.isEditable=function(b){return !!goog.dom.getAncestor(b,goog.editor.node.isEditableContainer)};goog.editor.node.findTopMostEditableAncestor=function(e,d){for(var f=null;e&&!goog.editor.node.isEditableContainer(e);){d(e)&&(f=e),e=e.parentNode}return f};goog.editor.node.splitDomTreeAt=function(f,e,h){for(var g;f!=h&&(g=f.parentNode);){e=goog.editor.node.getSecondHalfOfNode_(g,f,e),f=g}return e};goog.editor.node.getSecondHalfOfNode_=function(e,d,f){for(e=e.cloneNode(!1);d.nextSibling;){goog.dom.appendChild(e,d.nextSibling)}f&&e.insertBefore(f,e.firstChild);return e};goog.editor.node.transferChildren=function(d,c){goog.dom.append(d,c.childNodes)};goog.editor.node.replaceInnerHtml=function(d,c){goog.userAgent.IE&&goog.dom.removeChildren(d);d.innerHTML=c};goog.dom.RangeEndpoint={START:1,END:0};goog.dom.SavedRange=function(){goog.Disposable.call(this)};goog.inherits(goog.dom.SavedRange,goog.Disposable);goog.dom.SavedRange.logger_=goog.debug.Logger.getLogger("goog.dom.SavedRange");goog.dom.SavedRange.prototype.restore=function(d){this.isDisposed()&&goog.dom.SavedRange.logger_.severe("Disposed SavedRange objects cannot be restored.");var c=this.restoreInternal();d||this.dispose();return c};goog.dom.SavedCaretRange=function(b){goog.dom.SavedRange.call(this);this.startCaretId_=goog.string.createUniqueString();this.endCaretId_=goog.string.createUniqueString();this.dom_=goog.dom.getDomHelper(b.getDocument());b.surroundWithNodes(this.createCaret_(!0),this.createCaret_(!1))};goog.inherits(goog.dom.SavedCaretRange,goog.dom.SavedRange);goog.dom.SavedCaretRange.prototype.toAbstractRange=function(){var e=null,d=this.getCaret(!0),f=this.getCaret(!1);d&&f&&(e=goog.dom.Range.createFromNodes(d,0,f,0));return e};goog.dom.SavedCaretRange.prototype.getCaret=function(b){return this.dom_.getElement(b?this.startCaretId_:this.endCaretId_)};goog.dom.SavedCaretRange.prototype.removeCarets=function(b){goog.dom.removeNode(this.getCaret(!0));goog.dom.removeNode(this.getCaret(!1));return b};goog.dom.SavedCaretRange.prototype.setRestorationDocument=function(b){this.dom_.setDocument(b)};goog.dom.SavedCaretRange.prototype.restoreInternal=function(){var f=null,e=this.getCaret(!0),h=this.getCaret(!1);if(e&&h){var f=e.parentNode,e=goog.array.indexOf(f.childNodes,e),g=h.parentNode,h=goog.array.indexOf(g.childNodes,h);g==f&&(h-=1);f=goog.dom.Range.createFromNodes(f,e,g,h);f=this.removeCarets(f);f.select()}else{this.removeCarets()}return f};goog.dom.SavedCaretRange.prototype.disposeInternal=function(){this.removeCarets();this.dom_=null};goog.dom.SavedCaretRange.prototype.createCaret_=function(b){return this.dom_.createDom(goog.dom.TagName.SPAN,{id:b?this.startCaretId_:this.endCaretId_})};goog.dom.SavedCaretRange.CARET_REGEX=/<span\s+id="?goog_\d+"?><\/span>/ig;goog.dom.SavedCaretRange.htmlEqual=function(d,c){return d==c||d.replace(goog.dom.SavedCaretRange.CARET_REGEX,"")==c.replace(goog.dom.SavedCaretRange.CARET_REGEX,"")};goog.dom.TagWalkType={START_TAG:1,OTHER:0,END_TAG:-1};goog.dom.TagIterator=function(g,f,j,i,h){this.reversed=!!f;g&&this.setPosition(g,i);this.depth=void 0!=h?h:this.tagType||0;this.reversed&&(this.depth*=-1);this.constrained=!j};goog.inherits(goog.dom.TagIterator,goog.iter.Iterator);goog.dom.TagIterator.prototype.node=null;goog.dom.TagIterator.prototype.tagType=goog.dom.TagWalkType.OTHER;goog.dom.TagIterator.prototype.started_=!1;goog.dom.TagIterator.prototype.setPosition=function(e,d,f){if(this.node=e){this.tagType=goog.isNumber(d)?d:this.node.nodeType!=goog.dom.NodeType.ELEMENT?goog.dom.TagWalkType.OTHER:this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG}goog.isNumber(f)&&(this.depth=f)};goog.dom.TagIterator.prototype.copyFrom=function(b){this.node=b.node;this.tagType=b.tagType;this.depth=b.depth;this.reversed=b.reversed;this.constrained=b.constrained};goog.dom.TagIterator.prototype.clone=function(){return new goog.dom.TagIterator(this.node,this.reversed,!this.constrained,this.tagType,this.depth)};goog.dom.TagIterator.prototype.skipTag=function(){var b=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;this.tagType==b&&(this.tagType=-1*b,this.depth+=this.tagType*(this.reversed?-1:1))};goog.dom.TagIterator.prototype.restartTag=function(){var b=this.reversed?goog.dom.TagWalkType.START_TAG:goog.dom.TagWalkType.END_TAG;this.tagType==b&&(this.tagType=-1*b,this.depth+=this.tagType*(this.reversed?-1:1))};goog.dom.TagIterator.prototype.next=function(){var e;if(this.started_){if(!this.node||this.constrained&&0==this.depth){throw goog.iter.StopIteration}e=this.node;var d=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;if(this.tagType==d){var f=this.reversed?e.lastChild:e.firstChild;f?this.setPosition(f):this.setPosition(e,-1*d)}else{(f=this.reversed?e.previousSibling:e.nextSibling)?this.setPosition(f):this.setPosition(e.parentNode,-1*d)}this.depth+=this.tagType*(this.reversed?-1:1)}else{this.started_=!0}e=this.node;if(!this.node){throw goog.iter.StopIteration}return e};goog.dom.TagIterator.prototype.isStarted=function(){return this.started_};goog.dom.TagIterator.prototype.isStartTag=function(){return this.tagType==goog.dom.TagWalkType.START_TAG};goog.dom.TagIterator.prototype.isEndTag=function(){return this.tagType==goog.dom.TagWalkType.END_TAG};goog.dom.TagIterator.prototype.isNonElement=function(){return this.tagType==goog.dom.TagWalkType.OTHER};goog.dom.TagIterator.prototype.equals=function(b){return b.node==this.node&&(!this.node||b.tagType==this.tagType)};goog.dom.TagIterator.prototype.splice=function(f){var e=this.node;this.restartTag();this.reversed=!this.reversed;goog.dom.TagIterator.prototype.next.call(this);this.reversed=!this.reversed;for(var h=goog.isArrayLike(arguments[0])?arguments[0]:arguments,g=h.length-1;0<=g;g--){goog.dom.insertSiblingAfter(h[g],e)}goog.dom.removeNode(e)};goog.dom.RangeType={TEXT:"text",CONTROL:"control",MULTI:"mutli"};goog.dom.AbstractRange=function(){};goog.dom.AbstractRange.getBrowserSelectionForWindow=function(f){if(f.getSelection){return f.getSelection()}f=f.document;var e=f.selection;if(e){try{var h=e.createRange();if(h.parentElement){if(h.parentElement().document!=f){return null}}else{if(!h.length||h.item(0).document!=f){return null}}}catch(g){return null}return e}return null};goog.dom.AbstractRange.isNativeControlRange=function(b){return !!b&&!!b.addElement};goog.dom.AbstractRange.prototype.setBrowserRangeObject=function(){return !1};goog.dom.AbstractRange.prototype.getTextRanges=function(){for(var e=[],d=0,f=this.getTextRangeCount();d<f;d++){e.push(this.getTextRange(d))}return e};goog.dom.AbstractRange.prototype.getContainerElement=function(){var b=this.getContainer();return b.nodeType==goog.dom.NodeType.ELEMENT?b:b.parentNode};goog.dom.AbstractRange.prototype.getAnchorNode=function(){return this.isReversed()?this.getEndNode():this.getStartNode()};goog.dom.AbstractRange.prototype.getAnchorOffset=function(){return this.isReversed()?this.getEndOffset():this.getStartOffset()};goog.dom.AbstractRange.prototype.getFocusNode=function(){return this.isReversed()?this.getStartNode():this.getEndNode()};goog.dom.AbstractRange.prototype.getFocusOffset=function(){return this.isReversed()?this.getStartOffset():this.getEndOffset()};goog.dom.AbstractRange.prototype.isReversed=function(){return !1};goog.dom.AbstractRange.prototype.getDocument=function(){return goog.dom.getOwnerDocument(goog.userAgent.IE?this.getContainer():this.getStartNode())};goog.dom.AbstractRange.prototype.getWindow=function(){return goog.dom.getWindow(this.getDocument())};goog.dom.AbstractRange.prototype.containsNode=function(d,c){return this.containsRange(goog.dom.Range.createFromNodeContents(d),c)};goog.dom.AbstractRange.prototype.replaceContentsWithNode=function(b){this.isCollapsed()||this.removeContents();return this.insertNode(b,!0)};goog.dom.AbstractRange.prototype.saveUsingCarets=function(){return this.getStartNode()&&this.getEndNode()?new goog.dom.SavedCaretRange(this):null};goog.dom.RangeIterator=function(d,c){goog.dom.TagIterator.call(this,d,c,!0)};goog.inherits(goog.dom.RangeIterator,goog.dom.TagIterator);goog.dom.AbstractMultiRange=function(){};goog.inherits(goog.dom.AbstractMultiRange,goog.dom.AbstractRange);goog.dom.AbstractMultiRange.prototype.containsRange=function(f,e){var h=this.getTextRanges(),g=f.getTextRanges();return(e?goog.array.some:goog.array.every)(g,function(b){return goog.array.some(h,function(a){return a.containsRange(b,e)})})};goog.dom.AbstractMultiRange.prototype.insertNode=function(d,c){c?goog.dom.insertSiblingBefore(d,this.getStartNode()):goog.dom.insertSiblingAfter(d,this.getEndNode());return d};goog.dom.AbstractMultiRange.prototype.surroundWithNodes=function(d,c){this.insertNode(d,!0);this.insertNode(c,!1)};goog.dom.TextRangeIterator=function(i,h,n,m,l){var k;i&&(this.startNode_=i,this.startOffset_=h,this.endNode_=n,this.endOffset_=m,i.nodeType==goog.dom.NodeType.ELEMENT&&i.tagName!=goog.dom.TagName.BR&&(i=i.childNodes,(h=i[h])?(this.startNode_=h,this.startOffset_=0):(i.length&&(this.startNode_=goog.array.peek(i)),k=!0)),n.nodeType==goog.dom.NodeType.ELEMENT&&((this.endNode_=n.childNodes[m])?this.endOffset_=0:this.endNode_=n));goog.dom.RangeIterator.call(this,l?this.endNode_:this.startNode_,l);if(k){try{this.next()}catch(j){if(j!=goog.iter.StopIteration){throw j}}}};goog.inherits(goog.dom.TextRangeIterator,goog.dom.RangeIterator);goog.dom.TextRangeIterator.prototype.startNode_=null;goog.dom.TextRangeIterator.prototype.endNode_=null;goog.dom.TextRangeIterator.prototype.startOffset_=0;goog.dom.TextRangeIterator.prototype.endOffset_=0;goog.dom.TextRangeIterator.prototype.getStartTextOffset=function(){return this.node.nodeType!=goog.dom.NodeType.TEXT?-1:this.node==this.startNode_?this.startOffset_:0};goog.dom.TextRangeIterator.prototype.getEndTextOffset=function(){return this.node.nodeType!=goog.dom.NodeType.TEXT?-1:this.node==this.endNode_?this.endOffset_:this.node.nodeValue.length};goog.dom.TextRangeIterator.prototype.getStartNode=function(){return this.startNode_};goog.dom.TextRangeIterator.prototype.setStartNode=function(b){this.isStarted()||this.setPosition(b);this.startNode_=b;this.startOffset_=0};goog.dom.TextRangeIterator.prototype.getEndNode=function(){return this.endNode_};goog.dom.TextRangeIterator.prototype.setEndNode=function(b){this.endNode_=b;this.endOffset_=0};goog.dom.TextRangeIterator.prototype.isLast=function(){return this.isStarted()&&this.node==this.endNode_&&(!this.endOffset_||!this.isStartTag())};goog.dom.TextRangeIterator.prototype.next=function(){if(this.isLast()){throw goog.iter.StopIteration}return goog.dom.TextRangeIterator.superClass_.next.call(this)};goog.dom.TextRangeIterator.prototype.skipTag=function(){goog.dom.TextRangeIterator.superClass_.skipTag.apply(this);if(goog.dom.contains(this.node,this.endNode_)){throw goog.iter.StopIteration}};goog.dom.TextRangeIterator.prototype.copyFrom=function(b){this.startNode_=b.startNode_;this.endNode_=b.endNode_;this.startOffset_=b.startOffset_;this.endOffset_=b.endOffset_;this.isReversed_=b.isReversed_;goog.dom.TextRangeIterator.superClass_.copyFrom.call(this,b)};goog.dom.TextRangeIterator.prototype.clone=function(){var b=new goog.dom.TextRangeIterator(this.startNode_,this.startOffset_,this.endNode_,this.endOffset_,this.isReversed_);b.copyFrom(this);return b};goog.string.StringBuffer=function(d,c){null!=d&&this.append.apply(this,arguments)};goog.string.StringBuffer.prototype.buffer_="";goog.string.StringBuffer.prototype.set=function(b){this.buffer_=""+b};goog.string.StringBuffer.prototype.append=function(f,e,h){this.buffer_+=f;if(null!=e){for(var g=1;g<arguments.length;g++){this.buffer_+=arguments[g]}}return this};goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""};goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length};goog.string.StringBuffer.prototype.toString=function(){return this.buffer_};goog.dom.browserrange={};goog.dom.browserrange.AbstractRange=function(){};goog.dom.browserrange.AbstractRange.prototype.getStartPosition=function(){goog.asserts.assert(this.range_.getClientRects,"Getting selection coordinates is not supported.");var b=this.range_.getClientRects();return b.length?new goog.math.Coordinate(b[0].left,b[0].top):null};goog.dom.browserrange.AbstractRange.prototype.getEndPosition=function(){goog.asserts.assert(this.range_.getClientRects,"Getting selection coordinates is not supported.");var b=this.range_.getClientRects();return b.length?(b=goog.array.peek(b),new goog.math.Coordinate(b.right,b.bottom)):null};goog.dom.browserrange.AbstractRange.prototype.containsRange=function(i,h){var n=h&&!i.isCollapsed(),m=i.getBrowserRange(),l=goog.dom.RangeEndpoint.START,k=goog.dom.RangeEndpoint.END;try{return n?0<=this.compareBrowserRangeEndpoints(m,k,l)&&0>=this.compareBrowserRangeEndpoints(m,l,k):0<=this.compareBrowserRangeEndpoints(m,k,k)&&0>=this.compareBrowserRangeEndpoints(m,l,l)}catch(j){if(!goog.userAgent.IE){throw j}return !1}};goog.dom.browserrange.AbstractRange.prototype.containsNode=function(d,c){return this.containsRange(goog.dom.browserrange.createRangeFromNodeContents(d),c)};goog.dom.browserrange.AbstractRange.prototype.getHtmlFragment=function(){var b=new goog.string.StringBuffer;goog.iter.forEach(this,function(a,f,e){a.nodeType==goog.dom.NodeType.TEXT?b.append(goog.string.htmlEscape(a.nodeValue.substring(e.getStartTextOffset(),e.getEndTextOffset()))):a.nodeType==goog.dom.NodeType.ELEMENT&&(e.isEndTag()?goog.dom.canHaveChildren(a)&&b.append("</"+a.tagName+">"):(f=a.cloneNode(!1),f=goog.dom.getOuterHtml(f),goog.userAgent.IE&&a.tagName==goog.dom.TagName.LI?b.append(f):(a=f.lastIndexOf("<"),b.append(a?f.substr(0,a):f))))},this);return b.toString()};goog.dom.browserrange.AbstractRange.prototype.__iterator__=function(){return new goog.dom.TextRangeIterator(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};goog.dom.browserrange.W3cRange=function(b){this.range_=b};goog.inherits(goog.dom.browserrange.W3cRange,goog.dom.browserrange.AbstractRange);goog.dom.browserrange.W3cRange.getBrowserRangeForNode=function(f){var e=goog.dom.getOwnerDocument(f).createRange();if(f.nodeType==goog.dom.NodeType.TEXT){e.setStart(f,0),e.setEnd(f,f.length)}else{if(goog.dom.browserrange.canContainRangeEndpoint(f)){for(var h,g=f;(h=g.firstChild)&&goog.dom.browserrange.canContainRangeEndpoint(h);){g=h}e.setStart(g,0);for(g=f;(h=g.lastChild)&&goog.dom.browserrange.canContainRangeEndpoint(h);){g=h}e.setEnd(g,g.nodeType==goog.dom.NodeType.ELEMENT?g.childNodes.length:g.length)}else{h=f.parentNode,f=goog.array.indexOf(h.childNodes,f),e.setStart(h,f),e.setEnd(h,f+1)}}return e};goog.dom.browserrange.W3cRange.getBrowserRangeForNodes=function(g,f,j,i){var h=goog.dom.getOwnerDocument(g).createRange();h.setStart(g,f);h.setEnd(j,i);return h};goog.dom.browserrange.W3cRange.createFromNodeContents=function(b){return new goog.dom.browserrange.W3cRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(b))};goog.dom.browserrange.W3cRange.createFromNodes=function(f,e,h,g){return new goog.dom.browserrange.W3cRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(f,e,h,g))};goog.dom.browserrange.W3cRange.prototype.clone=function(){return new this.constructor(this.range_.cloneRange())};goog.dom.browserrange.W3cRange.prototype.getBrowserRange=function(){return this.range_};goog.dom.browserrange.W3cRange.prototype.getContainer=function(){return this.range_.commonAncestorContainer};goog.dom.browserrange.W3cRange.prototype.getStartNode=function(){return this.range_.startContainer};goog.dom.browserrange.W3cRange.prototype.getStartOffset=function(){return this.range_.startOffset};goog.dom.browserrange.W3cRange.prototype.getEndNode=function(){return this.range_.endContainer};goog.dom.browserrange.W3cRange.prototype.getEndOffset=function(){return this.range_.endOffset};goog.dom.browserrange.W3cRange.prototype.compareBrowserRangeEndpoints=function(e,d,f){return this.range_.compareBoundaryPoints(f==goog.dom.RangeEndpoint.START?d==goog.dom.RangeEndpoint.START?goog.global.Range.START_TO_START:goog.global.Range.START_TO_END:d==goog.dom.RangeEndpoint.START?goog.global.Range.END_TO_START:goog.global.Range.END_TO_END,e)};goog.dom.browserrange.W3cRange.prototype.isCollapsed=function(){return this.range_.collapsed};goog.dom.browserrange.W3cRange.prototype.getText=function(){return this.range_.toString()};goog.dom.browserrange.W3cRange.prototype.getValidHtml=function(){var d=goog.dom.getDomHelper(this.range_.startContainer).createDom("div");d.appendChild(this.range_.cloneContents());d=d.innerHTML;if(goog.string.startsWith(d,"<")||!this.isCollapsed()&&!goog.string.contains(d,"<")){return d}var c=this.getContainer(),c=c.nodeType==goog.dom.NodeType.ELEMENT?c:c.parentNode;return goog.dom.getOuterHtml(c.cloneNode(!1)).replace(">",">"+d)};goog.dom.browserrange.W3cRange.prototype.select=function(d){var c=goog.dom.getWindow(goog.dom.getOwnerDocument(this.getStartNode()));this.selectInternal(c.getSelection(),d)};goog.dom.browserrange.W3cRange.prototype.selectInternal=function(b){b.removeAllRanges();b.addRange(this.range_)};goog.dom.browserrange.W3cRange.prototype.removeContents=function(){var d=this.range_;d.extractContents();if(d.startContainer.hasChildNodes()&&(d=d.startContainer.childNodes[d.startOffset])){var c=d.previousSibling;""==goog.dom.getRawTextContent(d)&&goog.dom.removeNode(d);c&&""==goog.dom.getRawTextContent(c)&&goog.dom.removeNode(c)}};goog.dom.browserrange.W3cRange.prototype.surroundContents=function(b){this.range_.surroundContents(b);return b};goog.dom.browserrange.W3cRange.prototype.insertNode=function(e,d){var f=this.range_.cloneRange();f.collapse(d);f.insertNode(e);f.detach();return e};goog.dom.browserrange.W3cRange.prototype.surroundWithNodes=function(r,q){var p=goog.dom.getWindow(goog.dom.getOwnerDocument(this.getStartNode()));if(p=goog.dom.Range.createFromWindow(p)){var o=p.getStartNode(),n=p.getEndNode(),m=p.getStartOffset(),l=p.getEndOffset()}var k=this.range_.cloneRange(),i=this.range_.cloneRange();k.collapse(!1);i.collapse(!0);k.insertNode(q);i.insertNode(r);k.detach();i.detach();if(p){if(o.nodeType==goog.dom.NodeType.TEXT){for(;m>o.length;){m-=o.length;do{o=o.nextSibling}while(o==r||o==q)}}if(n.nodeType==goog.dom.NodeType.TEXT){for(;l>n.length;){l-=n.length;do{n=n.nextSibling}while(n==r||n==q)}}goog.dom.Range.createFromNodes(o,m,n,l).select()}};goog.dom.browserrange.W3cRange.prototype.collapse=function(b){this.range_.collapse(b)};goog.dom.browserrange.WebKitRange=function(b){goog.dom.browserrange.W3cRange.call(this,b)};goog.inherits(goog.dom.browserrange.WebKitRange,goog.dom.browserrange.W3cRange);goog.dom.browserrange.WebKitRange.createFromNodeContents=function(b){return new goog.dom.browserrange.WebKitRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(b))};goog.dom.browserrange.WebKitRange.createFromNodes=function(f,e,h,g){return new goog.dom.browserrange.WebKitRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(f,e,h,g))};goog.dom.browserrange.WebKitRange.prototype.compareBrowserRangeEndpoints=function(e,d,f){return goog.userAgent.isVersion("528")?goog.dom.browserrange.WebKitRange.superClass_.compareBrowserRangeEndpoints.call(this,e,d,f):this.range_.compareBoundaryPoints(f==goog.dom.RangeEndpoint.START?d==goog.dom.RangeEndpoint.START?goog.global.Range.START_TO_START:goog.global.Range.END_TO_START:d==goog.dom.RangeEndpoint.START?goog.global.Range.START_TO_END:goog.global.Range.END_TO_END,e)};goog.dom.browserrange.WebKitRange.prototype.selectInternal=function(d,c){d.removeAllRanges();c?d.setBaseAndExtent(this.getEndNode(),this.getEndOffset(),this.getStartNode(),this.getStartOffset()):d.setBaseAndExtent(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};goog.dom.NodeIterator=function(f,e,h,g){goog.dom.TagIterator.call(this,f,e,h,null,g)};goog.inherits(goog.dom.NodeIterator,goog.dom.TagIterator);goog.dom.NodeIterator.prototype.next=function(){do{goog.dom.NodeIterator.superClass_.next.call(this)}while(this.isEndTag());return this.node};goog.dom.browserrange.IeRange=function(d,c){this.range_=d;this.doc_=c};goog.inherits(goog.dom.browserrange.IeRange,goog.dom.browserrange.AbstractRange);goog.dom.browserrange.IeRange.logger_=goog.debug.Logger.getLogger("goog.dom.browserrange.IeRange");goog.dom.browserrange.IeRange.getBrowserRangeForNode_=function(g){var f=goog.dom.getOwnerDocument(g).body.createTextRange();if(g.nodeType==goog.dom.NodeType.ELEMENT){f.moveToElementText(g),goog.dom.browserrange.canContainRangeEndpoint(g)&&!g.childNodes.length&&f.collapse(!1)}else{for(var j=0,i=g;i=i.previousSibling;){var h=i.nodeType;if(h==goog.dom.NodeType.TEXT){j+=i.length}else{if(h==goog.dom.NodeType.ELEMENT){f.moveToElementText(i);break}}}i||f.moveToElementText(g.parentNode);f.collapse(!i);j&&f.move("character",j);f.moveEnd("character",g.length)}return f};goog.dom.browserrange.IeRange.getBrowserRangeForNodes_=function(h,g,l,k){var j=!1;h.nodeType==goog.dom.NodeType.ELEMENT&&(g>h.childNodes.length&&goog.dom.browserrange.IeRange.logger_.severe("Cannot have startOffset > startNode child count"),g=h.childNodes[g],j=!g,h=g||h.lastChild||h,g=0);var i=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(h);g&&i.move("character",g);if(h==l&&g==k){return i.collapse(!0),i}j&&i.collapse(!1);j=!1;l.nodeType==goog.dom.NodeType.ELEMENT&&(k>l.childNodes.length&&goog.dom.browserrange.IeRange.logger_.severe("Cannot have endOffset > endNode child count"),l=(g=l.childNodes[k])||l.lastChild||l,k=0,j=!g);h=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(l);h.collapse(!j);k&&h.moveEnd("character",k);i.setEndPoint("EndToEnd",h);return i};goog.dom.browserrange.IeRange.createFromNodeContents=function(f){var e=new goog.dom.browserrange.IeRange(goog.dom.browserrange.IeRange.getBrowserRangeForNode_(f),goog.dom.getOwnerDocument(f));if(goog.dom.browserrange.canContainRangeEndpoint(f)){for(var h,g=f;(h=g.firstChild)&&goog.dom.browserrange.canContainRangeEndpoint(h);){g=h}e.startNode_=g;e.startOffset_=0;for(g=f;(h=g.lastChild)&&goog.dom.browserrange.canContainRangeEndpoint(h);){g=h}e.endNode_=g;e.endOffset_=g.nodeType==goog.dom.NodeType.ELEMENT?g.childNodes.length:g.length;e.parentNode_=f}else{e.startNode_=e.endNode_=e.parentNode_=f.parentNode,e.startOffset_=goog.array.indexOf(e.parentNode_.childNodes,f),e.endOffset_=e.startOffset_+1}return e};goog.dom.browserrange.IeRange.createFromNodes=function(g,f,j,i){var h=new goog.dom.browserrange.IeRange(goog.dom.browserrange.IeRange.getBrowserRangeForNodes_(g,f,j,i),goog.dom.getOwnerDocument(g));h.startNode_=g;h.startOffset_=f;h.endNode_=j;h.endOffset_=i;return h};goog.dom.browserrange.IeRange.prototype.parentNode_=null;goog.dom.browserrange.IeRange.prototype.startNode_=null;goog.dom.browserrange.IeRange.prototype.endNode_=null;goog.dom.browserrange.IeRange.prototype.startOffset_=-1;goog.dom.browserrange.IeRange.prototype.endOffset_=-1;goog.dom.browserrange.IeRange.prototype.clone=function(){var b=new goog.dom.browserrange.IeRange(this.range_.duplicate(),this.doc_);b.parentNode_=this.parentNode_;b.startNode_=this.startNode_;b.endNode_=this.endNode_;return b};goog.dom.browserrange.IeRange.prototype.getBrowserRange=function(){return this.range_};goog.dom.browserrange.IeRange.prototype.clearCachedValues_=function(){this.parentNode_=this.startNode_=this.endNode_=null;this.startOffset_=this.endOffset_=-1};goog.dom.browserrange.IeRange.prototype.getContainer=function(){if(!this.parentNode_){var e=this.range_.text,d=this.range_.duplicate(),f=e.replace(/ +$/,"");(f=e.length-f.length)&&d.moveEnd("character",-f);f=d.parentElement();d=goog.string.stripNewlines(d.htmlText).length;if(this.isCollapsed()&&0<d){return this.parentNode_=f}for(;d>goog.string.stripNewlines(f.outerHTML).length;){f=f.parentNode}for(;1==f.childNodes.length&&f.innerText==goog.dom.browserrange.IeRange.getNodeText_(f.firstChild)&&goog.dom.browserrange.canContainRangeEndpoint(f.firstChild);){f=f.firstChild}0==e.length&&(f=this.findDeepestContainer_(f));this.parentNode_=f}return this.parentNode_};goog.dom.browserrange.IeRange.prototype.findDeepestContainer_=function(r){for(var q=r.childNodes,p=0,o=q.length;p<o;p++){var n=q[p];if(goog.dom.browserrange.canContainRangeEndpoint(n)){var m=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(n),l=goog.dom.RangeEndpoint.START,k=goog.dom.RangeEndpoint.END,i=m.htmlText!=n.outerHTML;if(this.isCollapsed()&&i?0<=this.compareBrowserRangeEndpoints(m,l,l)&&0>=this.compareBrowserRangeEndpoints(m,l,k):this.range_.inRange(m)){return this.findDeepestContainer_(n)}}}return r};goog.dom.browserrange.IeRange.prototype.getStartNode=function(){this.startNode_||(this.startNode_=this.getEndpointNode_(goog.dom.RangeEndpoint.START),this.isCollapsed()&&(this.endNode_=this.startNode_));return this.startNode_};goog.dom.browserrange.IeRange.prototype.getStartOffset=function(){0>this.startOffset_&&(this.startOffset_=this.getOffset_(goog.dom.RangeEndpoint.START),this.isCollapsed()&&(this.endOffset_=this.startOffset_));return this.startOffset_};goog.dom.browserrange.IeRange.prototype.getEndNode=function(){if(this.isCollapsed()){return this.getStartNode()}this.endNode_||(this.endNode_=this.getEndpointNode_(goog.dom.RangeEndpoint.END));return this.endNode_};goog.dom.browserrange.IeRange.prototype.getEndOffset=function(){if(this.isCollapsed()){return this.getStartOffset()}0>this.endOffset_&&(this.endOffset_=this.getOffset_(goog.dom.RangeEndpoint.END),this.isCollapsed()&&(this.startOffset_=this.endOffset_));return this.endOffset_};goog.dom.browserrange.IeRange.prototype.compareBrowserRangeEndpoints=function(e,d,f){return this.range_.compareEndPoints((d==goog.dom.RangeEndpoint.START?"Start":"End")+"To"+(f==goog.dom.RangeEndpoint.START?"Start":"End"),e)};goog.dom.browserrange.IeRange.prototype.getEndpointNode_=function(z,y){var x=y||this.getContainer();if(!x||!x.firstChild){return x}for(var w=goog.dom.RangeEndpoint.START,v=goog.dom.RangeEndpoint.END,u=z==w,t=0,s=x.childNodes.length;t<s;t++){var r=u?t:s-t-1,q=x.childNodes[r],p;try{p=goog.dom.browserrange.createRangeFromNodeContents(q)}catch(o){continue}var i=p.getBrowserRange();if(this.isCollapsed()){if(goog.dom.browserrange.canContainRangeEndpoint(q)){if(p.containsRange(this)){return this.getEndpointNode_(z,q)}}else{if(0==this.compareBrowserRangeEndpoints(i,w,w)){this.startOffset_=this.endOffset_=r;break}}}else{if(this.containsRange(p)){if(!goog.dom.browserrange.canContainRangeEndpoint(q)){u?this.startOffset_=r:this.endOffset_=r+1;break}return this.getEndpointNode_(z,q)}if(0>this.compareBrowserRangeEndpoints(i,w,v)&&0<this.compareBrowserRangeEndpoints(i,v,w)){return this.getEndpointNode_(z,q)}}}return x};goog.dom.browserrange.IeRange.prototype.compareNodeEndpoints_=function(e,d,f){return this.range_.compareEndPoints((d==goog.dom.RangeEndpoint.START?"Start":"End")+"To"+(f==goog.dom.RangeEndpoint.START?"Start":"End"),goog.dom.browserrange.createRangeFromNodeContents(e).getBrowserRange())};goog.dom.browserrange.IeRange.prototype.getOffset_=function(j,i){var p=j==goog.dom.RangeEndpoint.START,o=i||(p?this.getStartNode():this.getEndNode());if(o.nodeType==goog.dom.NodeType.ELEMENT){for(var o=o.childNodes,n=o.length,m=p?1:-1,l=p?0:n-1;0<=l&&l<n;l+=m){var k=o[l];if(!goog.dom.browserrange.canContainRangeEndpoint(k)&&0==this.compareNodeEndpoints_(k,j,j)){return p?l:l+1}}return -1==l?0:l}n=this.range_.duplicate();m=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(o);n.setEndPoint(p?"EndToEnd":"StartToStart",m);n=n.text.length;return p?o.length-n:n};goog.dom.browserrange.IeRange.getNodeText_=function(b){return b.nodeType==goog.dom.NodeType.TEXT?b.nodeValue:b.innerText};goog.dom.browserrange.IeRange.prototype.isRangeInDocument=function(){var b=this.doc_.body.createTextRange();b.moveToElementText(this.doc_.body);return this.containsRange(new goog.dom.browserrange.IeRange(b,this.doc_),!0)};goog.dom.browserrange.IeRange.prototype.isCollapsed=function(){return 0==this.range_.compareEndPoints("StartToEnd",this.range_)};goog.dom.browserrange.IeRange.prototype.getText=function(){return this.range_.text};goog.dom.browserrange.IeRange.prototype.getValidHtml=function(){return this.range_.htmlText};goog.dom.browserrange.IeRange.prototype.select=function(){this.range_.select()};goog.dom.browserrange.IeRange.prototype.removeContents=function(){if(!this.isCollapsed()&&this.range_.htmlText){var h=this.getStartNode(),g=this.getEndNode(),l=this.range_.text,k=this.range_.duplicate();k.moveStart("character",1);k.moveStart("character",-1);k.text==l&&(this.range_=k);this.range_.text="";this.clearCachedValues_();l=this.getStartNode();k=this.getStartOffset();try{var j=h.nextSibling;h==g&&(h.parentNode&&h.nodeType==goog.dom.NodeType.TEXT&&j&&j.nodeType==goog.dom.NodeType.TEXT)&&(h.nodeValue+=j.nodeValue,goog.dom.removeNode(j),this.range_=goog.dom.browserrange.IeRange.getBrowserRangeForNode_(l),this.range_.move("character",k),this.clearCachedValues_())}catch(i){}}};goog.dom.browserrange.IeRange.getDomHelper_=function(b){return goog.dom.getDomHelper(b.parentElement())};goog.dom.browserrange.IeRange.pasteElement_=function(g,f,j){j=j||goog.dom.browserrange.IeRange.getDomHelper_(g);var i,h=i=f.id;i||(i=f.id=goog.string.createUniqueString());g.pasteHTML(f.outerHTML);(f=j.getElement(i))&&(h||f.removeAttribute("id"));return f};goog.dom.browserrange.IeRange.prototype.surroundContents=function(b){goog.dom.removeNode(b);b.innerHTML=this.range_.htmlText;(b=goog.dom.browserrange.IeRange.pasteElement_(this.range_,b))&&this.range_.moveToElementText(b);this.clearCachedValues_();return b};goog.dom.browserrange.IeRange.insertNode_=function(g,f,j,i){i=i||goog.dom.browserrange.IeRange.getDomHelper_(g);var h;f.nodeType!=goog.dom.NodeType.ELEMENT&&(h=!0,f=i.createDom(goog.dom.TagName.DIV,null,f));g.collapse(j);f=goog.dom.browserrange.IeRange.pasteElement_(g,f,i);h&&(g=f.firstChild,i.flattenElement(f),f=g);return f};goog.dom.browserrange.IeRange.prototype.insertNode=function(e,d){var f=goog.dom.browserrange.IeRange.insertNode_(this.range_.duplicate(),e,d);this.clearCachedValues_();return f};goog.dom.browserrange.IeRange.prototype.surroundWithNodes=function(f,e){var h=this.range_.duplicate(),g=this.range_.duplicate();goog.dom.browserrange.IeRange.insertNode_(h,f,!0);goog.dom.browserrange.IeRange.insertNode_(g,e,!1);this.clearCachedValues_()};goog.dom.browserrange.IeRange.prototype.collapse=function(b){this.range_.collapse(b);b?(this.endNode_=this.startNode_,this.endOffset_=this.startOffset_):(this.startNode_=this.endNode_,this.startOffset_=this.endOffset_)};goog.dom.browserrange.GeckoRange=function(b){goog.dom.browserrange.W3cRange.call(this,b)};goog.inherits(goog.dom.browserrange.GeckoRange,goog.dom.browserrange.W3cRange);goog.dom.browserrange.GeckoRange.createFromNodeContents=function(b){return new goog.dom.browserrange.GeckoRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(b))};goog.dom.browserrange.GeckoRange.createFromNodes=function(f,e,h,g){return new goog.dom.browserrange.GeckoRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(f,e,h,g))};goog.dom.browserrange.GeckoRange.prototype.selectInternal=function(d,c){!c||this.isCollapsed()?goog.dom.browserrange.GeckoRange.superClass_.selectInternal.call(this,d,c):(d.collapse(this.getEndNode(),this.getEndOffset()),d.extend(this.getStartNode(),this.getStartOffset()))};goog.dom.browserrange.OperaRange=function(b){goog.dom.browserrange.W3cRange.call(this,b)};goog.inherits(goog.dom.browserrange.OperaRange,goog.dom.browserrange.W3cRange);goog.dom.browserrange.OperaRange.createFromNodeContents=function(b){return new goog.dom.browserrange.OperaRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNode(b))};goog.dom.browserrange.OperaRange.createFromNodes=function(f,e,h,g){return new goog.dom.browserrange.OperaRange(goog.dom.browserrange.W3cRange.getBrowserRangeForNodes(f,e,h,g))};goog.dom.browserrange.OperaRange.prototype.selectInternal=function(b){b.collapse(this.getStartNode(),this.getStartOffset());(this.getEndNode()!=this.getStartNode()||this.getEndOffset()!=this.getStartOffset())&&b.extend(this.getEndNode(),this.getEndOffset());0==b.rangeCount&&b.addRange(this.range_)};goog.dom.browserrange.Error={NOT_IMPLEMENTED:"Not Implemented"};goog.dom.browserrange.createRange=function(b){return goog.userAgent.IE&&!goog.userAgent.isDocumentMode(9)?new goog.dom.browserrange.IeRange(b,goog.dom.getOwnerDocument(b.parentElement())):goog.userAgent.WEBKIT?new goog.dom.browserrange.WebKitRange(b):goog.userAgent.GECKO?new goog.dom.browserrange.GeckoRange(b):goog.userAgent.OPERA?new goog.dom.browserrange.OperaRange(b):new goog.dom.browserrange.W3cRange(b)};goog.dom.browserrange.createRangeFromNodeContents=function(b){return goog.userAgent.IE&&!goog.userAgent.isDocumentMode(9)?goog.dom.browserrange.IeRange.createFromNodeContents(b):goog.userAgent.WEBKIT?goog.dom.browserrange.WebKitRange.createFromNodeContents(b):goog.userAgent.GECKO?goog.dom.browserrange.GeckoRange.createFromNodeContents(b):goog.userAgent.OPERA?goog.dom.browserrange.OperaRange.createFromNodeContents(b):goog.dom.browserrange.W3cRange.createFromNodeContents(b)};goog.dom.browserrange.createRangeFromNodes=function(f,e,h,g){return goog.userAgent.IE&&!goog.userAgent.isDocumentMode(9)?goog.dom.browserrange.IeRange.createFromNodes(f,e,h,g):goog.userAgent.WEBKIT?goog.dom.browserrange.WebKitRange.createFromNodes(f,e,h,g):goog.userAgent.GECKO?goog.dom.browserrange.GeckoRange.createFromNodes(f,e,h,g):goog.userAgent.OPERA?goog.dom.browserrange.OperaRange.createFromNodes(f,e,h,g):goog.dom.browserrange.W3cRange.createFromNodes(f,e,h,g)};goog.dom.browserrange.canContainRangeEndpoint=function(b){return goog.dom.canHaveChildren(b)||b.nodeType==goog.dom.NodeType.TEXT};goog.dom.TextRange=function(){};goog.inherits(goog.dom.TextRange,goog.dom.AbstractRange);goog.dom.TextRange.createFromBrowserRange=function(d,c){return goog.dom.TextRange.createFromBrowserRangeWrapper_(goog.dom.browserrange.createRange(d),c)};goog.dom.TextRange.createFromBrowserRangeWrapper_=function(e,d){var f=new goog.dom.TextRange;f.browserRangeWrapper_=e;f.isReversed_=!!d;return f};goog.dom.TextRange.createFromNodeContents=function(d,c){return goog.dom.TextRange.createFromBrowserRangeWrapper_(goog.dom.browserrange.createRangeFromNodeContents(d),c)};goog.dom.TextRange.createFromNodes=function(h,g,l,k){var j=new goog.dom.TextRange;j.isReversed_=goog.dom.Range.isReversed(h,g,l,k);if("BR"==h.tagName){var i=h.parentNode;g=goog.array.indexOf(i.childNodes,h);h=i}"BR"==l.tagName&&(i=l.parentNode,k=goog.array.indexOf(i.childNodes,l),l=i);j.isReversed_?(j.startNode_=l,j.startOffset_=k,j.endNode_=h,j.endOffset_=g):(j.startNode_=h,j.startOffset_=g,j.endNode_=l,j.endOffset_=k);return j};goog.dom.TextRange.prototype.browserRangeWrapper_=null;goog.dom.TextRange.prototype.startNode_=null;goog.dom.TextRange.prototype.startOffset_=null;goog.dom.TextRange.prototype.endNode_=null;goog.dom.TextRange.prototype.endOffset_=null;goog.dom.TextRange.prototype.isReversed_=!1;goog.dom.TextRange.prototype.clone=function(){var b=new goog.dom.TextRange;b.browserRangeWrapper_=this.browserRangeWrapper_;b.startNode_=this.startNode_;b.startOffset_=this.startOffset_;b.endNode_=this.endNode_;b.endOffset_=this.endOffset_;b.isReversed_=this.isReversed_;return b};goog.dom.TextRange.prototype.getType=function(){return goog.dom.RangeType.TEXT};goog.dom.TextRange.prototype.getBrowserRangeObject=function(){return this.getBrowserRangeWrapper_().getBrowserRange()};goog.dom.TextRange.prototype.setBrowserRangeObject=function(b){if(goog.dom.AbstractRange.isNativeControlRange(b)){return !1}this.browserRangeWrapper_=goog.dom.browserrange.createRange(b);this.clearCachedValues_();return !0};goog.dom.TextRange.prototype.clearCachedValues_=function(){this.startNode_=this.startOffset_=this.endNode_=this.endOffset_=null};goog.dom.TextRange.prototype.getTextRangeCount=function(){return 1};goog.dom.TextRange.prototype.getTextRange=function(){return this};goog.dom.TextRange.prototype.getBrowserRangeWrapper_=function(){return this.browserRangeWrapper_||(this.browserRangeWrapper_=goog.dom.browserrange.createRangeFromNodes(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset()))};goog.dom.TextRange.prototype.getContainer=function(){return this.getBrowserRangeWrapper_().getContainer()};goog.dom.TextRange.prototype.getStartNode=function(){return this.startNode_||(this.startNode_=this.getBrowserRangeWrapper_().getStartNode())};goog.dom.TextRange.prototype.getStartOffset=function(){return null!=this.startOffset_?this.startOffset_:this.startOffset_=this.getBrowserRangeWrapper_().getStartOffset()};goog.dom.TextRange.prototype.getStartPosition=function(){return this.isReversed()?this.getBrowserRangeWrapper_().getEndPosition():this.getBrowserRangeWrapper_().getStartPosition()};goog.dom.TextRange.prototype.getEndNode=function(){return this.endNode_||(this.endNode_=this.getBrowserRangeWrapper_().getEndNode())};goog.dom.TextRange.prototype.getEndOffset=function(){return null!=this.endOffset_?this.endOffset_:this.endOffset_=this.getBrowserRangeWrapper_().getEndOffset()};goog.dom.TextRange.prototype.getEndPosition=function(){return this.isReversed()?this.getBrowserRangeWrapper_().getStartPosition():this.getBrowserRangeWrapper_().getEndPosition()};goog.dom.TextRange.prototype.moveToNodes=function(g,f,j,i,h){this.startNode_=g;this.startOffset_=f;this.endNode_=j;this.endOffset_=i;this.isReversed_=h;this.browserRangeWrapper_=null};goog.dom.TextRange.prototype.isReversed=function(){return this.isReversed_};goog.dom.TextRange.prototype.containsRange=function(e,d){var f=e.getType();return f==goog.dom.RangeType.TEXT?this.getBrowserRangeWrapper_().containsRange(e.getBrowserRangeWrapper_(),d):f==goog.dom.RangeType.CONTROL?(f=e.getElements(),(d?goog.array.some:goog.array.every)(f,function(b){return this.containsNode(b,d)},this)):!1};goog.dom.TextRange.isAttachedNode=function(e){if(goog.userAgent.IE&&!goog.userAgent.isDocumentMode(9)){var d=!1;try{d=e.parentNode}catch(f){}return !!d}return goog.dom.contains(e.ownerDocument.body,e)};goog.dom.TextRange.prototype.isRangeInDocument=function(){return(!this.startNode_||goog.dom.TextRange.isAttachedNode(this.startNode_))&&(!this.endNode_||goog.dom.TextRange.isAttachedNode(this.endNode_))&&(!(goog.userAgent.IE&&!goog.userAgent.isDocumentMode(9))||this.getBrowserRangeWrapper_().isRangeInDocument())};goog.dom.TextRange.prototype.isCollapsed=function(){return this.getBrowserRangeWrapper_().isCollapsed()};goog.dom.TextRange.prototype.getText=function(){return this.getBrowserRangeWrapper_().getText()};goog.dom.TextRange.prototype.getHtmlFragment=function(){return this.getBrowserRangeWrapper_().getHtmlFragment()};goog.dom.TextRange.prototype.getValidHtml=function(){return this.getBrowserRangeWrapper_().getValidHtml()};goog.dom.TextRange.prototype.getPastableHtml=function(){var e=this.getValidHtml();if(e.match(/^\s*<td\b/i)){e="<table><tbody><tr>"+e+"</tr></tbody></table>"}else{if(e.match(/^\s*<tr\b/i)){e="<table><tbody>"+e+"</tbody></table>"}else{if(e.match(/^\s*<tbody\b/i)){e="<table>"+e+"</table>"}else{if(e.match(/^\s*<li\b/i)){for(var d=this.getContainer(),f=goog.dom.TagName.UL;d;){if(d.tagName==goog.dom.TagName.OL){f=goog.dom.TagName.OL;break}else{if(d.tagName==goog.dom.TagName.UL){break}}d=d.parentNode}e=goog.string.buildString("<",f,">",e,"</",f,">")}}}}return e};goog.dom.TextRange.prototype.__iterator__=function(){return new goog.dom.TextRangeIterator(this.getStartNode(),this.getStartOffset(),this.getEndNode(),this.getEndOffset())};goog.dom.TextRange.prototype.select=function(){this.getBrowserRangeWrapper_().select(this.isReversed_)};goog.dom.TextRange.prototype.removeContents=function(){this.getBrowserRangeWrapper_().removeContents();this.clearCachedValues_()};goog.dom.TextRange.prototype.surroundContents=function(b){b=this.getBrowserRangeWrapper_().surroundContents(b);this.clearCachedValues_();return b};goog.dom.TextRange.prototype.insertNode=function(e,d){var f=this.getBrowserRangeWrapper_().insertNode(e,d);this.clearCachedValues_();return f};goog.dom.TextRange.prototype.surroundWithNodes=function(d,c){this.getBrowserRangeWrapper_().surroundWithNodes(d,c);this.clearCachedValues_()};goog.dom.TextRange.prototype.saveUsingDom=function(){return new goog.dom.DomSavedTextRange_(this)};goog.dom.TextRange.prototype.collapse=function(b){b=this.isReversed()?!b:b;this.browserRangeWrapper_&&this.browserRangeWrapper_.collapse(b);b?(this.endNode_=this.startNode_,this.endOffset_=this.startOffset_):(this.startNode_=this.endNode_,this.startOffset_=this.endOffset_);this.isReversed_=!1};goog.dom.DomSavedTextRange_=function(b){this.anchorNode_=b.getAnchorNode();this.anchorOffset_=b.getAnchorOffset();this.focusNode_=b.getFocusNode();this.focusOffset_=b.getFocusOffset()};goog.inherits(goog.dom.DomSavedTextRange_,goog.dom.SavedRange);goog.dom.DomSavedTextRange_.prototype.restoreInternal=function(){return goog.dom.Range.createFromNodes(this.anchorNode_,this.anchorOffset_,this.focusNode_,this.focusOffset_)};goog.dom.DomSavedTextRange_.prototype.disposeInternal=function(){goog.dom.DomSavedTextRange_.superClass_.disposeInternal.call(this);this.focusNode_=this.anchorNode_=null};goog.dom.ControlRange=function(){};goog.inherits(goog.dom.ControlRange,goog.dom.AbstractMultiRange);goog.dom.ControlRange.createFromBrowserRange=function(d){var c=new goog.dom.ControlRange;c.range_=d;return c};goog.dom.ControlRange.createFromElements=function(f){for(var e=goog.dom.getOwnerDocument(arguments[0]).body.createControlRange(),h=0,g=arguments.length;h<g;h++){e.addElement(arguments[h])}return goog.dom.ControlRange.createFromBrowserRange(e)};goog.dom.ControlRange.prototype.range_=null;goog.dom.ControlRange.prototype.elements_=null;goog.dom.ControlRange.prototype.sortedElements_=null;goog.dom.ControlRange.prototype.clearCachedValues_=function(){this.sortedElements_=this.elements_=null};goog.dom.ControlRange.prototype.clone=function(){return goog.dom.ControlRange.createFromElements.apply(this,this.getElements())};goog.dom.ControlRange.prototype.getType=function(){return goog.dom.RangeType.CONTROL};goog.dom.ControlRange.prototype.getBrowserRangeObject=function(){return this.range_||document.body.createControlRange()};goog.dom.ControlRange.prototype.setBrowserRangeObject=function(b){if(!goog.dom.AbstractRange.isNativeControlRange(b)){return !1}this.range_=b;return !0};goog.dom.ControlRange.prototype.getTextRangeCount=function(){return this.range_?this.range_.length:0};goog.dom.ControlRange.prototype.getTextRange=function(b){return goog.dom.TextRange.createFromNodeContents(this.range_.item(b))};goog.dom.ControlRange.prototype.getContainer=function(){return goog.dom.findCommonAncestor.apply(null,this.getElements())};goog.dom.ControlRange.prototype.getStartNode=function(){return this.getSortedElements()[0]};goog.dom.ControlRange.prototype.getStartOffset=function(){return 0};goog.dom.ControlRange.prototype.getEndNode=function(){var d=this.getSortedElements(),c=goog.array.peek(d);return goog.array.find(d,function(b){return goog.dom.contains(b,c)})};goog.dom.ControlRange.prototype.getEndOffset=function(){return this.getEndNode().childNodes.length};goog.dom.ControlRange.prototype.getElements=function(){if(!this.elements_&&(this.elements_=[],this.range_)){for(var b=0;b<this.range_.length;b++){this.elements_.push(this.range_.item(b))}}return this.elements_};goog.dom.ControlRange.prototype.getSortedElements=function(){this.sortedElements_||(this.sortedElements_=this.getElements().concat(),this.sortedElements_.sort(function(d,c){return d.sourceIndex-c.sourceIndex}));return this.sortedElements_};goog.dom.ControlRange.prototype.isRangeInDocument=function(){var d=!1;try{d=goog.array.every(this.getElements(),function(b){return goog.userAgent.IE?!!b.parentNode:goog.dom.contains(b.ownerDocument.body,b)})}catch(c){}return d};goog.dom.ControlRange.prototype.isCollapsed=function(){return !this.range_||!this.range_.length};goog.dom.ControlRange.prototype.getText=function(){return""};goog.dom.ControlRange.prototype.getHtmlFragment=function(){return goog.array.map(this.getSortedElements(),goog.dom.getOuterHtml).join("")};goog.dom.ControlRange.prototype.getValidHtml=function(){return this.getHtmlFragment()};goog.dom.ControlRange.prototype.getPastableHtml=goog.dom.ControlRange.prototype.getValidHtml;goog.dom.ControlRange.prototype.__iterator__=function(){return new goog.dom.ControlRangeIterator(this)};goog.dom.ControlRange.prototype.select=function(){this.range_&&this.range_.select()};goog.dom.ControlRange.prototype.removeContents=function(){if(this.range_){for(var e=[],d=0,f=this.range_.length;d<f;d++){e.push(this.range_.item(d))}goog.array.forEach(e,goog.dom.removeNode);this.collapse(!1)}};goog.dom.ControlRange.prototype.replaceContentsWithNode=function(b){b=this.insertNode(b,!0);this.isCollapsed()||this.removeContents();return b};goog.dom.ControlRange.prototype.saveUsingDom=function(){return new goog.dom.DomSavedControlRange_(this)};goog.dom.ControlRange.prototype.collapse=function(){this.range_=null;this.clearCachedValues_()};goog.dom.DomSavedControlRange_=function(b){this.elements_=b.getElements()};goog.inherits(goog.dom.DomSavedControlRange_,goog.dom.SavedRange);goog.dom.DomSavedControlRange_.prototype.restoreInternal=function(){for(var e=(this.elements_.length?goog.dom.getOwnerDocument(this.elements_[0]):document).body.createControlRange(),d=0,f=this.elements_.length;d<f;d++){e.addElement(this.elements_[d])}return goog.dom.ControlRange.createFromBrowserRange(e)};goog.dom.DomSavedControlRange_.prototype.disposeInternal=function(){goog.dom.DomSavedControlRange_.superClass_.disposeInternal.call(this);delete this.elements_};goog.dom.ControlRangeIterator=function(b){b&&(this.elements_=b.getSortedElements(),this.startNode_=this.elements_.shift(),this.endNode_=goog.array.peek(this.elements_)||this.startNode_);goog.dom.RangeIterator.call(this,this.startNode_,!1)};goog.inherits(goog.dom.ControlRangeIterator,goog.dom.RangeIterator);goog.dom.ControlRangeIterator.prototype.startNode_=null;goog.dom.ControlRangeIterator.prototype.endNode_=null;goog.dom.ControlRangeIterator.prototype.elements_=null;goog.dom.ControlRangeIterator.prototype.getStartTextOffset=function(){return 0};goog.dom.ControlRangeIterator.prototype.getEndTextOffset=function(){return 0};goog.dom.ControlRangeIterator.prototype.getStartNode=function(){return this.startNode_};goog.dom.ControlRangeIterator.prototype.getEndNode=function(){return this.endNode_};goog.dom.ControlRangeIterator.prototype.isLast=function(){return !this.depth&&!this.elements_.length};goog.dom.ControlRangeIterator.prototype.next=function(){if(this.isLast()){throw goog.iter.StopIteration}if(!this.depth){var b=this.elements_.shift();this.setPosition(b,goog.dom.TagWalkType.START_TAG,goog.dom.TagWalkType.START_TAG);return b}return goog.dom.ControlRangeIterator.superClass_.next.call(this)};goog.dom.ControlRangeIterator.prototype.copyFrom=function(b){this.elements_=b.elements_;this.startNode_=b.startNode_;this.endNode_=b.endNode_;goog.dom.ControlRangeIterator.superClass_.copyFrom.call(this,b)};goog.dom.ControlRangeIterator.prototype.clone=function(){var b=new goog.dom.ControlRangeIterator(null);b.copyFrom(this);return b};goog.dom.MultiRange=function(){this.browserRanges_=[];this.ranges_=[];this.container_=this.sortedRanges_=null};goog.inherits(goog.dom.MultiRange,goog.dom.AbstractMultiRange);goog.dom.MultiRange.createFromBrowserSelection=function(f){for(var e=new goog.dom.MultiRange,h=0,g=f.rangeCount;h<g;h++){e.browserRanges_.push(f.getRangeAt(h))}return e};goog.dom.MultiRange.createFromBrowserRanges=function(d){var c=new goog.dom.MultiRange;c.browserRanges_=goog.array.clone(d);return c};goog.dom.MultiRange.createFromTextRanges=function(d){var c=new goog.dom.MultiRange;c.ranges_=d;c.browserRanges_=goog.array.map(d,function(b){return b.getBrowserRangeObject()});return c};goog.dom.MultiRange.prototype.logger_=goog.debug.Logger.getLogger("goog.dom.MultiRange");goog.dom.MultiRange.prototype.clearCachedValues_=function(){this.ranges_=[];this.container_=this.sortedRanges_=null};goog.dom.MultiRange.prototype.clone=function(){return goog.dom.MultiRange.createFromBrowserRanges(this.browserRanges_)};goog.dom.MultiRange.prototype.getType=function(){return goog.dom.RangeType.MULTI};goog.dom.MultiRange.prototype.getBrowserRangeObject=function(){1<this.browserRanges_.length&&this.logger_.warning("getBrowserRangeObject called on MultiRange with more than 1 range");return this.browserRanges_[0]};goog.dom.MultiRange.prototype.setBrowserRangeObject=function(){return !1};goog.dom.MultiRange.prototype.getTextRangeCount=function(){return this.browserRanges_.length};goog.dom.MultiRange.prototype.getTextRange=function(b){this.ranges_[b]||(this.ranges_[b]=goog.dom.TextRange.createFromBrowserRange(this.browserRanges_[b]));return this.ranges_[b]};goog.dom.MultiRange.prototype.getContainer=function(){if(!this.container_){for(var e=[],d=0,f=this.getTextRangeCount();d<f;d++){e.push(this.getTextRange(d).getContainer())}this.container_=goog.dom.findCommonAncestor.apply(null,e)}return this.container_};goog.dom.MultiRange.prototype.getSortedRanges=function(){this.sortedRanges_||(this.sortedRanges_=this.getTextRanges(),this.sortedRanges_.sort(function(h,g){var l=h.getStartNode(),k=h.getStartOffset(),j=g.getStartNode(),i=g.getStartOffset();return l==j&&k==i?0:goog.dom.Range.isReversed(l,k,j,i)?1:-1}));return this.sortedRanges_};goog.dom.MultiRange.prototype.getStartNode=function(){return this.getSortedRanges()[0].getStartNode()};goog.dom.MultiRange.prototype.getStartOffset=function(){return this.getSortedRanges()[0].getStartOffset()};goog.dom.MultiRange.prototype.getEndNode=function(){return goog.array.peek(this.getSortedRanges()).getEndNode()};goog.dom.MultiRange.prototype.getEndOffset=function(){return goog.array.peek(this.getSortedRanges()).getEndOffset()};goog.dom.MultiRange.prototype.isRangeInDocument=function(){return goog.array.every(this.getTextRanges(),function(b){return b.isRangeInDocument()})};goog.dom.MultiRange.prototype.isCollapsed=function(){return 0==this.browserRanges_.length||1==this.browserRanges_.length&&this.getTextRange(0).isCollapsed()};goog.dom.MultiRange.prototype.getText=function(){return goog.array.map(this.getTextRanges(),function(b){return b.getText()}).join("")};goog.dom.MultiRange.prototype.getHtmlFragment=function(){return this.getValidHtml()};goog.dom.MultiRange.prototype.getValidHtml=function(){return goog.array.map(this.getTextRanges(),function(b){return b.getValidHtml()}).join("")};goog.dom.MultiRange.prototype.getPastableHtml=function(){return this.getValidHtml()};goog.dom.MultiRange.prototype.__iterator__=function(){return new goog.dom.MultiRangeIterator(this)};goog.dom.MultiRange.prototype.select=function(){var e=goog.dom.AbstractRange.getBrowserSelectionForWindow(this.getWindow());e.removeAllRanges();for(var d=0,f=this.getTextRangeCount();d<f;d++){e.addRange(this.getTextRange(d).getBrowserRangeObject())}};goog.dom.MultiRange.prototype.removeContents=function(){goog.array.forEach(this.getTextRanges(),function(b){b.removeContents()})};goog.dom.MultiRange.prototype.saveUsingDom=function(){return new goog.dom.DomSavedMultiRange_(this)};goog.dom.MultiRange.prototype.collapse=function(d){if(!this.isCollapsed()){var c=d?this.getTextRange(0):this.getTextRange(this.getTextRangeCount()-1);this.clearCachedValues_();c.collapse(d);this.ranges_=[c];this.sortedRanges_=[c];this.browserRanges_=[c.getBrowserRangeObject()]}};goog.dom.DomSavedMultiRange_=function(b){this.savedRanges_=goog.array.map(b.getTextRanges(),function(c){return c.saveUsingDom()})};goog.inherits(goog.dom.DomSavedMultiRange_,goog.dom.SavedRange);goog.dom.DomSavedMultiRange_.prototype.restoreInternal=function(){var b=goog.array.map(this.savedRanges_,function(c){return c.restore()});return goog.dom.MultiRange.createFromTextRanges(b)};goog.dom.DomSavedMultiRange_.prototype.disposeInternal=function(){goog.dom.DomSavedMultiRange_.superClass_.disposeInternal.call(this);goog.array.forEach(this.savedRanges_,function(b){b.dispose()});delete this.savedRanges_};goog.dom.MultiRangeIterator=function(b){b&&(this.iterators_=goog.array.map(b.getSortedRanges(),function(c){return goog.iter.toIterator(c)}));goog.dom.RangeIterator.call(this,b?this.getStartNode():null,!1)};goog.inherits(goog.dom.MultiRangeIterator,goog.dom.RangeIterator);goog.dom.MultiRangeIterator.prototype.iterators_=null;goog.dom.MultiRangeIterator.prototype.currentIdx_=0;goog.dom.MultiRangeIterator.prototype.getStartTextOffset=function(){return this.iterators_[this.currentIdx_].getStartTextOffset()};goog.dom.MultiRangeIterator.prototype.getEndTextOffset=function(){return this.iterators_[this.currentIdx_].getEndTextOffset()};goog.dom.MultiRangeIterator.prototype.getStartNode=function(){return this.iterators_[0].getStartNode()};goog.dom.MultiRangeIterator.prototype.getEndNode=function(){return goog.array.peek(this.iterators_).getEndNode()};goog.dom.MultiRangeIterator.prototype.isLast=function(){return this.iterators_[this.currentIdx_].isLast()};goog.dom.MultiRangeIterator.prototype.next=function(){try{var e=this.iterators_[this.currentIdx_],d=e.next();this.setPosition(e.node,e.tagType,e.depth);return d}catch(f){if(f!==goog.iter.StopIteration||this.iterators_.length-1==this.currentIdx_){throw f}this.currentIdx_++;return this.next()}};goog.dom.MultiRangeIterator.prototype.copyFrom=function(b){this.iterators_=goog.array.clone(b.iterators_);goog.dom.MultiRangeIterator.superClass_.copyFrom.call(this,b)};goog.dom.MultiRangeIterator.prototype.clone=function(){var b=new goog.dom.MultiRangeIterator(null);b.copyFrom(this);return b};goog.dom.Range={};goog.dom.Range.createFromWindow=function(b){return(b=goog.dom.AbstractRange.getBrowserSelectionForWindow(b||window))&&goog.dom.Range.createFromBrowserSelection(b)};goog.dom.Range.createFromBrowserSelection=function(f){var e,h=!1;if(f.createRange){try{e=f.createRange()}catch(g){return null}}else{if(f.rangeCount){if(1<f.rangeCount){return goog.dom.MultiRange.createFromBrowserSelection(f)}e=f.getRangeAt(0);h=goog.dom.Range.isReversed(f.anchorNode,f.anchorOffset,f.focusNode,f.focusOffset)}else{return null}}return goog.dom.Range.createFromBrowserRange(e,h)};goog.dom.Range.createFromBrowserRange=function(d,c){return goog.dom.AbstractRange.isNativeControlRange(d)?goog.dom.ControlRange.createFromBrowserRange(d):goog.dom.TextRange.createFromBrowserRange(d,c)};goog.dom.Range.createFromNodeContents=function(d,c){return goog.dom.TextRange.createFromNodeContents(d,c)};goog.dom.Range.createCaret=function(d,c){return goog.dom.TextRange.createFromNodes(d,c,d,c)};goog.dom.Range.createFromNodes=function(f,e,h,g){return goog.dom.TextRange.createFromNodes(f,e,h,g)};goog.dom.Range.clearSelection=function(e){if(e=goog.dom.AbstractRange.getBrowserSelectionForWindow(e||window)){if(e.empty){try{e.empty()}catch(d){}}else{try{e.removeAllRanges()}catch(f){}}}};goog.dom.Range.hasSelection=function(b){b=goog.dom.AbstractRange.getBrowserSelectionForWindow(b||window);return !!b&&(goog.userAgent.IE?"None"!=b.type:!!b.rangeCount)};goog.dom.Range.isReversed=function(g,f,j,i){if(g==j){return i<f}var h;if(g.nodeType==goog.dom.NodeType.ELEMENT&&f){if(h=g.childNodes[f]){g=h,f=0}else{if(goog.dom.contains(g,j)){return !0}}}if(j.nodeType==goog.dom.NodeType.ELEMENT&&i){if(h=j.childNodes[i]){j=h,i=0}else{if(goog.dom.contains(j,g)){return !1}}}return 0<(goog.dom.compareNodeOrder(g,j)||f-i)};goog.editor.range={};goog.editor.range.narrow=function(g,f){var j=g.getStartNode(),i=g.getEndNode();if(j&&i){var h=function(b){return b==f},j=goog.dom.getAncestor(j,h,!0),i=goog.dom.getAncestor(i,h,!0);if(j&&i){return g.clone()}if(j){return i=goog.editor.node.getRightMostLeaf(f),goog.dom.Range.createFromNodes(g.getStartNode(),g.getStartOffset(),i,goog.editor.node.getLength(i))}if(i){return goog.dom.Range.createFromNodes(goog.editor.node.getLeftMostLeaf(f),0,g.getEndNode(),g.getEndOffset())}}return null};goog.editor.range.expand=function(h,g){var l=goog.editor.range.expandEndPointToContainer_(h,goog.dom.RangeEndpoint.START,g),l=goog.editor.range.expandEndPointToContainer_(l,goog.dom.RangeEndpoint.END,g),k=l.getStartNode(),j=l.getEndNode(),i=l.getStartOffset(),l=l.getEndOffset();if(k==j){for(;j!=g&&0==i&&l==goog.editor.node.getLength(j);){k=j.parentNode,i=goog.array.indexOf(k.childNodes,j),l=i+1,j=k}k=j}return goog.dom.Range.createFromNodes(k,i,j,l)};goog.editor.range.expandEndPointToContainer_=function(i,h,n){for(var m=(h=h==goog.dom.RangeEndpoint.START)?i.getStartNode():i.getEndNode(),l=h?i.getStartOffset():i.getEndOffset(),k=i.getContainerElement();m!=k&&m!=n&&!(h&&0!=l||!h&&l!=goog.editor.node.getLength(m));){var j=m.parentNode,m=goog.array.indexOf(j.childNodes,m),l=h?m:m+1,m=j}return goog.dom.Range.createFromNodes(h?m:i.getStartNode(),h?l:i.getStartOffset(),h?i.getEndNode():m,h?i.getEndOffset():l)};goog.editor.range.selectNodeStart=function(b){goog.dom.Range.createCaret(goog.editor.node.getLeftMostLeaf(b),0).select()};goog.editor.range.placeCursorNextTo=function(f,e){var h=f.parentNode,g=goog.array.indexOf(h.childNodes,f)+(e?0:1),h=goog.editor.range.Point.createDeepestPoint(h,g,e,!0),h=goog.dom.Range.createCaret(h.node,h.offset);h.select();return h};goog.editor.range.selectionPreservingNormalize=function(d){var c=goog.dom.getOwnerDocument(d),c=goog.dom.Range.createFromWindow(goog.dom.getWindow(c));(d=goog.editor.range.rangePreservingNormalize(d,c))&&d.select()};goog.editor.range.normalizeNodeIe_=function(f){for(var e=null,h=f.firstChild;h;){var g=h.nextSibling;h.nodeType==goog.dom.NodeType.TEXT?""==h.nodeValue?f.removeChild(h):e?(e.nodeValue+=h.nodeValue,f.removeChild(h)):e=h:(goog.editor.range.normalizeNodeIe_(h),e=null);h=g}};goog.editor.range.normalizeNode=function(b){goog.userAgent.IE?goog.editor.range.normalizeNodeIe_(b):b.normalize()};goog.editor.range.rangePreservingNormalize=function(f,e){if(e){var h=goog.editor.range.normalize(e),g=goog.editor.style.getContainer(e.getContainerElement())}g?goog.editor.range.normalizeNode(goog.dom.findCommonAncestor(g,f)):f&&goog.editor.range.normalizeNode(f);return h?h():null};goog.editor.range.getDeepEndPoint=function(d,c){return c?goog.editor.range.Point.createDeepestPoint(d.getStartNode(),d.getStartOffset()):goog.editor.range.Point.createDeepestPoint(d.getEndNode(),d.getEndOffset())};goog.editor.range.normalize=function(i){var h=goog.editor.range.normalizePoint_(goog.editor.range.getDeepEndPoint(i,!0)),n=h.getParentPoint(),m=h.node.previousSibling;h.node.nodeType==goog.dom.NodeType.TEXT&&(h.node=null);var l=goog.editor.range.normalizePoint_(goog.editor.range.getDeepEndPoint(i,!1)),k=l.getParentPoint(),j=l.node.previousSibling;l.node.nodeType==goog.dom.NodeType.TEXT&&(l.node=null);return function(){!h.node&&m&&(h.node=m.nextSibling,h.node||(h=goog.editor.range.Point.getPointAtEndOfNode(m)));!l.node&&j&&(l.node=j.nextSibling,l.node||(l=goog.editor.range.Point.getPointAtEndOfNode(j)));return goog.dom.Range.createFromNodes(h.node||n.node.firstChild||n.node,h.offset,l.node||k.node.firstChild||k.node,l.offset)}};goog.editor.range.normalizePoint_=function(e){var d;if(e.node.nodeType==goog.dom.NodeType.TEXT){for(d=e.node.previousSibling;d&&d.nodeType==goog.dom.NodeType.TEXT;d=d.previousSibling){e.offset+=goog.editor.node.getLength(d)}}else{d=e.node.previousSibling}var f=e.node.parentNode;e.node=d?d.nextSibling:f.firstChild;return e};goog.editor.range.isEditable=function(d){var c=d.getContainerElement();return d.getStartNode()!=c.parentElement&&goog.editor.node.isEditableContainer(c)||goog.editor.node.isEditable(c)};goog.editor.range.intersectsTag=function(d,c){return goog.dom.getAncestorByTagNameAndClass(d.getContainerElement(),c)?!0:goog.iter.some(d,function(b){return b.tagName==c})};goog.editor.range.Point=function(d,c){this.node=d;this.offset=c};goog.editor.range.Point.prototype.getParentPoint=function(){var b=this.node.parentNode;return new goog.editor.range.Point(b,goog.array.indexOf(b.childNodes,this.node))};goog.editor.range.Point.createDeepestPoint=function(h,g,l,k){for(;h.nodeType==goog.dom.NodeType.ELEMENT;){var j=h.childNodes[g];if(!j&&!h.lastChild){break}else{if(j){var i=j.previousSibling;if(l&&i){if(k&&goog.editor.range.Point.isTerminalElement_(i)){break}h=i;g=goog.editor.node.getLength(h)}else{if(k&&goog.editor.range.Point.isTerminalElement_(j)){break}h=j;g=0}}else{if(k&&goog.editor.range.Point.isTerminalElement_(h.lastChild)){break}h=h.lastChild;g=goog.editor.node.getLength(h)}}}return new goog.editor.range.Point(h,g)};goog.editor.range.Point.isTerminalElement_=function(b){return b.nodeType==goog.dom.NodeType.ELEMENT&&!goog.dom.canHaveChildren(b)};goog.editor.range.Point.getPointAtEndOfNode=function(b){return new goog.editor.range.Point(b,goog.editor.node.getLength(b))};goog.editor.range.saveUsingNormalizedCarets=function(b){return new goog.editor.range.NormalizedCaretRange_(b)};goog.editor.range.NormalizedCaretRange_=function(b){goog.dom.SavedCaretRange.call(this,b)};goog.inherits(goog.editor.range.NormalizedCaretRange_,goog.dom.SavedCaretRange);goog.editor.range.NormalizedCaretRange_.prototype.removeCarets=function(e){var d=this.getCaret(!0),f=this.getCaret(!1),d=d&&f?goog.dom.findCommonAncestor(d,f):d||f;goog.editor.range.NormalizedCaretRange_.superClass_.removeCarets.call(this);if(e){return goog.editor.range.rangePreservingNormalize(d,e)}d&&goog.editor.range.selectionPreservingNormalize(d)};goog.uri={};goog.uri.utils={};goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63};goog.uri.utils.buildFromEncodedParts=function(j,i,p,o,n,m,l){var k="";j&&(k+=j+":");p&&(k+="//",i&&(k+=i+"@"),k+=p,o&&(k+=":"+o));n&&(k+=n);m&&(k+="?"+m);l&&(k+="#"+l);return k};goog.uri.utils.splitRe_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.split=function(b){return b.match(goog.uri.utils.splitRe_)};goog.uri.utils.decodeIfPossible_=function(b){return b&&decodeURIComponent(b)};goog.uri.utils.getComponentByIndex_=function(d,c){return goog.uri.utils.split(c)[d]||null};goog.uri.utils.getScheme=function(b){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,b)};goog.uri.utils.getEffectiveScheme=function(b){b=goog.uri.utils.getScheme(b);!b&&self.location&&(b=self.location.protocol,b=b.substr(0,b.length-1));return b?b.toLowerCase():""};goog.uri.utils.getUserInfoEncoded=function(b){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,b)};goog.uri.utils.getUserInfo=function(b){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(b))};goog.uri.utils.getDomainEncoded=function(b){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,b)};goog.uri.utils.getDomain=function(b){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(b))};goog.uri.utils.getPort=function(b){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,b))||null};goog.uri.utils.getPathEncoded=function(b){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,b)};goog.uri.utils.getPath=function(b){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(b))};goog.uri.utils.getQueryData=function(b){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,b)};goog.uri.utils.getFragmentEncoded=function(d){var c=d.indexOf("#");return 0>c?null:d.substr(c+1)};goog.uri.utils.setFragmentEncoded=function(d,c){return goog.uri.utils.removeFragment(d)+(c?"#"+c:"")};goog.uri.utils.getFragment=function(b){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(b))};goog.uri.utils.getHost=function(b){b=goog.uri.utils.split(b);return goog.uri.utils.buildFromEncodedParts(b[goog.uri.utils.ComponentIndex.SCHEME],b[goog.uri.utils.ComponentIndex.USER_INFO],b[goog.uri.utils.ComponentIndex.DOMAIN],b[goog.uri.utils.ComponentIndex.PORT])};goog.uri.utils.getPathAndAfter=function(b){b=goog.uri.utils.split(b);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,b[goog.uri.utils.ComponentIndex.PATH],b[goog.uri.utils.ComponentIndex.QUERY_DATA],b[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.removeFragment=function(d){var c=d.indexOf("#");return 0>c?d:d.substr(0,c)};goog.uri.utils.haveSameDomain=function(f,e){var h=goog.uri.utils.split(f),g=goog.uri.utils.split(e);return h[goog.uri.utils.ComponentIndex.DOMAIN]==g[goog.uri.utils.ComponentIndex.DOMAIN]&&h[goog.uri.utils.ComponentIndex.SCHEME]==g[goog.uri.utils.ComponentIndex.SCHEME]&&h[goog.uri.utils.ComponentIndex.PORT]==g[goog.uri.utils.ComponentIndex.PORT]};goog.uri.utils.assertNoFragmentsOrQueries_=function(b){if(goog.DEBUG&&(0<=b.indexOf("#")||0<=b.indexOf("?"))){throw Error("goog.uri.utils: Fragment or query identifiers are not supported: ["+b+"]")}};goog.uri.utils.appendQueryData_=function(e){if(e[1]){var d=e[0],f=d.indexOf("#");0<=f&&(e.push(d.substr(f)),e[0]=d=d.substr(0,f));f=d.indexOf("?");0>f?e[1]="?":f==d.length-1&&(e[1]=void 0)}return e.join("")};goog.uri.utils.appendKeyValuePairs_=function(f,e,h){if(goog.isArray(e)){goog.asserts.assertArray(e);for(var g=0;g<e.length;g++){goog.uri.utils.appendKeyValuePairs_(f,String(e[g]),h)}}else{null!=e&&h.push("&",f,""===e?"":"=",goog.string.urlEncode(e))}};goog.uri.utils.buildQueryDataBuffer_=function(e,d,f){goog.asserts.assert(0==Math.max(d.length-(f||0),0)%2,"goog.uri.utils: Key/value lists must be even in length.");for(f=f||0;f<d.length;f+=2){goog.uri.utils.appendKeyValuePairs_(d[f],d[f+1],e)}return e};goog.uri.utils.buildQueryData=function(e,d){var f=goog.uri.utils.buildQueryDataBuffer_([],e,d);f[0]="";return f.join("")};goog.uri.utils.buildQueryDataBufferFromMap_=function(e,d){for(var f in d){goog.uri.utils.appendKeyValuePairs_(f,d[f],e)}return e};goog.uri.utils.buildQueryDataFromMap=function(b){b=goog.uri.utils.buildQueryDataBufferFromMap_([],b);b[0]="";return b.join("")};goog.uri.utils.appendParams=function(d,c){return goog.uri.utils.appendQueryData_(2==arguments.length?goog.uri.utils.buildQueryDataBuffer_([d],arguments[1],0):goog.uri.utils.buildQueryDataBuffer_([d],arguments,1))};goog.uri.utils.appendParamsFromMap=function(d,c){return goog.uri.utils.appendQueryData_(goog.uri.utils.buildQueryDataBufferFromMap_([d],c))};goog.uri.utils.appendParam=function(e,d,f){return goog.uri.utils.appendQueryData_([e,"&",d,"=",goog.string.urlEncode(f)])};goog.uri.utils.findParam_=function(h,g,l,k){for(var j=l.length;0<=(g=h.indexOf(l,g))&&g<k;){var i=h.charCodeAt(g-1);if(i==goog.uri.utils.CharCode_.AMPERSAND||i==goog.uri.utils.CharCode_.QUESTION){if(i=h.charCodeAt(g+j),!i||i==goog.uri.utils.CharCode_.EQUAL||i==goog.uri.utils.CharCode_.AMPERSAND||i==goog.uri.utils.CharCode_.HASH){return g}}g+=j+1}return -1};goog.uri.utils.hashOrEndRe_=/#|$/;goog.uri.utils.hasParam=function(d,c){return 0<=goog.uri.utils.findParam_(d,0,c,d.search(goog.uri.utils.hashOrEndRe_))};goog.uri.utils.getParamValue=function(g,f){var j=g.search(goog.uri.utils.hashOrEndRe_),i=goog.uri.utils.findParam_(g,0,f,j);if(0>i){return null}var h=g.indexOf("&",i);if(0>h||h>j){h=j}i+=f.length+1;return goog.string.urlDecode(g.substr(i,h-i))};goog.uri.utils.getParamValues=function(h,g){for(var l=h.search(goog.uri.utils.hashOrEndRe_),k=0,j,i=[];0<=(j=goog.uri.utils.findParam_(h,k,g,l));){k=h.indexOf("&",j);if(0>k||k>l){k=l}j+=g.length+1;i.push(goog.string.urlDecode(h.substr(j,k-j)))}return i};goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/;goog.uri.utils.removeParam=function(h,g){for(var l=h.search(goog.uri.utils.hashOrEndRe_),k=0,j,i=[];0<=(j=goog.uri.utils.findParam_(h,k,g,l));){i.push(h.substring(k,j)),k=Math.min(h.indexOf("&",j)+1||l,l)}i.push(h.substr(k));return i.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")};goog.uri.utils.setParam=function(e,d,f){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(e,d),d,f)};goog.uri.utils.appendPath=function(d,c){goog.uri.utils.assertNoFragmentsOrQueries_(d);goog.string.endsWith(d,"/")&&(d=d.substr(0,d.length-1));goog.string.startsWith(c,"/")&&(c=c.substr(1));return goog.string.buildString(d,"/",c)};goog.uri.utils.StandardQueryParam={RANDOM:"zx"};goog.uri.utils.makeUnique=function(b){return goog.uri.utils.setParam(b,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};goog.editor.Link=function(d,c){this.anchor_=d;this.isNew_=c;this.extraAnchors_=[]};goog.editor.Link.prototype.getAnchor=function(){return this.anchor_};goog.editor.Link.prototype.getExtraAnchors=function(){return this.extraAnchors_};goog.editor.Link.prototype.getCurrentText=function(){this.currentText_||(this.currentText_=goog.dom.getRawTextContent(this.getAnchor()));return this.currentText_};goog.editor.Link.prototype.isNew=function(){return this.isNew_};goog.editor.Link.prototype.initializeUrl=function(b){this.getAnchor().href=b};goog.editor.Link.prototype.removeLink=function(){goog.dom.flattenElement(this.anchor_);for(this.anchor_=null;this.extraAnchors_.length;){goog.dom.flattenElement(this.extraAnchors_.pop())}};goog.editor.Link.prototype.setTextAndUrl=function(g,f){var j=this.getAnchor();j.href=f;var i=this.getCurrentText();if(g!=i){var h=goog.editor.node.getLeftMostLeaf(j);h.nodeType==goog.dom.NodeType.TEXT&&(h=h.parentNode);goog.dom.getRawTextContent(h)!=i&&(h=j);goog.dom.removeChildren(h);j=goog.dom.getDomHelper(h);goog.dom.appendChild(h,j.createTextNode(g));this.currentText_=null}this.isNew_=!1};goog.editor.Link.prototype.placeCursorRightOf=function(){var d=this.getAnchor();if(goog.editor.BrowserFeature.GETS_STUCK_IN_LINKS){var c;c=d.nextSibling;if(!c||!(c.nodeType==goog.dom.NodeType.TEXT&&(goog.string.startsWith(c.data,goog.string.Unicode.NBSP)||goog.string.startsWith(c.data," ")))){c=goog.dom.getDomHelper(d).createTextNode(goog.string.Unicode.NBSP),goog.dom.insertSiblingAfter(c,d)}goog.dom.Range.createCaret(c,1).select()}else{goog.editor.range.placeCursorNextTo(d,!1)}};goog.editor.Link.prototype.updateLinkDisplay_=function(d,c){this.initializeUrl(c);this.placeCursorRightOf();d.execCommand(goog.editor.Command.UPDATE_LINK_BUBBLE)};goog.editor.Link.prototype.getValidLinkFromText=function(){var b=this.getCurrentText();return goog.editor.Link.isLikelyUrl(b)?0>b.search(/:/)?"http://"+goog.string.trimLeft(b):b:goog.editor.Link.isLikelyEmailAddress(b)?"mailto:"+b:null};goog.editor.Link.prototype.finishLinkCreation=function(d){var c=this.getValidLinkFromText();c?this.updateLinkDisplay_(d,c):d.execCommand(goog.editor.Command.MODAL_LINK_EDITOR,this)};goog.editor.Link.createNewLink=function(g,f,j,i){var h=new goog.editor.Link(g,!0);h.initializeUrl(f);j&&(g.target=j);i&&(h.extraAnchors_=i);return h};goog.editor.Link.isLikelyUrl=function(e){if(/\s/.test(e)||goog.editor.Link.isLikelyEmailAddress(e)){return !1}var d=!1;/^[^:\/?#.]+:/.test(e)||(e="http://"+e,d=!0);e=goog.uri.utils.split(e);if(-1!=goog.array.indexOf(["mailto","aim"],e[goog.uri.utils.ComponentIndex.SCHEME])){return !0}var f=e[goog.uri.utils.ComponentIndex.DOMAIN];if(!f||d&&-1==f.indexOf(".")||/[^\w\d\-\u0100-\uffff.%]/.test(f)){return !1}d=e[goog.uri.utils.ComponentIndex.PATH];return !d||0==d.indexOf("/")};goog.editor.Link.LIKELY_EMAIL_ADDRESS_=/^[\w-]+(\.[\w-]+)*\@([\w-]+\.)+(\d+|\w\w+)$/i;goog.editor.Link.isLikelyEmailAddress=function(b){return goog.editor.Link.LIKELY_EMAIL_ADDRESS_.test(b)};goog.editor.Link.isMailto=function(b){return !!b&&goog.string.startsWith(b,"mailto:")};goog.events.EventHandler=function(b){goog.Disposable.call(this);this.handler_=b;this.keys_=[]};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(i,h,n,m,l){goog.isArray(h)||(goog.events.EventHandler.typeArray_[0]=h,h=goog.events.EventHandler.typeArray_);for(var k=0;k<h.length;k++){var j=goog.events.listen(i,h[k],n||this,m||!1,l||this.handler_||this);this.keys_.push(j)}return this};goog.events.EventHandler.prototype.listenOnce=function(h,g,l,k,j){if(goog.isArray(g)){for(var i=0;i<g.length;i++){this.listenOnce(h,g[i],l,k,j)}}else{h=goog.events.listenOnce(h,g,l||this,k,j||this.handler_||this),this.keys_.push(h)}return this};goog.events.EventHandler.prototype.listenWithWrapper=function(g,f,j,i,h){f.listen(g,j,i,h||this.handler_||this,this);return this};goog.events.EventHandler.prototype.getListenerCount=function(){return this.keys_.length};goog.events.EventHandler.prototype.unlisten=function(h,g,l,k,j){if(goog.isArray(g)){for(var i=0;i<g.length;i++){this.unlisten(h,g[i],l,k,j)}}else{if(h=goog.events.getListener(h,g,l||this,k,j||this.handler_||this)){h=h.key,goog.events.unlistenByKey(h),goog.array.remove(this.keys_,h)}}return this};goog.events.EventHandler.prototype.unlistenWithWrapper=function(g,f,j,i,h){f.unlisten(g,j,i,h||this.handler_||this,this);return this};goog.events.EventHandler.prototype.removeAll=function(){goog.array.forEach(this.keys_,goog.events.unlistenByKey);this.keys_.length=0};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};goog.events.EventHandler.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};goog.style.bidi={};goog.style.bidi.getScrollLeft=function(d){var c=goog.style.isRightToLeft(d);return c&&goog.userAgent.GECKO?-d.scrollLeft:c&&(!goog.userAgent.IE||!goog.userAgent.isVersion("8"))?d.scrollWidth-d.clientWidth-d.scrollLeft:d.scrollLeft};goog.style.bidi.getOffsetStart=function(f){var e=f.offsetLeft,h=f.offsetParent;!h&&"fixed"==goog.style.getComputedPosition(f)&&(h=goog.dom.getOwnerDocument(f).documentElement);if(!h){return e}if(goog.userAgent.GECKO){var g=goog.style.getBorderBox(h),e=e+g.left}else{goog.userAgent.isDocumentMode(8)&&(g=goog.style.getBorderBox(h),e-=g.left)}return goog.style.isRightToLeft(h)?h.clientWidth-(e+f.offsetWidth):e};goog.style.bidi.setScrollOffset=function(d,c){c=Math.max(c,0);d.scrollLeft=goog.style.isRightToLeft(d)?goog.userAgent.GECKO?-c:!goog.userAgent.IE||!goog.userAgent.isVersion("8")?d.scrollWidth-c-d.clientWidth:c:c};goog.style.bidi.setPosition=function(f,e,h,g){goog.isNull(h)||(f.style.top=h+"px");g?(f.style.right=e+"px",f.style.left=""):(f.style.left=e+"px",f.style.right="")};goog.fx={};goog.fx.Dragger=function(e,d,f){goog.events.EventTarget.call(this);this.target=e;this.handle=d||e;this.limits=f||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(e);this.eventHandler_=new goog.events.EventHandler(this);goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this)};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9.3");goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.clientX=0;goog.fx.Dragger.prototype.clientY=0;goog.fx.Dragger.prototype.screenX=0;goog.fx.Dragger.prototype.screenY=0;goog.fx.Dragger.prototype.startX=0;goog.fx.Dragger.prototype.startY=0;goog.fx.Dragger.prototype.deltaX=0;goog.fx.Dragger.prototype.deltaY=0;goog.fx.Dragger.prototype.enabled_=!0;goog.fx.Dragger.prototype.dragging_=!1;goog.fx.Dragger.prototype.hysteresisDistanceSquared_=0;goog.fx.Dragger.prototype.mouseDownTime_=0;goog.fx.Dragger.prototype.ieDragStartCancellingOn_=!1;goog.fx.Dragger.prototype.useRightPositioningForRtl_=!1;goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(b){this.useRightPositioningForRtl_=b};goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_};goog.fx.Dragger.prototype.setLimits=function(b){this.limits=b||new goog.math.Rect(NaN,NaN,NaN,NaN)};goog.fx.Dragger.prototype.setHysteresis=function(b){this.hysteresisDistanceSquared_=Math.pow(b,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(b){this.scrollTarget_=b};goog.fx.Dragger.prototype.setCancelIeDragStart=function(b){this.ieDragStartCancellingOn_=b};goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};goog.fx.Dragger.prototype.setEnabled=function(b){this.enabled_=b};goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.cleanUpAfterDragging_();this.eventHandler_=this.handle=this.target=null};goog.fx.Dragger.prototype.isRightToLeft_=function(){goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.target));return this.rightToLeft_};goog.fx.Dragger.prototype.startDrag=function(d){var c=d.type==goog.events.EventType.MOUSEDOWN;if(this.enabled_&&!this.dragging_&&(!c||d.isMouseActionButton())){this.maybeReinitTouchEvent_(d);if(0==this.hysteresisDistanceSquared_){if(this.fireDragStart_(d)){this.dragging_=!0,d.preventDefault()}else{return}}else{d.preventDefault()}this.setupDragHandlers();this.clientX=this.startX=d.clientX;this.clientY=this.startY=d.clientY;this.screenX=d.screenX;this.screenY=d.screenY;this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll();this.mouseDownTime_=goog.now()}else{this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)}};goog.fx.Dragger.prototype.setupDragHandlers=function(){var e=this.document_,d=e.documentElement,f=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(e,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,f);this.eventHandler_.listen(e,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,f);goog.fx.Dragger.HAS_SET_CAPTURE_?(d.setCapture(!1),this.eventHandler_.listen(d,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(e),goog.events.EventType.BLUR,this.endDrag);goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(e,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault);this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,f)};goog.fx.Dragger.prototype.fireDragStart_=function(b){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,b.clientX,b.clientY,b))};goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll();goog.fx.Dragger.HAS_SET_CAPTURE_&&this.document_.releaseCapture()};goog.fx.Dragger.prototype.endDrag=function(f,e){this.cleanUpAfterDragging_();if(this.dragging_){this.maybeReinitTouchEvent_(f);this.dragging_=!1;var h=this.limitX(this.deltaX),g=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,f.clientX,f.clientY,f,h,g,e||f.type==goog.events.EventType.TOUCHCANCEL))}else{this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)}(f.type==goog.events.EventType.TOUCHEND||f.type==goog.events.EventType.TOUCHCANCEL)&&f.preventDefault()};goog.fx.Dragger.prototype.endDragCancel=function(b){this.endDrag(b,!0)};goog.fx.Dragger.prototype.maybeReinitTouchEvent_=function(d){var c=d.type;c==goog.events.EventType.TOUCHSTART||c==goog.events.EventType.TOUCHMOVE?d.init(d.getBrowserEvent().targetTouches[0],d.currentTarget):(c==goog.events.EventType.TOUCHEND||c==goog.events.EventType.TOUCHCANCEL)&&d.init(d.getBrowserEvent().changedTouches[0],d.currentTarget)};goog.fx.Dragger.prototype.handleMove_=function(g){if(this.enabled_){this.maybeReinitTouchEvent_(g);var f=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(g.clientX-this.clientX),j=g.clientY-this.clientY;this.clientX=g.clientX;this.clientY=g.clientY;this.screenX=g.screenX;this.screenY=g.screenY;if(!this.dragging_){var i=this.startX-this.clientX,h=this.startY-this.clientY;if(i*i+h*h>this.hysteresisDistanceSquared_){if(this.fireDragStart_(g)){this.dragging_=!0}else{this.isDisposed()||this.endDrag(g);return}}}j=this.calculatePosition_(f,j);f=j.x;j=j.y;this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,g.clientX,g.clientY,g,f,j))&&(this.doDrag(g,f,j,!1),g.preventDefault())}};goog.fx.Dragger.prototype.calculatePosition_=function(f,e){var h=goog.dom.getDomHelper(this.document_).getDocumentScroll();f+=h.x-this.pageScroll.x;e+=h.y-this.pageScroll.y;this.pageScroll=h;this.deltaX+=f;this.deltaY+=e;var h=this.limitX(this.deltaX),g=this.limitY(this.deltaY);return new goog.math.Coordinate(h,g)};goog.fx.Dragger.prototype.onScroll_=function(d){var c=this.calculatePosition_(0,0);d.clientX=this.clientX;d.clientY=this.clientY;this.doDrag(d,c.x,c.y,!0)};goog.fx.Dragger.prototype.doDrag=function(e,d,f){this.defaultAction(d,f);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,e.clientX,e.clientY,e,d,f))};goog.fx.Dragger.prototype.limitX=function(e){var d=this.limits,f=!isNaN(d.left)?d.left:null,d=!isNaN(d.width)?d.width:0;return Math.min(null!=f?f+d:Infinity,Math.max(null!=f?f:-Infinity,e))};goog.fx.Dragger.prototype.limitY=function(e){var d=this.limits,f=!isNaN(d.top)?d.top:null,d=!isNaN(d.height)?d.height:0;return Math.min(null!=f?f+d:Infinity,Math.max(null!=f?f:-Infinity,e))};goog.fx.Dragger.prototype.defaultAction=function(d,c){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=d+"px":this.target.style.left=d+"px";this.target.style.top=c+"px"};goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_};goog.fx.DragEvent=function(j,i,p,o,n,m,l,k){goog.events.Event.call(this,j);this.clientX=p;this.clientY=o;this.browserEvent=n;this.left=goog.isDef(m)?m:i.deltaX;this.top=goog.isDef(l)?l:i.deltaY;this.dragger=i;this.dragCanceled=!!k};goog.inherits(goog.fx.DragEvent,goog.events.Event);goog.ui={};goog.ui.IdGenerator=function(){};goog.addSingletonGetter(goog.ui.IdGenerator);goog.ui.IdGenerator.prototype.nextId_=0;goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return":"+(this.nextId_++).toString(36)};goog.ui.IdGenerator.instance=goog.ui.IdGenerator.getInstance();goog.ui.Component=function(b){goog.events.EventTarget.call(this);this.dom_=b||goog.dom.getDomHelper();this.rightToLeft_=goog.ui.Component.defaultRightToLeft_};goog.inherits(goog.ui.Component,goog.events.EventTarget);goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance();goog.ui.Component.defaultRightToLeft_=null;goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"};goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"};goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64};goog.ui.Component.getStateTransitionEvent=function(d,c){switch(d){case goog.ui.Component.State.DISABLED:return c?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return c?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return c?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return c?goog.ui.Component.EventType.SELECT:goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return c?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return c?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return c?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID)};goog.ui.Component.setDefaultRightToLeft=function(b){goog.ui.Component.defaultRightToLeft_=b};goog.ui.Component.prototype.id_=null;goog.ui.Component.prototype.inDocument_=!1;goog.ui.Component.prototype.element_=null;goog.ui.Component.prototype.rightToLeft_=null;goog.ui.Component.prototype.model_=null;goog.ui.Component.prototype.parent_=null;goog.ui.Component.prototype.children_=null;goog.ui.Component.prototype.childIndex_=null;goog.ui.Component.prototype.wasDecorated_=!1;goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())};goog.ui.Component.prototype.setId=function(b){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,b,this));this.id_=b};goog.ui.Component.prototype.getElement=function(){return this.element_};goog.ui.Component.prototype.getElementStrict=function(){var b=this.element_;goog.asserts.assert(b,"Can not call getElementStrict before rendering/decorating.");return b};goog.ui.Component.prototype.setElementInternal=function(b){this.element_=b};goog.ui.Component.prototype.getElementsByClass=function(b){return this.element_?this.dom_.getElementsByClass(b,this.element_):[]};goog.ui.Component.prototype.getElementByClass=function(b){return this.element_?this.dom_.getElementByClass(b,this.element_):null};goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this))};goog.ui.Component.prototype.setParent=function(b){if(this==b){throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET)}if(b&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=b){throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET)}this.parent_=b;goog.ui.Component.superClass_.setParentEventTarget.call(this,b)};goog.ui.Component.prototype.getParent=function(){return this.parent_};goog.ui.Component.prototype.setParentEventTarget=function(b){if(this.parent_&&this.parent_!=b){throw Error(goog.ui.Component.Error.NOT_SUPPORTED)}goog.ui.Component.superClass_.setParentEventTarget.call(this,b)};goog.ui.Component.prototype.getDomHelper=function(){return this.dom_};goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_};goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("div")};goog.ui.Component.prototype.render=function(b){this.render_(b)};goog.ui.Component.prototype.renderBefore=function(b){this.render_(b.parentNode,b)};goog.ui.Component.prototype.render_=function(d,c){if(this.inDocument_){throw Error(goog.ui.Component.Error.ALREADY_RENDERED)}this.element_||this.createDom();d?d.insertBefore(this.element_,c||null):this.dom_.getDocument().body.appendChild(this.element_);(!this.parent_||this.parent_.isInDocument())&&this.enterDocument()};goog.ui.Component.prototype.decorate=function(b){if(this.inDocument_){throw Error(goog.ui.Component.Error.ALREADY_RENDERED)}if(b&&this.canDecorate(b)){this.wasDecorated_=!0;if(!this.dom_||this.dom_.getDocument()!=goog.dom.getOwnerDocument(b)){this.dom_=goog.dom.getDomHelper(b)}this.decorateInternal(b);this.enterDocument()}else{throw Error(goog.ui.Component.Error.DECORATE_INVALID)}};goog.ui.Component.prototype.canDecorate=function(){return !0};goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_};goog.ui.Component.prototype.decorateInternal=function(b){this.element_=b};goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(b){!b.isInDocument()&&b.getElement()&&b.enterDocument()})};goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(b){b.isInDocument()&&b.exitDocument()});this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll();this.inDocument_=!1};goog.ui.Component.prototype.disposeInternal=function(){goog.ui.Component.superClass_.disposeInternal.call(this);this.inDocument_&&this.exitDocument();this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_);this.forEachChild(function(b){b.dispose()});!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_);this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null};goog.ui.Component.prototype.makeId=function(b){return this.getId()+"."+b};goog.ui.Component.prototype.makeIds=function(e){var d={},f;for(f in e){d[f]=this.makeId(e[f])}return d};goog.ui.Component.prototype.getModel=function(){return this.model_};goog.ui.Component.prototype.setModel=function(b){this.model_=b};goog.ui.Component.prototype.getFragmentFromId=function(b){return b.substring(this.getId().length+1)};goog.ui.Component.prototype.getElementByFragment=function(b){if(!this.inDocument_){throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT)}return this.dom_.getElement(this.makeId(b))};goog.ui.Component.prototype.addChild=function(d,c){this.addChildAt(d,this.getChildCount(),c)};goog.ui.Component.prototype.addChildAt=function(e,d,f){if(e.inDocument_&&(f||!this.inDocument_)){throw Error(goog.ui.Component.Error.ALREADY_RENDERED)}if(0>d||d>this.getChildCount()){throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS)}if(!this.childIndex_||!this.children_){this.childIndex_={},this.children_=[]}e.getParent()==this?(goog.object.set(this.childIndex_,e.getId(),e),goog.array.remove(this.children_,e)):goog.object.add(this.childIndex_,e.getId(),e);e.setParent(this);goog.array.insertAt(this.children_,e,d);e.inDocument_&&this.inDocument_&&e.getParent()==this?(f=this.getContentElement(),f.insertBefore(e.getElement(),f.childNodes[d]||null)):f?(this.element_||this.createDom(),d=this.getChildAt(d+1),e.render_(this.getContentElement(),d?d.element_:null)):this.inDocument_&&(!e.inDocument_&&e.element_&&e.element_.parentNode&&e.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT)&&e.enterDocument()};goog.ui.Component.prototype.getContentElement=function(){return this.element_};goog.ui.Component.prototype.isRightToLeft=function(){null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body));return this.rightToLeft_};goog.ui.Component.prototype.setRightToLeft=function(b){if(this.inDocument_){throw Error(goog.ui.Component.Error.ALREADY_RENDERED)}this.rightToLeft_=b};goog.ui.Component.prototype.hasChildren=function(){return !!this.children_&&0!=this.children_.length};goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0};goog.ui.Component.prototype.getChildIds=function(){var b=[];this.forEachChild(function(a){b.push(a.getId())});return b};goog.ui.Component.prototype.getChild=function(b){return this.childIndex_&&b?goog.object.get(this.childIndex_,b)||null:null};goog.ui.Component.prototype.getChildAt=function(b){return this.children_?this.children_[b]||null:null};goog.ui.Component.prototype.forEachChild=function(d,c){this.children_&&goog.array.forEach(this.children_,d,c)};goog.ui.Component.prototype.indexOfChild=function(b){return this.children_&&b?goog.array.indexOf(this.children_,b):-1};goog.ui.Component.prototype.removeChild=function(e,d){if(e){var f=goog.isString(e)?e:e.getId();e=this.getChild(f);f&&e&&(goog.object.remove(this.childIndex_,f),goog.array.remove(this.children_,e),d&&(e.exitDocument(),e.element_&&goog.dom.removeNode(e.element_)),e.setParent(null))}if(!e){throw Error(goog.ui.Component.Error.NOT_OUR_CHILD)}return e};goog.ui.Component.prototype.removeChildAt=function(d,c){return this.removeChild(this.getChildAt(d),c)};goog.ui.Component.prototype.removeChildren=function(d){for(var c=[];this.hasChildren();){c.push(this.removeChildAt(0,d))}return c};goog.Timer=function(d,c){goog.events.EventTarget.call(this);this.interval_=d||1;this.timerObject_=c||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.prototype.enabled=!1;goog.Timer.defaultTimerObject=goog.global;goog.Timer.intervalScale=0.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};goog.Timer.prototype.setInterval=function(b){this.interval_=b;this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()};goog.Timer.prototype.tick_=function(){if(this.enabled){var b=goog.now()-this.last_;0<b&&b<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-b):(this.dispatchTick(),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now()))}};goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};goog.Timer.prototype.start=function(){this.enabled=!0;this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())};goog.Timer.prototype.stop=function(){this.enabled=!1;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};goog.Timer.TICK="tick";goog.Timer.callOnce=function(e,d,f){if(goog.isFunction(e)){f&&(e=goog.bind(e,f))}else{if(e&&"function"==typeof e.handleEvent){e=goog.bind(e.handleEvent,e)}else{throw Error("Invalid listener argument")}}return d>goog.Timer.MAX_TIMEOUT_?-1:goog.Timer.defaultTimerObject.setTimeout(e,d||0)};goog.Timer.clear=function(b){goog.Timer.defaultTimerObject.clearTimeout(b)};goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,PHANTOM:255};goog.events.KeyCodes.isTextModifyingKeyEvent=function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=goog.events.KeyCodes.F1&&b.keyCode<=goog.events.KeyCodes.F12){return !1}switch(b.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return !1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return !goog.userAgent.GECKO;default:return b.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||b.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};goog.events.KeyCodes.firesKeyPressEvent=function(g,f,j,i,h){if(!goog.userAgent.IE&&(!goog.userAgent.WEBKIT||!goog.userAgent.isVersion("525"))){return !0}if(goog.userAgent.MAC&&h){return goog.events.KeyCodes.isCharacterKey(g)}if(h&&!i||!j&&(f==goog.events.KeyCodes.CTRL||f==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&f==goog.events.KeyCodes.META)){return !1}if(goog.userAgent.WEBKIT&&i&&j){switch(g){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return !1}}if(goog.userAgent.IE&&i&&f==g){return !1}switch(g){case goog.events.KeyCodes.ENTER:return !(goog.userAgent.IE&&goog.userAgent.isDocumentMode(9));case goog.events.KeyCodes.ESC:return !goog.userAgent.WEBKIT}return goog.events.KeyCodes.isCharacterKey(g)};goog.events.KeyCodes.isCharacterKey=function(b){if(b>=goog.events.KeyCodes.ZERO&&b<=goog.events.KeyCodes.NINE||b>=goog.events.KeyCodes.NUM_ZERO&&b<=goog.events.KeyCodes.NUM_MULTIPLY||b>=goog.events.KeyCodes.A&&b<=goog.events.KeyCodes.Z||goog.userAgent.WEBKIT&&0==b){return !0}switch(b){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return !0;default:return !1}};goog.events.KeyCodes.normalizeGeckoKeyCode=function(b){switch(b){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return b}};goog.fx.Transition=function(){};goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"};goog.ui.PopupBase=function(d,c){goog.events.EventTarget.call(this);this.handler_=new goog.events.EventHandler(this);this.setElement(d||null);c&&this.setType(c)};goog.inherits(goog.ui.PopupBase,goog.events.EventTarget);goog.ui.PopupBase.Type={TOGGLE_DISPLAY:"toggle_display",MOVE_OFFSCREEN:"move_offscreen"};goog.ui.PopupBase.prototype.element_=null;goog.ui.PopupBase.prototype.autoHide_=!0;goog.ui.PopupBase.prototype.autoHideRegion_=null;goog.ui.PopupBase.prototype.isVisible_=!1;goog.ui.PopupBase.prototype.shouldHideAsync_=!1;goog.ui.PopupBase.prototype.lastShowTime_=-1;goog.ui.PopupBase.prototype.lastHideTime_=-1;goog.ui.PopupBase.prototype.hideOnEscape_=!1;goog.ui.PopupBase.prototype.enableCrossIframeDismissal_=!0;goog.ui.PopupBase.prototype.type_=goog.ui.PopupBase.Type.TOGGLE_DISPLAY;goog.ui.PopupBase.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",BEFORE_HIDE:"beforehide",HIDE:"hide"};goog.ui.PopupBase.DEBOUNCE_DELAY_MS=150;goog.ui.PopupBase.prototype.getType=function(){return this.type_};goog.ui.PopupBase.prototype.setType=function(b){this.type_=b};goog.ui.PopupBase.prototype.shouldHideAsync=function(){return this.shouldHideAsync_};goog.ui.PopupBase.prototype.setShouldHideAsync=function(b){this.shouldHideAsync_=b};goog.ui.PopupBase.prototype.getElement=function(){return this.element_};goog.ui.PopupBase.prototype.setElement=function(b){this.ensureNotVisible_();this.element_=b};goog.ui.PopupBase.prototype.getAutoHide=function(){return this.autoHide_};goog.ui.PopupBase.prototype.setAutoHide=function(b){this.ensureNotVisible_();this.autoHide_=b};goog.ui.PopupBase.prototype.getHideOnEscape=function(){return this.hideOnEscape_};goog.ui.PopupBase.prototype.setHideOnEscape=function(b){this.ensureNotVisible_();this.hideOnEscape_=b};goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal=function(){return this.enableCrossIframeDismissal_};goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal=function(b){this.enableCrossIframeDismissal_=b};goog.ui.PopupBase.prototype.getAutoHideRegion=function(){return this.autoHideRegion_};goog.ui.PopupBase.prototype.setAutoHideRegion=function(b){this.autoHideRegion_=b};goog.ui.PopupBase.prototype.setTransition=function(d,c){this.showTransition_=d;this.hideTransition_=c};goog.ui.PopupBase.prototype.getLastShowTime=function(){return this.lastShowTime_};goog.ui.PopupBase.prototype.getLastHideTime=function(){return this.lastHideTime_};goog.ui.PopupBase.prototype.ensureNotVisible_=function(){if(this.isVisible_){throw Error("Can not change this state of the popup while showing.")}};goog.ui.PopupBase.prototype.isVisible=function(){return this.isVisible_};goog.ui.PopupBase.prototype.isOrWasRecentlyVisible=function(){return this.isVisible_||goog.now()-this.lastHideTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};goog.ui.PopupBase.prototype.setVisible=function(b){this.showTransition_&&this.showTransition_.stop();this.hideTransition_&&this.hideTransition_.stop();b?this.show_():this.hide_()};goog.ui.PopupBase.prototype.reposition=goog.nullFunction;goog.ui.PopupBase.prototype.show_=function(){if(!this.isVisible_&&this.onBeforeShow()){if(!this.element_){throw Error("Caller must call setElement before trying to show the popup")}this.reposition();var g=goog.dom.getOwnerDocument(this.element_);this.hideOnEscape_&&this.handler_.listen(g,goog.events.EventType.KEYDOWN,this.onDocumentKeyDown_,!0);if(this.autoHide_){if(this.handler_.listen(g,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),goog.userAgent.IE){var f;try{f=g.activeElement}catch(j){}for(;f&&"IFRAME"==f.nodeName;){try{var i=goog.dom.getFrameContentDocument(f)}catch(h){break}g=i;f=g.activeElement}this.handler_.listen(g,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0);this.handler_.listen(g,goog.events.EventType.DEACTIVATE,this.onDocumentBlur_)}else{this.handler_.listen(g,goog.events.EventType.BLUR,this.onDocumentBlur_)}}this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.showPopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.reposition();this.isVisible_=!0;if(this.showTransition_){goog.events.listenOnce(this.showTransition_,goog.fx.Transition.EventType.END,this.onShow_,!1,this),this.showTransition_.play()}else{this.onShow_()}}};goog.ui.PopupBase.prototype.hide_=function(b){if(!this.isVisible_||!this.onBeforeHide_(b)){return !1}this.handler_&&this.handler_.removeAll();this.isVisible_=!1;this.lastHideTime_=goog.now();this.hideTransition_?(goog.events.listenOnce(this.hideTransition_,goog.fx.Transition.EventType.END,goog.partial(this.continueHidingPopup_,b),!1,this),this.hideTransition_.play()):this.continueHidingPopup_(b);return !0};goog.ui.PopupBase.prototype.continueHidingPopup_=function(b){this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.shouldHideAsync_?goog.Timer.callOnce(this.hidePopupElement_,0,this):this.hidePopupElement_():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.moveOffscreen_();this.onHide_(b)};goog.ui.PopupBase.prototype.showPopupElement=function(){this.element_.style.visibility="visible";goog.style.showElement(this.element_,!0)};goog.ui.PopupBase.prototype.hidePopupElement_=function(){this.element_.style.visibility="hidden";goog.style.showElement(this.element_,!1)};goog.ui.PopupBase.prototype.moveOffscreen_=function(){this.element_.style.top="-10000px"};goog.ui.PopupBase.prototype.onBeforeShow=function(){return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)};goog.ui.PopupBase.prototype.onShow_=function(){this.lastShowTime_=goog.now();this.lastHideTime_=-1;this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};goog.ui.PopupBase.prototype.onBeforeHide_=function(b){return this.dispatchEvent({type:goog.ui.PopupBase.EventType.BEFORE_HIDE,target:b})};goog.ui.PopupBase.prototype.onHide_=function(b){this.dispatchEvent({type:goog.ui.PopupBase.EventType.HIDE,target:b})};goog.ui.PopupBase.prototype.onDocumentMouseDown_=function(b){b=b.target;!goog.dom.contains(this.element_,b)&&((!this.autoHideRegion_||goog.dom.contains(this.autoHideRegion_,b))&&!this.shouldDebounce_())&&this.hide_(b)};goog.ui.PopupBase.prototype.onDocumentKeyDown_=function(b){b.keyCode==goog.events.KeyCodes.ESC&&this.hide_(b.target)&&(b.preventDefault(),b.stopPropagation())};goog.ui.PopupBase.prototype.onDocumentBlur_=function(d){if(this.enableCrossIframeDismissal_){var c=goog.dom.getOwnerDocument(this.element_);if(goog.userAgent.IE||goog.userAgent.OPERA){if(d=c.activeElement,!d||goog.dom.contains(this.element_,d)||"BODY"==d.tagName){return}}else{if(d.target!=c){return}}this.shouldDebounce_()||this.hide_()}};goog.ui.PopupBase.prototype.shouldDebounce_=function(){return goog.now()-this.lastShowTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};goog.ui.PopupBase.prototype.disposeInternal=function(){goog.ui.PopupBase.superClass_.disposeInternal.call(this);this.handler_.dispose();goog.dispose(this.showTransition_);goog.dispose(this.hideTransition_);delete this.element_;delete this.handler_};goog.events.FocusHandler=function(b){goog.events.EventTarget.call(this);this.element_=b;b=goog.userAgent.IE?"focusout":"blur";this.listenKeyIn_=goog.events.listen(this.element_,goog.userAgent.IE?"focusin":"focus",this,!goog.userAgent.IE);this.listenKeyOut_=goog.events.listen(this.element_,b,this,!goog.userAgent.IE)};goog.inherits(goog.events.FocusHandler,goog.events.EventTarget);goog.events.FocusHandler.EventType={FOCUSIN:"focusin",FOCUSOUT:"focusout"};goog.events.FocusHandler.prototype.handleEvent=function(d){var c=d.getBrowserEvent(),c=new goog.events.BrowserEvent(c);c.type="focusin"==d.type||"focus"==d.type?goog.events.FocusHandler.EventType.FOCUSIN:goog.events.FocusHandler.EventType.FOCUSOUT;this.dispatchEvent(c)};goog.events.FocusHandler.prototype.disposeInternal=function(){goog.events.FocusHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKeyIn_);goog.events.unlistenByKey(this.listenKeyOut_);delete this.element_};goog.dom.iframe={};goog.dom.iframe.BLANK_SOURCE='javascript:""';goog.dom.iframe.STYLES_="border:0;vertical-align:bottom;";goog.dom.iframe.createBlank=function(d,c){return d.createDom("iframe",{frameborder:0,style:goog.dom.iframe.STYLES_+(c||""),src:goog.dom.iframe.BLANK_SOURCE})};goog.dom.iframe.writeContent=function(e,d){var f=goog.dom.getFrameContentDocument(e);f.open();f.write(d);f.close()};goog.dom.iframe.createWithContent=function(i,h,n,m,l){var k=goog.dom.getDomHelper(i),j=[];l||j.push("<!DOCTYPE html>");j.push("<html><head>",h,"</head><body>",n,"</body></html>");h=goog.dom.iframe.createBlank(k,m);i.appendChild(h);goog.dom.iframe.writeContent(h,j.join(""));return h};goog.ui.ModalPopup=function(d,c){goog.ui.Component.call(this,c);this.useIframeMask_=!!d};goog.inherits(goog.ui.ModalPopup,goog.ui.Component);goog.ui.ModalPopup.prototype.focusHandler_=null;goog.ui.ModalPopup.prototype.visible_=!1;goog.ui.ModalPopup.prototype.bgEl_=null;goog.ui.ModalPopup.prototype.bgIframeEl_=null;goog.ui.ModalPopup.prototype.tabCatcherElement_=null;goog.ui.ModalPopup.prototype.getCssClass=function(){return"goog-modalpopup"};goog.ui.ModalPopup.prototype.getBackgroundIframe=function(){return this.bgIframeEl_};goog.ui.ModalPopup.prototype.getBackgroundElement=function(){return this.bgEl_};goog.ui.ModalPopup.prototype.createDom=function(){goog.ui.ModalPopup.superClass_.createDom.call(this);var b=this.getElement();goog.dom.classes.add(b,this.getCssClass());goog.dom.setFocusableTabIndex(b,!0);goog.style.showElement(b,!1);this.manageBackgroundDom_();this.createTabCatcher_()};goog.ui.ModalPopup.prototype.manageBackgroundDom_=function(){this.useIframeMask_&&!this.bgIframeEl_&&(this.bgIframeEl_=goog.dom.iframe.createBlank(this.getDomHelper()),this.bgIframeEl_.className=this.getCssClass()+"-bg",goog.style.showElement(this.bgIframeEl_,!1),goog.style.setOpacity(this.bgIframeEl_,0));this.bgEl_||(this.bgEl_=this.getDomHelper().createDom("div",this.getCssClass()+"-bg"),goog.style.showElement(this.bgEl_,!1))};goog.ui.ModalPopup.prototype.createTabCatcher_=function(){this.tabCatcherElement_||(this.tabCatcherElement_=this.getDomHelper().createElement("span"),goog.style.showElement(this.tabCatcherElement_,!1),goog.dom.setFocusableTabIndex(this.tabCatcherElement_,!0),this.tabCatcherElement_.style.position="absolute")};goog.ui.ModalPopup.prototype.renderBackground_=function(){goog.asserts.assert(!!this.bgEl_,"Background element must not be null.");this.bgIframeEl_&&goog.dom.insertSiblingBefore(this.bgIframeEl_,this.getElement());goog.dom.insertSiblingBefore(this.bgEl_,this.getElement())};goog.ui.ModalPopup.prototype.canDecorate=function(b){return !!b&&b.tagName==goog.dom.TagName.DIV};goog.ui.ModalPopup.prototype.decorateInternal=function(b){goog.ui.ModalPopup.superClass_.decorateInternal.call(this,b);goog.dom.classes.add(this.getElement(),this.getCssClass());this.manageBackgroundDom_();this.createTabCatcher_();goog.style.showElement(this.getElement(),!1)};goog.ui.ModalPopup.prototype.enterDocument=function(){this.renderBackground_();goog.ui.ModalPopup.superClass_.enterDocument.call(this);goog.dom.insertSiblingAfter(this.tabCatcherElement_,this.getElement());this.focusHandler_=new goog.events.FocusHandler(this.getDomHelper().getDocument());this.getHandler().listen(this.focusHandler_,goog.events.FocusHandler.EventType.FOCUSIN,this.onFocus_)};goog.ui.ModalPopup.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);goog.dispose(this.focusHandler_);goog.ui.ModalPopup.superClass_.exitDocument.call(this);goog.dom.removeNode(this.bgIframeEl_);goog.dom.removeNode(this.bgEl_);goog.dom.removeNode(this.tabCatcherElement_)};goog.ui.ModalPopup.prototype.setVisible=function(b){goog.asserts.assert(this.isInDocument(),"ModalPopup must be rendered first.");b!=this.visible_&&(this.popupShowTransition_&&this.popupShowTransition_.stop(),this.bgShowTransition_&&this.bgShowTransition_.stop(),this.popupHideTransition_&&this.popupHideTransition_.stop(),this.bgHideTransition_&&this.bgHideTransition_.stop(),b?this.show_():this.hide_())};goog.ui.ModalPopup.prototype.setTransition=function(f,e,h,g){this.popupShowTransition_=f;this.popupHideTransition_=e;this.bgShowTransition_=h;this.bgHideTransition_=g};goog.ui.ModalPopup.prototype.show_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)){if(this.resizeBackground_(),this.reposition(),this.getHandler().listen(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_),this.showPopupElement_(!0),this.focus(),this.visible_=!0,this.popupShowTransition_&&this.bgShowTransition_){goog.events.listenOnce(this.popupShowTransition_,goog.fx.Transition.EventType.END,this.onShow,!1,this),this.bgShowTransition_.play(),this.popupShowTransition_.play()}else{this.onShow()}}};goog.ui.ModalPopup.prototype.hide_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_HIDE)){if(this.getHandler().unlisten(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_),this.visible_=!1,this.popupHideTransition_&&this.bgHideTransition_){goog.events.listenOnce(this.popupHideTransition_,goog.fx.Transition.EventType.END,this.onHide,!1,this),this.bgHideTransition_.play(),this.popupHideTransition_.play()}else{this.onHide()}}};goog.ui.ModalPopup.prototype.showPopupElement_=function(b){this.bgIframeEl_&&goog.style.showElement(this.bgIframeEl_,b);this.bgEl_&&goog.style.showElement(this.bgEl_,b);goog.style.showElement(this.getElement(),b);goog.style.showElement(this.tabCatcherElement_,b)};goog.ui.ModalPopup.prototype.onShow=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};goog.ui.ModalPopup.prototype.onHide=function(){this.showPopupElement_(!1);this.dispatchEvent(goog.ui.PopupBase.EventType.HIDE)};goog.ui.ModalPopup.prototype.isVisible=function(){return this.visible_};goog.ui.ModalPopup.prototype.focus=function(){this.focusElement_()};goog.ui.ModalPopup.prototype.resizeBackground_=function(){this.bgIframeEl_&&goog.style.showElement(this.bgIframeEl_,!1);this.bgEl_&&goog.style.showElement(this.bgEl_,!1);var e=this.getDomHelper().getDocument(),d=goog.dom.getWindow(e)||window,f=goog.dom.getViewportSize(d),d=Math.max(f.width,Math.max(e.body.scrollWidth,e.documentElement.scrollWidth)),e=Math.max(f.height,Math.max(e.body.scrollHeight,e.documentElement.scrollHeight));this.bgIframeEl_&&(goog.style.showElement(this.bgIframeEl_,!0),goog.style.setSize(this.bgIframeEl_,d,e));this.bgEl_&&(goog.style.showElement(this.bgEl_,!0),goog.style.setSize(this.bgEl_,d,e))};goog.ui.ModalPopup.prototype.reposition=function(){var f=this.getDomHelper().getDocument(),e=goog.dom.getWindow(f)||window;if("fixed"==goog.style.getComputedPosition(this.getElement())){var h=f=0}else{h=this.getDomHelper().getDocumentScroll(),f=h.x,h=h.y}var g=goog.style.getSize(this.getElement()),e=goog.dom.getViewportSize(e),f=Math.max(f+e.width/2-g.width/2,0),h=Math.max(h+e.height/2-g.height/2,0);goog.style.setPosition(this.getElement(),f,h);goog.style.setPosition(this.tabCatcherElement_,f,h)};goog.ui.ModalPopup.prototype.onFocus_=function(b){b.target==this.tabCatcherElement_&&goog.Timer.callOnce(this.focusElement_,0,this)};goog.ui.ModalPopup.prototype.focusElement_=function(){try{goog.userAgent.IE&&this.getDomHelper().getDocument().body.focus(),this.getElement().focus()}catch(b){}};goog.ui.ModalPopup.prototype.disposeInternal=function(){goog.dispose(this.popupShowTransition_);this.popupShowTransition_=null;goog.dispose(this.popupHideTransition_);this.popupHideTransition_=null;goog.dispose(this.bgShowTransition_);this.bgShowTransition_=null;goog.dispose(this.bgHideTransition_);this.bgHideTransition_=null;goog.ui.ModalPopup.superClass_.disposeInternal.call(this)};goog.a11y={};goog.a11y.aria={};goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"};goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"};goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"};goog.a11y.aria.setRole=function(d,c){d.setAttribute("role",c)};goog.a11y.aria.getRole=function(b){return b.getAttribute("role")||""};goog.a11y.aria.setState=function(e,d,f){e.setAttribute("aria-"+d,f)};goog.a11y.aria.getState=function(e,d){var f=e.getAttribute("aria-"+d);return !0===f||!1===f?f?"true":"false":f?String(f):""};goog.a11y.aria.getActiveDescendant=function(d){var c=goog.a11y.aria.getState(d,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(d).getElementById(c)};goog.a11y.aria.setActiveDescendant=function(d,c){goog.a11y.aria.setState(d,goog.a11y.aria.State.ACTIVEDESCENDANT,c?c.id:"")};goog.a11y.aria.Announcer=function(b){goog.Disposable.call(this);this.domHelper_=b||goog.dom.getDomHelper();this.liveRegions_={}};goog.inherits(goog.a11y.aria.Announcer,goog.Disposable);goog.a11y.aria.Announcer.prototype.disposeInternal=function(){goog.object.forEach(this.liveRegions_,this.domHelper_.removeNode,this.domHelper_);this.domHelper_=this.liveRegions_=null;goog.a11y.aria.Announcer.superClass_.disposeInternal.call(this)};goog.a11y.aria.Announcer.prototype.say=function(d,c){goog.dom.setTextContent(this.getLiveRegion_(c||goog.a11y.aria.LivePriority.POLITE),d)};goog.a11y.aria.Announcer.prototype.getLiveRegion_=function(d){if(this.liveRegions_[d]){return this.liveRegions_[d]}var c;c=this.domHelper_.createElement("div");c.style.position="absolute";c.style.top="-1000px";goog.a11y.aria.setState(c,goog.a11y.aria.State.LIVE,d);goog.a11y.aria.setState(c,goog.a11y.aria.State.ATOMIC,"true");this.domHelper_.getDocument().body.appendChild(c);return this.liveRegions_[d]=c};goog.dom.a11y={};goog.dom.a11y.State=goog.a11y.aria.State;goog.dom.a11y.Role=goog.a11y.aria.Role;goog.dom.a11y.LivePriority=goog.a11y.aria.LivePriority;goog.dom.a11y.setRole=function(d,c){goog.a11y.aria.setRole(d,c)};goog.dom.a11y.getRole=function(b){return goog.a11y.aria.getRole(b)};goog.dom.a11y.setState=function(e,d,f){goog.a11y.aria.setState(e,d,f)};goog.dom.a11y.getState=function(d,c){return goog.a11y.aria.getState(d,c)};goog.dom.a11y.getActiveDescendant=function(b){return goog.a11y.aria.getActiveDescendant(b)};goog.dom.a11y.setActiveDescendant=function(d,c){goog.a11y.aria.setActiveDescendant(d,c)};goog.dom.a11y.Announcer=goog.a11y.aria.Announcer;goog.ui.Dialog=function(e,d,f){goog.ui.ModalPopup.call(this,d,f);this.class_=e||"modal-dialog";this.buttons_=goog.ui.Dialog.ButtonSet.createOkCancel()};goog.inherits(goog.ui.Dialog,goog.ui.ModalPopup);goog.ui.Dialog.prototype.escapeToCancel_=!0;goog.ui.Dialog.prototype.hasTitleCloseButton_=!0;goog.ui.Dialog.prototype.modal_=!0;goog.ui.Dialog.prototype.draggable_=!0;goog.ui.Dialog.prototype.backgroundElementOpacity_=0.5;goog.ui.Dialog.prototype.title_="";goog.ui.Dialog.prototype.content_="";goog.ui.Dialog.prototype.dragger_=null;goog.ui.Dialog.prototype.disposeOnHide_=!1;goog.ui.Dialog.prototype.titleEl_=null;goog.ui.Dialog.prototype.titleTextEl_=null;goog.ui.Dialog.prototype.titleId_=null;goog.ui.Dialog.prototype.titleCloseEl_=null;goog.ui.Dialog.prototype.contentEl_=null;goog.ui.Dialog.prototype.buttonEl_=null;goog.ui.Dialog.prototype.preferredAriaRole_=goog.dom.a11y.Role.DIALOG;goog.ui.Dialog.prototype.getCssClass=function(){return this.class_};goog.ui.Dialog.prototype.setTitle=function(b){this.title_=b;this.titleTextEl_&&goog.dom.setTextContent(this.titleTextEl_,b)};goog.ui.Dialog.prototype.getTitle=function(){return this.title_};goog.ui.Dialog.prototype.setContent=function(b){this.content_=b;this.contentEl_&&(this.contentEl_.innerHTML=b)};goog.ui.Dialog.prototype.getContent=function(){return this.content_};goog.ui.Dialog.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};goog.ui.Dialog.prototype.setPreferredAriaRole=function(b){this.preferredAriaRole_=b};goog.ui.Dialog.prototype.renderIfNoDom_=function(){this.getElement()||this.render()};goog.ui.Dialog.prototype.getContentElement=function(){this.renderIfNoDom_();return this.contentEl_};goog.ui.Dialog.prototype.getTitleElement=function(){this.renderIfNoDom_();return this.titleEl_};goog.ui.Dialog.prototype.getTitleTextElement=function(){this.renderIfNoDom_();return this.titleTextEl_};goog.ui.Dialog.prototype.getTitleCloseElement=function(){this.renderIfNoDom_();return this.titleCloseEl_};goog.ui.Dialog.prototype.getButtonElement=function(){this.renderIfNoDom_();return this.buttonEl_};goog.ui.Dialog.prototype.getDialogElement=function(){this.renderIfNoDom_();return this.getElement()};goog.ui.Dialog.prototype.getBackgroundElement=function(){this.renderIfNoDom_();return goog.ui.Dialog.superClass_.getBackgroundElement.call(this)};goog.ui.Dialog.prototype.getBackgroundElementOpacity=function(){return this.backgroundElementOpacity_};goog.ui.Dialog.prototype.setBackgroundElementOpacity=function(b){this.backgroundElementOpacity_=b;this.getElement()&&(b=this.getBackgroundElement())&&goog.style.setOpacity(b,this.backgroundElementOpacity_)};goog.ui.Dialog.prototype.setModal=function(b){b!=this.modal_&&this.setModalInternal_(b)};goog.ui.Dialog.prototype.setModalInternal_=function(f){this.modal_=f;if(this.isInDocument()){var e=this.getDomHelper(),h=this.getBackgroundElement(),g=this.getBackgroundIframe();f?(g&&e.insertSiblingBefore(g,this.getElement()),e.insertSiblingBefore(h,this.getElement())):(e.removeNode(g),e.removeNode(h))}};goog.ui.Dialog.prototype.getModal=function(){return this.modal_};goog.ui.Dialog.prototype.getClass=function(){return this.getCssClass()};goog.ui.Dialog.prototype.setDraggable=function(b){this.draggable_=b;this.setDraggingEnabled_(b&&this.isInDocument())};goog.ui.Dialog.prototype.createDragger=function(){return new goog.fx.Dragger(this.getElement(),this.titleEl_)};goog.ui.Dialog.prototype.getDraggable=function(){return this.draggable_};goog.ui.Dialog.prototype.setDraggingEnabled_=function(b){this.getElement()&&goog.dom.classes.enable(this.titleEl_,this.class_+"-title-draggable",b);b&&!this.dragger_?(this.dragger_=this.createDragger(),goog.dom.classes.add(this.titleEl_,this.class_+"-title-draggable"),goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.setDraggerLimits_,!1,this)):!b&&this.dragger_&&(this.dragger_.dispose(),this.dragger_=null)};goog.ui.Dialog.prototype.createDom=function(){goog.ui.Dialog.superClass_.createDom.call(this);var d=this.getElement();goog.asserts.assert(d,"getElement() returns null");var c=this.getDomHelper();this.titleEl_=c.createDom("div",{className:this.class_+"-title",id:this.getId()},this.titleTextEl_=c.createDom("span",this.class_+"-title-text",this.title_),this.titleCloseEl_=c.createDom("span",this.class_+"-title-close"));goog.dom.append(d,this.titleEl_,this.contentEl_=c.createDom("div",this.class_+"-content"),this.buttonEl_=c.createDom("div",this.class_+"-buttons"));this.titleId_=this.titleEl_.id;goog.dom.a11y.setRole(d,this.getPreferredAriaRole());goog.dom.a11y.setState(d,"labelledby",this.titleId_||"");this.content_&&(this.contentEl_.innerHTML=this.content_);goog.style.showElement(this.titleCloseEl_,this.hasTitleCloseButton_);this.buttons_&&this.buttons_.attachToElement(this.buttonEl_);goog.style.showElement(this.buttonEl_,!!this.buttons_);this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};goog.ui.Dialog.prototype.decorateInternal=function(e){goog.ui.Dialog.superClass_.decorateInternal.call(this,e);e=this.class_+"-content";(this.contentEl_=goog.dom.getElementsByTagNameAndClass(null,e,this.getElement())[0])?this.content_=this.contentEl_.innerHTML:(this.contentEl_=this.getDomHelper().createDom("div",e),this.content_&&(this.contentEl_.innerHTML=this.content_),this.getElement().appendChild(this.contentEl_));e=this.class_+"-title";var d=this.class_+"-title-text",f=this.class_+"-title-close";(this.titleEl_=goog.dom.getElementsByTagNameAndClass(null,e,this.getElement())[0])?(this.titleTextEl_=goog.dom.getElementsByTagNameAndClass(null,d,this.titleEl_)[0],this.titleCloseEl_=goog.dom.getElementsByTagNameAndClass(null,f,this.titleEl_)[0],this.titleEl_.id||(this.titleEl_.id=this.getId())):(this.titleEl_=this.getDomHelper().createDom("div",{className:e,id:this.getId()}),this.getElement().insertBefore(this.titleEl_,this.contentEl_));this.titleId_=this.titleEl_.id;this.titleTextEl_?this.title_=goog.dom.getTextContent(this.titleTextEl_):(this.titleTextEl_=this.getDomHelper().createDom("span",d,this.title_),this.titleEl_.appendChild(this.titleTextEl_));goog.dom.a11y.setState(this.getElement(),"labelledby",this.titleId_||"");this.titleCloseEl_||(this.titleCloseEl_=this.getDomHelper().createDom("span",f),this.titleEl_.appendChild(this.titleCloseEl_));goog.style.showElement(this.titleCloseEl_,this.hasTitleCloseButton_);e=this.class_+"-buttons";(this.buttonEl_=goog.dom.getElementsByTagNameAndClass(null,e,this.getElement())[0])?(this.buttons_=new goog.ui.Dialog.ButtonSet(this.getDomHelper()),this.buttons_.decorate(this.buttonEl_)):(this.buttonEl_=this.getDomHelper().createDom("div",e),this.getElement().appendChild(this.buttonEl_),this.buttons_&&this.buttons_.attachToElement(this.buttonEl_),goog.style.showElement(this.buttonEl_,!!this.buttons_));this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};goog.ui.Dialog.prototype.enterDocument=function(){goog.ui.Dialog.superClass_.enterDocument.call(this);this.getHandler().listen(this.getElement(),goog.events.EventType.KEYDOWN,this.onKey_).listen(this.getElement(),goog.events.EventType.KEYPRESS,this.onKey_);this.getHandler().listen(this.buttonEl_,goog.events.EventType.CLICK,this.onButtonClick_);this.setDraggingEnabled_(this.draggable_);this.getHandler().listen(this.titleCloseEl_,goog.events.EventType.CLICK,this.onTitleCloseClick_);goog.dom.a11y.setRole(this.getElement(),this.getPreferredAriaRole());""!==this.titleTextEl_.id&&goog.dom.a11y.setState(this.getElement(),"labelledby",this.titleTextEl_.id);this.modal_||this.setModalInternal_(!1)};goog.ui.Dialog.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);this.setDraggingEnabled_(!1);goog.ui.Dialog.superClass_.exitDocument.call(this)};goog.ui.Dialog.prototype.setVisible=function(b){b!=this.isVisible()&&(this.isInDocument()||this.render(),goog.ui.Dialog.superClass_.setVisible.call(this,b))};goog.ui.Dialog.prototype.onShow=function(){goog.ui.Dialog.superClass_.onShow.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_SHOW)};goog.ui.Dialog.prototype.onHide=function(){goog.ui.Dialog.superClass_.onHide.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_HIDE);this.disposeOnHide_&&this.dispose()};goog.ui.Dialog.prototype.focus=function(){goog.ui.Dialog.superClass_.focus.call(this);if(this.getButtonSet()){var i=this.getButtonSet().getDefault();if(i){for(var h=this.getDomHelper().getDocument(),n=this.buttonEl_.getElementsByTagName("button"),m=0,l;l=n[m];m++){if(l.name==i&&!l.disabled){try{if(goog.userAgent.WEBKIT||goog.userAgent.OPERA){var k=h.createElement("input");k.style.cssText="position:fixed;width:0;height:0;left:0;top:0;";this.getElement().appendChild(k);k.focus();this.getElement().removeChild(k)}l.focus()}catch(j){}break}}}}};goog.ui.Dialog.prototype.setDraggerLimits_=function(){var f=this.getDomHelper().getDocument(),e=goog.dom.getWindow(f)||window,e=goog.dom.getViewportSize(e),h=Math.max(f.body.scrollWidth,e.width),f=Math.max(f.body.scrollHeight,e.height),g=goog.style.getSize(this.getElement());"fixed"==goog.style.getComputedPosition(this.getElement())?this.dragger_.setLimits(new goog.math.Rect(0,0,Math.max(0,e.width-g.width),Math.max(0,e.height-g.height))):this.dragger_.setLimits(new goog.math.Rect(0,0,h-g.width,f-g.height))};goog.ui.Dialog.prototype.onTitleCloseClick_=function(){if(this.hasTitleCloseButton_){var d=this.getButtonSet(),c=d&&d.getCancel();c?(d=d.get(c),this.dispatchEvent(new goog.ui.Dialog.Event(c,d))&&this.setVisible(!1)):this.setVisible(!1)}};goog.ui.Dialog.prototype.getHasTitleCloseButton=function(){return this.hasTitleCloseButton_};goog.ui.Dialog.prototype.setHasTitleCloseButton=function(b){this.hasTitleCloseButton_=b;this.titleCloseEl_&&goog.style.showElement(this.titleCloseEl_,this.hasTitleCloseButton_)};goog.ui.Dialog.prototype.isEscapeToCancel=function(){return this.escapeToCancel_};goog.ui.Dialog.prototype.setEscapeToCancel=function(b){this.escapeToCancel_=b};goog.ui.Dialog.prototype.setDisposeOnHide=function(b){this.disposeOnHide_=b};goog.ui.Dialog.prototype.getDisposeOnHide=function(){return this.disposeOnHide_};goog.ui.Dialog.prototype.disposeInternal=function(){this.buttonEl_=this.titleCloseEl_=null;goog.ui.Dialog.superClass_.disposeInternal.call(this)};goog.ui.Dialog.prototype.setButtonSet=function(b){this.buttons_=b;this.buttonEl_&&(this.buttons_?this.buttons_.attachToElement(this.buttonEl_):this.buttonEl_.innerHTML="",goog.style.showElement(this.buttonEl_,!!this.buttons_))};goog.ui.Dialog.prototype.getButtonSet=function(){return this.buttons_};goog.ui.Dialog.prototype.onButtonClick_=function(d){if((d=this.findParentButton_(d.target))&&!d.disabled){d=d.name;var c=this.getButtonSet().get(d);this.dispatchEvent(new goog.ui.Dialog.Event(d,c))&&this.setVisible(!1)}};goog.ui.Dialog.prototype.findParentButton_=function(b){for(;null!=b&&b!=this.buttonEl_;){if("BUTTON"==b.tagName){return b}b=b.parentNode}return null};goog.ui.Dialog.prototype.onKey_=function(j){var i=!1,p=!1,o=this.getButtonSet(),n=j.target;if(j.type==goog.events.EventType.KEYDOWN){if(this.escapeToCancel_&&j.keyCode==goog.events.KeyCodes.ESC){var m=o&&o.getCancel(),n="SELECT"==n.tagName&&!n.disabled;m&&!n?(p=!0,i=o.get(m),i=this.dispatchEvent(new goog.ui.Dialog.Event(m,i))):n||(i=!0)}else{j.keyCode==goog.events.KeyCodes.TAB&&(j.shiftKey&&n==this.getElement())&&(p=!0)}}else{if(j.keyCode==goog.events.KeyCodes.ENTER){if("BUTTON"==n.tagName){m=n.name}else{if(o){var l=o.getDefault(),k=l&&o.getButton(l),n=("TEXTAREA"==n.tagName||"SELECT"==n.tagName||"A"==n.tagName)&&!n.disabled;k&&(!k.disabled&&!n)&&(m=l)}}m&&o&&(p=!0,i=this.dispatchEvent(new goog.ui.Dialog.Event(m,String(o.get(m)))))}}if(i||p){j.stopPropagation(),j.preventDefault()}i&&this.setVisible(!1)};goog.ui.Dialog.Event=function(d,c){this.type=goog.ui.Dialog.EventType.SELECT;this.key=d;this.caption=c};goog.inherits(goog.ui.Dialog.Event,goog.events.Event);goog.ui.Dialog.SELECT_EVENT="dialogselect";goog.ui.Dialog.EventType={SELECT:"dialogselect",AFTER_HIDE:"afterhide",AFTER_SHOW:"aftershow"};goog.ui.Dialog.ButtonSet=function(b){this.dom_=b||goog.dom.getDomHelper();goog.structs.Map.call(this)};goog.inherits(goog.ui.Dialog.ButtonSet,goog.structs.Map);goog.ui.Dialog.ButtonSet.prototype.class_="goog-buttonset";goog.ui.Dialog.ButtonSet.prototype.defaultButton_=null;goog.ui.Dialog.ButtonSet.prototype.element_=null;goog.ui.Dialog.ButtonSet.prototype.cancelButton_=null;goog.ui.Dialog.ButtonSet.prototype.set=function(f,e,h,g){goog.structs.Map.prototype.set.call(this,f,e);h&&(this.defaultButton_=f);g&&(this.cancelButton_=f);return this};goog.ui.Dialog.ButtonSet.prototype.addButton=function(e,d,f){return this.set(e.key,e.caption,d,f)};goog.ui.Dialog.ButtonSet.prototype.attachToElement=function(b){this.element_=b;this.render()};goog.ui.Dialog.ButtonSet.prototype.render=function(){if(this.element_){this.element_.innerHTML="";var b=goog.dom.getDomHelper(this.element_);goog.structs.forEach(this,function(a,f){var e=b.createDom("button",{name:f},a);f==this.defaultButton_&&(e.className=this.class_+"-default");this.element_.appendChild(e)},this)}};goog.ui.Dialog.ButtonSet.prototype.decorate=function(h){if(h&&h.nodeType==goog.dom.NodeType.ELEMENT){this.element_=h;h=this.element_.getElementsByTagName("button");for(var g=0,l,k,j;l=h[g];g++){if(k=l.name||l.id,j=goog.dom.getTextContent(l)||l.value,k){var i=0==g;this.set(k,j,i,l.name==goog.ui.Dialog.DefaultButtonKeys.CANCEL);i&&goog.dom.classes.add(l,this.class_+"-default")}}}};goog.ui.Dialog.ButtonSet.prototype.getElement=function(){return this.element_};goog.ui.Dialog.ButtonSet.prototype.getDomHelper=function(){return this.dom_};goog.ui.Dialog.ButtonSet.prototype.setDefault=function(b){this.defaultButton_=b};goog.ui.Dialog.ButtonSet.prototype.getDefault=function(){return this.defaultButton_};goog.ui.Dialog.ButtonSet.prototype.setCancel=function(b){this.cancelButton_=b};goog.ui.Dialog.ButtonSet.prototype.getCancel=function(){return this.cancelButton_};goog.ui.Dialog.ButtonSet.prototype.getButton=function(f){for(var e=this.getAllButtons(),h=0,g;g=e[h];h++){if(g.name==f||g.id==f){return g}}return null};goog.ui.Dialog.ButtonSet.prototype.getAllButtons=function(){return this.element_.getElementsByTagName(goog.dom.TagName.BUTTON)};goog.ui.Dialog.ButtonSet.prototype.setButtonEnabled=function(e,d){var f=this.getButton(e);f&&(f.disabled=!d)};goog.ui.Dialog.ButtonSet.prototype.setAllButtonsEnabled=function(f){for(var e=this.getAllButtons(),h=0,g;g=e[h];h++){g.disabled=!f}};goog.ui.Dialog.DefaultButtonKeys={OK:"ok",CANCEL:"cancel",YES:"yes",NO:"no",SAVE:"save",CONTINUE:"continue"};goog.ui.Dialog.MSG_DIALOG_OK_=goog.getMsg("OK");goog.ui.Dialog.MSG_DIALOG_CANCEL_=goog.getMsg("Cancel");goog.ui.Dialog.MSG_DIALOG_YES_=goog.getMsg("Yes");goog.ui.Dialog.MSG_DIALOG_NO_=goog.getMsg("No");goog.ui.Dialog.MSG_DIALOG_SAVE_=goog.getMsg("Save");goog.ui.Dialog.MSG_DIALOG_CONTINUE_=goog.getMsg("Continue");goog.ui.Dialog.DefaultButtonCaptions={OK:goog.ui.Dialog.MSG_DIALOG_OK_,CANCEL:goog.ui.Dialog.MSG_DIALOG_CANCEL_,YES:goog.ui.Dialog.MSG_DIALOG_YES_,NO:goog.ui.Dialog.MSG_DIALOG_NO_,SAVE:goog.ui.Dialog.MSG_DIALOG_SAVE_,CONTINUE:goog.ui.Dialog.MSG_DIALOG_CONTINUE_};goog.ui.Dialog.ButtonSet.DefaultButtons={OK:{key:goog.ui.Dialog.DefaultButtonKeys.OK,caption:goog.ui.Dialog.DefaultButtonCaptions.OK},CANCEL:{key:goog.ui.Dialog.DefaultButtonKeys.CANCEL,caption:goog.ui.Dialog.DefaultButtonCaptions.CANCEL},YES:{key:goog.ui.Dialog.DefaultButtonKeys.YES,caption:goog.ui.Dialog.DefaultButtonCaptions.YES},NO:{key:goog.ui.Dialog.DefaultButtonKeys.NO,caption:goog.ui.Dialog.DefaultButtonCaptions.NO},SAVE:{key:goog.ui.Dialog.DefaultButtonKeys.SAVE,caption:goog.ui.Dialog.DefaultButtonCaptions.SAVE},CONTINUE:{key:goog.ui.Dialog.DefaultButtonKeys.CONTINUE,caption:goog.ui.Dialog.DefaultButtonCaptions.CONTINUE}};goog.ui.Dialog.ButtonSet.createOk=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0,!0)};goog.ui.Dialog.ButtonSet.createOkCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};goog.ui.Dialog.ButtonSet.createYesNo=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!1,!0)};goog.ui.Dialog.ButtonSet.createYesNoCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};goog.ui.Dialog.ButtonSet.createContinueSaveCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CONTINUE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.SAVE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!0,!0)};(function(){"undefined"!=typeof document&&(goog.ui.Dialog.ButtonSet.OK=goog.ui.Dialog.ButtonSet.createOk(),goog.ui.Dialog.ButtonSet.OK_CANCEL=goog.ui.Dialog.ButtonSet.createOkCancel(),goog.ui.Dialog.ButtonSet.YES_NO=goog.ui.Dialog.ButtonSet.createYesNo(),goog.ui.Dialog.ButtonSet.YES_NO_CANCEL=goog.ui.Dialog.ButtonSet.createYesNoCancel(),goog.ui.Dialog.ButtonSet.CONTINUE_SAVE_CANCEL=goog.ui.Dialog.ButtonSet.createContinueSaveCancel())})();goog.ui.editor={};goog.ui.editor.AbstractDialog=function(b){goog.events.EventTarget.call(this);this.dom=b};goog.inherits(goog.ui.editor.AbstractDialog,goog.events.EventTarget);goog.ui.editor.AbstractDialog.prototype.show=function(){this.dialogInternal_||(this.dialogInternal_=this.createDialogControl(),this.dialogInternal_.addEventListener(goog.ui.Dialog.EventType.AFTER_HIDE,this.handleAfterHide_,!1,this));this.dialogInternal_.setVisible(!0)};goog.ui.editor.AbstractDialog.prototype.hide=function(){this.dialogInternal_&&this.dialogInternal_.setVisible(!1)};goog.ui.editor.AbstractDialog.prototype.isOpen=function(){return !!this.dialogInternal_&&this.dialogInternal_.isVisible()};goog.ui.editor.AbstractDialog.prototype.processOkAndClose=function(){var b=new goog.ui.Dialog.Event(goog.ui.Dialog.DefaultButtonKeys.OK,null);this.handleOk(b)&&this.hide()};goog.ui.editor.AbstractDialog.EventType={AFTER_HIDE:"afterhide",CANCEL:"cancel",OK:"ok"};goog.ui.editor.AbstractDialog.Builder=function(b){this.editorDialog_=b;this.wrappedDialog_=new goog.ui.Dialog("",!0,this.editorDialog_.dom);this.buttonSet_=new goog.ui.Dialog.ButtonSet(this.editorDialog_.dom);this.buttonHandlers_={};this.addClassName("tr-dialog")};goog.ui.editor.AbstractDialog.Builder.prototype.setTitle=function(b){this.wrappedDialog_.setTitle(b);return this};goog.ui.editor.AbstractDialog.Builder.prototype.addOkButton=function(e){var d=goog.ui.Dialog.DefaultButtonKeys.OK,f=goog.getMsg("OK");this.buttonSet_.set(d,e||f,!0);this.buttonHandlers_[d]=goog.bind(this.editorDialog_.handleOk,this.editorDialog_);return this};goog.ui.editor.AbstractDialog.Builder.prototype.addCancelButton=function(e){var d=goog.ui.Dialog.DefaultButtonKeys.CANCEL,f=goog.getMsg("Cancel");this.buttonSet_.set(d,e||f,!1,!0);this.buttonHandlers_[d]=goog.bind(this.editorDialog_.handleCancel,this.editorDialog_);return this};goog.ui.editor.AbstractDialog.Builder.prototype.addButton=function(e,d,f){f=f||goog.string.createUniqueString();this.buttonSet_.set(f,e);this.buttonHandlers_[f]=d;return this};goog.ui.editor.AbstractDialog.Builder.prototype.addClassName=function(b){goog.dom.classes.add(this.wrappedDialog_.getDialogElement(),b);return this};goog.ui.editor.AbstractDialog.Builder.prototype.setContent=function(b){goog.dom.appendChild(this.wrappedDialog_.getContentElement(),b);return this};goog.ui.editor.AbstractDialog.Builder.prototype.build=function(){this.buttonSet_.isEmpty()&&(this.addOkButton(),this.addCancelButton());this.wrappedDialog_.setButtonSet(this.buttonSet_);var d=this.buttonHandlers_;this.buttonHandlers_=null;this.wrappedDialog_.addEventListener(goog.ui.Dialog.EventType.SELECT,function(a){if(d[a.key]){return d[a.key](a)}});this.wrappedDialog_.setModal(!0);var c=this.wrappedDialog_;this.wrappedDialog_=null;return c};goog.ui.editor.AbstractDialog.prototype.getOkButtonElement=function(){return this.getButtonElement(goog.ui.Dialog.DefaultButtonKeys.OK)};goog.ui.editor.AbstractDialog.prototype.getCancelButtonElement=function(){return this.getButtonElement(goog.ui.Dialog.DefaultButtonKeys.CANCEL)};goog.ui.editor.AbstractDialog.prototype.getButtonElement=function(b){return this.dialogInternal_.getButtonSet().getButton(b)};goog.ui.editor.AbstractDialog.prototype.handleOk=function(b){return(b=this.createOkEvent(b))?this.dispatchEvent(b):!1};goog.ui.editor.AbstractDialog.prototype.handleCancel=function(){return this.dispatchEvent(goog.ui.editor.AbstractDialog.EventType.CANCEL)};goog.ui.editor.AbstractDialog.prototype.disposeInternal=function(){this.dialogInternal_&&(this.hide(),this.dialogInternal_.dispose(),this.dialogInternal_=null);goog.ui.editor.AbstractDialog.superClass_.disposeInternal.call(this)};goog.ui.editor.AbstractDialog.prototype.handleAfterHide_=function(){this.dispatchEvent(goog.ui.editor.AbstractDialog.EventType.AFTER_HIDE)};goog.ui.editor.messages={};goog.ui.editor.messages.MSG_LINK_CAPTION=goog.getMsg("Link");goog.ui.editor.messages.MSG_EDIT_LINK=goog.getMsg("Edit Link");goog.ui.editor.messages.MSG_TEXT_TO_DISPLAY=goog.getMsg("Text to display:");goog.ui.editor.messages.MSG_LINK_TO=goog.getMsg("Link to:");goog.ui.editor.messages.MSG_ON_THE_WEB=goog.getMsg("Web address");goog.ui.editor.messages.MSG_ON_THE_WEB_TIP=goog.getMsg("Link to a page or file somewhere else on the web");goog.ui.editor.messages.MSG_TEST_THIS_LINK=goog.getMsg("Test this link");goog.ui.editor.messages.MSG_TR_LINK_EXPLANATION=goog.getMsg("{$startBold}Not sure what to put in the box?{$endBold} First, find the page on the web that you want to link to. (A {$searchEngineLink}search engine{$endLink} might be useful.) Then, copy the web address from the box in your browser's address bar, and paste it into the box above.",{startBold:"<b>",endBold:"</b>",searchEngineLink:"<a href='http://www.google.com/' target='_new'>",endLink:"</a>"});goog.ui.editor.messages.MSG_WHAT_URL=goog.getMsg("To what URL should this link go?");goog.ui.editor.messages.MSG_EMAIL_ADDRESS=goog.getMsg("Email address");goog.ui.editor.messages.MSG_EMAIL_ADDRESS_TIP=goog.getMsg("Link to an email address");goog.ui.editor.messages.MSG_INVALID_EMAIL=goog.getMsg("Invalid email address");goog.ui.editor.messages.MSG_WHAT_EMAIL=goog.getMsg("To what email address should this link?");goog.ui.editor.messages.MSG_EMAIL_EXPLANATION=goog.getMsg("{$preb}Be careful.{$postb} Remember that any time you include an email address on a web page, nasty spammers can find it too.",{preb:"<b>",postb:"</b>"});goog.ui.editor.messages.MSG_OPEN_IN_NEW_WINDOW=goog.getMsg("Open this link in a new window");goog.ui.editor.messages.MSG_IMAGE_CAPTION=goog.getMsg("Image");goog.events.InputHandler=function(b){goog.events.EventTarget.call(this);this.element_=b;b=goog.userAgent.IE||goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("531")&&"TEXTAREA"==b.tagName;this.eventHandler_=new goog.events.EventHandler(this);this.eventHandler_.listen(this.element_,b?["keydown","paste","cut","drop","input"]:"input",this)};goog.inherits(goog.events.InputHandler,goog.events.EventTarget);goog.events.InputHandler.EventType={INPUT:"input"};goog.events.InputHandler.prototype.timer_=null;goog.events.InputHandler.prototype.handleEvent=function(e){if("input"==e.type){this.cancelTimerIfSet_(),(!goog.userAgent.OPERA||this.element_==goog.dom.getOwnerDocument(this.element_).activeElement)&&this.dispatchEvent(this.createInputEvent_(e))}else{if("keydown"!=e.type||goog.events.KeyCodes.isTextModifyingKeyEvent(e)){var d="keydown"==e.type?this.element_.value:null;goog.userAgent.IE&&e.keyCode==goog.events.KeyCodes.WIN_IME&&(d=null);var f=this.createInputEvent_(e);this.cancelTimerIfSet_();this.timer_=goog.Timer.callOnce(function(){this.timer_=null;this.element_.value!=d&&this.dispatchEvent(f)},0,this)}}};goog.events.InputHandler.prototype.cancelTimerIfSet_=function(){null!=this.timer_&&(goog.Timer.clear(this.timer_),this.timer_=null)};goog.events.InputHandler.prototype.createInputEvent_=function(b){b=new goog.events.BrowserEvent(b.getBrowserEvent());b.type=goog.events.InputHandler.EventType.INPUT;return b};goog.events.InputHandler.prototype.disposeInternal=function(){goog.events.InputHandler.superClass_.disposeInternal.call(this);this.eventHandler_.dispose();this.cancelTimerIfSet_();delete this.element_};goog.ui.ControlRenderer=function(){};goog.addSingletonGetter(goog.ui.ControlRenderer);goog.ui.ControlRenderer.getCustomRenderer=function(e,d){var f=new e;f.getCssClass=function(){return d};return f};goog.ui.ControlRenderer.CSS_CLASS="goog-control";goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[];goog.ui.ControlRenderer.prototype.getAriaRole=function(){};goog.ui.ControlRenderer.prototype.createDom=function(d){var c=d.getDomHelper().createDom("div",this.getClassNames(d).join(" "),d.getContent());this.setAriaStates(d,c);return c};goog.ui.ControlRenderer.prototype.getContentElement=function(b){return b};goog.ui.ControlRenderer.prototype.enableClassName=function(f,e,h){if(f=f.getElement?f.getElement():f){if(goog.userAgent.IE&&!goog.userAgent.isVersion("7")){var g=this.getAppliedCombinedClassNames_(goog.dom.classes.get(f),e);g.push(e);goog.partial(h?goog.dom.classes.add:goog.dom.classes.remove,f).apply(null,g)}else{goog.dom.classes.enable(f,e,h)}}};goog.ui.ControlRenderer.prototype.enableExtraClassName=function(e,d,f){this.enableClassName(e,d,f)};goog.ui.ControlRenderer.prototype.canDecorate=function(){return !0};goog.ui.ControlRenderer.prototype.decorate=function(v,u){u.id&&v.setId(u.id);var t=this.getContentElement(u);t&&t.firstChild?v.setContentInternal(t.firstChild.nextSibling?goog.array.clone(t.childNodes):t.firstChild):v.setContentInternal(null);var s=0,r=this.getCssClass(),q=this.getStructuralCssClass(),p=!1,o=!1,t=!1,n=goog.dom.classes.get(u);goog.array.forEach(n,function(b){!p&&b==r?(p=!0,q==r&&(o=!0)):!o&&b==q?o=!0:s|=this.getStateFromClass(b)},this);v.setStateInternal(s);p||(n.push(r),q==r&&(o=!0));o||n.push(q);var m=v.getExtraClassNames();m&&n.push.apply(n,m);if(goog.userAgent.IE&&!goog.userAgent.isVersion("7")){var i=this.getAppliedCombinedClassNames_(n);0<i.length&&(n.push.apply(n,i),t=!0)}(!p||!o||m||t)&&goog.dom.classes.set(u,n.join(" "));this.setAriaStates(v,u);return u};goog.ui.ControlRenderer.prototype.initializeDom=function(b){b.isRightToLeft()&&this.setRightToLeft(b.getElement(),!0);b.isEnabled()&&this.setFocusable(b,b.isVisible())};goog.ui.ControlRenderer.prototype.setAriaRole=function(e,d){var f=d||this.getAriaRole();f&&goog.dom.a11y.setRole(e,f)};goog.ui.ControlRenderer.prototype.setAriaStates=function(d,c){goog.asserts.assert(d);goog.asserts.assert(c);d.isEnabled()||this.updateAriaState(c,goog.ui.Component.State.DISABLED,!0);d.isSupportedState(goog.ui.Component.State.SELECTED)&&this.updateAriaState(c,goog.ui.Component.State.SELECTED,d.isSelected());d.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(c,goog.ui.Component.State.CHECKED,d.isChecked());d.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(c,goog.ui.Component.State.OPENED,d.isOpen())};goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(d,c){goog.style.setUnselectable(d,!c,!goog.userAgent.IE&&!goog.userAgent.OPERA)};goog.ui.ControlRenderer.prototype.setRightToLeft=function(d,c){this.enableClassName(d,this.getStructuralCssClass()+"-rtl",c)};goog.ui.ControlRenderer.prototype.isFocusable=function(d){var c;return d.isSupportedState(goog.ui.Component.State.FOCUSED)&&(c=d.getKeyEventTarget())?goog.dom.isFocusableTabIndex(c):!1};goog.ui.ControlRenderer.prototype.setFocusable=function(f,e){var h;if(f.isSupportedState(goog.ui.Component.State.FOCUSED)&&(h=f.getKeyEventTarget())){if(!e&&f.isFocused()){try{h.blur()}catch(g){}f.isFocused()&&f.handleBlur(null)}goog.dom.isFocusableTabIndex(h)!=e&&goog.dom.setFocusableTabIndex(h,e)}};goog.ui.ControlRenderer.prototype.setVisible=function(d,c){goog.style.showElement(d,c)};goog.ui.ControlRenderer.prototype.setState=function(g,f,j){var i=g.getElement();if(i){var h=this.getClassForState(f);h&&this.enableClassName(g,h,j);this.updateAriaState(i,f,j)}};goog.ui.ControlRenderer.prototype.updateAriaState=function(e,d,f){goog.ui.ControlRenderer.ARIA_STATE_MAP_||(goog.ui.ControlRenderer.ARIA_STATE_MAP_=goog.object.create(goog.ui.Component.State.DISABLED,goog.dom.a11y.State.DISABLED,goog.ui.Component.State.SELECTED,goog.dom.a11y.State.SELECTED,goog.ui.Component.State.CHECKED,goog.dom.a11y.State.CHECKED,goog.ui.Component.State.OPENED,goog.dom.a11y.State.EXPANDED));(d=goog.ui.ControlRenderer.ARIA_STATE_MAP_[d])&&goog.dom.a11y.setState(e,d,f)};goog.ui.ControlRenderer.prototype.setContent=function(f,e){var h=this.getContentElement(f);if(h&&(goog.dom.removeChildren(h),e)){if(goog.isString(e)){goog.dom.setTextContent(h,e)}else{var g=function(d){if(d){var c=goog.dom.getOwnerDocument(h);h.appendChild(goog.isString(d)?c.createTextNode(d):d)}};goog.isArray(e)?goog.array.forEach(e,g):goog.isArrayLike(e)&&!("nodeType" in e)?goog.array.forEach(goog.array.clone(e),g):g(e)}}};goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(b){return b.getElement()};goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS};goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]};goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()};goog.ui.ControlRenderer.prototype.getClassNames=function(f){var e=this.getCssClass(),h=[e],g=this.getStructuralCssClass();g!=e&&h.push(g);e=this.getClassNamesForState(f.getState());h.push.apply(h,e);(f=f.getExtraClassNames())&&h.push.apply(h,f);goog.userAgent.IE&&!goog.userAgent.isVersion("7")&&h.push.apply(h,this.getAppliedCombinedClassNames_(h));return h};goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(e,d){var f=[];d&&(e=e.concat([d]));goog.array.forEach(this.getIe6ClassCombinations(),function(a){goog.array.every(a,goog.partial(goog.array.contains,e))&&(!d||goog.array.contains(a,d))&&f.push(a.join("_"))});return f};goog.ui.ControlRenderer.prototype.getClassNamesForState=function(e){for(var d=[];e;){var f=e&-e;d.push(this.getClassForState(f));e&=~f}return d};goog.ui.ControlRenderer.prototype.getClassForState=function(b){this.classByState_||this.createClassByStateMap_();return this.classByState_[b]};goog.ui.ControlRenderer.prototype.getStateFromClass=function(b){this.stateByClass_||this.createStateByClassMap_();b=parseInt(this.stateByClass_[b],10);return isNaN(b)?0:b};goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var b=this.getStructuralCssClass();this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,b+"-disabled",goog.ui.Component.State.HOVER,b+"-hover",goog.ui.Component.State.ACTIVE,b+"-active",goog.ui.Component.State.SELECTED,b+"-selected",goog.ui.Component.State.CHECKED,b+"-checked",goog.ui.Component.State.FOCUSED,b+"-focused",goog.ui.Component.State.OPENED,b+"-open")};goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_();this.stateByClass_=goog.object.transpose(this.classByState_)};goog.ui.registry={};goog.ui.registry.getDefaultRenderer=function(d){for(var c;d;){c=goog.getUid(d);if(c=goog.ui.registry.defaultRenderers_[c]){break}d=d.superClass_?d.superClass_.constructor:null}return c?goog.isFunction(c.getInstance)?c.getInstance():new c:null};goog.ui.registry.setDefaultRenderer=function(e,d){if(!goog.isFunction(e)){throw Error("Invalid component class "+e)}if(!goog.isFunction(d)){throw Error("Invalid renderer class "+d)}var f=goog.getUid(e);goog.ui.registry.defaultRenderers_[f]=d};goog.ui.registry.getDecoratorByClassName=function(b){return b in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[b]():null};goog.ui.registry.setDecoratorByClassName=function(d,c){if(!d){throw Error("Invalid class name "+d)}if(!goog.isFunction(c)){throw Error("Invalid decorator function "+c)}goog.ui.registry.decoratorFunctions_[d]=c};goog.ui.registry.getDecorator=function(f){for(var e=goog.dom.classes.get(f),h=0,g=e.length;h<g;h++){if(f=goog.ui.registry.getDecoratorByClassName(e[h])){return f}}return null};goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={}};goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={};goog.ui.decorate=function(d){var c=goog.ui.registry.getDecorator(d);c&&c.decorate(d);return c};goog.events.KeyHandler=function(d,c){goog.events.EventTarget.call(this);d&&this.attach(d,c)};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.prototype.altKey_=!1;goog.events.KeyHandler.EventType={KEY:"key"};goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersion("525");goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO;goog.events.KeyHandler.prototype.handleKeyDown_=function(b){if(goog.userAgent.WEBKIT&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!b.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!b.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!b.metaKey)){this.keyCode_=this.lastKey_=-1}-1==this.lastKey_&&(b.ctrlKey&&b.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:b.altKey&&b.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:b.metaKey&&b.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META));goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(b.keyCode,this.lastKey_,b.shiftKey,b.ctrlKey,b.altKey)?this.handleEvent(b):(this.keyCode_=goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(b.keyCode):b.keyCode,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=b.altKey))};goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.handleKeyup_=function(b){this.resetState();this.altKey_=b.altKey};goog.events.KeyHandler.prototype.handleEvent=function(i){var h=i.getBrowserEvent(),n,m,l=h.altKey;goog.userAgent.IE&&i.type==goog.events.EventType.KEYPRESS?(n=this.keyCode_,m=n!=goog.events.KeyCodes.ENTER&&n!=goog.events.KeyCodes.ESC?h.keyCode:0):goog.userAgent.WEBKIT&&i.type==goog.events.EventType.KEYPRESS?(n=this.keyCode_,m=0<=h.charCode&&63232>h.charCode&&goog.events.KeyCodes.isCharacterKey(n)?h.charCode:0):goog.userAgent.OPERA?(n=this.keyCode_,m=goog.events.KeyCodes.isCharacterKey(n)?h.keyCode:0):(n=h.keyCode||this.keyCode_,m=h.charCode||0,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(l=this.altKey_),goog.userAgent.MAC&&(m==goog.events.KeyCodes.QUESTION_MARK&&n==goog.events.KeyCodes.WIN_KEY)&&(n=goog.events.KeyCodes.SLASH));var k=n,j=h.keyIdentifier;n?63232<=n&&n in goog.events.KeyHandler.safariKey_?k=goog.events.KeyHandler.safariKey_[n]:25==n&&i.shiftKey&&(k=9):j&&j in goog.events.KeyHandler.keyIdentifier_&&(k=goog.events.KeyHandler.keyIdentifier_[j]);i=k==this.lastKey_;this.lastKey_=k;h=new goog.events.KeyEvent(k,m,i,h);h.altKey=l;this.dispatchEvent(h)};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};goog.events.KeyHandler.prototype.attach=function(d,c){this.keyUpKey_&&this.detach();this.element_=d;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,c);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,c,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,c,this)};goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null);this.element_=null;this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};goog.events.KeyEvent=function(f,e,h,g){goog.events.BrowserEvent.call(this,g);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=f;this.charCode=e;this.repeat=h};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.ui.Control=function(e,d,f){goog.ui.Component.call(this,f);this.renderer_=d||goog.ui.registry.getDefaultRenderer(this.constructor);this.setContentInternal(e)};goog.inherits(goog.ui.Control,goog.ui.Component);goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName;goog.ui.Control.getDecorator=goog.ui.registry.getDecorator;goog.ui.Control.decorate=goog.ui.decorate;goog.ui.Control.prototype.content_=null;goog.ui.Control.prototype.state_=0;goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED;goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL;goog.ui.Control.prototype.statesWithTransitionEvents_=0;goog.ui.Control.prototype.visible_=!0;goog.ui.Control.prototype.extraClassNames_=null;goog.ui.Control.prototype.handleMouseEvents_=!0;goog.ui.Control.prototype.allowTextSelection_=!1;goog.ui.Control.prototype.preferredAriaRole_=null;goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_};goog.ui.Control.prototype.setHandleMouseEvents=function(b){this.isInDocument()&&b!=this.handleMouseEvents_&&this.enableMouseEventHandling_(b);this.handleMouseEvents_=b};goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)};goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)};goog.ui.Control.prototype.getRenderer=function(){return this.renderer_};goog.ui.Control.prototype.setRenderer=function(b){if(this.isInDocument()){throw Error(goog.ui.Component.Error.ALREADY_RENDERED)}this.getElement()&&this.setElementInternal(null);this.renderer_=b};goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_};goog.ui.Control.prototype.addClassName=function(b){b&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,b)||this.extraClassNames_.push(b):this.extraClassNames_=[b],this.renderer_.enableExtraClassName(this,b,!0))};goog.ui.Control.prototype.removeClassName=function(b){b&&this.extraClassNames_&&(goog.array.remove(this.extraClassNames_,b),0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,b,!1))};goog.ui.Control.prototype.enableClassName=function(d,c){c?this.addClassName(d):this.removeClassName(d)};goog.ui.Control.prototype.createDom=function(){var b=this.renderer_.createDom(this);this.setElementInternal(b);this.renderer_.setAriaRole(b,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(b,!1);this.isVisible()||this.renderer_.setVisible(b,!1)};goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};goog.ui.Control.prototype.setPreferredAriaRole=function(b){this.preferredAriaRole_=b};goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Control.prototype.canDecorate=function(b){return this.renderer_.canDecorate(b)};goog.ui.Control.prototype.decorateInternal=function(b){b=this.renderer_.decorate(this,b);this.setElementInternal(b);this.renderer_.setAriaRole(b,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(b,!1);this.visible_="none"!=b.style.display};goog.ui.Control.prototype.enterDocument=function(){goog.ui.Control.superClass_.enterDocument.call(this);this.renderer_.initializeDom(this);if(this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))){var d=this.getKeyEventTarget();if(d){var c=this.getKeyHandler();c.attach(d);this.getHandler().listen(c,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(d,goog.events.EventType.FOCUS,this.handleFocus).listen(d,goog.events.EventType.BLUR,this.handleBlur)}}};goog.ui.Control.prototype.enableMouseEventHandling_=function(e){var d=this.getHandler(),f=this.getElement();e?(d.listen(f,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(f,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(f,goog.events.EventType.MOUSEUP,this.handleMouseUp).listen(f,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&d.listen(f,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&d.listen(f,goog.events.EventType.DBLCLICK,this.handleDblClick)):(d.unlisten(f,goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(f,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).unlisten(f,goog.events.EventType.MOUSEUP,this.handleMouseUp).unlisten(f,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&d.unlisten(f,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&d.unlisten(f,goog.events.EventType.DBLCLICK,this.handleDblClick))};goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this);this.keyHandler_&&this.keyHandler_.detach();this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)};goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_);delete this.renderer_;this.extraClassNames_=this.content_=null};goog.ui.Control.prototype.getContent=function(){return this.content_};goog.ui.Control.prototype.setContent=function(b){this.renderer_.setContent(this.getElement(),b);this.setContentInternal(b)};goog.ui.Control.prototype.setContentInternal=function(b){this.content_=b};goog.ui.Control.prototype.getCaption=function(){var b=this.getContent();if(!b){return""}b=goog.isString(b)?b:goog.isArray(b)?goog.array.map(b,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(b);return goog.string.collapseBreakingSpaces(b)};goog.ui.Control.prototype.setCaption=function(b){this.setContent(b)};goog.ui.Control.prototype.setRightToLeft=function(d){goog.ui.Control.superClass_.setRightToLeft.call(this,d);var c=this.getElement();c&&this.renderer_.setRightToLeft(c,d)};goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_};goog.ui.Control.prototype.setAllowTextSelection=function(d){this.allowTextSelection_=d;var c=this.getElement();c&&this.renderer_.setAllowTextSelection(c,d)};goog.ui.Control.prototype.isVisible=function(){return this.visible_};goog.ui.Control.prototype.setVisible=function(e,d){if(d||this.visible_!=e&&this.dispatchEvent(e?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){var f=this.getElement();f&&this.renderer_.setVisible(f,e);this.isEnabled()&&this.renderer_.setFocusable(this,e);this.visible_=e;return !0}return !1};goog.ui.Control.prototype.isEnabled=function(){return !this.hasState(goog.ui.Component.State.DISABLED)};goog.ui.Control.prototype.isParentDisabled_=function(){var b=this.getParent();return !!b&&"function"==typeof b.isEnabled&&!b.isEnabled()};goog.ui.Control.prototype.setEnabled=function(b){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!b)&&(b||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,b),this.setState(goog.ui.Component.State.DISABLED,!b))};goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)};goog.ui.Control.prototype.setHighlighted=function(b){this.isTransitionAllowed(goog.ui.Component.State.HOVER,b)&&this.setState(goog.ui.Component.State.HOVER,b)};goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)};goog.ui.Control.prototype.setActive=function(b){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,b)&&this.setState(goog.ui.Component.State.ACTIVE,b)};goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)};goog.ui.Control.prototype.setSelected=function(b){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,b)&&this.setState(goog.ui.Component.State.SELECTED,b)};goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)};goog.ui.Control.prototype.setChecked=function(b){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,b)&&this.setState(goog.ui.Component.State.CHECKED,b)};goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)};goog.ui.Control.prototype.setFocused=function(b){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,b)&&this.setState(goog.ui.Component.State.FOCUSED,b)};goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)};goog.ui.Control.prototype.setOpen=function(b){this.isTransitionAllowed(goog.ui.Component.State.OPENED,b)&&this.setState(goog.ui.Component.State.OPENED,b)};goog.ui.Control.prototype.getState=function(){return this.state_};goog.ui.Control.prototype.hasState=function(b){return !!(this.state_&b)};goog.ui.Control.prototype.setState=function(d,c){this.isSupportedState(d)&&c!=this.hasState(d)&&(this.renderer_.setState(this,d,c),this.state_=c?this.state_|d:this.state_&~d)};goog.ui.Control.prototype.setStateInternal=function(b){this.state_=b};goog.ui.Control.prototype.isSupportedState=function(b){return !!(this.supportedStates_&b)};goog.ui.Control.prototype.setSupportedState=function(d,c){if(this.isInDocument()&&this.hasState(d)&&!c){throw Error(goog.ui.Component.Error.ALREADY_RENDERED)}!c&&this.hasState(d)&&this.setState(d,!1);this.supportedStates_=c?this.supportedStates_|d:this.supportedStates_&~d};goog.ui.Control.prototype.isAutoState=function(b){return !!(this.autoStates_&b)&&this.isSupportedState(b)};goog.ui.Control.prototype.setAutoStates=function(d,c){this.autoStates_=c?this.autoStates_|d:this.autoStates_&~d};goog.ui.Control.prototype.isDispatchTransitionEvents=function(b){return !!(this.statesWithTransitionEvents_&b)&&this.isSupportedState(b)};goog.ui.Control.prototype.setDispatchTransitionEvents=function(d,c){this.statesWithTransitionEvents_=c?this.statesWithTransitionEvents_|d:this.statesWithTransitionEvents_&~d};goog.ui.Control.prototype.isTransitionAllowed=function(d,c){return this.isSupportedState(d)&&this.hasState(d)!=c&&(!(this.statesWithTransitionEvents_&d)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(d,c)))&&!this.isDisposed()};goog.ui.Control.prototype.handleMouseOver=function(b){!goog.ui.Control.isMouseEventWithinElement_(b,this.getElement())&&(this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER))&&this.setHighlighted(!0)};goog.ui.Control.prototype.handleMouseOut=function(b){!goog.ui.Control.isMouseEventWithinElement_(b,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!1))};goog.ui.Control.prototype.handleContextMenu=goog.nullFunction;goog.ui.Control.isMouseEventWithinElement_=function(d,c){return !!d.relatedTarget&&goog.dom.contains(c,d.relatedTarget)};goog.ui.Control.prototype.handleMouseDown=function(b){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),b.isMouseActionButton()&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus()));!this.isAllowTextSelection()&&b.isMouseActionButton()&&b.preventDefault()};goog.ui.Control.prototype.handleMouseUp=function(b){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive()&&(this.performActionInternal(b)&&this.isAutoState(goog.ui.Component.State.ACTIVE))&&this.setActive(!1))};goog.ui.Control.prototype.handleDblClick=function(b){this.isEnabled()&&this.performActionInternal(b)};goog.ui.Control.prototype.performActionInternal=function(d){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked());this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0);this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var c=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);d&&(c.altKey=d.altKey,c.ctrlKey=d.ctrlKey,c.metaKey=d.metaKey,c.shiftKey=d.shiftKey,c.platformModifierKey=d.platformModifierKey);return this.dispatchEvent(c)};goog.ui.Control.prototype.handleFocus=function(){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)};goog.ui.Control.prototype.handleBlur=function(){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1);this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)};goog.ui.Control.prototype.handleKeyEvent=function(b){return this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(b)?(b.preventDefault(),b.stopPropagation(),!0):!1};goog.ui.Control.prototype.handleKeyEventInternal=function(b){return b.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(b)};goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer);goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)});goog.ui.ButtonSide={NONE:0,START:1,END:2,BOTH:3};goog.ui.ButtonRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.ButtonRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.ButtonRenderer);goog.ui.ButtonRenderer.CSS_CLASS="goog-button";goog.ui.ButtonRenderer.prototype.getAriaRole=function(){return goog.dom.a11y.Role.BUTTON};goog.ui.ButtonRenderer.prototype.updateAriaState=function(e,d,f){d==goog.ui.Component.State.CHECKED?goog.dom.a11y.setState(e,goog.dom.a11y.State.PRESSED,f):goog.ui.ButtonRenderer.superClass_.updateAriaState.call(this,e,d,f)};goog.ui.ButtonRenderer.prototype.createDom=function(e){var d=goog.ui.ButtonRenderer.superClass_.createDom.call(this,e),f=e.getTooltip();f&&this.setTooltip(d,f);(f=e.getValue())&&this.setValue(d,f);e.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(d,goog.ui.Component.State.CHECKED,e.isChecked());return d};goog.ui.ButtonRenderer.prototype.decorate=function(d,c){c=goog.ui.ButtonRenderer.superClass_.decorate.call(this,d,c);d.setValueInternal(this.getValue(c));d.setTooltipInternal(this.getTooltip(c));d.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(c,goog.ui.Component.State.CHECKED,d.isChecked());return c};goog.ui.ButtonRenderer.prototype.getValue=goog.nullFunction;goog.ui.ButtonRenderer.prototype.setValue=goog.nullFunction;goog.ui.ButtonRenderer.prototype.getTooltip=function(b){return b.title};goog.ui.ButtonRenderer.prototype.setTooltip=function(d,c){d&&(d.title=c||"")};goog.ui.ButtonRenderer.prototype.setCollapsed=function(g,f){var j=g.isRightToLeft(),i=this.getStructuralCssClass()+"-collapse-left",h=this.getStructuralCssClass()+"-collapse-right";g.enableClassName(j?h:i,!!(f&goog.ui.ButtonSide.START));g.enableClassName(j?i:h,!!(f&goog.ui.ButtonSide.END))};goog.ui.ButtonRenderer.prototype.getCssClass=function(){return goog.ui.ButtonRenderer.CSS_CLASS};goog.ui.NativeButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.NativeButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.NativeButtonRenderer);goog.ui.NativeButtonRenderer.prototype.getAriaRole=function(){};goog.ui.NativeButtonRenderer.prototype.createDom=function(b){this.setUpNativeButton_(b);return b.getDomHelper().createDom("button",{"class":this.getClassNames(b).join(" "),disabled:!b.isEnabled(),title:b.getTooltip()||"",value:b.getValue()||""},b.getCaption()||"")};goog.ui.NativeButtonRenderer.prototype.canDecorate=function(b){return"BUTTON"==b.tagName||"INPUT"==b.tagName&&("button"==b.type||"submit"==b.type||"reset"==b.type)};goog.ui.NativeButtonRenderer.prototype.decorate=function(d,c){this.setUpNativeButton_(d);c.disabled&&goog.dom.classes.add(c,this.getClassForState(goog.ui.Component.State.DISABLED));return goog.ui.NativeButtonRenderer.superClass_.decorate.call(this,d,c)};goog.ui.NativeButtonRenderer.prototype.initializeDom=function(b){b.getHandler().listen(b.getElement(),goog.events.EventType.CLICK,b.performActionInternal)};goog.ui.NativeButtonRenderer.prototype.setAllowTextSelection=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.setRightToLeft=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.isFocusable=function(b){return b.isEnabled()};goog.ui.NativeButtonRenderer.prototype.setFocusable=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.setState=function(e,d,f){goog.ui.NativeButtonRenderer.superClass_.setState.call(this,e,d,f);if((e=e.getElement())&&d==goog.ui.Component.State.DISABLED){e.disabled=f}};goog.ui.NativeButtonRenderer.prototype.getValue=function(b){return b.value};goog.ui.NativeButtonRenderer.prototype.setValue=function(d,c){d&&(d.value=c)};goog.ui.NativeButtonRenderer.prototype.updateAriaState=goog.nullFunction;goog.ui.NativeButtonRenderer.prototype.setUpNativeButton_=function(b){b.setHandleMouseEvents(!1);b.setAutoStates(goog.ui.Component.State.ALL,!1);b.setSupportedState(goog.ui.Component.State.FOCUSED,!1)};goog.ui.Button=function(e,d,f){goog.ui.Control.call(this,e,d||goog.ui.NativeButtonRenderer.getInstance(),f)};goog.inherits(goog.ui.Button,goog.ui.Control);goog.ui.Button.Side=goog.ui.ButtonSide;goog.ui.Button.prototype.getValue=function(){return this.value_};goog.ui.Button.prototype.setValue=function(b){this.value_=b;this.getRenderer().setValue(this.getElement(),b)};goog.ui.Button.prototype.setValueInternal=function(b){this.value_=b};goog.ui.Button.prototype.getTooltip=function(){return this.tooltip_};goog.ui.Button.prototype.setTooltip=function(b){this.tooltip_=b;this.getRenderer().setTooltip(this.getElement(),b)};goog.ui.Button.prototype.setTooltipInternal=function(b){this.tooltip_=b};goog.ui.Button.prototype.setCollapsed=function(b){this.getRenderer().setCollapsed(this,b)};goog.ui.Button.prototype.disposeInternal=function(){goog.ui.Button.superClass_.disposeInternal.call(this);delete this.value_;delete this.tooltip_};goog.ui.Button.prototype.enterDocument=function(){goog.ui.Button.superClass_.enterDocument.call(this);if(this.isSupportedState(goog.ui.Component.State.FOCUSED)){var b=this.getKeyEventTarget();b&&this.getHandler().listen(b,goog.events.EventType.KEYUP,this.handleKeyEventInternal)}};goog.ui.Button.prototype.handleKeyEventInternal=function(b){return b.keyCode==goog.events.KeyCodes.ENTER&&b.type==goog.events.KeyHandler.EventType.KEY||b.keyCode==goog.events.KeyCodes.SPACE&&b.type==goog.events.EventType.KEYUP?this.performActionInternal(b):b.keyCode==goog.events.KeyCodes.SPACE};goog.ui.registry.setDecoratorByClassName(goog.ui.ButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null)});goog.ui.INLINE_BLOCK_CLASSNAME="goog-inline-block";goog.ui.FlatButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.FlatButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.FlatButtonRenderer);goog.ui.FlatButtonRenderer.CSS_CLASS="goog-flat-button";goog.ui.FlatButtonRenderer.prototype.createDom=function(d){var c=this.getClassNames(d),c={"class":goog.ui.INLINE_BLOCK_CLASSNAME+" "+c.join(" "),title:d.getTooltip()||""};return d.getDomHelper().createDom("div",c,d.getContent())};goog.ui.FlatButtonRenderer.prototype.getAriaRole=function(){return goog.dom.a11y.Role.BUTTON};goog.ui.FlatButtonRenderer.prototype.canDecorate=function(b){return"DIV"==b.tagName};goog.ui.FlatButtonRenderer.prototype.decorate=function(d,c){goog.dom.classes.add(c,goog.ui.INLINE_BLOCK_CLASSNAME);return goog.ui.FlatButtonRenderer.superClass_.decorate.call(this,d,c)};goog.ui.FlatButtonRenderer.prototype.getValue=function(){return""};goog.ui.FlatButtonRenderer.prototype.getCssClass=function(){return goog.ui.FlatButtonRenderer.CSS_CLASS};goog.ui.registry.setDecoratorByClassName(goog.ui.FlatButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null,goog.ui.FlatButtonRenderer.getInstance())});goog.ui.LinkButtonRenderer=function(){goog.ui.FlatButtonRenderer.call(this)};goog.inherits(goog.ui.LinkButtonRenderer,goog.ui.FlatButtonRenderer);goog.addSingletonGetter(goog.ui.LinkButtonRenderer);goog.ui.LinkButtonRenderer.CSS_CLASS="goog-link-button";goog.ui.LinkButtonRenderer.prototype.getCssClass=function(){return goog.ui.LinkButtonRenderer.CSS_CLASS};goog.ui.registry.setDecoratorByClassName(goog.ui.LinkButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null,goog.ui.LinkButtonRenderer.getInstance())});goog.window={};goog.window.DEFAULT_POPUP_HEIGHT=500;goog.window.DEFAULT_POPUP_WIDTH=690;goog.window.DEFAULT_POPUP_TARGET="google_popup";goog.window.open=function(h,g,l){g||(g={});var k=l||window;l="undefined"!=typeof h.href?h.href:String(h);h=g.target||h.target;var j=[],i;for(i in g){switch(i){case"width":case"height":case"top":case"left":j.push(i+"="+g[i]);break;case"target":case"noreferrer":break;default:j.push(i+"="+(g[i]?1:0))}}i=j.join(",");if(g.noreferrer){if(g=k.open("",h,i)){goog.userAgent.IE&&-1!=l.indexOf(";")&&(l="'"+l.replace(/'/g,"%27")+"'"),g.opener=null,goog.userAgent.WEBKIT?g.location.href=l:(l=goog.string.htmlEscape(l),g.document.write('<META HTTP-EQUIV="refresh" content="0; url='+l+'">'),g.document.close())}}else{g=k.open(l,h,i)}return g};goog.window.openBlank=function(e,d,f){e=e?goog.string.htmlEscape(e):"";return goog.window.open('javascript:"'+encodeURI(e)+'"',d,f)};goog.window.popup=function(e,d){d||(d={});d.target=d.target||e.target||goog.window.DEFAULT_POPUP_TARGET;d.width=d.width||goog.window.DEFAULT_POPUP_WIDTH;d.height=d.height||goog.window.DEFAULT_POPUP_HEIGHT;var f=goog.window.open(e,d);if(!f){return !0}f.focus();return !1};goog.ui.TabRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.TabRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.TabRenderer);goog.ui.TabRenderer.CSS_CLASS="goog-tab";goog.ui.TabRenderer.prototype.getCssClass=function(){return goog.ui.TabRenderer.CSS_CLASS};goog.ui.TabRenderer.prototype.getAriaRole=function(){return goog.dom.a11y.Role.TAB};goog.ui.TabRenderer.prototype.createDom=function(d){var c=goog.ui.TabRenderer.superClass_.createDom.call(this,d);(d=d.getTooltip())&&this.setTooltip(c,d);return c};goog.ui.TabRenderer.prototype.decorate=function(e,d){d=goog.ui.TabRenderer.superClass_.decorate.call(this,e,d);var f=this.getTooltip(d);f&&e.setTooltipInternal(f);if(e.isSelected()&&(f=e.getParent())&&goog.isFunction(f.setSelectedTab)){e.setState(goog.ui.Component.State.SELECTED,!1),f.setSelectedTab(e)}return d};goog.ui.TabRenderer.prototype.getTooltip=function(b){return b.title||""};goog.ui.TabRenderer.prototype.setTooltip=function(d,c){d&&(d.title=c||"")};goog.ui.Tab=function(e,d,f){goog.ui.Control.call(this,e,d||goog.ui.TabRenderer.getInstance(),f);this.setSupportedState(goog.ui.Component.State.SELECTED,!0);this.setDispatchTransitionEvents(goog.ui.Component.State.DISABLED|goog.ui.Component.State.SELECTED,!0)};goog.inherits(goog.ui.Tab,goog.ui.Control);goog.ui.Tab.prototype.getTooltip=function(){return this.tooltip_};goog.ui.Tab.prototype.setTooltip=function(b){this.getRenderer().setTooltip(this.getElement(),b);this.setTooltipInternal(b)};goog.ui.Tab.prototype.setTooltipInternal=function(b){this.tooltip_=b};goog.ui.registry.setDecoratorByClassName(goog.ui.TabRenderer.CSS_CLASS,function(){return new goog.ui.Tab(null)});goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer);goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator";goog.ui.MenuSeparatorRenderer.prototype.createDom=function(b){return b.getDomHelper().createDom("div",this.getCssClass())};goog.ui.MenuSeparatorRenderer.prototype.decorate=function(e,d){d.id&&e.setId(d.id);if("HR"==d.tagName){var f=d;d=this.createDom(e);goog.dom.insertSiblingBefore(d,f);goog.dom.removeNode(f)}else{goog.dom.classes.add(d,this.getCssClass())}return d};goog.ui.MenuSeparatorRenderer.prototype.setContent=function(){};goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS};goog.ui.Separator=function(d,c){goog.ui.Control.call(this,null,d||goog.ui.MenuSeparatorRenderer.getInstance(),c);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(goog.ui.Separator,goog.ui.Control);goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);goog.dom.a11y.setRole(this.getElement(),"separator")};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.ContainerRenderer=function(){};goog.addSingletonGetter(goog.ui.ContainerRenderer);goog.ui.ContainerRenderer.getCustomRenderer=function(e,d){var f=new e;f.getCssClass=function(){return d};return f};goog.ui.ContainerRenderer.CSS_CLASS="goog-container";goog.ui.ContainerRenderer.prototype.getAriaRole=function(){};goog.ui.ContainerRenderer.prototype.enableTabIndex=function(d,c){d&&(d.tabIndex=c?0:-1)};goog.ui.ContainerRenderer.prototype.createDom=function(b){return b.getDomHelper().createDom("div",this.getClassNames(b).join(" "))};goog.ui.ContainerRenderer.prototype.getContentElement=function(b){return b};goog.ui.ContainerRenderer.prototype.canDecorate=function(b){return"DIV"==b.tagName};goog.ui.ContainerRenderer.prototype.decorate=function(g,f){f.id&&g.setId(f.id);var j=this.getCssClass(),i=!1,h=goog.dom.classes.get(f);h&&goog.array.forEach(h,function(a){a==j?i=!0:a&&this.setStateFromClassName(g,a,j)},this);i||goog.dom.classes.add(f,j);this.decorateChildren(g,this.getContentElement(f));return f};goog.ui.ContainerRenderer.prototype.setStateFromClassName=function(e,d,f){d==f+"-disabled"?e.setEnabled(!1):d==f+"-horizontal"?e.setOrientation(goog.ui.Container.Orientation.HORIZONTAL):d==f+"-vertical"&&e.setOrientation(goog.ui.Container.Orientation.VERTICAL)};goog.ui.ContainerRenderer.prototype.decorateChildren=function(g,f,j){if(f){j=j||f.firstChild;for(var i;j&&j.parentNode==f;){i=j.nextSibling;if(j.nodeType==goog.dom.NodeType.ELEMENT){var h=this.getDecoratorForChild(j);h&&(h.setElementInternal(j),g.isEnabled()||h.setEnabled(!1),g.addChild(h),h.decorate(j))}else{(!j.nodeValue||""==goog.string.trim(j.nodeValue))&&f.removeChild(j)}j=i}}};goog.ui.ContainerRenderer.prototype.getDecoratorForChild=function(b){return goog.ui.registry.getDecorator(b)};goog.ui.ContainerRenderer.prototype.initializeDom=function(d){d=d.getElement();goog.style.setUnselectable(d,!0,goog.userAgent.GECKO);goog.userAgent.IE&&(d.hideFocus=!0);var c=this.getAriaRole();c&&goog.dom.a11y.setRole(d,c)};goog.ui.ContainerRenderer.prototype.getKeyEventTarget=function(b){return b.getElement()};goog.ui.ContainerRenderer.prototype.getCssClass=function(){return goog.ui.ContainerRenderer.CSS_CLASS};goog.ui.ContainerRenderer.prototype.getClassNames=function(e){var d=this.getCssClass(),f=e.getOrientation()==goog.ui.Container.Orientation.HORIZONTAL,f=[d,f?d+"-horizontal":d+"-vertical"];e.isEnabled()||f.push(d+"-disabled");return f};goog.ui.ContainerRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.VERTICAL};goog.ui.TabBarRenderer=function(){goog.ui.ContainerRenderer.call(this)};goog.inherits(goog.ui.TabBarRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.TabBarRenderer);goog.ui.TabBarRenderer.CSS_CLASS="goog-tab-bar";goog.ui.TabBarRenderer.prototype.getCssClass=function(){return goog.ui.TabBarRenderer.CSS_CLASS};goog.ui.TabBarRenderer.prototype.getAriaRole=function(){return goog.dom.a11y.Role.TAB_LIST};goog.ui.TabBarRenderer.prototype.setStateFromClassName=function(f,e,h){this.locationByClass_||this.createLocationByClassMap_();var g=this.locationByClass_[e];g?f.setLocation(g):goog.ui.TabBarRenderer.superClass_.setStateFromClassName.call(this,f,e,h)};goog.ui.TabBarRenderer.prototype.getClassNames=function(d){var c=goog.ui.TabBarRenderer.superClass_.getClassNames.call(this,d);this.classByLocation_||this.createClassByLocationMap_();c.push(this.classByLocation_[d.getLocation()]);return c};goog.ui.TabBarRenderer.prototype.createClassByLocationMap_=function(){var b=this.getCssClass();this.classByLocation_=goog.object.create(goog.ui.TabBar.Location.TOP,b+"-top",goog.ui.TabBar.Location.BOTTOM,b+"-bottom",goog.ui.TabBar.Location.START,b+"-start",goog.ui.TabBar.Location.END,b+"-end")};goog.ui.TabBarRenderer.prototype.createLocationByClassMap_=function(){this.classByLocation_||this.createClassByLocationMap_();this.locationByClass_=goog.object.transpose(this.classByLocation_)};goog.ui.Container=function(e,d,f){goog.ui.Component.call(this,f);this.renderer_=d||goog.ui.ContainerRenderer.getInstance();this.orientation_=e||this.renderer_.getDefaultOrientation()};goog.inherits(goog.ui.Container,goog.ui.Component);goog.ui.Container.EventType={AFTER_SHOW:"aftershow",AFTER_HIDE:"afterhide"};goog.ui.Container.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"};goog.ui.Container.prototype.keyEventTarget_=null;goog.ui.Container.prototype.keyHandler_=null;goog.ui.Container.prototype.renderer_=null;goog.ui.Container.prototype.orientation_=null;goog.ui.Container.prototype.visible_=!0;goog.ui.Container.prototype.enabled_=!0;goog.ui.Container.prototype.focusable_=!0;goog.ui.Container.prototype.highlightedIndex_=-1;goog.ui.Container.prototype.openItem_=null;goog.ui.Container.prototype.mouseButtonPressed_=!1;goog.ui.Container.prototype.allowFocusableChildren_=!1;goog.ui.Container.prototype.openFollowsHighlight_=!0;goog.ui.Container.prototype.childElementIdMap_=null;goog.ui.Container.prototype.getKeyEventTarget=function(){return this.keyEventTarget_||this.renderer_.getKeyEventTarget(this)};goog.ui.Container.prototype.setKeyEventTarget=function(f){if(this.focusable_){var e=this.getKeyEventTarget(),h=this.isInDocument();this.keyEventTarget_=f;var g=this.getKeyEventTarget();h&&(this.keyEventTarget_=e,this.enableFocusHandling_(!1),this.keyEventTarget_=f,this.getKeyHandler().attach(g),this.enableFocusHandling_(!0))}else{throw Error("Can't set key event target for container that doesn't support keyboard focus!")}};goog.ui.Container.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler(this.getKeyEventTarget()))};goog.ui.Container.prototype.getRenderer=function(){return this.renderer_};goog.ui.Container.prototype.setRenderer=function(b){if(this.getElement()){throw Error(goog.ui.Component.Error.ALREADY_RENDERED)}this.renderer_=b};goog.ui.Container.prototype.createDom=function(){this.setElementInternal(this.renderer_.createDom(this))};goog.ui.Container.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Container.prototype.canDecorate=function(b){return this.renderer_.canDecorate(b)};goog.ui.Container.prototype.decorateInternal=function(b){this.setElementInternal(this.renderer_.decorate(this,b));"none"==b.style.display&&(this.visible_=!1)};goog.ui.Container.prototype.enterDocument=function(){goog.ui.Container.superClass_.enterDocument.call(this);this.forEachChild(function(c){c.isInDocument()&&this.registerChildId_(c)},this);var b=this.getElement();this.renderer_.initializeDom(this);this.setVisible(this.visible_,!0);this.getHandler().listen(this,goog.ui.Component.EventType.ENTER,this.handleEnterItem).listen(this,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem).listen(this,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem).listen(this,goog.ui.Component.EventType.OPEN,this.handleOpenItem).listen(this,goog.ui.Component.EventType.CLOSE,this.handleCloseItem).listen(b,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(goog.dom.getOwnerDocument(b),goog.events.EventType.MOUSEUP,this.handleDocumentMouseUp).listen(b,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.MOUSEUP,goog.events.EventType.MOUSEOVER,goog.events.EventType.MOUSEOUT,goog.events.EventType.CONTEXTMENU],this.handleChildMouseEvents);this.isFocusable()&&this.enableFocusHandling_(!0)};goog.ui.Container.prototype.enableFocusHandling_=function(e){var d=this.getHandler(),f=this.getKeyEventTarget();e?d.listen(f,goog.events.EventType.FOCUS,this.handleFocus).listen(f,goog.events.EventType.BLUR,this.handleBlur).listen(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent):d.unlisten(f,goog.events.EventType.FOCUS,this.handleFocus).unlisten(f,goog.events.EventType.BLUR,this.handleBlur).unlisten(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent)};goog.ui.Container.prototype.exitDocument=function(){this.setHighlightedIndex(-1);this.openItem_&&this.openItem_.setOpen(!1);this.mouseButtonPressed_=!1;goog.ui.Container.superClass_.exitDocument.call(this)};goog.ui.Container.prototype.disposeInternal=function(){goog.ui.Container.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),this.keyHandler_=null);this.renderer_=this.openItem_=this.childElementIdMap_=this.keyEventTarget_=null};goog.ui.Container.prototype.handleEnterItem=function(){return !0};goog.ui.Container.prototype.handleHighlightItem=function(e){var d=this.indexOfChild(e.target);if(-1<d&&d!=this.highlightedIndex_){var f=this.getHighlighted();f&&f.setHighlighted(!1);this.highlightedIndex_=d;f=this.getHighlighted();this.isMouseButtonPressed()&&f.setActive(!0);this.openFollowsHighlight_&&(this.openItem_&&f!=this.openItem_)&&(f.isSupportedState(goog.ui.Component.State.OPENED)?f.setOpen(!0):this.openItem_.setOpen(!1))}goog.dom.a11y.setState(this.getElement(),goog.dom.a11y.State.ACTIVEDESCENDANT,e.target.getElement().id)};goog.ui.Container.prototype.handleUnHighlightItem=function(b){b.target==this.getHighlighted()&&(this.highlightedIndex_=-1);goog.dom.a11y.setState(this.getElement(),goog.dom.a11y.State.ACTIVEDESCENDANT,"")};goog.ui.Container.prototype.handleOpenItem=function(b){if((b=b.target)&&b!=this.openItem_&&b.getParent()==this){this.openItem_&&this.openItem_.setOpen(!1),this.openItem_=b}};goog.ui.Container.prototype.handleCloseItem=function(b){b.target==this.openItem_&&(this.openItem_=null)};goog.ui.Container.prototype.handleMouseDown=function(d){this.enabled_&&this.setMouseButtonPressed(!0);var c=this.getKeyEventTarget();c&&goog.dom.isFocusableTabIndex(c)?c.focus():d.preventDefault()};goog.ui.Container.prototype.handleDocumentMouseUp=function(){this.setMouseButtonPressed(!1)};goog.ui.Container.prototype.handleChildMouseEvents=function(d){var c=this.getOwnerControl(d.target);if(c){switch(d.type){case goog.events.EventType.MOUSEDOWN:c.handleMouseDown(d);break;case goog.events.EventType.MOUSEUP:c.handleMouseUp(d);break;case goog.events.EventType.MOUSEOVER:c.handleMouseOver(d);break;case goog.events.EventType.MOUSEOUT:c.handleMouseOut(d);break;case goog.events.EventType.CONTEXTMENU:c.handleContextMenu(d)}}};goog.ui.Container.prototype.getOwnerControl=function(e){if(this.childElementIdMap_){for(var d=this.getElement();e&&e!==d;){var f=e.id;if(f in this.childElementIdMap_){return this.childElementIdMap_[f]}e=e.parentNode}}return null};goog.ui.Container.prototype.handleFocus=function(){};goog.ui.Container.prototype.handleBlur=function(){this.setHighlightedIndex(-1);this.setMouseButtonPressed(!1);this.openItem_&&this.openItem_.setOpen(!1)};goog.ui.Container.prototype.handleKeyEvent=function(b){return this.isEnabled()&&this.isVisible()&&(0!=this.getChildCount()||this.keyEventTarget_)&&this.handleKeyEventInternal(b)?(b.preventDefault(),b.stopPropagation(),!0):!1};goog.ui.Container.prototype.handleKeyEventInternal=function(d){var c=this.getHighlighted();if(c&&"function"==typeof c.handleKeyEvent&&c.handleKeyEvent(d)||this.openItem_&&this.openItem_!=c&&"function"==typeof this.openItem_.handleKeyEvent&&this.openItem_.handleKeyEvent(d)){return !0}if(d.shiftKey||d.ctrlKey||d.metaKey||d.altKey){return !1}switch(d.keyCode){case goog.events.KeyCodes.ESC:if(this.isFocusable()){this.getKeyEventTarget().blur()}else{return !1}break;case goog.events.KeyCodes.HOME:this.highlightFirst();break;case goog.events.KeyCodes.END:this.highlightLast();break;case goog.events.KeyCodes.UP:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL){this.highlightPrevious()}else{return !1}break;case goog.events.KeyCodes.LEFT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL){this.isRightToLeft()?this.highlightNext():this.highlightPrevious()}else{return !1}break;case goog.events.KeyCodes.DOWN:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL){this.highlightNext()}else{return !1}break;case goog.events.KeyCodes.RIGHT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL){this.isRightToLeft()?this.highlightPrevious():this.highlightNext()}else{return !1}break;default:return !1}return !0};goog.ui.Container.prototype.registerChildId_=function(d){var c=d.getElement(),c=c.id||(c.id=d.getId());this.childElementIdMap_||(this.childElementIdMap_={});this.childElementIdMap_[c]=d};goog.ui.Container.prototype.addChild=function(d,c){goog.asserts.assertInstanceof(d,goog.ui.Control,"The child of a container must be a control");goog.ui.Container.superClass_.addChild.call(this,d,c)};goog.ui.Container.prototype.addChildAt=function(e,d,f){e.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0);e.setDispatchTransitionEvents(goog.ui.Component.State.OPENED,!0);(this.isFocusable()||!this.isFocusableChildrenAllowed())&&e.setSupportedState(goog.ui.Component.State.FOCUSED,!1);e.setHandleMouseEvents(!1);goog.ui.Container.superClass_.addChildAt.call(this,e,d,f);e.isInDocument()&&this.isInDocument()&&this.registerChildId_(e);d<=this.highlightedIndex_&&this.highlightedIndex_++};goog.ui.Container.prototype.removeChild=function(e,d){if(e=goog.isString(e)?this.getChild(e):e){var f=this.indexOfChild(e);-1!=f&&(f==this.highlightedIndex_?e.setHighlighted(!1):f<this.highlightedIndex_&&this.highlightedIndex_--);(f=e.getElement())&&(f.id&&this.childElementIdMap_)&&goog.object.remove(this.childElementIdMap_,f.id)}e=goog.ui.Container.superClass_.removeChild.call(this,e,d);e.setHandleMouseEvents(!0);return e};goog.ui.Container.prototype.getOrientation=function(){return this.orientation_};goog.ui.Container.prototype.setOrientation=function(b){if(this.getElement()){throw Error(goog.ui.Component.Error.ALREADY_RENDERED)}this.orientation_=b};goog.ui.Container.prototype.isVisible=function(){return this.visible_};goog.ui.Container.prototype.setVisible=function(e,d){if(d||this.visible_!=e&&this.dispatchEvent(e?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){this.visible_=e;var f=this.getElement();f&&(goog.style.showElement(f,e),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),this.enabled_&&this.visible_),d||this.dispatchEvent(this.visible_?goog.ui.Container.EventType.AFTER_SHOW:goog.ui.Container.EventType.AFTER_HIDE));return !0}return !1};goog.ui.Container.prototype.isEnabled=function(){return this.enabled_};goog.ui.Container.prototype.setEnabled=function(b){if(this.enabled_!=b&&this.dispatchEvent(b?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)){b?(this.enabled_=!0,this.forEachChild(function(c){c.wasDisabled?delete c.wasDisabled:c.setEnabled(!0)})):(this.forEachChild(function(c){c.isEnabled()?c.setEnabled(!1):c.wasDisabled=!0}),this.enabled_=!1,this.setMouseButtonPressed(!1)),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),b&&this.visible_)}};goog.ui.Container.prototype.isFocusable=function(){return this.focusable_};goog.ui.Container.prototype.setFocusable=function(b){b!=this.focusable_&&this.isInDocument()&&this.enableFocusHandling_(b);this.focusable_=b;this.enabled_&&this.visible_&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),b)};goog.ui.Container.prototype.isFocusableChildrenAllowed=function(){return this.allowFocusableChildren_};goog.ui.Container.prototype.setFocusableChildrenAllowed=function(b){this.allowFocusableChildren_=b};goog.ui.Container.prototype.isOpenFollowsHighlight=function(){return this.openFollowsHighlight_};goog.ui.Container.prototype.setOpenFollowsHighlight=function(b){this.openFollowsHighlight_=b};goog.ui.Container.prototype.getHighlightedIndex=function(){return this.highlightedIndex_};goog.ui.Container.prototype.setHighlightedIndex=function(b){(b=this.getChildAt(b))?b.setHighlighted(!0):-1<this.highlightedIndex_&&this.getHighlighted().setHighlighted(!1)};goog.ui.Container.prototype.setHighlighted=function(b){this.setHighlightedIndex(this.indexOfChild(b))};goog.ui.Container.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)};goog.ui.Container.prototype.highlightFirst=function(){this.highlightHelper(function(d,c){return(d+1)%c},this.getChildCount()-1)};goog.ui.Container.prototype.highlightLast=function(){this.highlightHelper(function(d,c){d--;return 0>d?c-1:d},0)};goog.ui.Container.prototype.highlightNext=function(){this.highlightHelper(function(d,c){return(d+1)%c},this.highlightedIndex_)};goog.ui.Container.prototype.highlightPrevious=function(){this.highlightHelper(function(d,c){d--;return 0>d?c-1:d},this.highlightedIndex_)};goog.ui.Container.prototype.highlightHelper=function(h,g){for(var l=0>g?this.indexOfChild(this.openItem_):g,k=this.getChildCount(),l=h.call(this,l,k),j=0;j<=k;){var i=this.getChildAt(l);if(i&&this.canHighlightItem(i)){return this.setHighlightedIndexFromKeyEvent(l),!0}j++;l=h.call(this,l,k)}return !1};goog.ui.Container.prototype.canHighlightItem=function(b){return b.isVisible()&&b.isEnabled()&&b.isSupportedState(goog.ui.Component.State.HOVER)};goog.ui.Container.prototype.setHighlightedIndexFromKeyEvent=function(b){this.setHighlightedIndex(b)};goog.ui.Container.prototype.getOpenItem=function(){return this.openItem_};goog.ui.Container.prototype.isMouseButtonPressed=function(){return this.mouseButtonPressed_};goog.ui.Container.prototype.setMouseButtonPressed=function(b){this.mouseButtonPressed_=b};goog.ui.TabBar=function(e,d,f){this.setLocation(e||goog.ui.TabBar.Location.TOP);goog.ui.Container.call(this,this.getOrientation(),d||goog.ui.TabBarRenderer.getInstance(),f);this.listenToTabEvents_()};goog.inherits(goog.ui.TabBar,goog.ui.Container);goog.ui.TabBar.Location={TOP:"top",BOTTOM:"bottom",START:"start",END:"end"};goog.ui.TabBar.prototype.autoSelectTabs_=!0;goog.ui.TabBar.prototype.selectedTab_=null;goog.ui.TabBar.prototype.enterDocument=function(){goog.ui.TabBar.superClass_.enterDocument.call(this);this.listenToTabEvents_()};goog.ui.TabBar.prototype.disposeInternal=function(){goog.ui.TabBar.superClass_.disposeInternal.call(this);this.selectedTab_=null};goog.ui.TabBar.prototype.removeChild=function(d,c){this.deselectIfSelected(d);return goog.ui.TabBar.superClass_.removeChild.call(this,d,c)};goog.ui.TabBar.prototype.getLocation=function(){return this.location_};goog.ui.TabBar.prototype.setLocation=function(b){this.setOrientation(goog.ui.TabBar.getOrientationFromLocation(b));this.location_=b};goog.ui.TabBar.prototype.isAutoSelectTabs=function(){return this.autoSelectTabs_};goog.ui.TabBar.prototype.setAutoSelectTabs=function(b){this.autoSelectTabs_=b};goog.ui.TabBar.prototype.setHighlightedIndexFromKeyEvent=function(b){goog.ui.TabBar.superClass_.setHighlightedIndexFromKeyEvent.call(this,b);this.autoSelectTabs_&&this.setSelectedTabIndex(b)};goog.ui.TabBar.prototype.getSelectedTab=function(){return this.selectedTab_};goog.ui.TabBar.prototype.setSelectedTab=function(b){b?b.setSelected(!0):this.getSelectedTab()&&this.getSelectedTab().setSelected(!1)};goog.ui.TabBar.prototype.getSelectedTabIndex=function(){return this.indexOfChild(this.getSelectedTab())};goog.ui.TabBar.prototype.setSelectedTabIndex=function(b){this.setSelectedTab(this.getChildAt(b))};goog.ui.TabBar.prototype.deselectIfSelected=function(e){if(e&&e==this.getSelectedTab()){for(var d=this.indexOfChild(e),f=d-1;e=this.getChildAt(f);f--){if(this.isSelectableTab(e)){this.setSelectedTab(e);return}}for(d+=1;e=this.getChildAt(d);d++){if(this.isSelectableTab(e)){this.setSelectedTab(e);return}}this.setSelectedTab(null)}};goog.ui.TabBar.prototype.isSelectableTab=function(b){return b.isVisible()&&b.isEnabled()};goog.ui.TabBar.prototype.handleTabSelect=function(b){this.selectedTab_&&this.selectedTab_!=b.target&&this.selectedTab_.setSelected(!1);this.selectedTab_=b.target};goog.ui.TabBar.prototype.handleTabUnselect=function(b){b.target==this.selectedTab_&&(this.selectedTab_=null)};goog.ui.TabBar.prototype.handleTabDisable=function(b){this.deselectIfSelected(b.target)};goog.ui.TabBar.prototype.handleTabHide=function(b){this.deselectIfSelected(b.target)};goog.ui.TabBar.prototype.handleFocus=function(){this.getHighlighted()||this.setHighlighted(this.getSelectedTab()||this.getChildAt(0))};goog.ui.TabBar.prototype.listenToTabEvents_=function(){this.getHandler().listen(this,goog.ui.Component.EventType.SELECT,this.handleTabSelect).listen(this,goog.ui.Component.EventType.UNSELECT,this.handleTabUnselect).listen(this,goog.ui.Component.EventType.DISABLE,this.handleTabDisable).listen(this,goog.ui.Component.EventType.HIDE,this.handleTabHide)};goog.ui.TabBar.getOrientationFromLocation=function(b){return b==goog.ui.TabBar.Location.START||b==goog.ui.TabBar.Location.END?goog.ui.Container.Orientation.VERTICAL:goog.ui.Container.Orientation.HORIZONTAL};goog.ui.registry.setDecoratorByClassName(goog.ui.TabBarRenderer.CSS_CLASS,function(){return new goog.ui.TabBar});goog.ui.editor.TabPane=function(e,d){goog.ui.Component.call(this,e);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);this.tabBar_=new goog.ui.TabBar(goog.ui.TabBar.Location.START,void 0,this.dom_);this.tabBar_.setFocusable(!1);this.tabContent_=this.dom_.createDom(goog.dom.TagName.DIV,{className:"goog-tab-content"});this.visibleContent_=this.selectedRadio_=null;if(d){var f=new goog.ui.Control(d,void 0,this.dom_);f.addClassName("tr-tabpane-caption");f.setEnabled(!1);this.tabBar_.addChild(f,!0)}};goog.inherits(goog.ui.editor.TabPane,goog.ui.Component);goog.ui.editor.TabPane.prototype.getCurrentTabId=function(){return this.tabBar_.getSelectedTab().getId()};goog.ui.editor.TabPane.prototype.setSelectedTabId=function(b){this.tabBar_.setSelectedTab(this.tabBar_.getChild(b))};goog.ui.editor.TabPane.prototype.addTab=function(g,f,j,i){var h=this.dom_.createDom(goog.dom.TagName.INPUT,{type:"radio"});f=new goog.ui.Tab([h,this.dom_.createTextNode(f)],void 0,this.dom_);f.setId(g);f.setTooltip(j);this.tabBar_.addChild(f,!0);this.eventHandler_.listen(h,goog.events.EventType.SELECT,goog.bind(this.tabBar_.setSelectedTab,this.tabBar_,f));i.id=g+"-tab";this.tabContent_.appendChild(i);goog.style.showElement(i,!1)};goog.ui.editor.TabPane.prototype.enterDocument=function(){goog.ui.editor.TabPane.superClass_.enterDocument.call(this);var b=this.getElement();goog.dom.classes.add(b,"tr-tabpane");this.addChild(this.tabBar_,!0);this.eventHandler_.listen(this.tabBar_,goog.ui.Component.EventType.SELECT,this.handleTabSelect_);b.appendChild(this.tabContent_);b.appendChild(this.dom_.createDom(goog.dom.TagName.DIV,{className:"goog-tab-bar-clear"}))};goog.ui.editor.TabPane.prototype.handleTabSelect_=function(b){b=b.target;this.visibleContent_&&goog.style.showElement(this.visibleContent_,!1);this.visibleContent_=this.dom_.getElement(b.getId()+"-tab");goog.style.showElement(this.visibleContent_,!0);this.selectedRadio_&&(this.selectedRadio_.checked=!1);this.selectedRadio_=b.getElement().getElementsByTagName(goog.dom.TagName.INPUT)[0];this.selectedRadio_.checked=!0};goog.dom.selection={};goog.dom.selection.setStart=function(f,e){if(goog.dom.selection.useSelectionProperties_(f)){f.selectionStart=e}else{if(goog.userAgent.IE){var h=goog.dom.selection.getRangeIe_(f),g=h[0];g.inRange(h[1])&&(e=goog.dom.selection.canonicalizePositionIe_(f,e),g.collapse(!0),g.move("character",e),g.select())}}};goog.dom.selection.getStart=function(b){return goog.dom.selection.getEndPoints_(b,!0)[0]};goog.dom.selection.getEndPointsTextareaIe_=function(j,i,p){i=i.duplicate();for(var o=j.text,n=o,m=i.text,l=m,k=!1;!k;){0==j.compareEndPoints("StartToEnd",j)?k=!0:(j.moveEnd("character",-1),j.text==o?n+="\r\n":k=!0)}if(p){return[n.length,-1]}for(j=!1;!j;){0==i.compareEndPoints("StartToEnd",i)?j=!0:(i.moveEnd("character",-1),i.text==m?l+="\r\n":j=!0)}return[n.length,n.length+l.length]};goog.dom.selection.getEndPoints=function(b){return goog.dom.selection.getEndPoints_(b,!1)};goog.dom.selection.getEndPoints_=function(h,g){var l=0,k=0;if(goog.dom.selection.useSelectionProperties_(h)){l=h.selectionStart,k=g?-1:h.selectionEnd}else{if(goog.userAgent.IE){var j=goog.dom.selection.getRangeIe_(h),i=j[0],j=j[1];if(i.inRange(j)){i.setEndPoint("EndToStart",j);if("textarea"==h.type){return goog.dom.selection.getEndPointsTextareaIe_(i,j,g)}l=i.text.length;k=g?-1:i.text.length+j.text.length}}}return[l,k]};goog.dom.selection.setEnd=function(f,e){if(goog.dom.selection.useSelectionProperties_(f)){f.selectionEnd=e}else{if(goog.userAgent.IE){var h=goog.dom.selection.getRangeIe_(f),g=h[1];h[0].inRange(g)&&(e=goog.dom.selection.canonicalizePositionIe_(f,e),h=goog.dom.selection.canonicalizePositionIe_(f,goog.dom.selection.getStart(f)),g.collapse(!0),g.moveEnd("character",e-h),g.select())}}};goog.dom.selection.getEnd=function(b){return goog.dom.selection.getEndPoints_(b,!1)[1]};goog.dom.selection.setCursorPosition=function(e,d){if(goog.dom.selection.useSelectionProperties_(e)){e.selectionStart=d,e.selectionEnd=d}else{if(goog.userAgent.IE){d=goog.dom.selection.canonicalizePositionIe_(e,d);var f=e.createTextRange();f.collapse(!0);f.move("character",d);f.select()}}};goog.dom.selection.setText=function(g,f){if(goog.dom.selection.useSelectionProperties_(g)){var j=g.value,i=g.selectionStart,h=j.substr(0,i),j=j.substr(g.selectionEnd);g.value=h+f+j;g.selectionStart=i;g.selectionEnd=i+f.length}else{if(goog.userAgent.IE){h=goog.dom.selection.getRangeIe_(g),i=h[1],h[0].inRange(i)&&(h=i.duplicate(),i.text=f,i.setEndPoint("StartToStart",h),i.select())}else{throw Error("Cannot set the selection end")}}};goog.dom.selection.getText=function(e){if(goog.dom.selection.useSelectionProperties_(e)){return e.value.substring(e.selectionStart,e.selectionEnd)}if(goog.userAgent.IE){var d=goog.dom.selection.getRangeIe_(e),f=d[1];if(d[0].inRange(f)){if("textarea"==e.type){return goog.dom.selection.getSelectionRangeText_(f)}}else{return""}return f.text}throw Error("Cannot get the selection text")};goog.dom.selection.getSelectionRangeText_=function(f){f=f.duplicate();for(var e=f.text,h=e,g=!1;!g;){0==f.compareEndPoints("StartToEnd",f)?g=!0:(f.moveEnd("character",-1),f.text==e?h+="\r\n":g=!0)}return h};goog.dom.selection.getRangeIe_=function(e){var d=e.ownerDocument||e.document,f=d.selection.createRange();"textarea"==e.type?(d=d.body.createTextRange(),d.moveToElementText(e)):d=e.createTextRange();return[d,f]};goog.dom.selection.canonicalizePositionIe_=function(e,d){if("textarea"==e.type){var f=e.value.substring(0,d);d=goog.string.canonicalizeNewlines(f).length}return d};goog.dom.selection.useSelectionProperties_=function(d){try{return"number"==typeof d.selectionStart}catch(c){return !1}};goog.editor.focus={};goog.editor.focus.focusInputField=function(b){b.focus();goog.dom.selection.setCursorPosition(b,b.value.length)};goog.ui.editor.LinkDialog=function(d,c){goog.ui.editor.AbstractDialog.call(this,d);this.targetLink_=c;this.eventHandler_=new goog.events.EventHandler(this)};goog.inherits(goog.ui.editor.LinkDialog,goog.ui.editor.AbstractDialog);goog.ui.editor.LinkDialog.EventType={BEFORE_TEST_LINK:"beforetestlink"};goog.ui.editor.LinkDialog.OkEvent=function(f,e,h,g){goog.events.Event.call(this,goog.ui.editor.AbstractDialog.EventType.OK);this.linkText=f;this.linkUrl=e;this.openInNewWindow=h;this.noFollow=g};goog.inherits(goog.ui.editor.LinkDialog.OkEvent,goog.events.Event);goog.ui.editor.LinkDialog.BeforeTestLinkEvent=function(b){goog.events.Event.call(this,goog.ui.editor.LinkDialog.EventType.BEFORE_TEST_LINK);this.url=b};goog.inherits(goog.ui.editor.LinkDialog.BeforeTestLinkEvent,goog.events.Event);goog.ui.editor.LinkDialog.prototype.showOpenLinkInNewWindow_=!1;goog.ui.editor.LinkDialog.prototype.isOpenLinkInNewWindowChecked_=!1;goog.ui.editor.LinkDialog.prototype.showRelNoFollow_=!1;goog.ui.editor.LinkDialog.prototype.setEmailWarning=function(b){this.emailWarning_=b};goog.ui.editor.LinkDialog.prototype.showOpenLinkInNewWindow=function(b){this.showOpenLinkInNewWindow_=!0;this.isOpenLinkInNewWindowChecked_=b};goog.ui.editor.LinkDialog.prototype.showRelNoFollow=function(){this.showRelNoFollow_=!0};goog.ui.editor.LinkDialog.prototype.show=function(){goog.ui.editor.LinkDialog.superClass_.show.call(this);this.selectAppropriateTab_(this.textToDisplayInput_.value,this.getTargetUrl_());this.syncOkButton_();this.showOpenLinkInNewWindow_&&(this.targetLink_.isNew()||(this.isOpenLinkInNewWindowChecked_="_blank"==this.targetLink_.getAnchor().target),this.openInNewWindowCheckbox_.checked=this.isOpenLinkInNewWindowChecked_);this.showRelNoFollow_&&(this.relNoFollowCheckbox_.checked=goog.ui.editor.LinkDialog.hasNoFollow(this.targetLink_.getAnchor().rel))};goog.ui.editor.LinkDialog.prototype.hide=function(){this.disableAutogenFlag_(!1);goog.ui.editor.LinkDialog.superClass_.hide.call(this)};goog.ui.editor.LinkDialog.prototype.setTextToDisplayVisible=function(b){this.textToDisplayDiv_&&goog.style.setStyle(this.textToDisplayDiv_,"display",b?"block":"none")};goog.ui.editor.LinkDialog.prototype.setStopReferrerLeaks=function(b){this.stopReferrerLeaks_=b};goog.ui.editor.LinkDialog.prototype.setAutogenFeatureEnabled=function(b){this.autogenFeatureEnabled_=b};goog.ui.editor.LinkDialog.hasNoFollow=function(b){return goog.ui.editor.LinkDialog.NO_FOLLOW_REGEX_.test(b)};goog.ui.editor.LinkDialog.removeNoFollow=function(b){return b.replace(goog.ui.editor.LinkDialog.NO_FOLLOW_REGEX_,"")};goog.ui.editor.LinkDialog.prototype.createDialogControl=function(){var b=new goog.ui.editor.AbstractDialog.Builder(this);b.setTitle(goog.ui.editor.messages.MSG_EDIT_LINK).setContent(this.createDialogContent_());return b.build()};goog.ui.editor.LinkDialog.prototype.createOkEvent=function(){return this.tabPane_.getCurrentTabId()==goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_TAB?this.createOkEventFromEmailTab_():this.createOkEventFromWebTab_()};goog.ui.editor.LinkDialog.prototype.disposeInternal=function(){this.eventHandler_.dispose();this.eventHandler_=null;this.tabPane_.dispose();this.tabPane_=null;this.urlInputHandler_.dispose();this.urlInputHandler_=null;this.emailInputHandler_.dispose();this.emailInputHandler_=null;goog.ui.editor.LinkDialog.superClass_.disposeInternal.call(this)};goog.ui.editor.LinkDialog.NO_FOLLOW_REGEX_=/\bnofollow\b/i;goog.ui.editor.LinkDialog.prototype.autogenFeatureEnabled_=!0;goog.ui.editor.LinkDialog.prototype.stopReferrerLeaks_=!1;goog.ui.editor.LinkDialog.prototype.createDialogContent_=function(){this.textToDisplayDiv_=this.buildTextToDisplayDiv_();var b=this.dom.createDom(goog.dom.TagName.DIV,null,this.textToDisplayDiv_);this.tabPane_=new goog.ui.editor.TabPane(this.dom,goog.ui.editor.messages.MSG_LINK_TO);this.tabPane_.addTab(goog.ui.editor.LinkDialog.Id_.ON_WEB_TAB,goog.ui.editor.messages.MSG_ON_THE_WEB,goog.ui.editor.messages.MSG_ON_THE_WEB_TIP,this.buildTabOnTheWeb_());this.tabPane_.addTab(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_TAB,goog.ui.editor.messages.MSG_EMAIL_ADDRESS,goog.ui.editor.messages.MSG_EMAIL_ADDRESS_TIP,this.buildTabEmailAddress_());this.tabPane_.render(b);this.eventHandler_.listen(this.tabPane_,goog.ui.Component.EventType.SELECT,this.onChangeTab_);this.showOpenLinkInNewWindow_&&b.appendChild(this.buildOpenInNewWindowDiv_());this.showRelNoFollow_&&b.appendChild(this.buildRelNoFollowDiv_());return b};goog.ui.editor.LinkDialog.prototype.buildTextToDisplayDiv_=function(){var e=this.dom.createTable(1,2);e.cellSpacing="0";e.cellPadding="0";e.style.fontSize="10pt";var d=this.dom.createDom(goog.dom.TagName.DIV);e.rows[0].cells[0].innerHTML='<span style="position: relative; bottom: 2px; padding-right: 1px; white-space: nowrap;">'+goog.ui.editor.messages.MSG_TEXT_TO_DISPLAY+"&nbsp;</span>";var f=this.textToDisplayInput_=this.dom.createDom(goog.dom.TagName.INPUT,{id:goog.ui.editor.LinkDialog.Id_.TEXT_TO_DISPLAY});goog.style.setStyle(f,"width","98%");goog.style.setStyle(e.rows[0].cells[1],"width","100%");goog.dom.appendChild(e.rows[0].cells[1],f);f.value=this.targetLink_.getCurrentText();this.eventHandler_.listen(f,goog.events.EventType.KEYUP,goog.bind(this.onTextToDisplayEdit_,this));goog.dom.appendChild(d,e);return d};goog.ui.editor.LinkDialog.prototype.buildOpenInNewWindowDiv_=function(){this.openInNewWindowCheckbox_=this.dom.createDom(goog.dom.TagName.INPUT,{type:"checkbox"});return this.dom.createDom(goog.dom.TagName.DIV,null,this.dom.createDom(goog.dom.TagName.LABEL,null,this.openInNewWindowCheckbox_,goog.ui.editor.messages.MSG_OPEN_IN_NEW_WINDOW))};goog.ui.editor.LinkDialog.prototype.buildRelNoFollowDiv_=function(){var b=goog.getMsg("Add '{$relNoFollow}' attribute ({$linkStart}Learn more{$linkEnd})",{relNoFollow:"rel=nofollow",linkStart:'<a href="http://support.google.com/webmasters/bin/answer.py?hl=en&answer=96569" target="_blank">',linkEnd:"</a>"});this.relNoFollowCheckbox_=this.dom.createDom(goog.dom.TagName.INPUT,{type:"checkbox"});return this.dom.createDom(goog.dom.TagName.DIV,null,this.dom.createDom(goog.dom.TagName.LABEL,null,this.relNoFollowCheckbox_,goog.dom.htmlToDocumentFragment(b)))};goog.ui.editor.LinkDialog.prototype.buildTabOnTheWeb_=function(){var f=this.dom.createElement(goog.dom.TagName.DIV),e=this.dom.createDom(goog.dom.TagName.DIV,{innerHTML:"<b>"+goog.ui.editor.messages.MSG_WHAT_URL+"</b>"}),h=this.dom.createDom(goog.dom.TagName.INPUT,{id:goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT,className:goog.ui.editor.LinkDialog.TARGET_INPUT_CLASSNAME_});goog.userAgent.IE||(h.type="url");goog.editor.BrowserFeature.NEEDS_99_WIDTH_IN_STANDARDS_MODE&&goog.editor.node.isStandardsMode(h)&&(h.style.width="99%");var g=this.dom.createDom(goog.dom.TagName.DIV,null,h);this.urlInputHandler_=new goog.events.InputHandler(h);this.eventHandler_.listen(this.urlInputHandler_,goog.events.InputHandler.EventType.INPUT,this.onUrlOrEmailInputChange_);h=new goog.ui.Button(goog.ui.editor.messages.MSG_TEST_THIS_LINK,goog.ui.LinkButtonRenderer.getInstance(),this.dom);h.render(g);h.getElement().style.marginTop="1em";this.eventHandler_.listen(h,goog.ui.Component.EventType.ACTION,this.onWebTestLink_);h=this.dom.createDom(goog.dom.TagName.DIV,{className:goog.ui.editor.LinkDialog.EXPLANATION_TEXT_CLASSNAME_,innerHTML:goog.ui.editor.messages.MSG_TR_LINK_EXPLANATION});f.appendChild(e);f.appendChild(g);f.appendChild(h);return f};goog.ui.editor.LinkDialog.prototype.buildTabEmailAddress_=function(){var d=this.dom.createDom(goog.dom.TagName.DIV),c=this.dom.createDom(goog.dom.TagName.DIV,{innerHTML:"<b>"+goog.ui.editor.messages.MSG_WHAT_EMAIL+"</b>"});goog.dom.appendChild(d,c);c=this.dom.createDom(goog.dom.TagName.INPUT,{id:goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_INPUT,className:goog.ui.editor.LinkDialog.TARGET_INPUT_CLASSNAME_});goog.editor.BrowserFeature.NEEDS_99_WIDTH_IN_STANDARDS_MODE&&goog.editor.node.isStandardsMode(c)&&(c.style.width="99%");goog.dom.appendChild(d,c);this.emailInputHandler_=new goog.events.InputHandler(c);this.eventHandler_.listen(this.emailInputHandler_,goog.events.InputHandler.EventType.INPUT,this.onUrlOrEmailInputChange_);goog.dom.appendChild(d,this.dom.createDom(goog.dom.TagName.DIV,{id:goog.ui.editor.LinkDialog.Id_.EMAIL_WARNING,className:goog.ui.editor.LinkDialog.EMAIL_WARNING_CLASSNAME_,style:"visibility:hidden"},goog.ui.editor.messages.MSG_INVALID_EMAIL));this.emailWarning_&&(c=this.dom.createDom(goog.dom.TagName.DIV,{className:goog.ui.editor.LinkDialog.EXPLANATION_TEXT_CLASSNAME_,innerHTML:this.emailWarning_}),goog.dom.appendChild(d,c));return d};goog.ui.editor.LinkDialog.prototype.getTargetUrl_=function(){return this.targetLink_.getAnchor().getAttribute("href")||""};goog.ui.editor.LinkDialog.prototype.selectAppropriateTab_=function(d,c){this.isNewLink_()?this.guessUrlAndSelectTab_(d):(goog.editor.Link.isMailto(c)?(this.tabPane_.setSelectedTabId(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_TAB),this.dom.getElement(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_INPUT).value=c.substring(c.indexOf(":")+1)):(this.tabPane_.setSelectedTabId(goog.ui.editor.LinkDialog.Id_.ON_WEB_TAB),this.dom.getElement(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT).value=this.isNewLink_()?"http://":c),this.setAutogenFlagFromCurInput_())};goog.ui.editor.LinkDialog.prototype.guessUrlAndSelectTab_=function(b){goog.editor.Link.isLikelyEmailAddress(b)?(this.tabPane_.setSelectedTabId(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_TAB),this.dom.getElement(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_INPUT).value=b,this.setAutogenFlag_(!0),this.disableAutogenFlag_(!0)):goog.editor.Link.isLikelyUrl(b)?(this.tabPane_.setSelectedTabId(goog.ui.editor.LinkDialog.Id_.ON_WEB_TAB),this.dom.getElement(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT).value=b,this.setAutogenFlag_(!0),this.disableAutogenFlag_(!0)):(this.targetLink_.getCurrentText()||this.setAutogenFlag_(!0),this.tabPane_.setSelectedTabId(goog.ui.editor.LinkDialog.Id_.ON_WEB_TAB))};goog.ui.editor.LinkDialog.prototype.syncOkButton_=function(){var b;if(this.tabPane_.getCurrentTabId()==goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_TAB){b=this.dom.getElement(goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_INPUT).value,this.toggleInvalidEmailWarning_(""!=b&&!goog.editor.Link.isLikelyEmailAddress(b))}else{if(this.tabPane_.getCurrentTabId()==goog.ui.editor.LinkDialog.Id_.ON_WEB_TAB){b=this.dom.getElement(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT).value}else{return}}this.getOkButtonElement().disabled=goog.string.isEmpty(b)};goog.ui.editor.LinkDialog.prototype.toggleInvalidEmailWarning_=function(b){this.dom.getElement(goog.ui.editor.LinkDialog.Id_.EMAIL_WARNING).style.visibility=b?"visible":"hidden"};goog.ui.editor.LinkDialog.prototype.onTextToDisplayEdit_=function(){""==this.textToDisplayInput_.value?this.setAutogenFlag_(!0):this.setAutogenFlagFromCurInput_()};goog.ui.editor.LinkDialog.prototype.createOkEventFromWebTab_=function(){var b=this.dom.getElement(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT).value;if(goog.editor.Link.isLikelyEmailAddress(b)){return this.createOkEventFromEmailTab_(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT)}0>b.search(/:/)&&(b="http://"+goog.string.trimLeft(b));return this.createOkEventFromUrl_(b)};goog.ui.editor.LinkDialog.prototype.createOkEventFromEmailTab_=function(b){b=this.dom.getElement(b||goog.ui.editor.LinkDialog.Id_.EMAIL_ADDRESS_INPUT).value;return this.createOkEventFromUrl_("mailto:"+b)};goog.ui.editor.LinkDialog.prototype.onWebTestLink_=function(){var e=this.dom.getElement(goog.ui.editor.LinkDialog.Id_.ON_WEB_INPUT).value;0>e.search(/:/)&&(e="http://"+goog.string.trimLeft(e));if(this.dispatchEvent(new goog.ui.editor.LinkDialog.BeforeTestLinkEvent(e))){var d=this.dom.getWindow(),f=goog.dom.getViewportSize(d),f={target:"_blank",width:Math.max(f.width-50,50),height:Math.max(f.height-50,50),toolbar:!0,scrollbars:!0,location:!0,statusbar:!1,menubar:!0,resizable:!0,noreferrer:this.stopReferrerLeaks_};goog.window.open(e,f,d)}};goog.ui.editor.LinkDialog.prototype.onUrlOrEmailInputChange_=function(){this.autogenerateTextToDisplay_?this.setTextToDisplayFromAuto_():""==this.textToDisplayInput_.value&&this.setAutogenFlagFromCurInput_();this.syncOkButton_()};goog.ui.editor.LinkDialog.prototype.onChangeTab_=function(b){b=this.dom.getElement(b.target.getId()+goog.ui.editor.LinkDialog.Id_.TAB_INPUT_SUFFIX);goog.editor.focus.focusInputField(b);b.style.width="";b.style.width=b.offsetWidth+"px";this.syncOkButton_();this.setTextToDisplayFromAuto_()};goog.ui.editor.LinkDialog.prototype.setTextToDisplayFromAuto_=function(){if(this.autogenFeatureEnabled_&&this.autogenerateTextToDisplay_){var b=this.tabPane_.getCurrentTabId()+goog.ui.editor.LinkDialog.Id_.TAB_INPUT_SUFFIX;this.textToDisplayInput_.value=this.dom.getElement(b).value}};goog.ui.editor.LinkDialog.prototype.setAutogenFlag_=function(b){this.autogenerateTextToDisplay_=b};goog.ui.editor.LinkDialog.prototype.disableAutogenFlag_=function(b){this.setAutogenFlag_(!b);this.disableAutogen_=b};goog.ui.editor.LinkDialog.prototype.createOkEventFromUrl_=function(b){this.setTextToDisplayFromAuto_();this.showOpenLinkInNewWindow_&&(this.isOpenLinkInNewWindowChecked_=this.openInNewWindowCheckbox_.checked);return new goog.ui.editor.LinkDialog.OkEvent(this.textToDisplayInput_.value,b,this.showOpenLinkInNewWindow_&&this.isOpenLinkInNewWindowChecked_,this.showRelNoFollow_&&this.relNoFollowCheckbox_.checked)};goog.ui.editor.LinkDialog.prototype.setAutogenFlagFromCurInput_=function(){var b=!1;this.disableAutogen_||(b=this.dom.getElement(this.tabPane_.getCurrentTabId()+goog.ui.editor.LinkDialog.Id_.TAB_INPUT_SUFFIX).value==this.textToDisplayInput_.value);this.setAutogenFlag_(b)};goog.ui.editor.LinkDialog.prototype.isNewLink_=function(){return this.targetLink_.isNew()};goog.ui.editor.LinkDialog.Id_={TEXT_TO_DISPLAY:"linkdialog-text",ON_WEB_TAB:"linkdialog-onweb",ON_WEB_INPUT:"linkdialog-onweb-tab-input",EMAIL_ADDRESS_TAB:"linkdialog-email",EMAIL_ADDRESS_INPUT:"linkdialog-email-tab-input",EMAIL_WARNING:"linkdialog-email-warning",TAB_INPUT_SUFFIX:"-tab-input"};goog.ui.editor.LinkDialog.TARGET_INPUT_CLASSNAME_="tr-link-dialog-target-input";goog.ui.editor.LinkDialog.EMAIL_WARNING_CLASSNAME_="tr-link-dialog-email-warning";goog.ui.editor.LinkDialog.EXPLANATION_TEXT_CLASSNAME_="tr-link-dialog-explanation-text";goog.editor.icontent={};goog.editor.icontent.FieldFormatInfo=function(g,f,j,i,h){this.fieldId_=g;this.standards_=f;this.blended_=j;this.fixedHeight_=i;this.extraStyles_=h||{}};goog.editor.icontent.FieldStyleInfo=function(d,c){this.wrapper_=d;this.css_=c};goog.editor.icontent.useStandardsModeIframes_=!1;goog.editor.icontent.forceStandardsModeIframes=function(){goog.editor.icontent.useStandardsModeIframes_=!0};goog.editor.icontent.getInitialIframeContent_=function(g,f,j){var i=[];(g.blended_&&g.standards_||goog.editor.icontent.useStandardsModeIframes_)&&i.push("<!DOCTYPE HTML>");i.push('<html style="background:none transparent;min-width:0;');g.blended_&&i.push("height:",g.fixedHeight_?"100%":"auto");i.push('">');i.push("<head><style>");j&&j.css_&&i.push(j.css_);goog.userAgent.GECKO&&g.standards_&&i.push(" img {-moz-force-broken-image-icon: 1;}");i.push("</style></head>");i.push('<body g_editable="true" hidefocus="true" ');goog.editor.BrowserFeature.HAS_CONTENT_EDITABLE&&i.push("contentEditable ");i.push('class="editable ');i.push('" id="',g.fieldId_,'" style="min-width:0;');goog.userAgent.GECKO&&g.blended_&&(i.push(";width:100%;border:0;margin:0;background:none transparent;",";height:",g.standards_?"100%":"auto"),g.fixedHeight_?i.push(";overflow:auto"):i.push(";overflow-y:hidden;overflow-x:auto"));goog.userAgent.OPERA&&i.push(";outline:hidden");for(var h in g.extraStyles_){i.push(";"+h+":"+g.extraStyles_[h])}i.push('">',f,"</body></html>");return i.join("")};goog.editor.icontent.writeNormalInitialBlendedIframe=function(g,f,j,i){if(g.blended_){var h=goog.style.getPaddingBox(j.wrapper_);(h.top||h.left||h.right||h.bottom)&&goog.style.setStyle(i,"margin",-h.top+"px "+-h.right+"px "+-h.bottom+"px "+-h.left+"px")}goog.editor.icontent.writeNormalInitialIframe(g,f,j,i)};goog.editor.icontent.writeNormalInitialIframe=function(f,e,h,g){f=goog.editor.icontent.getInitialIframeContent_(f,e,h);g=goog.dom.getFrameContentDocument(g);g.open();g.write(f);g.close()};goog.editor.icontent.writeHttpsInitialIframe=function(e,d,f){d=d.body;goog.editor.BrowserFeature.HAS_CONTENT_EDITABLE&&(d.contentEditable=!0);d.className="editable";d.setAttribute("g_editable",!0);d.hideFocus=!0;d.id=e.fieldId_;goog.style.setStyle(d,e.extraStyles_);d.innerHTML=f};goog.async={};goog.async.Delay=function(e,d,f){goog.Disposable.call(this);this.listener_=e;this.interval_=d||0;this.handler_=f;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.Delay,goog.Disposable);goog.Delay=goog.async.Delay;goog.async.Delay.prototype.id_=0;goog.async.Delay.prototype.disposeInternal=function(){goog.async.Delay.superClass_.disposeInternal.call(this);this.stop();delete this.listener_;delete this.handler_};goog.async.Delay.prototype.start=function(b){this.stop();this.id_=goog.Timer.callOnce(this.callback_,goog.isDef(b)?b:this.interval_)};goog.async.Delay.prototype.stop=function(){this.isActive()&&goog.Timer.clear(this.id_);this.id_=0};goog.async.Delay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.Delay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};goog.async.Delay.prototype.isActive=function(){return 0!=this.id_};goog.async.Delay.prototype.doAction_=function(){this.id_=0;this.listener_&&this.listener_.call(this.handler_)};goog.editor.Field=function(f,e){goog.events.EventTarget.call(this);this.hashCode_=this.id=f;this.editableDomHelper=null;this.plugins_={};this.indexedPlugins_={};for(var h in goog.editor.Plugin.OPCODE){this.indexedPlugins_[h]=[]}this.cssStyles="";this.stoppedEvents_={};this.stopEvent(goog.editor.Field.EventType.CHANGE);this.stopEvent(goog.editor.Field.EventType.DELAYEDCHANGE);this.isEverModified_=this.isModified_=!1;this.delayedChangeTimer_=new goog.async.Delay(this.dispatchDelayedChange_,goog.editor.Field.DELAYED_CHANGE_FREQUENCY,this);this.debouncedEvents_={};for(var g in goog.editor.Field.EventType){this.debouncedEvents_[goog.editor.Field.EventType[g]]=0}goog.editor.BrowserFeature.USE_MUTATION_EVENTS&&(this.changeTimerGecko_=new goog.async.Delay(this.handleChange,goog.editor.Field.CHANGE_FREQUENCY,this));this.eventRegister=new goog.events.EventHandler(this);this.wrappers_=[];this.loadState_=goog.editor.Field.LoadState_.UNEDITABLE;this.originalDomHelper=goog.dom.getDomHelper(e||document);this.originalElement=this.originalDomHelper.getElement(this.id);this.appWindow_=this.originalDomHelper.getWindow()};goog.inherits(goog.editor.Field,goog.events.EventTarget);goog.editor.Field.prototype.field=null;goog.editor.Field.prototype.originalElement=null;goog.editor.Field.prototype.logger=goog.debug.Logger.getLogger("goog.editor.Field");goog.editor.Field.EventType={COMMAND_VALUE_CHANGE:"cvc",LOAD:"load",UNLOAD:"unload",BEFORECHANGE:"beforechange",CHANGE:"change",DELAYEDCHANGE:"delayedchange",BEFOREFOCUS:"beforefocus",FOCUS:"focus",BLUR:"blur",BEFORETAB:"beforetab",IFRAME_RESIZED:"ifrsz",SELECTIONCHANGE:"selectionchange"};goog.editor.Field.LoadState_={UNEDITABLE:0,LOADING:1,EDITABLE:2};goog.editor.Field.DEBOUNCE_TIME_MS_=500;goog.editor.Field.activeFieldId_=null;goog.editor.Field.prototype.inModalMode_=!1;goog.editor.Field.prototype.useWindowMouseUp_=!1;goog.editor.Field.prototype.waitingForMouseUp_=!1;goog.editor.Field.setActiveFieldId=function(b){goog.editor.Field.activeFieldId_=b};goog.editor.Field.getActiveFieldId=function(){return goog.editor.Field.activeFieldId_};goog.editor.Field.prototype.setUseWindowMouseUp=function(b){goog.asserts.assert(!b||!this.usesIframe(),"procssing window mouse up should only be enabled when not using iframe");this.useWindowMouseUp_=b};goog.editor.Field.prototype.inModalMode=function(){return this.inModalMode_};goog.editor.Field.prototype.setModalMode=function(b){this.inModalMode_=b};goog.editor.Field.prototype.getHashCode=function(){return this.hashCode_};goog.editor.Field.prototype.getElement=function(){return this.field};goog.editor.Field.prototype.getOriginalElement=function(){return this.originalElement};goog.editor.Field.prototype.addListener=function(g,f,j,i){var h=this.getElement();goog.editor.BrowserFeature.USE_DOCUMENT_FOR_KEY_EVENTS&&(h&&this.usesIframe())&&(h=h.ownerDocument);this.eventRegister.listen(h,g,f,j,i)};goog.editor.Field.prototype.getPluginByClassId=function(b){return this.plugins_[b]};goog.editor.Field.prototype.registerPlugin=function(e){var d=e.getTrogClassId();this.plugins_[d]&&this.logger.severe("Cannot register the same class of plugin twice.");this.plugins_[d]=e;for(var f in goog.editor.Plugin.OPCODE){e[goog.editor.Plugin.OPCODE[f]]&&this.indexedPlugins_[f].push(e)}e.registerFieldObject(this);this.isLoaded()&&e.enable(this)};goog.editor.Field.prototype.unregisterPlugin=function(e){var d=e.getTrogClassId();this.plugins_[d]||this.logger.severe("Cannot unregister a plugin that isn't registered.");delete this.plugins_[d];for(var f in goog.editor.Plugin.OPCODE){e[goog.editor.Plugin.OPCODE[f]]&&goog.array.remove(this.indexedPlugins_[f],e)}e.unregisterFieldObject(this)};goog.editor.Field.prototype.setInitialStyle=function(b){this.cssText=b};goog.editor.Field.prototype.resetOriginalElemProperties=function(){var d=this.getOriginalElement();d.removeAttribute("contentEditable");d.removeAttribute("g_editable");this.id?d.id=this.id:d.removeAttribute("id");d.className=this.savedClassName_||"";var c=this.cssText;c?goog.dom.setProperties(d,{style:c}):d.removeAttribute("style");goog.isString(this.originalFieldLineHeight_)&&(goog.style.setStyle(d,"lineHeight",this.originalFieldLineHeight_),this.originalFieldLineHeight_=null)};goog.editor.Field.prototype.isModified=function(b){return b?this.isEverModified_:this.isModified_};goog.editor.Field.CHANGE_FREQUENCY=15;goog.editor.Field.DELAYED_CHANGE_FREQUENCY=250;goog.editor.Field.prototype.usesIframe=goog.functions.TRUE;goog.editor.Field.prototype.isFixedHeight=goog.functions.TRUE;goog.editor.Field.prototype.shouldRefocusOnInputMobileSafari=goog.functions.FALSE;goog.editor.Field.KEYS_CAUSING_CHANGES_={46:!0,8:!0};goog.userAgent.IE||(goog.editor.Field.KEYS_CAUSING_CHANGES_[9]=!0);goog.editor.Field.CTRL_KEYS_CAUSING_CHANGES_={86:!0,88:!0};goog.userAgent.IE&&(goog.editor.Field.KEYS_CAUSING_CHANGES_[229]=!0);goog.editor.Field.isGeneratingKey_=function(d,c){return goog.editor.Field.isSpecialGeneratingKey_(d)?!0:!(!c||d.ctrlKey||d.metaKey||goog.userAgent.GECKO&&!d.charCode)};goog.editor.Field.isSpecialGeneratingKey_=function(d){var c=!(d.ctrlKey||d.metaKey)&&d.keyCode in goog.editor.Field.KEYS_CAUSING_CHANGES_;return(d.ctrlKey||d.metaKey)&&d.keyCode in goog.editor.Field.CTRL_KEYS_CAUSING_CHANGES_||c};goog.editor.Field.prototype.setAppWindow=function(b){this.appWindow_=b};goog.editor.Field.prototype.getAppWindow=function(){return this.appWindow_};goog.editor.Field.prototype.setBaseZindex=function(b){this.baseZindex_=b};goog.editor.Field.prototype.getBaseZindex=function(){return this.baseZindex_||0};goog.editor.Field.prototype.setupFieldObject=function(b){this.loadState_=goog.editor.Field.LoadState_.EDITABLE;this.field=b;this.editableDomHelper=goog.dom.getDomHelper(b);this.isEverModified_=this.isModified_=!1;b.setAttribute("g_editable","true")};goog.editor.Field.prototype.tearDownFieldObject_=function(){this.loadState_=goog.editor.Field.LoadState_.UNEDITABLE;for(var d in this.plugins_){var c=this.plugins_[d];c.activeOnUneditableFields()||c.disable(this)}this.editableDomHelper=this.field=null};goog.editor.Field.prototype.setupChangeListeners_=function(){if((goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD)&&this.usesIframe()&&this.shouldRefocusOnInputMobileSafari()){var b=this.getEditableDomHelper().getWindow();this.boundRefocusListenerMobileSafari_=goog.bind(b.focus,b);b.addEventListener(goog.events.EventType.KEYDOWN,this.boundRefocusListenerMobileSafari_,!1);b.addEventListener(goog.events.EventType.TOUCHEND,this.boundRefocusListenerMobileSafari_,!1)}goog.userAgent.OPERA&&this.usesIframe()?(this.boundFocusListenerOpera_=goog.bind(this.dispatchFocusAndBeforeFocus_,this),this.boundBlurListenerOpera_=goog.bind(this.dispatchBlur,this),b=this.getEditableDomHelper().getWindow(),b.addEventListener(goog.events.EventType.FOCUS,this.boundFocusListenerOpera_,!1),b.addEventListener(goog.events.EventType.BLUR,this.boundBlurListenerOpera_,!1)):(goog.editor.BrowserFeature.SUPPORTS_FOCUSIN?(this.addListener(goog.events.EventType.FOCUS,this.dispatchFocus_),this.addListener(goog.events.EventType.FOCUSIN,this.dispatchBeforeFocus_)):this.addListener(goog.events.EventType.FOCUS,this.dispatchFocusAndBeforeFocus_),this.addListener(goog.events.EventType.BLUR,this.dispatchBlur,goog.editor.BrowserFeature.USE_MUTATION_EVENTS));goog.editor.BrowserFeature.USE_MUTATION_EVENTS?this.setupMutationEventHandlersGecko():(this.addListener(["beforecut","beforepaste","drop","dragend"],this.dispatchBeforeChange),this.addListener(["cut","paste"],goog.functions.lock(this.dispatchChange)),this.addListener("drop",this.handleDrop_));this.addListener(goog.userAgent.WEBKIT?"dragend":"dragdrop",this.handleDrop_);this.addListener(goog.events.EventType.KEYDOWN,this.handleKeyDown_);this.addListener(goog.events.EventType.KEYPRESS,this.handleKeyPress_);this.addListener(goog.events.EventType.KEYUP,this.handleKeyUp_);this.selectionChangeTimer_=new goog.async.Delay(this.handleSelectionChangeTimer_,goog.editor.Field.SELECTION_CHANGE_FREQUENCY_,this);goog.editor.BrowserFeature.FOLLOWS_EDITABLE_LINKS&&this.addListener(goog.events.EventType.CLICK,goog.editor.Field.cancelLinkClick_);this.addListener(goog.events.EventType.MOUSEDOWN,this.handleMouseDown_);this.useWindowMouseUp_?(this.eventRegister.listen(this.editableDomHelper.getDocument(),goog.events.EventType.MOUSEUP,this.handleMouseUp_),this.addListener(goog.events.EventType.DRAGSTART,this.handleDragStart_)):this.addListener(goog.events.EventType.MOUSEUP,this.handleMouseUp_)};goog.editor.Field.SELECTION_CHANGE_FREQUENCY_=250;goog.editor.Field.prototype.clearListeners=function(){this.eventRegister&&this.eventRegister.removeAll();if((goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD)&&this.usesIframe()&&this.shouldRefocusOnInputMobileSafari()){try{var e=this.getEditableDomHelper().getWindow();e.removeEventListener(goog.events.EventType.KEYDOWN,this.boundRefocusListenerMobileSafari_,!1);e.removeEventListener(goog.events.EventType.TOUCHEND,this.boundRefocusListenerMobileSafari_,!1)}catch(d){}delete this.boundRefocusListenerMobileSafari_}if(goog.userAgent.OPERA&&this.usesIframe()){try{e=this.getEditableDomHelper().getWindow(),e.removeEventListener(goog.events.EventType.FOCUS,this.boundFocusListenerOpera_,!1),e.removeEventListener(goog.events.EventType.BLUR,this.boundBlurListenerOpera_,!1)}catch(f){}delete this.boundFocusListenerOpera_;delete this.boundBlurListenerOpera_}this.changeTimerGecko_&&this.changeTimerGecko_.stop();this.delayedChangeTimer_.stop()};goog.editor.Field.prototype.disposeInternal=function(){(this.isLoading()||this.isLoaded())&&this.logger.warning("Disposing a field that is in use.");this.getOriginalElement()&&this.execCommand(goog.editor.Command.CLEAR_LOREM);this.tearDownFieldObject_();this.clearListeners();this.clearFieldLoadListener_();this.originalDomHelper=null;this.eventRegister&&(this.eventRegister.dispose(),this.eventRegister=null);this.removeAllWrappers();goog.editor.Field.getActiveFieldId()==this.id&&goog.editor.Field.setActiveFieldId(null);for(var d in this.plugins_){var c=this.plugins_[d];c.isAutoDispose()&&c.dispose()}delete this.plugins_;goog.editor.Field.superClass_.disposeInternal.call(this)};goog.editor.Field.prototype.attachWrapper=function(b){this.wrappers_.push(b)};goog.editor.Field.prototype.removeAllWrappers=function(){for(var b;b=this.wrappers_.pop();){b.dispose()}};goog.editor.Field.MUTATION_EVENTS_GECKO=["DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMCharacterDataModified"];goog.editor.Field.prototype.setupMutationEventHandlersGecko=function(){if(goog.editor.BrowserFeature.HAS_DOM_SUBTREE_MODIFIED_EVENT||!this.usesIframe()){this.eventRegister.listen(this.getElement(),"DOMSubtreeModified",this.handleMutationEventGecko_)}else{var b=this.getEditableDomHelper().getDocument();this.eventRegister.listen(b,goog.editor.Field.MUTATION_EVENTS_GECKO,this.handleMutationEventGecko_,!0);this.eventRegister.listen(b,"DOMAttrModified",goog.bind(this.handleDomAttrChange,this,this.handleMutationEventGecko_),!0)}};goog.editor.Field.prototype.handleBeforeChangeKeyEvent_=function(b){if(b.keyCode==goog.events.KeyCodes.TAB&&!this.dispatchBeforeTab_(b)||goog.userAgent.GECKO&&b.metaKey&&(b.keyCode==goog.events.KeyCodes.LEFT||b.keyCode==goog.events.KeyCodes.RIGHT)){return b.preventDefault(),!1}(this.gotGeneratingKey_=b.charCode||goog.editor.Field.isGeneratingKey_(b,goog.userAgent.GECKO))&&this.dispatchBeforeChange();return !0};goog.editor.Field.SELECTION_CHANGE_KEYCODES_={8:1,9:1,13:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,46:1};goog.editor.Field.CTRL_KEYS_CAUSING_SELECTION_CHANGES_={65:!0,86:!0,88:!0};goog.editor.Field.POTENTIAL_SHORTCUT_KEYCODES_={8:1,9:1,13:1,27:1,33:1,34:1,37:1,38:1,39:1,40:1};goog.editor.Field.prototype.invokeShortCircuitingOp_=function(h,g){for(var l=this.indexedPlugins_[h],k=goog.array.slice(arguments,1),j=0;j<l.length;++j){var i=l[j];if((i.isEnabled(this)||goog.editor.Plugin.IRREPRESSIBLE_OPS[h])&&i[goog.editor.Plugin.OPCODE[h]].apply(i,k)){return !0}}return !1};goog.editor.Field.prototype.invokeOp_=function(h,g){for(var l=this.indexedPlugins_[h],k=goog.array.slice(arguments,1),j=0;j<l.length;++j){var i=l[j];(i.isEnabled(this)||goog.editor.Plugin.IRREPRESSIBLE_OPS[h])&&i[goog.editor.Plugin.OPCODE[h]].apply(i,k)}};goog.editor.Field.prototype.reduceOp_=function(i,h,n){for(var m=this.indexedPlugins_[i],l=goog.array.slice(arguments,1),k=0;k<m.length;++k){var j=m[k];if(j.isEnabled(this)||goog.editor.Plugin.IRREPRESSIBLE_OPS[i]){l[0]=j[goog.editor.Plugin.OPCODE[i]].apply(j,l)}}return l[0]};goog.editor.Field.prototype.injectContents=function(f,e){var h={},g=this.getInjectableContents(f,h);goog.style.setStyle(e,h);goog.editor.node.replaceInnerHtml(e,g)};goog.editor.Field.prototype.getInjectableContents=function(d,c){return this.reduceOp_(goog.editor.Plugin.Op.PREPARE_CONTENTS_HTML,d||"",c)};goog.editor.Field.prototype.handleKeyDown_=function(b){(goog.editor.BrowserFeature.USE_MUTATION_EVENTS||this.handleBeforeChangeKeyEvent_(b))&&!this.invokeShortCircuitingOp_(goog.editor.Plugin.Op.KEYDOWN,b)&&goog.editor.BrowserFeature.USES_KEYDOWN&&this.handleKeyboardShortcut_(b)};goog.editor.Field.prototype.handleKeyPress_=function(b){if(goog.editor.BrowserFeature.USE_MUTATION_EVENTS){if(!this.handleBeforeChangeKeyEvent_(b)){return}}else{this.gotGeneratingKey_=!0,this.dispatchBeforeChange()}!this.invokeShortCircuitingOp_(goog.editor.Plugin.Op.KEYPRESS,b)&&!goog.editor.BrowserFeature.USES_KEYDOWN&&this.handleKeyboardShortcut_(b)};goog.editor.Field.prototype.handleKeyUp_=function(b){!goog.editor.BrowserFeature.USE_MUTATION_EVENTS&&(this.gotGeneratingKey_||goog.editor.Field.isSpecialGeneratingKey_(b))&&this.handleChange();this.invokeShortCircuitingOp_(goog.editor.Plugin.Op.KEYUP,b);this.isEventStopped(goog.editor.Field.EventType.SELECTIONCHANGE)||(goog.editor.Field.SELECTION_CHANGE_KEYCODES_[b.keyCode]||(b.ctrlKey||b.metaKey)&&goog.editor.Field.CTRL_KEYS_CAUSING_SELECTION_CHANGES_[b.keyCode])&&this.selectionChangeTimer_.start()};goog.editor.Field.prototype.handleKeyboardShortcut_=function(e){if(!e.altKey){var d=goog.userAgent.MAC?e.metaKey:e.ctrlKey;if(d||goog.editor.Field.POTENTIAL_SHORTCUT_KEYCODES_[e.keyCode]){var f=e.charCode||e.keyCode;17!=f&&(f=String.fromCharCode(f).toLowerCase(),this.invokeShortCircuitingOp_(goog.editor.Plugin.Op.SHORTCUT,e,f,d)&&e.preventDefault())}}};goog.editor.Field.prototype.execCommand=function(i,h){for(var n=arguments,m,l=this.indexedPlugins_[goog.editor.Plugin.Op.EXEC_COMMAND],k=0;k<l.length;++k){var j=l[k];if(j.isEnabled(this)&&j.isSupportedCommand(i)){m=j.execCommand.apply(j,n);break}}return m};goog.editor.Field.prototype.queryCommandValue=function(f){var e=this.isLoaded()&&this.isSelectionEditable();if(goog.isString(f)){return this.queryCommandValueInternal_(f,e)}for(var h={},g=0;g<f.length;g++){h[f[g]]=this.queryCommandValueInternal_(f[g],e)}return h};goog.editor.Field.prototype.queryCommandValueInternal_=function(g,f){for(var j=this.indexedPlugins_[goog.editor.Plugin.Op.QUERY_COMMAND],i=0;i<j.length;++i){var h=j[i];if(h.isEnabled(this)&&h.isSupportedCommand(g)&&(f||h.activeOnUneditableFields())){return h.queryCommandValue(g)}}return f?null:!1};goog.editor.Field.prototype.handleDomAttrChange=function(f,e){if(!this.isEventStopped(goog.editor.Field.EventType.CHANGE)){var h=e.getBrowserEvent();try{if(h.originalTarget.prefix||"scrollbar"==h.originalTarget.nodeName){return}}catch(g){return}h.prevValue!=h.newValue&&f.call(this,h)}};goog.editor.Field.prototype.handleMutationEventGecko_=function(b){this.isEventStopped(goog.editor.Field.EventType.CHANGE)||(b=b.getBrowserEvent?b.getBrowserEvent():b,b.target.firebugIgnore||(this.isEverModified_=this.isModified_=!0,this.changeTimerGecko_.start()))};goog.editor.Field.prototype.handleDrop_=function(){goog.userAgent.IE&&this.execCommand(goog.editor.Command.CLEAR_LOREM,!0);goog.editor.BrowserFeature.USE_MUTATION_EVENTS&&this.dispatchFocusAndBeforeFocus_();this.dispatchChange()};goog.editor.Field.prototype.getEditableIframe=function(){var b;return this.usesIframe()&&(b=this.getEditableDomHelper())?(b=b.getWindow())&&b.frameElement:null};goog.editor.Field.prototype.getEditableDomHelper=function(){return this.editableDomHelper};goog.editor.Field.prototype.getRange=function(){var b=this.editableDomHelper&&this.editableDomHelper.getWindow();return b&&goog.dom.Range.createFromWindow(b)};goog.editor.Field.prototype.dispatchSelectionChangeEvent=function(e,d){if(!this.isEventStopped(goog.editor.Field.EventType.SELECTIONCHANGE)){var f=this.getRange(),f=f&&f.getContainerElement();this.isSelectionEditable_=!!f&&goog.dom.contains(this.getElement(),f);this.dispatchCommandValueChange();this.dispatchEvent({type:goog.editor.Field.EventType.SELECTIONCHANGE,originalType:e&&e.type});this.invokeShortCircuitingOp_(goog.editor.Plugin.Op.SELECTION,e,d)}};goog.editor.Field.prototype.handleSelectionChangeTimer_=function(){var b=this.selectionChangeTarget_;this.selectionChangeTarget_=null;this.dispatchSelectionChangeEvent(void 0,b)};goog.editor.Field.prototype.dispatchBeforeChange=function(){this.isEventStopped(goog.editor.Field.EventType.BEFORECHANGE)||this.dispatchEvent(goog.editor.Field.EventType.BEFORECHANGE)};goog.editor.Field.prototype.dispatchBeforeTab_=function(b){return this.dispatchEvent({type:goog.editor.Field.EventType.BEFORETAB,shiftKey:b.shiftKey,altKey:b.altKey,ctrlKey:b.ctrlKey})};goog.editor.Field.prototype.stopChangeEvents=function(d,c){d&&(this.changeTimerGecko_&&this.changeTimerGecko_.fireIfActive(),this.stopEvent(goog.editor.Field.EventType.CHANGE));c&&(this.clearDelayedChange(),this.stopEvent(goog.editor.Field.EventType.DELAYEDCHANGE))};goog.editor.Field.prototype.startChangeEvents=function(d,c){!d&&this.changeTimerGecko_&&this.changeTimerGecko_.fireIfActive();this.startEvent(goog.editor.Field.EventType.CHANGE);this.startEvent(goog.editor.Field.EventType.DELAYEDCHANGE);d&&this.handleChange();c&&this.dispatchDelayedChange_()};goog.editor.Field.prototype.stopEvent=function(b){this.stoppedEvents_[b]=1};goog.editor.Field.prototype.startEvent=function(b){this.stoppedEvents_[b]=0};goog.editor.Field.prototype.debounceEvent=function(b){this.debouncedEvents_[b]=goog.now()};goog.editor.Field.prototype.isEventStopped=function(b){return !!this.stoppedEvents_[b]||this.debouncedEvents_[b]&&goog.now()-this.debouncedEvents_[b]<=goog.editor.Field.DEBOUNCE_TIME_MS_};goog.editor.Field.prototype.manipulateDom=function(e,d,f){this.stopChangeEvents(!0,!0);try{e.call(f)}finally{this.isLoaded()&&(d?(this.startEvent(goog.editor.Field.EventType.CHANGE),this.handleChange(),this.startEvent(goog.editor.Field.EventType.DELAYEDCHANGE)):this.dispatchChange())}};goog.editor.Field.prototype.dispatchCommandValueChange=function(b){b?this.dispatchEvent({type:goog.editor.Field.EventType.COMMAND_VALUE_CHANGE,commands:b}):this.dispatchEvent(goog.editor.Field.EventType.COMMAND_VALUE_CHANGE)};goog.editor.Field.prototype.dispatchChange=function(b){this.startChangeEvents(!0,b)};goog.editor.Field.prototype.handleChange=function(){this.isEventStopped(goog.editor.Field.EventType.CHANGE)||(this.changeTimerGecko_&&this.changeTimerGecko_.stop(),this.isEverModified_=this.isModified_=!0,this.isEventStopped(goog.editor.Field.EventType.DELAYEDCHANGE)||this.delayedChangeTimer_.start())};goog.editor.Field.prototype.dispatchDelayedChange_=function(){this.isEventStopped(goog.editor.Field.EventType.DELAYEDCHANGE)||(this.delayedChangeTimer_.stop(),this.isModified_=!1,this.dispatchEvent(goog.editor.Field.EventType.DELAYEDCHANGE))};goog.editor.Field.prototype.clearDelayedChange=function(){this.changeTimerGecko_&&this.changeTimerGecko_.fireIfActive();this.delayedChangeTimer_.fireIfActive()};goog.editor.Field.prototype.dispatchFocusAndBeforeFocus_=function(){this.dispatchBeforeFocus_();this.dispatchFocus_()};goog.editor.Field.prototype.dispatchBeforeFocus_=function(){this.isEventStopped(goog.editor.Field.EventType.BEFOREFOCUS)||(this.execCommand(goog.editor.Command.CLEAR_LOREM,!0),this.dispatchEvent(goog.editor.Field.EventType.BEFOREFOCUS))};goog.editor.Field.prototype.dispatchFocus_=function(){if(!this.isEventStopped(goog.editor.Field.EventType.FOCUS)){goog.editor.Field.setActiveFieldId(this.id);this.isSelectionEditable_=!0;this.dispatchEvent(goog.editor.Field.EventType.FOCUS);if(goog.editor.BrowserFeature.PUTS_CURSOR_BEFORE_FIRST_BLOCK_ELEMENT_ON_FOCUS){var e=this.getElement(),d=this.getRange();if(d){var f=d.getFocusNode();0==d.getFocusOffset()&&(!f||f==e||f.tagName==goog.dom.TagName.BODY)&&goog.editor.range.selectNodeStart(e)}}!goog.editor.BrowserFeature.CLEARS_SELECTION_WHEN_FOCUS_LEAVES&&this.usesIframe()&&this.getEditableDomHelper().getWindow().parent.getSelection().removeAllRanges()}};goog.editor.Field.prototype.dispatchBlur=function(){this.isEventStopped(goog.editor.Field.EventType.BLUR)||(goog.editor.Field.getActiveFieldId()==this.id&&goog.editor.Field.setActiveFieldId(null),this.isSelectionEditable_=!1,this.dispatchEvent(goog.editor.Field.EventType.BLUR))};goog.editor.Field.prototype.isSelectionEditable=function(){return this.isSelectionEditable_};goog.editor.Field.cancelLinkClick_=function(b){goog.dom.getAncestorByTagNameAndClass(b.target,goog.dom.TagName.A)&&b.preventDefault()};goog.editor.Field.prototype.handleMouseDown_=function(d){goog.editor.Field.setActiveFieldId(this.id);if(goog.userAgent.IE){var c=d.target;c&&(c.tagName==goog.dom.TagName.A&&d.ctrlKey)&&this.originalDomHelper.getWindow().open(c.href)}this.waitingForMouseUp_=!0};goog.editor.Field.prototype.handleDragStart_=function(){this.waitingForMouseUp_=!1};goog.editor.Field.prototype.handleMouseUp_=function(b){if(!this.useWindowMouseUp_||this.waitingForMouseUp_){this.waitingForMouseUp_=!1,this.dispatchSelectionChangeEvent(b),goog.userAgent.IE&&(this.selectionChangeTarget_=b.target,this.selectionChangeTimer_.start())}};goog.editor.Field.prototype.getCleanContents=function(){if(this.queryCommandValue(goog.editor.Command.USING_LOREM)){return goog.string.Unicode.NBSP}if(!this.isLoaded()){var b=this.getOriginalElement();b||this.logger.shout("Couldn't get the field element to read the contents");return b.innerHTML}b=this.getFieldCopy();this.invokeOp_(goog.editor.Plugin.Op.CLEAN_CONTENTS_DOM,b);return this.reduceOp_(goog.editor.Plugin.Op.CLEAN_CONTENTS_HTML,b.innerHTML)};goog.editor.Field.prototype.getFieldCopy=function(){var d=this.getElement(),c=d.cloneNode(!1),d=d.innerHTML;goog.userAgent.IE&&d.match(/^\s*<script/i)&&(d=goog.string.Unicode.NBSP+d);c.innerHTML=d;return c};goog.editor.Field.prototype.setHtml=function(f,e,h,g){this.isLoading()?this.logger.severe("Can't set html while loading Trogedit"):(g&&this.execCommand(goog.editor.Command.CLEAR_LOREM),e&&f&&(e="<p>"+e+"</p>"),h&&this.stopChangeEvents(!1,!0),this.setInnerHtml_(e),g&&this.execCommand(goog.editor.Command.UPDATE_LOREM),this.isLoaded()&&(h?(goog.editor.BrowserFeature.USE_MUTATION_EVENTS&&this.changeTimerGecko_.fireIfActive(),this.startChangeEvents()):this.dispatchChange()))};goog.editor.Field.prototype.setInnerHtml_=function(f){var e=this.getElement();if(e){if(this.usesIframe()&&goog.editor.BrowserFeature.MOVES_STYLE_TO_HEAD){for(var h=e.ownerDocument.getElementsByTagName("HEAD"),g=h.length-1;1<=g;--g){h[g].parentNode.removeChild(h[g])}}}else{e=this.getOriginalElement()}e&&this.injectContents(f,e)};goog.editor.Field.prototype.turnOnDesignModeGecko=function(){var b=this.getEditableDomHelper().getDocument();b.designMode="on";goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&b.execCommand("styleWithCSS",!1,!1)};goog.editor.Field.prototype.installStyles=function(){this.cssStyles&&this.shouldLoadAsynchronously()&&goog.style.installStyles(this.cssStyles,this.getElement())};goog.editor.Field.prototype.dispatchLoadEvent_=function(){this.getElement();this.installStyles();this.startChangeEvents();this.logger.info("Dispatching load "+this.id);this.dispatchEvent(goog.editor.Field.EventType.LOAD)};goog.editor.Field.prototype.isUneditable=function(){return this.loadState_==goog.editor.Field.LoadState_.UNEDITABLE};goog.editor.Field.prototype.isLoaded=function(){return this.loadState_==goog.editor.Field.LoadState_.EDITABLE};goog.editor.Field.prototype.isLoading=function(){return this.loadState_==goog.editor.Field.LoadState_.LOADING};goog.editor.Field.prototype.focus=function(){if(!goog.editor.BrowserFeature.HAS_CONTENT_EDITABLE&&this.usesIframe()){this.getEditableDomHelper().getWindow().focus()}else{if(goog.userAgent.OPERA){var d=this.appWindow_.pageXOffset,c=this.appWindow_.pageYOffset}this.getElement().focus();goog.userAgent.OPERA&&this.appWindow_.scrollTo(d,c)}};goog.editor.Field.prototype.focusAndPlaceCursorAtStart=function(){(goog.editor.BrowserFeature.HAS_IE_RANGES||goog.userAgent.WEBKIT)&&this.placeCursorAtStart();this.focus()};goog.editor.Field.prototype.placeCursorAtStart=function(){this.placeCursorAtStartOrEnd_(!0)};goog.editor.Field.prototype.placeCursorAtEnd=function(){this.placeCursorAtStartOrEnd_(!1)};goog.editor.Field.prototype.placeCursorAtStartOrEnd_=function(e){var d=this.getElement();if(d){var f=e?goog.editor.node.getLeftMostLeaf(d):goog.editor.node.getRightMostLeaf(d);d==f?goog.dom.Range.createCaret(d,0).select():goog.editor.range.placeCursorNextTo(f,e);this.dispatchSelectionChangeEvent()}};goog.editor.Field.prototype.restoreSavedRange=function(b){goog.userAgent.IE&&this.focus();b&&b.restore();goog.userAgent.IE||this.focus()};goog.editor.Field.prototype.makeEditable=function(d){this.loadState_=goog.editor.Field.LoadState_.LOADING;var c=this.getOriginalElement();this.nodeName=c.nodeName;this.savedClassName_=c.className;this.setInitialStyle(c.style.cssText);c.className+=" editable";this.makeEditableInternal(d)};goog.editor.Field.prototype.makeEditableInternal=function(b){this.makeIframeField_(b)};goog.editor.Field.prototype.handleFieldLoad=function(){goog.userAgent.IE&&goog.dom.Range.clearSelection(this.editableDomHelper.getWindow());goog.editor.Field.getActiveFieldId()!=this.id&&this.execCommand(goog.editor.Command.UPDATE_LOREM);this.setupChangeListeners_();this.dispatchLoadEvent_();for(var b in this.plugins_){this.plugins_[b].enable(this)}};goog.editor.Field.prototype.makeUneditable=function(d){if(this.isUneditable()){throw Error("makeUneditable: Field is already uneditable")}this.clearDelayedChange();this.selectionChangeTimer_.fireIfActive();this.execCommand(goog.editor.Command.CLEAR_LOREM);var c=null;!d&&this.getElement()&&(c=this.getCleanContents());this.clearFieldLoadListener_();d=this.getOriginalElement();goog.editor.Field.getActiveFieldId()==d.id&&goog.editor.Field.setActiveFieldId(null);this.clearListeners();goog.isString(c)&&(goog.editor.node.replaceInnerHtml(d,c),this.resetOriginalElemProperties());this.restoreDom();this.tearDownFieldObject_();goog.userAgent.WEBKIT&&d.blur();this.execCommand(goog.editor.Command.UPDATE_LOREM);this.dispatchEvent(goog.editor.Field.EventType.UNLOAD)};goog.editor.Field.prototype.restoreDom=function(){var d=this.getOriginalElement();if(d){var c=this.getEditableIframe();c&&goog.dom.replaceNode(d,c)}};goog.editor.Field.prototype.shouldLoadAsynchronously=function(){if(!goog.isDef(this.isHttps_)&&(this.isHttps_=!1,goog.userAgent.IE&&this.usesIframe())){for(var d=this.originalDomHelper.getWindow();d!=d.parent;){try{d=d.parent}catch(c){break}}d=d.location;this.isHttps_="https:"==d.protocol&&-1==d.search.indexOf("nocheckhttps")}return this.isHttps_};goog.editor.Field.prototype.makeIframeField_=function(g){var f=this.getOriginalElement();if(f){var f=f.innerHTML,j={},f=this.reduceOp_(goog.editor.Plugin.Op.PREPARE_CONTENTS_HTML,f,j),i=this.originalDomHelper.createDom(goog.dom.TagName.IFRAME,this.getIframeAttributes());if(this.shouldLoadAsynchronously()){var h=goog.bind(this.iframeFieldLoadHandler,this,i,f,j);this.fieldLoadListenerKey_=goog.events.listen(i,goog.events.EventType.LOAD,h,!0);g&&(i.src=g)}this.attachIframe(i);this.shouldLoadAsynchronously()||this.iframeFieldLoadHandler(i,f,j)}};goog.editor.Field.prototype.attachIframe=function(d){var c=this.getOriginalElement();d.className=c.className;d.id=c.id;goog.dom.replaceNode(d,c)};goog.editor.Field.prototype.getFieldFormatInfo=function(d){var c=this.getOriginalElement(),c=goog.editor.node.isStandardsMode(c);return new goog.editor.icontent.FieldFormatInfo(this.id,c,!1,!1,d)};goog.editor.Field.prototype.writeIframeContent=function(f,e,h){h=this.getFieldFormatInfo(h);if(this.shouldLoadAsynchronously()){f=goog.dom.getFrameContentDocument(f),goog.editor.icontent.writeHttpsInitialIframe(h,f,e)}else{var g=new goog.editor.icontent.FieldStyleInfo(this.getElement(),this.cssStyles);goog.editor.icontent.writeNormalInitialIframe(h,e,g,f)}};goog.editor.Field.prototype.iframeFieldLoadHandler=function(e,d,f){this.clearFieldLoadListener_();e.allowTransparency="true";this.writeIframeContent(e,d,f);e=goog.dom.getFrameContentDocument(e).body;this.setupFieldObject(e);!goog.editor.BrowserFeature.HAS_CONTENT_EDITABLE&&this.usesIframe()&&this.turnOnDesignModeGecko();this.handleFieldLoad()};goog.editor.Field.prototype.clearFieldLoadListener_=function(){this.fieldLoadListenerKey_&&(goog.events.unlistenByKey(this.fieldLoadListenerKey_),this.fieldLoadListenerKey_=null)};goog.editor.Field.prototype.getIframeAttributes=function(){var b="padding:0;"+this.getOriginalElement().style.cssText;goog.string.endsWith(b,";")||(b+=";");b+="background-color:white;";goog.userAgent.IE&&(b+="overflow:visible;");return{frameBorder:0,style:b}};goog.editor.plugins.AbstractDialogPlugin=function(b){goog.editor.Plugin.call(this);this.command_=b};goog.inherits(goog.editor.plugins.AbstractDialogPlugin,goog.editor.Plugin);goog.editor.plugins.AbstractDialogPlugin.prototype.isSupportedCommand=function(b){return b==this.command_};goog.editor.plugins.AbstractDialogPlugin.prototype.execCommand=function(d,c){return this.execCommandInternal.apply(this,arguments)};goog.editor.plugins.AbstractDialogPlugin.EventType={OPENED:"dialogOpened",CLOSED:"dialogClosed"};goog.editor.plugins.AbstractDialogPlugin.prototype.getDialog=function(){return this.dialog_};goog.editor.plugins.AbstractDialogPlugin.prototype.setReuseDialog=function(b){this.reuseDialog_=b};goog.editor.plugins.AbstractDialogPlugin.prototype.execCommandInternal=function(e,d){this.reuseDialog_||this.disposeDialog_();this.dialog_||(this.dialog_=this.createDialog(goog.dom.getDomHelper(this.getFieldObject().getAppWindow()),d));var f=this.getFieldObject().getRange();this.savedRange_=f&&goog.editor.range.saveUsingNormalizedCarets(f);goog.dom.Range.clearSelection(this.getFieldObject().getEditableDomHelper().getWindow());goog.events.listenOnce(this.dialog_,goog.ui.editor.AbstractDialog.EventType.AFTER_HIDE,this.handleAfterHide,!1,this);this.getFieldObject().setModalMode(!0);this.dialog_.show();this.dispatchEvent(goog.editor.plugins.AbstractDialogPlugin.EventType.OPENED);this.getFieldObject().dispatchSelectionChangeEvent();return !0};goog.editor.plugins.AbstractDialogPlugin.prototype.handleAfterHide=function(){this.getFieldObject().setModalMode(!1);this.restoreOriginalSelection();this.reuseDialog_||this.disposeDialog_();this.dispatchEvent(goog.editor.plugins.AbstractDialogPlugin.EventType.CLOSED);this.getFieldObject().dispatchSelectionChangeEvent();this.getFieldObject().debounceEvent(goog.editor.Field.EventType.SELECTIONCHANGE)};goog.editor.plugins.AbstractDialogPlugin.prototype.restoreOriginalSelection=function(){this.getFieldObject().restoreSavedRange(this.savedRange_);this.savedRange_=null};goog.editor.plugins.AbstractDialogPlugin.prototype.disposeOriginalSelection=function(){this.savedRange_&&(this.savedRange_.dispose(),this.savedRange_=null)};goog.editor.plugins.AbstractDialogPlugin.prototype.disposeInternal=function(){this.disposeDialog_();goog.editor.plugins.AbstractDialogPlugin.superClass_.disposeInternal.call(this)};goog.editor.plugins.AbstractDialogPlugin.prototype.reuseDialog_=!1;goog.editor.plugins.AbstractDialogPlugin.prototype.isDisposingDialog_=!1;goog.editor.plugins.AbstractDialogPlugin.prototype.disposeDialog_=function(){this.dialog_&&!this.isDisposingDialog_&&(this.isDisposingDialog_=!0,this.dialog_.dispose(),this.dialog_=null,this.isDisposingDialog_=!1)};goog.editor.plugins.LinkDialogPlugin=function(){goog.editor.plugins.AbstractDialogPlugin.call(this,goog.editor.Command.MODAL_LINK_EDITOR);this.eventHandler_=new goog.events.EventHandler(this);this.safeToOpenSchemes_=["http","https","ftp"]};goog.inherits(goog.editor.plugins.LinkDialogPlugin,goog.editor.plugins.AbstractDialogPlugin);goog.editor.plugins.LinkDialogPlugin.prototype.showOpenLinkInNewWindow_=!1;goog.editor.plugins.LinkDialogPlugin.prototype.isOpenLinkInNewWindowChecked_=!1;goog.editor.plugins.LinkDialogPlugin.prototype.showRelNoFollow_=!1;goog.editor.plugins.LinkDialogPlugin.prototype.stopReferrerLeaks_=!1;goog.editor.plugins.LinkDialogPlugin.prototype.blockOpeningUnsafeSchemes_=!0;goog.editor.plugins.LinkDialogPlugin.prototype.getTrogClassId=goog.functions.constant("LinkDialogPlugin");goog.editor.plugins.LinkDialogPlugin.prototype.setBlockOpeningUnsafeSchemes=function(b){this.blockOpeningUnsafeSchemes_=b};goog.editor.plugins.LinkDialogPlugin.prototype.setSafeToOpenSchemes=function(b){this.safeToOpenSchemes_=b};goog.editor.plugins.LinkDialogPlugin.prototype.showOpenLinkInNewWindow=function(b){this.showOpenLinkInNewWindow_=!0;this.isOpenLinkInNewWindowChecked_=b};goog.editor.plugins.LinkDialogPlugin.prototype.showRelNoFollow=function(){this.showRelNoFollow_=!0};goog.editor.plugins.LinkDialogPlugin.prototype.getOpenLinkInNewWindowCheckedState=function(){return this.isOpenLinkInNewWindowChecked_};goog.editor.plugins.LinkDialogPlugin.prototype.stopReferrerLeaks=function(){this.stopReferrerLeaks_=!0};goog.editor.plugins.LinkDialogPlugin.prototype.setEmailWarning=function(b){this.emailWarning_=b};goog.editor.plugins.LinkDialogPlugin.prototype.execCommandInternal=function(d,c){this.currentLink_=c;return goog.editor.plugins.LinkDialogPlugin.superClass_.execCommandInternal.call(this,d,c)};goog.editor.plugins.LinkDialogPlugin.prototype.handleAfterHide=function(b){goog.editor.plugins.LinkDialogPlugin.superClass_.handleAfterHide.call(this,b);this.currentLink_=null};goog.editor.plugins.LinkDialogPlugin.prototype.getEventHandler=function(){return this.eventHandler_};goog.editor.plugins.LinkDialogPlugin.prototype.getCurrentLink=function(){return this.currentLink_};goog.editor.plugins.LinkDialogPlugin.prototype.createDialog=function(e,d){var f=new goog.ui.editor.LinkDialog(e,d);this.emailWarning_&&f.setEmailWarning(this.emailWarning_);this.showOpenLinkInNewWindow_&&f.showOpenLinkInNewWindow(this.isOpenLinkInNewWindowChecked_);this.showRelNoFollow_&&f.showRelNoFollow();f.setStopReferrerLeaks(this.stopReferrerLeaks_);this.eventHandler_.listen(f,goog.ui.editor.AbstractDialog.EventType.OK,this.handleOk).listen(f,goog.ui.editor.AbstractDialog.EventType.CANCEL,this.handleCancel_).listen(f,goog.ui.editor.LinkDialog.EventType.BEFORE_TEST_LINK,this.handleBeforeTestLink);return f};goog.editor.plugins.LinkDialogPlugin.prototype.disposeInternal=function(){goog.editor.plugins.LinkDialogPlugin.superClass_.disposeInternal.call(this);this.eventHandler_.dispose()};goog.editor.plugins.LinkDialogPlugin.prototype.handleOk=function(f){this.disposeOriginalSelection();this.currentLink_.setTextAndUrl(f.linkText,f.linkUrl);this.showOpenLinkInNewWindow_&&(this.isOpenLinkInNewWindowChecked_=f.openInNewWindow);var e=this.currentLink_.getAnchor();this.touchUpAnchorOnOk_(e,f);for(var h=this.currentLink_.getExtraAnchors(),g=0;g<h.length;++g){h[g].href=e.href,this.touchUpAnchorOnOk_(h[g],f)}this.currentLink_.placeCursorRightOf();this.getFieldObject().focus();this.getFieldObject().dispatchSelectionChangeEvent();this.getFieldObject().dispatchChange();this.eventHandler_.removeAll()};goog.editor.plugins.LinkDialogPlugin.prototype.touchUpAnchorOnOk_=function(e,d){this.showOpenLinkInNewWindow_&&(d.openInNewWindow?e.target="_blank":"_blank"==e.target&&(e.target=""));if(this.showRelNoFollow_){var f=goog.ui.editor.LinkDialog.hasNoFollow(e.rel);f&&!d.noFollow?e.rel=goog.ui.editor.LinkDialog.removeNoFollow(e.rel):!f&&d.noFollow&&(e.rel=e.rel?e.rel+" nofollow":"nofollow")}};goog.editor.plugins.LinkDialogPlugin.prototype.handleCancel_=function(){if(this.currentLink_.isNew()){goog.dom.flattenElement(this.currentLink_.getAnchor());for(var d=this.currentLink_.getExtraAnchors(),c=0;c<d.length;++c){goog.dom.flattenElement(d[c])}this.getFieldObject().dispatchChange()}this.eventHandler_.removeAll()};goog.editor.plugins.LinkDialogPlugin.prototype.handleBeforeTestLink=function(d){if(!this.shouldOpenUrl(d.url)){var c=goog.getMsg("This link cannot be tested.");alert(c);d.preventDefault()}};goog.editor.plugins.LinkDialogPlugin.prototype.shouldOpenUrl=function(b){return !this.blockOpeningUnsafeSchemes_||this.isSafeSchemeToOpen_(b)};goog.editor.plugins.LinkDialogPlugin.prototype.isSafeSchemeToOpen_=function(b){b=goog.uri.utils.getScheme(b)||"http";return goog.array.contains(this.safeToOpenSchemes_,b.toLowerCase())};goog.editor.plugins.BasicTextFormatter=function(){goog.editor.Plugin.call(this)};goog.inherits(goog.editor.plugins.BasicTextFormatter,goog.editor.Plugin);goog.editor.plugins.BasicTextFormatter.prototype.getTrogClassId=function(){return"BTF"};goog.editor.plugins.BasicTextFormatter.prototype.logger=goog.debug.Logger.getLogger("goog.editor.plugins.BasicTextFormatter");goog.editor.plugins.BasicTextFormatter.COMMAND={LINK:"+link",FORMAT_BLOCK:"+formatBlock",INDENT:"+indent",OUTDENT:"+outdent",STRIKE_THROUGH:"+strikeThrough",HORIZONTAL_RULE:"+insertHorizontalRule",SUBSCRIPT:"+subscript",SUPERSCRIPT:"+superscript",UNDERLINE:"+underline",BOLD:"+bold",ITALIC:"+italic",FONT_SIZE:"+fontSize",FONT_FACE:"+fontName",FONT_COLOR:"+foreColor",BACKGROUND_COLOR:"+backColor",ORDERED_LIST:"+insertOrderedList",UNORDERED_LIST:"+insertUnorderedList",JUSTIFY_CENTER:"+justifyCenter",JUSTIFY_FULL:"+justifyFull",JUSTIFY_RIGHT:"+justifyRight",JUSTIFY_LEFT:"+justifyLeft"};goog.editor.plugins.BasicTextFormatter.SUPPORTED_COMMANDS_=goog.object.transpose(goog.editor.plugins.BasicTextFormatter.COMMAND);goog.editor.plugins.BasicTextFormatter.prototype.isSupportedCommand=function(b){return b in goog.editor.plugins.BasicTextFormatter.SUPPORTED_COMMANDS_};goog.editor.plugins.BasicTextFormatter.prototype.getRange_=function(){return this.getFieldObject().getRange()};goog.editor.plugins.BasicTextFormatter.prototype.getDocument_=function(){return this.getFieldDomHelper().getDocument()};goog.editor.plugins.BasicTextFormatter.prototype.execCommandInternal=function(j,i){var p,o,n,m,l,k=i;switch(j){case goog.editor.plugins.BasicTextFormatter.COMMAND.BACKGROUND_COLOR:goog.isNull(k)||(goog.editor.BrowserFeature.EATS_EMPTY_BACKGROUND_COLOR?this.applyBgColorManually_(k):goog.userAgent.OPERA?this.execCommandHelper_("hiliteColor",k):this.execCommandHelper_(j,k));break;case goog.editor.plugins.BasicTextFormatter.COMMAND.LINK:l=this.toggleLink_(k);break;case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_CENTER:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_FULL:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_RIGHT:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_LEFT:this.justify_(j);break;default:goog.userAgent.IE&&(j==goog.editor.plugins.BasicTextFormatter.COMMAND.FORMAT_BLOCK&&k)&&(k="<"+k+">");if(j==goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_COLOR&&goog.isNull(k)){break}switch(j){case goog.editor.plugins.BasicTextFormatter.COMMAND.INDENT:case goog.editor.plugins.BasicTextFormatter.COMMAND.OUTDENT:goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&(goog.userAgent.GECKO&&(o=!0),goog.userAgent.OPERA&&(o=j==goog.editor.plugins.BasicTextFormatter.COMMAND.OUTDENT?!this.getDocument_().queryCommandEnabled("outdent"):!0));case goog.editor.plugins.BasicTextFormatter.COMMAND.ORDERED_LIST:case goog.editor.plugins.BasicTextFormatter.COMMAND.UNORDERED_LIST:goog.editor.BrowserFeature.LEAVES_P_WHEN_REMOVING_LISTS&&this.queryCommandStateInternal_(this.getDocument_(),j)?n=this.getFieldObject().queryCommandValue(goog.editor.Command.DEFAULT_TAG)!=goog.dom.TagName.P:goog.editor.BrowserFeature.CAN_LISTIFY_BR||this.convertBreaksToDivs_(),goog.userAgent.GECKO&&(goog.editor.BrowserFeature.FORGETS_FORMATTING_WHEN_LISTIFYING&&!this.queryCommandValue(j))&&(m|=this.beforeInsertListGecko_());case goog.editor.plugins.BasicTextFormatter.COMMAND.FORMAT_BLOCK:p=!!this.getFieldObject().getPluginByClassId("Bidi");break;case goog.editor.plugins.BasicTextFormatter.COMMAND.SUBSCRIPT:case goog.editor.plugins.BasicTextFormatter.COMMAND.SUPERSCRIPT:goog.editor.BrowserFeature.NESTS_SUBSCRIPT_SUPERSCRIPT&&this.applySubscriptSuperscriptWorkarounds_(j);break;case goog.editor.plugins.BasicTextFormatter.COMMAND.UNDERLINE:case goog.editor.plugins.BasicTextFormatter.COMMAND.BOLD:case goog.editor.plugins.BasicTextFormatter.COMMAND.ITALIC:o=goog.userAgent.GECKO&&goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&this.queryCommandValue(j);break;case goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_COLOR:case goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_FACE:o=goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&goog.userAgent.GECKO}this.execCommandHelper_(j,k,p,!!o);m&&this.getDocument_().execCommand("Delete",!1,!0);n&&this.getDocument_().execCommand("FormatBlock",!1,"<div>")}goog.userAgent.GECKO&&!this.getFieldObject().inModalMode()&&this.focusField_();return l};goog.editor.plugins.BasicTextFormatter.prototype.focusField_=function(){this.getFieldDomHelper().getWindow().focus()};goog.editor.plugins.BasicTextFormatter.prototype.queryCommandValue=function(d){var c;switch(d){case goog.editor.plugins.BasicTextFormatter.COMMAND.LINK:return this.isNodeInState_(goog.dom.TagName.A);case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_CENTER:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_FULL:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_RIGHT:case goog.editor.plugins.BasicTextFormatter.COMMAND.JUSTIFY_LEFT:return this.isJustification_(d);case goog.editor.plugins.BasicTextFormatter.COMMAND.FORMAT_BLOCK:return goog.editor.plugins.BasicTextFormatter.getSelectionBlockState_(this.getFieldObject().getRange());case goog.editor.plugins.BasicTextFormatter.COMMAND.INDENT:case goog.editor.plugins.BasicTextFormatter.COMMAND.OUTDENT:case goog.editor.plugins.BasicTextFormatter.COMMAND.HORIZONTAL_RULE:return !1;case goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_SIZE:case goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_FACE:case goog.editor.plugins.BasicTextFormatter.COMMAND.FONT_COLOR:case goog.editor.plugins.BasicTextFormatter.COMMAND.BACKGROUND_COLOR:return this.queryCommandValueInternal_(this.getDocument_(),d,goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&goog.userAgent.GECKO);case goog.editor.plugins.BasicTextFormatter.COMMAND.UNDERLINE:case goog.editor.plugins.BasicTextFormatter.COMMAND.BOLD:case goog.editor.plugins.BasicTextFormatter.COMMAND.ITALIC:c=goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&goog.userAgent.GECKO;default:return this.queryCommandStateInternal_(this.getDocument_(),d,c)}};goog.editor.plugins.BasicTextFormatter.prototype.prepareContentsHtml=function(b){goog.editor.BrowserFeature.COLLAPSES_EMPTY_NODES&&b.match(/^\s*<script/i)&&(b="&nbsp;"+b);goog.editor.BrowserFeature.CONVERT_TO_B_AND_I_TAGS&&(b=b.replace(/<(\/?)strong([^\w])/gi,"<$1b$2"),b=b.replace(/<(\/?)em([^\w])/gi,"<$1i$2"));return b};goog.editor.plugins.BasicTextFormatter.prototype.cleanContentsDom=function(e){e=e.getElementsByTagName(goog.dom.TagName.IMG);for(var d=0,f;f=e[d];d++){goog.editor.BrowserFeature.SHOWS_CUSTOM_ATTRS_IN_INNER_HTML&&(f.removeAttribute("tabIndex"),f.removeAttribute("tabIndexSet"),goog.removeUid(f),f.oldTabIndex&&(f.tabIndex=f.oldTabIndex))}};goog.editor.plugins.BasicTextFormatter.prototype.cleanContentsHtml=function(j){if(goog.editor.BrowserFeature.MOVES_STYLE_TO_HEAD){for(var i=this.getFieldObject().getEditableDomHelper().getElementsByTagNameAndClass(goog.dom.TagName.HEAD),p=[],o=i.length,n=1;n<o;++n){for(var m=i[n].getElementsByTagName(goog.dom.TagName.STYLE),l=m.length,k=0;k<l;++k){p.push(m[k].outerHTML)}}return p.join("")+j}return j};goog.editor.plugins.BasicTextFormatter.prototype.handleKeyboardShortcut=function(f,e,h){if(!h){return !1}var g;switch(e){case"b":g=goog.editor.plugins.BasicTextFormatter.COMMAND.BOLD;break;case"i":g=goog.editor.plugins.BasicTextFormatter.COMMAND.ITALIC;break;case"u":g=goog.editor.plugins.BasicTextFormatter.COMMAND.UNDERLINE;break;case"s":return !0}return g?(this.getFieldObject().execCommand(g),!0):!1};goog.editor.plugins.BasicTextFormatter.BR_REGEXP_=goog.userAgent.IE?/<br([^\/>]*)\/?>/gi:/<br([^\/>]*)\/?>(?!<\/(div|p)>)/gi;goog.editor.plugins.BasicTextFormatter.prototype.convertBreaksToDivs_=function(){if(!goog.userAgent.IE&&!goog.userAgent.OPERA){return !1}var f=this.getRange_(),e=f.getContainerElement(),h=this.getDocument_();goog.editor.plugins.BasicTextFormatter.BR_REGEXP_.lastIndex=0;if(goog.editor.plugins.BasicTextFormatter.BR_REGEXP_.test(e.innerHTML)){f=f.saveUsingCarets();if(e.tagName==goog.dom.TagName.P){goog.editor.plugins.BasicTextFormatter.convertParagraphToDiv_(e,!0)}else{var g=e.innerHTML.replace(goog.editor.plugins.BasicTextFormatter.BR_REGEXP_,'<p$1 trtempbr="temp_br">');goog.editor.node.replaceInnerHtml(e,g);e=goog.array.toArray(e.getElementsByTagName(goog.dom.TagName.P));goog.iter.forEach(e,function(d){if("temp_br"==d.getAttribute("trtempbr")){d.removeAttribute("trtempbr");if(goog.string.isBreakingWhitespace(goog.dom.getTextContent(d))){var c=goog.userAgent.IE?h.createTextNode(goog.string.Unicode.NBSP):h.createElement(goog.dom.TagName.BR);d.appendChild(c)}goog.editor.plugins.BasicTextFormatter.convertParagraphToDiv_(d)}})}f.restore();return !0}return !1};goog.editor.plugins.BasicTextFormatter.convertParagraphToDiv_=function(e,d){if(goog.userAgent.IE||goog.userAgent.OPERA){var f=e.outerHTML.replace(/<(\/?)p/gi,"<$1div");d&&(f=f.replace(goog.editor.plugins.BasicTextFormatter.BR_REGEXP_,"</div><div$1>"));goog.userAgent.OPERA&&!/<\/div>$/i.test(f)&&(f+="</div>");e.outerHTML=f}};goog.editor.plugins.BasicTextFormatter.convertToRealExecCommand_=function(b){return 0==b.indexOf("+")?b.substring(1):b};goog.editor.plugins.BasicTextFormatter.prototype.justify_=function(b){this.execCommandHelper_(b,null,!1,!0);goog.userAgent.GECKO&&this.execCommandHelper_(b,null,!1,!0);(!goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS||!goog.userAgent.GECKO)&&goog.iter.forEach(this.getFieldObject().getRange(),goog.editor.plugins.BasicTextFormatter.convertContainerToTextAlign_)};goog.editor.plugins.BasicTextFormatter.convertContainerToTextAlign_=function(b){b=goog.editor.style.getContainer(b);b.align&&(b.style.textAlign=b.align,b.removeAttribute("align"))};goog.editor.plugins.BasicTextFormatter.prototype.execCommandHelper_=function(i,h,n,m){var l=null;n&&(l=this.getFieldObject().queryCommandValue(goog.editor.Command.DIR_RTL)?"rtl":this.getFieldObject().queryCommandValue(goog.editor.Command.DIR_LTR)?"ltr":null);i=goog.editor.plugins.BasicTextFormatter.convertToRealExecCommand_(i);var k,j;goog.userAgent.IE&&(j=this.applyExecCommandIEFixes_(i),k=j[0],j=j[1]);goog.userAgent.WEBKIT&&(k=this.applyExecCommandSafariFixes_(i));goog.userAgent.GECKO&&this.applyExecCommandGeckoFixes_(i);goog.editor.BrowserFeature.DOESNT_OVERRIDE_FONT_SIZE_IN_STYLE_ATTR&&"fontsize"==i.toLowerCase()&&this.removeFontSizeFromStyleAttrs_();n=this.getDocument_();m&&goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&(n.execCommand("styleWithCSS",!1,!0),goog.userAgent.OPERA&&this.invalidateInlineCss_());n.execCommand(i,!1,h);m&&goog.editor.BrowserFeature.HAS_STYLE_WITH_CSS&&n.execCommand("styleWithCSS",!1,!1);goog.userAgent.WEBKIT&&(!goog.userAgent.isVersion("526")&&"formatblock"==i.toLowerCase()&&h&&/^[<]?h\d[>]?$/i.test(h))&&this.cleanUpSafariHeadings_();/insert(un)?orderedlist/i.test(i)&&(goog.userAgent.WEBKIT&&this.fixSafariLists_(),goog.userAgent.IE&&(this.fixIELists_(),j&&goog.dom.removeNode(j)));k&&goog.dom.removeNode(k);l&&this.getFieldObject().execCommand(l)};goog.editor.plugins.BasicTextFormatter.prototype.applyBgColorManually_=function(g){var f=goog.userAgent.GECKO,j=this.getFieldObject().getRange(),i,h;j&&j.isCollapsed()&&(i=this.getFieldDomHelper().createTextNode(f?" ":""),h=j.getStartNode(),h=h.nodeType==goog.dom.NodeType.ELEMENT?h:h.parentNode,""==h.innerHTML?(h.style.textIndent="-10000px",h.appendChild(i)):(h=this.getFieldDomHelper().createDom("span",{style:"text-indent:-10000px"},i),j.replaceContentsWithNode(h)),goog.dom.Range.createFromNodeContents(i).select());this.execCommandHelper_("hiliteColor",g,!1,!0);i&&(f&&(i.data=""),h.style.textIndent="")};goog.editor.plugins.BasicTextFormatter.prototype.toggleLink_=function(e){this.getFieldObject().isSelectionEditable()||this.focusField_();var d=this.getRange_(),f=d&&d.getContainerElement();if((f=goog.dom.getAncestorByTagNameAndClass(f,goog.dom.TagName.A))&&goog.editor.node.isEditable(f)){goog.dom.flattenElement(f)}else{if(e=this.createLink_(d,"/",e)){if(!this.getFieldObject().execCommand(goog.editor.Command.MODAL_LINK_EDITOR,e)){if(d=this.getFieldObject().getAppWindow().prompt(goog.ui.editor.messages.MSG_LINK_TO,"http://")){e.setTextAndUrl(e.getCurrentText()||d,d),e.placeCursorRightOf()}else{return d=goog.editor.range.saveUsingNormalizedCarets(goog.dom.Range.createFromNodeContents(e.getAnchor())),e.removeLink(),d.restore().select(),null}}return e}}return null};goog.editor.plugins.BasicTextFormatter.prototype.createLink_=function(i,h,n){var m=null,l=[],k=i&&i.getContainerElement();if(k&&k.tagName==goog.dom.TagName.IMG){return null}if(i&&i.isCollapsed()){i=i.getTextRange(0).getBrowserRangeObject(),goog.editor.BrowserFeature.HAS_W3C_RANGES?(m=this.getFieldDomHelper().createElement(goog.dom.TagName.A),i.insertNode(m)):goog.editor.BrowserFeature.HAS_IE_RANGES&&(i.pasteHTML("<a id='newLink'></a>"),m=this.getFieldDomHelper().getElement("newLink"),m.removeAttribute("id"))}else{var j=goog.string.createUniqueString();this.execCommandHelper_("CreateLink",j);goog.array.forEach(this.getFieldObject().getElement().getElementsByTagName(goog.dom.TagName.A),function(b){goog.string.endsWith(b.href,j)&&l.push(b)});l.length&&(m=l.pop())}return goog.editor.Link.createNewLink(m,h,n,l)};goog.editor.plugins.BasicTextFormatter.brokenExecCommandsIE_={indent:1,outdent:1,insertOrderedList:1,insertUnorderedList:1,justifyCenter:1,justifyFull:1,justifyRight:1,justifyLeft:1,ltr:1,rtl:1};goog.editor.plugins.BasicTextFormatter.blockquoteHatingCommandsIE_={insertOrderedList:1,insertUnorderedList:1};goog.editor.plugins.BasicTextFormatter.prototype.applySubscriptSuperscriptWorkarounds_=function(d){if(!this.queryCommandValue(d)){d=d==goog.editor.plugins.BasicTextFormatter.COMMAND.SUBSCRIPT?goog.editor.plugins.BasicTextFormatter.COMMAND.SUPERSCRIPT:goog.editor.plugins.BasicTextFormatter.COMMAND.SUBSCRIPT;var c=goog.editor.plugins.BasicTextFormatter.convertToRealExecCommand_(d);this.queryCommandValue(d)||this.getDocument_().execCommand(c,!1,null);this.getDocument_().execCommand(c,!1,null)}};goog.editor.plugins.BasicTextFormatter.prototype.removeFontSizeFromStyleAttrs_=function(){var b=goog.editor.range.expand(this.getFieldObject().getRange(),this.getFieldObject().getElement());goog.iter.forEach(goog.iter.filter(b,function(a,f,e){return e.isStartTag()&&b.containsNode(a)}),function(c){goog.style.setStyle(c,"font-size","");goog.userAgent.GECKO&&(0==c.style.length&&null!=c.getAttribute("style"))&&c.removeAttribute("style")})};goog.editor.plugins.BasicTextFormatter.prototype.applyExecCommandIEFixes_=function(r){var q=[],p=null,o=this.getRange_(),n=this.getFieldDomHelper();if(r in goog.editor.plugins.BasicTextFormatter.blockquoteHatingCommandsIE_){var m=o&&o.getContainerElement();if(m){for(var l=goog.dom.getElementsByTagNameAndClass(goog.dom.TagName.BLOCKQUOTE,null,m),k,i=0;i<l.length;i++){if(o.containsNode(l[i])){k=l[i];break}}if(m=k||goog.dom.getAncestorByTagNameAndClass(m,"BLOCKQUOTE")){p=n.createDom("div",{style:"height:0"}),goog.dom.appendChild(m,p),q.push(p),k?o=goog.dom.Range.createFromNodes(k,0,p,0):o.containsNode(p)&&(o=goog.dom.Range.createFromNodes(o.getStartNode(),o.getStartOffset(),p,0)),o.select()}}}k=this.getFieldObject();!k.usesIframe()&&!p&&r in goog.editor.plugins.BasicTextFormatter.brokenExecCommandsIE_&&(r=k.getElement(),o&&(o.isCollapsed()&&!goog.dom.getFirstElementChild(r))&&(p=o.getTextRange(0).getBrowserRangeObject(),o=p.duplicate(),o.moveToElementText(r),o.collapse(!1),o.isEqual(p)&&(o=n.createTextNode(goog.string.Unicode.NBSP),r.appendChild(o),p.move("character",1),p.move("character",-1),p.select(),q.push(o))),p=n.createDom("div",{style:"height:0"}),goog.dom.appendChild(r,p),q.push(p));return q};goog.editor.plugins.BasicTextFormatter.prototype.cleanUpSafariHeadings_=function(){goog.iter.forEach(this.getRange_(),function(b){"Apple-style-span"==b.className&&(b.style.fontSize="",b.style.fontWeight="")})};goog.editor.plugins.BasicTextFormatter.prototype.fixSafariLists_=function(){var b=!1;goog.iter.forEach(this.getRange_(),function(a){var f=a.tagName;if(f==goog.dom.TagName.UL||f==goog.dom.TagName.OL){if(b){if(f=goog.dom.getPreviousElementSibling(a)){var e=a.ownerDocument.createRange();e.setStartAfter(f);e.setEndBefore(a);if(goog.string.isEmpty(e.toString())&&f.nodeName==a.nodeName){for(;f.lastChild;){a.insertBefore(f.lastChild,a.firstChild)}f.parentNode.removeChild(f)}}}else{b=!0}}})};goog.editor.plugins.BasicTextFormatter.orderedListTypes_={1:1,a:1,A:1,i:1,I:1};goog.editor.plugins.BasicTextFormatter.unorderedListTypes_={disc:1,circle:1,square:1};goog.editor.plugins.BasicTextFormatter.prototype.fixIELists_=function(){for(var d=this.getRange_(),d=d&&d.getContainer();d&&d.tagName!=goog.dom.TagName.UL&&d.tagName!=goog.dom.TagName.OL;){d=d.parentNode}d&&(d=d.parentNode);if(d){var c=goog.array.toArray(d.getElementsByTagName(goog.dom.TagName.UL));goog.array.extend(c,goog.array.toArray(d.getElementsByTagName(goog.dom.TagName.OL)));goog.array.forEach(c,function(f){var e=f.type;if(e&&!(f.tagName==goog.dom.TagName.UL?goog.editor.plugins.BasicTextFormatter.unorderedListTypes_:goog.editor.plugins.BasicTextFormatter.orderedListTypes_)[e]){f.type=""}})}};goog.editor.plugins.BasicTextFormatter.brokenExecCommandsSafari_={justifyCenter:1,justifyFull:1,justifyRight:1,justifyLeft:1,formatBlock:1};goog.editor.plugins.BasicTextFormatter.hangingExecCommandWebkit_={insertOrderedList:1,insertUnorderedList:1};goog.editor.plugins.BasicTextFormatter.prototype.applyExecCommandSafariFixes_=function(d){var c;goog.editor.plugins.BasicTextFormatter.brokenExecCommandsSafari_[d]&&(c=this.getFieldDomHelper().createDom("div",{style:"height: 0"},"x"),goog.dom.appendChild(this.getFieldObject().getElement(),c));goog.editor.plugins.BasicTextFormatter.hangingExecCommandWebkit_[d]&&(d=this.getFieldObject().getElement(),c=this.getFieldDomHelper().createDom("div",{style:"height: 0"},"x"),d.insertBefore(c,d.firstChild));return c};goog.editor.plugins.BasicTextFormatter.prototype.applyExecCommandGeckoFixes_=function(e){if(goog.userAgent.isVersion("1.9")&&"formatblock"==e.toLowerCase()){e=this.getRange_();var d=e.getStartNode();if(e.isCollapsed()&&d&&d.tagName==goog.dom.TagName.BODY){var f=e.getStartOffset();if((d=d.childNodes[f])&&d.tagName==goog.dom.TagName.BR){e=e.getBrowserRangeObject(),e.setStart(d,0),e.setEnd(d,0)}}}};goog.editor.plugins.BasicTextFormatter.prototype.invalidateInlineCss_=function(){var d=[],c=this.getFieldObject().getRange().getContainerElement();do{d.push(c)}while(c=c.parentNode);d=goog.iter.chain(goog.iter.toIterator(this.getFieldObject().getRange()),goog.iter.toIterator(d));d=goog.iter.filter(d,goog.editor.style.isContainer);goog.iter.forEach(d,function(f){var e=f.style.outline;f.style.outline="0px solid red";f.style.outline=e})};goog.editor.plugins.BasicTextFormatter.prototype.beforeInsertListGecko_=function(){var d=this.getFieldObject().queryCommandValue(goog.editor.Command.DEFAULT_TAG);if(d==goog.dom.TagName.P||d==goog.dom.TagName.DIV){return !1}d=this.getRange_();if(d.isCollapsed()&&d.getContainer().nodeType!=goog.dom.NodeType.TEXT){var c=this.getFieldDomHelper().createTextNode(goog.string.Unicode.NBSP);d.insertNode(c,!1);goog.dom.Range.createFromNodeContents(c).select();return !0}return !1};goog.editor.plugins.BasicTextFormatter.getSelectionBlockState_=function(d){var c=null;goog.iter.forEach(d,function(b,g,f){if(!f.isEndTag()){b=goog.editor.style.getContainer(b).tagName;c=c||b;if(c!=b){throw c=null,goog.iter.StopIteration}f.skipTag()}});return c};goog.editor.plugins.BasicTextFormatter.SUPPORTED_JUSTIFICATIONS_={center:1,justify:1,right:1,left:1};goog.editor.plugins.BasicTextFormatter.prototype.isJustification_=function(g){g=g.replace("+justify","").toLowerCase();"full"==g&&(g="justify");var f=this.getFieldObject().getPluginByClassId("Bidi");if(f){return g==f.getSelectionAlignment()}var j=this.getRange_();if(!j){return !1}for(var i=j.getContainerElement(),f=goog.array.filter(i.childNodes,function(b){return goog.editor.node.isImportant(b)&&j.containsNode(b,!0)}),f=f.length?f:[i],i=0;i<f.length;i++){var h=goog.editor.style.getContainer(f[i]);if(g!=goog.editor.plugins.BasicTextFormatter.getNodeJustification_(h)){return !1}}return !0};goog.editor.plugins.BasicTextFormatter.getNodeJustification_=function(d){var c=goog.style.getComputedTextAlign(d),c=c.replace(/^-(moz|webkit)-/,"");goog.editor.plugins.BasicTextFormatter.SUPPORTED_JUSTIFICATIONS_[c]||(c=d.align||"left");return c};goog.editor.plugins.BasicTextFormatter.prototype.isNodeInState_=function(d){var c=this.getRange_(),c=c&&c.getContainerElement();d=goog.dom.getAncestorByTagNameAndClass(c,d);return !!d&&goog.editor.node.isEditable(d)};goog.editor.plugins.BasicTextFormatter.prototype.queryCommandStateInternal_=function(e,d,f){return this.queryCommandHelper_(!0,e,d,f)};goog.editor.plugins.BasicTextFormatter.prototype.queryCommandValueInternal_=function(e,d,f){return this.queryCommandHelper_(!1,e,d,f)};goog.editor.plugins.BasicTextFormatter.prototype.queryCommandHelper_=function(g,f,j,i){j=goog.editor.plugins.BasicTextFormatter.convertToRealExecCommand_(j);if(i){var h=this.getDocument_();h.execCommand("styleWithCSS",!1,!0)}g=g?f.queryCommandState(j):f.queryCommandValue(j);i&&h.execCommand("styleWithCSS",!1,!1);return g};goog.ui.ToolbarSeparatorRenderer=function(){goog.ui.MenuSeparatorRenderer.call(this)};goog.inherits(goog.ui.ToolbarSeparatorRenderer,goog.ui.MenuSeparatorRenderer);goog.addSingletonGetter(goog.ui.ToolbarSeparatorRenderer);goog.ui.ToolbarSeparatorRenderer.CSS_CLASS="goog-toolbar-separator";goog.ui.ToolbarSeparatorRenderer.prototype.createDom=function(b){return b.getDomHelper().createDom("div",this.getCssClass()+" "+goog.ui.INLINE_BLOCK_CLASSNAME,"\u00a0")};goog.ui.ToolbarSeparatorRenderer.prototype.decorate=function(d,c){c=goog.ui.ToolbarSeparatorRenderer.superClass_.decorate.call(this,d,c);goog.dom.classes.add(c,goog.ui.INLINE_BLOCK_CLASSNAME);return c};goog.ui.ToolbarSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarSeparatorRenderer.CSS_CLASS};goog.ui.ToolbarRenderer=function(){goog.ui.ContainerRenderer.call(this)};goog.inherits(goog.ui.ToolbarRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.ToolbarRenderer);goog.ui.ToolbarRenderer.CSS_CLASS="goog-toolbar";goog.ui.ToolbarRenderer.prototype.getAriaRole=function(){return goog.dom.a11y.Role.TOOLBAR};goog.ui.ToolbarRenderer.prototype.getDecoratorForChild=function(b){return"HR"==b.tagName?new goog.ui.Separator(goog.ui.ToolbarSeparatorRenderer.getInstance()):goog.ui.ToolbarRenderer.superClass_.getDecoratorForChild.call(this,b)};goog.ui.ToolbarRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarRenderer.CSS_CLASS};goog.ui.ToolbarRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.HORIZONTAL};goog.ui.CustomButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)};goog.inherits(goog.ui.CustomButtonRenderer,goog.ui.ButtonRenderer);goog.addSingletonGetter(goog.ui.CustomButtonRenderer);goog.ui.CustomButtonRenderer.CSS_CLASS="goog-custom-button";goog.ui.CustomButtonRenderer.prototype.createDom=function(d){var c=this.getClassNames(d),c={"class":goog.ui.INLINE_BLOCK_CLASSNAME+" "+c.join(" "),title:d.getTooltip()||""},c=d.getDomHelper().createDom("div",c,this.createButton(d.getContent(),d.getDomHelper()));this.setAriaStates(d,c);return c};goog.ui.CustomButtonRenderer.prototype.getAriaRole=function(){return goog.dom.a11y.Role.BUTTON};goog.ui.CustomButtonRenderer.prototype.getContentElement=function(b){return b&&b.firstChild.firstChild};goog.ui.CustomButtonRenderer.prototype.createButton=function(d,c){return c.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-outer-box"),c.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-inner-box"),d))};goog.ui.CustomButtonRenderer.prototype.canDecorate=function(b){return"DIV"==b.tagName};goog.ui.CustomButtonRenderer.prototype.hasBoxStructure=function(f,e){var h=f.getDomHelper().getFirstElementChild(e),g=this.getCssClass()+"-outer-box";return h&&goog.dom.classes.has(h,g)&&(h=f.getDomHelper().getFirstElementChild(h),g=this.getCssClass()+"-inner-box",h&&goog.dom.classes.has(h,g))?!0:!1};goog.ui.CustomButtonRenderer.prototype.decorate=function(d,c){goog.ui.CustomButtonRenderer.trimTextNodes_(c,!0);goog.ui.CustomButtonRenderer.trimTextNodes_(c,!1);this.hasBoxStructure(d,c)||c.appendChild(this.createButton(c.childNodes,d.getDomHelper()));goog.dom.classes.add(c,goog.ui.INLINE_BLOCK_CLASSNAME,this.getCssClass());return goog.ui.CustomButtonRenderer.superClass_.decorate.call(this,d,c)};goog.ui.CustomButtonRenderer.prototype.getCssClass=function(){return goog.ui.CustomButtonRenderer.CSS_CLASS};goog.ui.CustomButtonRenderer.trimTextNodes_=function(g,f){if(g){for(var j=f?g.firstChild:g.lastChild,i;j&&j.parentNode==g;){i=f?j.nextSibling:j.previousSibling;if(j.nodeType==goog.dom.NodeType.TEXT){var h=j.nodeValue;if(""==goog.string.trim(h)){g.removeChild(j)}else{j.nodeValue=f?goog.string.trimLeft(h):goog.string.trimRight(h);break}}else{break}j=i}}};goog.ui.ToolbarButtonRenderer=function(){goog.ui.CustomButtonRenderer.call(this)};goog.inherits(goog.ui.ToolbarButtonRenderer,goog.ui.CustomButtonRenderer);goog.addSingletonGetter(goog.ui.ToolbarButtonRenderer);goog.ui.ToolbarButtonRenderer.CSS_CLASS="goog-toolbar-button";goog.ui.ToolbarButtonRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarButtonRenderer.CSS_CLASS};goog.ui.ToolbarButton=function(e,d,f){goog.ui.Button.call(this,e,d||goog.ui.ToolbarButtonRenderer.getInstance(),f)};goog.inherits(goog.ui.ToolbarButton,goog.ui.Button);goog.ui.registry.setDecoratorByClassName(goog.ui.ToolbarButtonRenderer.CSS_CLASS,function(){return new goog.ui.ToolbarButton(null)});goog.ui.Toolbar=function(e,d,f){goog.ui.Container.call(this,d,e||goog.ui.ToolbarRenderer.getInstance(),f)};goog.inherits(goog.ui.Toolbar,goog.ui.Container);goog.positioning={};goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:2,BOTTOM_LEFT:1,BOTTOM_RIGHT:3,TOP_START:4,TOP_END:6,BOTTOM_START:5,BOTTOM_END:7};goog.positioning.CornerBit={BOTTOM:1,RIGHT:2,FLIP_RTL:4};goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132};goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256};goog.positioning.OverflowStatus.FAILED=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT|goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM|goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT;goog.positioning.OverflowStatus.FAILED_HORIZONTAL=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT;goog.positioning.OverflowStatus.FAILED_VERTICAL=goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM;goog.positioning.positionAtAnchor=function(x,w,v,u,t,s,r,q,p){goog.asserts.assert(v);var o=goog.positioning.getOffsetParentPageOffset(v),n=goog.positioning.getVisiblePart_(x);goog.style.translateRectForAnotherFrame(n,goog.dom.getDomHelper(x),goog.dom.getDomHelper(v));x=goog.positioning.getEffectiveCorner(x,w);n=new goog.math.Coordinate(x&goog.positioning.CornerBit.RIGHT?n.left+n.width:n.left,x&goog.positioning.CornerBit.BOTTOM?n.top+n.height:n.top);n=goog.math.Coordinate.difference(n,o);t&&(n.x+=(x&goog.positioning.CornerBit.RIGHT?-1:1)*t.x,n.y+=(x&goog.positioning.CornerBit.BOTTOM?-1:1)*t.y);var i;if(r){if(p){i=p}else{if(i=goog.style.getVisibleRectForElement(v)){i.top-=o.y,i.right-=o.x,i.bottom-=o.y,i.left-=o.x}}}return goog.positioning.positionAtCoordinate(n,v,u,s,i,r,q)};goog.positioning.getOffsetParentPageOffset=function(e){var d;if(e=e.offsetParent){var f=e.tagName==goog.dom.TagName.HTML||e.tagName==goog.dom.TagName.BODY;if(!f||"static"!=goog.style.getComputedPosition(e)){d=goog.style.getPageOffset(e),f||(d=goog.math.Coordinate.difference(d,new goog.math.Coordinate(goog.style.bidi.getScrollLeft(e),e.scrollTop)))}}return d||new goog.math.Coordinate};goog.positioning.getVisiblePart_=function(d){var c=goog.style.getBounds(d);(d=goog.style.getVisibleRectForElement(d))&&c.intersection(goog.math.Rect.createFromBox(d));return c};goog.positioning.positionAtCoordinate=function(r,q,p,o,n,m,l){r=r.clone();var k=goog.positioning.OverflowStatus.NONE;p=goog.positioning.getEffectiveCorner(q,p);var i=goog.style.getSize(q);l=l?l.clone():i.clone();if(o||p!=goog.positioning.Corner.TOP_LEFT){p&goog.positioning.CornerBit.RIGHT?r.x-=l.width+(o?o.right:0):o&&(r.x+=o.left),p&goog.positioning.CornerBit.BOTTOM?r.y-=l.height+(o?o.bottom:0):o&&(r.y+=o.top)}if(m&&(k=n?goog.positioning.adjustForViewport_(r,l,n,m):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT,k&goog.positioning.OverflowStatus.FAILED)){return k}goog.style.setPosition(q,r);goog.math.Size.equals(i,l)||goog.style.setBorderBoxSize(q,l);return k};goog.positioning.adjustForViewport_=function(i,h,n,m){var l=goog.positioning.OverflowStatus.NONE,k=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,j=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;if((m&k)==k&&(i.x<n.left||i.x>=n.right)){m&=~goog.positioning.Overflow.ADJUST_X}if((m&j)==j&&(i.y<n.top||i.y>=n.bottom)){m&=~goog.positioning.Overflow.ADJUST_Y}i.x<n.left&&m&goog.positioning.Overflow.ADJUST_X&&(i.x=n.left,l|=goog.positioning.OverflowStatus.ADJUSTED_X);i.x<n.left&&(i.x+h.width>n.right&&m&goog.positioning.Overflow.RESIZE_WIDTH)&&(h.width=Math.max(h.width-(i.x+h.width-n.right),0),l|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED);i.x+h.width>n.right&&m&goog.positioning.Overflow.ADJUST_X&&(i.x=Math.max(n.right-h.width,n.left),l|=goog.positioning.OverflowStatus.ADJUSTED_X);m&goog.positioning.Overflow.FAIL_X&&(l|=(i.x<n.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(i.x+h.width>n.right?goog.positioning.OverflowStatus.FAILED_RIGHT:0));i.y<n.top&&m&goog.positioning.Overflow.ADJUST_Y&&(i.y=n.top,l|=goog.positioning.OverflowStatus.ADJUSTED_Y);i.y>=n.top&&(i.y+h.height>n.bottom&&m&goog.positioning.Overflow.RESIZE_HEIGHT)&&(h.height=Math.max(h.height-(i.y+h.height-n.bottom),0),l|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED);i.y+h.height>n.bottom&&m&goog.positioning.Overflow.ADJUST_Y&&(i.y=Math.max(n.bottom-h.height,n.top),l|=goog.positioning.OverflowStatus.ADJUSTED_Y);m&goog.positioning.Overflow.FAIL_Y&&(l|=(i.y<n.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(i.y+h.height>n.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0));return l};goog.positioning.getEffectiveCorner=function(d,c){return(c&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(d)?c^goog.positioning.CornerBit.RIGHT:c)&~goog.positioning.CornerBit.FLIP_RTL};goog.positioning.flipCornerHorizontal=function(b){return b^goog.positioning.CornerBit.RIGHT};goog.positioning.flipCornerVertical=function(b){return b^goog.positioning.CornerBit.BOTTOM};goog.positioning.flipCorner=function(b){return b^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT};goog.positioning.AbstractPosition=function(){};goog.positioning.AbstractPosition.prototype.reposition=function(){};goog.positioning.AnchoredPosition=function(e,d,f){this.element=e;this.corner=d;this.overflow_=f};goog.inherits(goog.positioning.AnchoredPosition,goog.positioning.AbstractPosition);goog.positioning.AnchoredPosition.prototype.reposition=function(e,d,f){goog.positioning.positionAtAnchor(this.element,this.corner,e,d,void 0,f,this.overflow_)};goog.positioning.AnchoredViewportPosition=function(f,e,h,g){goog.positioning.AnchoredPosition.call(this,f,e);this.lastResortOverflow_=h?goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y:goog.positioning.Overflow.IGNORE;this.overflowConstraint_=g||void 0};goog.inherits(goog.positioning.AnchoredViewportPosition,goog.positioning.AnchoredPosition);goog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow=function(){return this.lastResortOverflow_};goog.positioning.AnchoredViewportPosition.prototype.setLastResortOverflow=function(b){this.lastResortOverflow_=b};goog.positioning.AnchoredViewportPosition.prototype.reposition=function(h,g,l,k){var j=goog.positioning.positionAtAnchor(this.element,this.corner,h,g,null,l,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,k,this.overflowConstraint_);if(j&goog.positioning.OverflowStatus.FAILED){var i=this.adjustCorner(j,this.corner);g=this.adjustCorner(j,g);j=goog.positioning.positionAtAnchor(this.element,i,h,g,null,l,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,k,this.overflowConstraint_);j&goog.positioning.OverflowStatus.FAILED&&(i=this.adjustCorner(j,i),g=this.adjustCorner(j,g),goog.positioning.positionAtAnchor(this.element,i,h,g,null,l,this.getLastResortOverflow(),k,this.overflowConstraint_))}};goog.positioning.AnchoredViewportPosition.prototype.adjustCorner=function(d,c){d&goog.positioning.OverflowStatus.FAILED_HORIZONTAL&&(c=goog.positioning.flipCornerHorizontal(c));d&goog.positioning.OverflowStatus.FAILED_VERTICAL&&(c=goog.positioning.flipCornerVertical(c));return c};goog.positioning.MenuAnchoredPosition=function(f,e,h,g){goog.positioning.AnchoredViewportPosition.call(this,f,e,h||g);if(h||g){this.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN|(g?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN))}};goog.inherits(goog.positioning.MenuAnchoredPosition,goog.positioning.AnchoredViewportPosition);goog.ui.MenuRenderer=function(){goog.ui.ContainerRenderer.call(this)};goog.inherits(goog.ui.MenuRenderer,goog.ui.ContainerRenderer);goog.addSingletonGetter(goog.ui.MenuRenderer);goog.ui.MenuRenderer.CSS_CLASS="goog-menu";goog.ui.MenuRenderer.prototype.getAriaRole=function(){return goog.dom.a11y.Role.MENU};goog.ui.MenuRenderer.prototype.canDecorate=function(b){return"UL"==b.tagName||goog.ui.MenuRenderer.superClass_.canDecorate.call(this,b)};goog.ui.MenuRenderer.prototype.getDecoratorForChild=function(b){return"HR"==b.tagName?new goog.ui.Separator:goog.ui.MenuRenderer.superClass_.getDecoratorForChild.call(this,b)};goog.ui.MenuRenderer.prototype.containsElement=function(d,c){return goog.dom.contains(d.getElement(),c)};goog.ui.MenuRenderer.prototype.getCssClass=function(){return goog.ui.MenuRenderer.CSS_CLASS};goog.ui.MenuRenderer.prototype.initializeDom=function(b){goog.ui.MenuRenderer.superClass_.initializeDom.call(this,b);b=b.getElement();goog.dom.a11y.setState(b,goog.dom.a11y.State.HASPOPUP,"true")};goog.ui.MenuSeparator=function(b){goog.ui.Separator.call(this,goog.ui.MenuSeparatorRenderer.getInstance(),b)};goog.inherits(goog.ui.MenuSeparator,goog.ui.Separator);goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.MenuItemRenderer=function(){goog.ui.ControlRenderer.call(this);this.classNameCache_=[]};goog.inherits(goog.ui.MenuItemRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuItemRenderer);goog.ui.MenuItemRenderer.CSS_CLASS="goog-menuitem";goog.ui.MenuItemRenderer.CompositeCssClassIndex_={HOVER:0,CHECKBOX:1,CONTENT:2};goog.ui.MenuItemRenderer.prototype.getCompositeCssClass_=function(d){var c=this.classNameCache_[d];if(!c){switch(d){case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER:c=this.getStructuralCssClass()+"-highlight";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX:c=this.getStructuralCssClass()+"-checkbox";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT:c=this.getStructuralCssClass()+"-content"}this.classNameCache_[d]=c}return c};goog.ui.MenuItemRenderer.prototype.getAriaRole=function(){return goog.dom.a11y.Role.MENU_ITEM};goog.ui.MenuItemRenderer.prototype.createDom=function(d){var c=d.getDomHelper().createDom("div",this.getClassNames(d).join(" "),this.createContent(d.getContent(),d.getDomHelper()));this.setEnableCheckBoxStructure(d,c,d.isSupportedState(goog.ui.Component.State.SELECTED)||d.isSupportedState(goog.ui.Component.State.CHECKED));this.setAriaStates(d,c);return c};goog.ui.MenuItemRenderer.prototype.getContentElement=function(b){return b&&b.firstChild};goog.ui.MenuItemRenderer.prototype.decorate=function(d,c){this.hasContentStructure(c)||c.appendChild(this.createContent(c.childNodes,d.getDomHelper()));goog.dom.classes.has(c,"goog-option")&&(d.setCheckable(!0),this.setCheckable(d,c,!0));return goog.ui.MenuItemRenderer.superClass_.decorate.call(this,d,c)};goog.ui.MenuItemRenderer.prototype.setContent=function(f,e){var h=this.getContentElement(f),g=this.hasCheckBoxStructure(f)?h.firstChild:null;goog.ui.MenuItemRenderer.superClass_.setContent.call(this,f,e);g&&!this.hasCheckBoxStructure(f)&&h.insertBefore(g,h.firstChild||null)};goog.ui.MenuItemRenderer.prototype.hasContentStructure=function(d){d=goog.dom.getFirstElementChild(d);var c=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return !!d&&goog.dom.classes.has(d,c)};goog.ui.MenuItemRenderer.prototype.createContent=function(e,d){var f=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return d.createDom("div",f,e)};goog.ui.MenuItemRenderer.prototype.setSelectable=function(e,d,f){d&&(goog.dom.a11y.setRole(d,f?goog.dom.a11y.Role.MENU_ITEM_RADIO:this.getAriaRole()),this.setEnableCheckBoxStructure(e,d,f))};goog.ui.MenuItemRenderer.prototype.setCheckable=function(e,d,f){d&&(goog.dom.a11y.setRole(d,f?goog.dom.a11y.Role.MENU_ITEM_CHECKBOX:this.getAriaRole()),this.setEnableCheckBoxStructure(e,d,f))};goog.ui.MenuItemRenderer.prototype.hasCheckBoxStructure=function(d){if(d=this.getContentElement(d)){d=d.firstChild;var c=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX);return !!d&&goog.dom.classes.has(d,c)}return !1};goog.ui.MenuItemRenderer.prototype.setEnableCheckBoxStructure=function(e,d,f){f!=this.hasCheckBoxStructure(d)&&(goog.dom.classes.enable(d,"goog-option",f),d=this.getContentElement(d),f?(f=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX),d.insertBefore(e.getDomHelper().createDom("div",f),d.firstChild||null)):d.removeChild(d.firstChild))};goog.ui.MenuItemRenderer.prototype.getClassForState=function(b){switch(b){case goog.ui.Component.State.HOVER:return this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);case goog.ui.Component.State.CHECKED:case goog.ui.Component.State.SELECTED:return"goog-option-selected";default:return goog.ui.MenuItemRenderer.superClass_.getClassForState.call(this,b)}};goog.ui.MenuItemRenderer.prototype.getStateFromClass=function(d){var c=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);switch(d){case"goog-option-selected":return goog.ui.Component.State.CHECKED;case c:return goog.ui.Component.State.HOVER;default:return goog.ui.MenuItemRenderer.superClass_.getStateFromClass.call(this,d)}};goog.ui.MenuItemRenderer.prototype.getCssClass=function(){return goog.ui.MenuItemRenderer.CSS_CLASS};goog.ui.MenuItem=function(f,e,h,g){goog.ui.Control.call(this,f,g||goog.ui.MenuItemRenderer.getInstance(),h);this.setValue(e)};goog.inherits(goog.ui.MenuItem,goog.ui.Control);goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_="goog-menuitem-mnemonic-separator";goog.ui.MenuItem.ACCELERATOR_CLASS_="goog-menuitem-accel";goog.ui.MenuItem.prototype.getValue=function(){var b=this.getModel();return null!=b?b:this.getCaption()};goog.ui.MenuItem.prototype.setValue=function(b){this.setModel(b)};goog.ui.MenuItem.prototype.setSelectable=function(d){this.setSupportedState(goog.ui.Component.State.SELECTED,d);this.isChecked()&&!d&&this.setChecked(!1);var c=this.getElement();c&&this.getRenderer().setSelectable(this,c,d)};goog.ui.MenuItem.prototype.setCheckable=function(d){this.setSupportedState(goog.ui.Component.State.CHECKED,d);var c=this.getElement();c&&this.getRenderer().setCheckable(this,c,d)};goog.ui.MenuItem.prototype.getCaption=function(){var e=this.getContent();if(goog.isArray(e)){var d=goog.ui.MenuItem.ACCELERATOR_CLASS_,f=goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_,e=goog.array.map(e,function(b){var c=goog.dom.classes.get(b);return goog.array.contains(c,d)||goog.array.contains(c,f)?"":goog.dom.getRawTextContent(b)}).join("");return goog.string.collapseBreakingSpaces(e)}return goog.ui.MenuItem.superClass_.getCaption.call(this)};goog.ui.MenuItem.prototype.handleMouseUp=function(e){var d=this.getParent();if(d){var f=d.openingCoords;d.openingCoords=null;if(f&&goog.isNumber(e.clientX)&&(d=new goog.math.Coordinate(e.clientX,e.clientY),goog.math.Coordinate.equals(f,d))){return}}goog.ui.MenuItem.superClass_.handleMouseUp.call(this,e)};goog.ui.MenuItem.prototype.handleKeyEventInternal=function(b){return b.keyCode==this.getMnemonic()&&this.performActionInternal(b)?!0:goog.ui.MenuItem.superClass_.handleKeyEventInternal.call(this,b)};goog.ui.MenuItem.prototype.setMnemonic=function(b){this.mnemonicKey_=b};goog.ui.MenuItem.prototype.getMnemonic=function(){return this.mnemonicKey_};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuItemRenderer.CSS_CLASS,function(){return new goog.ui.MenuItem(null)});goog.ui.MenuHeaderRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuHeaderRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuHeaderRenderer);goog.ui.MenuHeaderRenderer.CSS_CLASS="goog-menuheader";goog.ui.MenuHeaderRenderer.prototype.getCssClass=function(){return goog.ui.MenuHeaderRenderer.CSS_CLASS};goog.ui.MenuHeader=function(e,d,f){goog.ui.Control.call(this,e,f||goog.ui.MenuHeaderRenderer.getInstance(),d);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};goog.inherits(goog.ui.MenuHeader,goog.ui.Control);goog.ui.registry.setDecoratorByClassName(goog.ui.MenuHeaderRenderer.CSS_CLASS,function(){return new goog.ui.MenuHeader(null)});goog.ui.Menu=function(d,c){goog.ui.Container.call(this,goog.ui.Container.Orientation.VERTICAL,c||goog.ui.MenuRenderer.getInstance(),d);this.setFocusable(!1)};goog.inherits(goog.ui.Menu,goog.ui.Container);goog.ui.Menu.EventType={BEFORE_SHOW:goog.ui.Component.EventType.BEFORE_SHOW,SHOW:goog.ui.Component.EventType.SHOW,BEFORE_HIDE:goog.ui.Component.EventType.HIDE,HIDE:goog.ui.Component.EventType.HIDE};goog.ui.Menu.CSS_CLASS=goog.ui.MenuRenderer.CSS_CLASS;goog.ui.Menu.prototype.allowAutoFocus_=!0;goog.ui.Menu.prototype.allowHighlightDisabled_=!1;goog.ui.Menu.prototype.getCssClass=function(){return this.getRenderer().getCssClass()};goog.ui.Menu.prototype.containsElement=function(f){if(this.getRenderer().containsElement(this,f)){return !0}for(var e=0,h=this.getChildCount();e<h;e++){var g=this.getChildAt(e);if("function"==typeof g.containsElement&&g.containsElement(f)){return !0}}return !1};goog.ui.Menu.prototype.addItem=function(b){this.addChild(b,!0)};goog.ui.Menu.prototype.addItemAt=function(d,c){this.addChildAt(d,c,!0)};goog.ui.Menu.prototype.removeItem=function(b){(b=this.removeChild(b,!0))&&b.dispose()};goog.ui.Menu.prototype.removeItemAt=function(b){(b=this.removeChildAt(b,!0))&&b.dispose()};goog.ui.Menu.prototype.getItemAt=function(b){return this.getChildAt(b)};goog.ui.Menu.prototype.getItemCount=function(){return this.getChildCount()};goog.ui.Menu.prototype.getItems=function(){var b=[];this.forEachChild(function(a){b.push(a)});return b};goog.ui.Menu.prototype.setPosition=function(e,d){var f=this.isVisible();f||goog.style.showElement(this.getElement(),!0);goog.style.setPageOffset(this.getElement(),e,d);f||goog.style.showElement(this.getElement(),!1)};goog.ui.Menu.prototype.getPosition=function(){return this.isVisible()?goog.style.getPageOffset(this.getElement()):null};goog.ui.Menu.prototype.setAllowAutoFocus=function(b){(this.allowAutoFocus_=b)&&this.setFocusable(!0)};goog.ui.Menu.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_};goog.ui.Menu.prototype.setAllowHighlightDisabled=function(b){this.allowHighlightDisabled_=b};goog.ui.Menu.prototype.getAllowHighlightDisabled=function(){return this.allowHighlightDisabled_};goog.ui.Menu.prototype.setVisible=function(e,d,f){(d=goog.ui.Menu.superClass_.setVisible.call(this,e,d))&&(e&&this.isInDocument()&&this.allowAutoFocus_)&&this.getKeyEventTarget().focus();this.openingCoords=e&&f&&goog.isNumber(f.clientX)?new goog.math.Coordinate(f.clientX,f.clientY):null;return d};goog.ui.Menu.prototype.handleEnterItem=function(b){this.allowAutoFocus_&&this.getKeyEventTarget().focus();return goog.ui.Menu.superClass_.handleEnterItem.call(this,b)};goog.ui.Menu.prototype.highlightNextPrefix=function(d){var c=RegExp("^"+goog.string.regExpEscape(d),"i");return this.highlightHelper(function(b,k){var j=0>b?0:b,i=!1;do{++b;b==k&&(b=0,i=!0);var h=this.getChildAt(b).getCaption();if(h&&h.match(c)){return b}}while(!i||b!=j);return this.getHighlightedIndex()},this.getHighlightedIndex())};goog.ui.Menu.prototype.canHighlightItem=function(b){return(this.allowHighlightDisabled_||b.isEnabled())&&b.isVisible()&&b.isSupportedState(goog.ui.Component.State.HOVER)};goog.ui.Menu.prototype.decorateInternal=function(b){this.decorateContent(b);goog.ui.Menu.superClass_.decorateInternal.call(this,b)};goog.ui.Menu.prototype.handleKeyEventInternal=function(d){var c=goog.ui.Menu.superClass_.handleKeyEventInternal.call(this,d);c||this.forEachChild(function(a){!c&&(a.getMnemonic&&a.getMnemonic()==d.keyCode)&&(this.isEnabled()&&this.setHighlighted(a),c=a.handleKeyEvent(d))},this);return c};goog.ui.Menu.prototype.setHighlightedIndex=function(b){goog.ui.Menu.superClass_.setHighlightedIndex.call(this,b);(b=this.getChildAt(b))&&goog.style.scrollIntoContainerView(b.getElement(),this.getElement())};goog.ui.Menu.prototype.decorateContent=function(f){var e=this.getRenderer();f=this.getDomHelper().getElementsByTagNameAndClass("div",e.getCssClass()+"-content",f);for(var h=f.length,g=0;g<h;g++){e.decorateChildren(this,f[g])}};goog.ui.MenuButtonRenderer=function(){goog.ui.CustomButtonRenderer.call(this)};goog.inherits(goog.ui.MenuButtonRenderer,goog.ui.CustomButtonRenderer);goog.addSingletonGetter(goog.ui.MenuButtonRenderer);goog.ui.MenuButtonRenderer.CSS_CLASS="goog-menu-button";goog.ui.MenuButtonRenderer.WRAPPER_PROP_="__goog_wrapper_div";goog.userAgent.GECKO&&(goog.ui.MenuButtonRenderer.prototype.setContent=function(e,d){var f=goog.ui.MenuButtonRenderer.superClass_.getContentElement.call(this,e&&e.firstChild);f&&goog.dom.replaceNode(this.createCaption(d,goog.dom.getDomHelper(e)),f)});goog.ui.MenuButtonRenderer.prototype.getContentElement=function(b){b=goog.ui.MenuButtonRenderer.superClass_.getContentElement.call(this,b&&b.firstChild);goog.userAgent.GECKO&&(b&&b[goog.ui.MenuButtonRenderer.WRAPPER_PROP_])&&(b=b.firstChild);return b};goog.ui.MenuButtonRenderer.prototype.decorate=function(f,e){var h=goog.dom.getElementsByTagNameAndClass("*",goog.ui.MenuRenderer.CSS_CLASS,e)[0];if(h){goog.style.showElement(h,!1);goog.dom.appendChild(goog.dom.getOwnerDocument(h).body,h);var g=new goog.ui.Menu;g.decorate(h);f.setMenu(g)}return goog.ui.MenuButtonRenderer.superClass_.decorate.call(this,f,e)};goog.ui.MenuButtonRenderer.prototype.createButton=function(d,c){return goog.ui.MenuButtonRenderer.superClass_.createButton.call(this,[this.createCaption(d,c),this.createDropdown(c)],c)};goog.ui.MenuButtonRenderer.prototype.createCaption=function(d,c){return goog.ui.MenuButtonRenderer.wrapCaption(d,this.getCssClass(),c)};goog.ui.MenuButtonRenderer.wrapCaption=function(e,d,f){return f.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(d+"-caption"),e)};goog.ui.MenuButtonRenderer.prototype.createDropdown=function(b){return b.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+(this.getCssClass()+"-dropdown"),"\u00a0")};goog.ui.MenuButtonRenderer.prototype.getCssClass=function(){return goog.ui.MenuButtonRenderer.CSS_CLASS};goog.ui.MenuButton=function(f,e,h,g){goog.ui.Button.call(this,f,h||goog.ui.MenuButtonRenderer.getInstance(),g);this.setSupportedState(goog.ui.Component.State.OPENED,!0);this.menuPosition_=new goog.positioning.MenuAnchoredPosition(null,goog.positioning.Corner.BOTTOM_START);e&&this.setMenu(e);this.menuMargin_=null;this.timer_=new goog.Timer(500);(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD)&&!goog.userAgent.isVersion("533.17.9")&&this.setFocusablePopupMenu(!0)};goog.inherits(goog.ui.MenuButton,goog.ui.Button);goog.ui.MenuButton.prototype.isFocusablePopupMenu_=!1;goog.ui.MenuButton.prototype.renderMenuAsSibling_=!1;goog.ui.MenuButton.prototype.enterDocument=function(){goog.ui.MenuButton.superClass_.enterDocument.call(this);this.menu_&&this.attachMenuEventListeners_(this.menu_,!0);goog.dom.a11y.setState(this.getElement(),goog.dom.a11y.State.HASPOPUP,"true")};goog.ui.MenuButton.prototype.exitDocument=function(){goog.ui.MenuButton.superClass_.exitDocument.call(this);if(this.menu_){this.setOpen(!1);this.menu_.exitDocument();this.attachMenuEventListeners_(this.menu_,!1);var b=this.menu_.getElement();b&&goog.dom.removeNode(b)}};goog.ui.MenuButton.prototype.disposeInternal=function(){goog.ui.MenuButton.superClass_.disposeInternal.call(this);this.menu_&&(this.menu_.dispose(),delete this.menu_);delete this.positionElement_;this.timer_.dispose()};goog.ui.MenuButton.prototype.handleMouseDown=function(b){goog.ui.MenuButton.superClass_.handleMouseDown.call(this,b);this.isActive()&&(this.setOpen(!this.isOpen(),b),this.menu_&&this.menu_.setMouseButtonPressed(this.isOpen()))};goog.ui.MenuButton.prototype.handleMouseUp=function(b){goog.ui.MenuButton.superClass_.handleMouseUp.call(this,b);this.menu_&&!this.isActive()&&this.menu_.setMouseButtonPressed(!1)};goog.ui.MenuButton.prototype.performActionInternal=function(){this.setActive(!1);return !0};goog.ui.MenuButton.prototype.handleDocumentMouseDown=function(b){this.menu_&&(this.menu_.isVisible()&&!this.containsElement(b.target))&&this.setOpen(!1)};goog.ui.MenuButton.prototype.containsElement=function(b){return b&&goog.dom.contains(this.getElement(),b)||this.menu_&&this.menu_.containsElement(b)||!1};goog.ui.MenuButton.prototype.handleKeyEventInternal=function(d){if(d.keyCode==goog.events.KeyCodes.SPACE){if(d.preventDefault(),d.type!=goog.events.EventType.KEYUP){return !0}}else{if(d.type!=goog.events.KeyHandler.EventType.KEY){return !1}}if(this.menu_&&this.menu_.isVisible()){var c=this.menu_.handleKeyEvent(d);return d.keyCode==goog.events.KeyCodes.ESC?(this.setOpen(!1),!0):c}return d.keyCode==goog.events.KeyCodes.DOWN||d.keyCode==goog.events.KeyCodes.UP||d.keyCode==goog.events.KeyCodes.SPACE||d.keyCode==goog.events.KeyCodes.ENTER?(this.setOpen(!0),!0):!1};goog.ui.MenuButton.prototype.handleMenuAction=function(){this.setOpen(!1)};goog.ui.MenuButton.prototype.handleMenuBlur=function(){this.isActive()||this.setOpen(!1)};goog.ui.MenuButton.prototype.handleBlur=function(b){this.isFocusablePopupMenu()||this.setOpen(!1);goog.ui.MenuButton.superClass_.handleBlur.call(this,b)};goog.ui.MenuButton.prototype.getMenu=function(){this.menu_||this.setMenu(new goog.ui.Menu(this.getDomHelper()));return this.menu_||null};goog.ui.MenuButton.prototype.setMenu=function(d){var c=this.menu_;d!=c&&(c&&(this.setOpen(!1),this.isInDocument()&&this.attachMenuEventListeners_(c,!1),delete this.menu_),d&&(this.menu_=d,d.setParent(this),d.setVisible(!1),d.setAllowAutoFocus(this.isFocusablePopupMenu()),this.isInDocument()&&this.attachMenuEventListeners_(d,!0)));return c};goog.ui.MenuButton.prototype.setMenuPosition=function(b){b&&(this.menuPosition_=b,this.positionElement_=b.element)};goog.ui.MenuButton.prototype.setPositionElement=function(b){this.positionElement_=b;this.positionMenu()};goog.ui.MenuButton.prototype.setMenuMargin=function(b){this.menuMargin_=b};goog.ui.MenuButton.prototype.addItem=function(b){this.getMenu().addChild(b,!0)};goog.ui.MenuButton.prototype.addItemAt=function(d,c){this.getMenu().addChildAt(d,c,!0)};goog.ui.MenuButton.prototype.removeItem=function(b){(b=this.getMenu().removeChild(b,!0))&&b.dispose()};goog.ui.MenuButton.prototype.removeItemAt=function(b){(b=this.getMenu().removeChildAt(b,!0))&&b.dispose()};goog.ui.MenuButton.prototype.getItemAt=function(b){return this.menu_?this.menu_.getChildAt(b):null};goog.ui.MenuButton.prototype.getItemCount=function(){return this.menu_?this.menu_.getChildCount():0};goog.ui.MenuButton.prototype.setVisible=function(e,d){var f=goog.ui.MenuButton.superClass_.setVisible.call(this,e,d);f&&!this.isVisible()&&this.setOpen(!1);return f};goog.ui.MenuButton.prototype.setEnabled=function(b){goog.ui.MenuButton.superClass_.setEnabled.call(this,b);this.isEnabled()||this.setOpen(!1)};goog.ui.MenuButton.prototype.isAlignMenuToStart=function(){var b=this.menuPosition_.corner;return b==goog.positioning.Corner.BOTTOM_START||b==goog.positioning.Corner.TOP_START};goog.ui.MenuButton.prototype.setAlignMenuToStart=function(b){this.menuPosition_.corner=b?goog.positioning.Corner.BOTTOM_START:goog.positioning.Corner.BOTTOM_END};goog.ui.MenuButton.prototype.setScrollOnOverflow=function(b){this.menuPosition_.setLastResortOverflow&&this.menuPosition_.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X|(b?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y))};goog.ui.MenuButton.prototype.isScrollOnOverflow=function(){return this.menuPosition_.getLastResortOverflow&&!!(this.menuPosition_.getLastResortOverflow()&goog.positioning.Overflow.RESIZE_HEIGHT)};goog.ui.MenuButton.prototype.isFocusablePopupMenu=function(){return this.isFocusablePopupMenu_};goog.ui.MenuButton.prototype.setFocusablePopupMenu=function(b){this.isFocusablePopupMenu_=b};goog.ui.MenuButton.prototype.setRenderMenuAsSibling=function(b){this.renderMenuAsSibling_=b};goog.ui.MenuButton.prototype.showMenu=function(){this.setOpen(!0)};goog.ui.MenuButton.prototype.hideMenu=function(){this.setOpen(!1)};goog.ui.MenuButton.prototype.setOpen=function(e,d){goog.ui.MenuButton.superClass_.setOpen.call(this,e);if(this.menu_&&this.hasState(goog.ui.Component.State.OPENED)==e){if(e){this.menu_.isInDocument()||(this.renderMenuAsSibling_?this.menu_.render(this.getElement().parentNode):this.menu_.render()),this.viewportBox_=goog.style.getVisibleRectForElement(this.getElement()),this.buttonRect_=goog.style.getBounds(this.getElement()),this.positionMenu(),this.menu_.setHighlightedIndex(-1)}else{if(this.setActive(!1),this.menu_.setMouseButtonPressed(!1),this.getElement()&&goog.dom.a11y.setState(this.getElement(),goog.dom.a11y.State.ACTIVEDESCENDANT,""),goog.isDefAndNotNull(this.originalSize_)){this.originalSize_=void 0;var f=this.menu_.getElement();f&&goog.style.setSize(f,"","")}}this.menu_.setVisible(e,!1,d);this.isDisposed()||this.attachPopupListeners_(e)}};goog.ui.MenuButton.prototype.invalidateMenuSize=function(){this.originalSize_=void 0};goog.ui.MenuButton.prototype.positionMenu=function(){if(this.menu_.isInDocument()){var e=this.positionElement_||this.getElement(),d=this.menuPosition_;this.menuPosition_.element=e;e=this.menu_.getElement();this.menu_.isVisible()||(e.style.visibility="hidden",goog.style.showElement(e,!0));!this.originalSize_&&this.isScrollOnOverflow()&&(this.originalSize_=goog.style.getSize(e));var f=goog.positioning.flipCornerVertical(d.corner);d.reposition(e,f,this.menuMargin_,this.originalSize_);this.menu_.isVisible()||(goog.style.showElement(e,!1),e.style.visibility="visible")}};goog.ui.MenuButton.prototype.onTick_=function(){var d=goog.style.getBounds(this.getElement()),c=goog.style.getVisibleRectForElement(this.getElement());if(!goog.math.Rect.equals(this.buttonRect_,d)||!goog.math.Box.equals(this.viewportBox_,c)){this.buttonRect_=d,this.viewportBox_=c,this.positionMenu()}};goog.ui.MenuButton.prototype.attachMenuEventListeners_=function(f,e){var h=this.getHandler(),g=e?h.listen:h.unlisten;g.call(h,f,goog.ui.Component.EventType.ACTION,this.handleMenuAction);g.call(h,f,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem);g.call(h,f,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem)};goog.ui.MenuButton.prototype.handleHighlightItem=function(b){goog.dom.a11y.setState(this.getElement(),goog.dom.a11y.State.ACTIVEDESCENDANT,b.target.getElement().id)};goog.ui.MenuButton.prototype.handleUnHighlightItem=function(){this.menu_.getHighlighted()||goog.dom.a11y.setState(this.getElement(),goog.dom.a11y.State.ACTIVEDESCENDANT,"")};goog.ui.MenuButton.prototype.attachPopupListeners_=function(e){var d=this.getHandler(),f=e?d.listen:d.unlisten;f.call(d,this.getDomHelper().getDocument(),goog.events.EventType.MOUSEDOWN,this.handleDocumentMouseDown,!0);this.isFocusablePopupMenu()&&f.call(d,this.menu_,goog.ui.Component.EventType.BLUR,this.handleMenuBlur);f.call(d,this.timer_,goog.Timer.TICK,this.onTick_);e?this.timer_.start():this.timer_.stop()};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.MenuButton(null)});goog.color={};goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.color.parse=function(e){var d={};e=String(e);var f=goog.color.prependHashIfNecessaryHelper(e);if(goog.color.isValidHexColor_(f)){return d.hex=goog.color.normalizeHex(f),d.type="hex",d}f=goog.color.isValidRgbColor_(e);if(f.length){return d.hex=goog.color.rgbArrayToHex(f),d.type="rgb",d}if(goog.color.names&&(f=goog.color.names[e.toLowerCase()])){return d.hex=f,d.type="named",d}throw Error(e+" is not a valid color string")};goog.color.isValidColor=function(d){var c=goog.color.prependHashIfNecessaryHelper(d);return !(!goog.color.isValidHexColor_(c)&&!(goog.color.isValidRgbColor_(d).length||goog.color.names&&goog.color.names[d.toLowerCase()]))};goog.color.parseRgb=function(d){var c=goog.color.isValidRgbColor_(d);if(!c.length){throw Error(d+" is not a valid RGB color")}return c};goog.color.hexToRgbStyle=function(b){return goog.color.rgbStyle_(goog.color.hexToRgb(b))};goog.color.hexTripletRe_=/#(.)(.)(.)/;goog.color.normalizeHex=function(b){if(!goog.color.isValidHexColor_(b)){throw Error("'"+b+"' is not a valid hex color")}4==b.length&&(b=b.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3"));return b.toLowerCase()};goog.color.hexToRgb=function(e){e=goog.color.normalizeHex(e);var d=parseInt(e.substr(1,2),16),f=parseInt(e.substr(3,2),16);e=parseInt(e.substr(5,2),16);return[d,f,e]};goog.color.rgbToHex=function(e,d,f){e=Number(e);d=Number(d);f=Number(f);if(isNaN(e)||0>e||255<e||isNaN(d)||0>d||255<d||isNaN(f)||0>f||255<f){throw Error('"('+e+","+d+","+f+'") is not a valid RGB color')}e=goog.color.prependZeroIfNecessaryHelper(e.toString(16));d=goog.color.prependZeroIfNecessaryHelper(d.toString(16));f=goog.color.prependZeroIfNecessaryHelper(f.toString(16));return"#"+e+d+f};goog.color.rgbArrayToHex=function(b){return goog.color.rgbToHex(b[0],b[1],b[2])};goog.color.rgbToHsl=function(j,i,p){j/=255;i/=255;p/=255;var o=Math.max(j,i,p),n=Math.min(j,i,p),m=0,l=0,k=0.5*(o+n);o!=n&&(o==j?m=60*(i-p)/(o-n):o==i?m=60*(p-j)/(o-n)+120:o==p&&(m=60*(j-i)/(o-n)+240),l=0<k&&0.5>=k?(o-n)/(2*k):(o-n)/(2-2*k));return[Math.round(m+360)%360,l,k]};goog.color.rgbArrayToHsl=function(b){return goog.color.rgbToHsl(b[0],b[1],b[2])};goog.color.hueToRgb_=function(e,d,f){0>f?f+=1:1<f&&(f-=1);return 1>6*f?e+6*(d-e)*f:1>2*f?d:2>3*f?e+6*(d-e)*(2/3-f):e};goog.color.hslToRgb=function(i,h,n){var m=0,l=0,k=0;i/=360;if(0==h){m=l=k=255*n}else{var j=k=0,j=0.5>n?n*(1+h):n+h-h*n,k=2*n-j,m=255*goog.color.hueToRgb_(k,j,i+1/3),l=255*goog.color.hueToRgb_(k,j,i),k=255*goog.color.hueToRgb_(k,j,i-1/3)}return[Math.round(m),Math.round(l),Math.round(k)]};goog.color.hslArrayToRgb=function(b){return goog.color.hslToRgb(b[0],b[1],b[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(b){return goog.color.validHexColorRe_.test(b)};goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/;goog.color.isNormalizedHexColor_=function(b){return goog.color.normalizedHexColorRe_.test(b)};goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(e){var d=e.match(goog.color.rgbColorRe_);if(d){e=Number(d[1]);var f=Number(d[2]),d=Number(d[3]);if(0<=e&&255>=e&&0<=f&&255>=f&&0<=d&&255>=d){return[e,f,d]}}return[]};goog.color.prependZeroIfNecessaryHelper=function(b){return 1==b.length?"0"+b:b};goog.color.prependHashIfNecessaryHelper=function(b){return"#"==b.charAt(0)?b:"#"+b};goog.color.rgbStyle_=function(b){return"rgb("+b.join(",")+")"};goog.color.hsvToRgb=function(r,q,p){var o=0,n=0,m=0;if(0==q){m=n=o=p}else{var l=Math.floor(r/60),k=r/60-l;r=p*(1-q);var i=p*(1-q*k);q=p*(1-q*(1-k));switch(l){case 1:o=i;n=p;m=r;break;case 2:o=r;n=p;m=q;break;case 3:o=r;n=i;m=p;break;case 4:o=q;n=r;m=p;break;case 5:o=p;n=r;m=i;break;case 6:case 0:o=p,n=q,m=r}}return[Math.floor(o),Math.floor(n),Math.floor(m)]};goog.color.rgbToHsv=function(h,g,l){var k=Math.max(Math.max(h,g),l),j=Math.min(Math.min(h,g),l);if(j==k){j=h=0}else{var i=k-j,j=i/k;h=60*(h==k?(g-l)/i:g==k?2+(l-h)/i:4+(h-g)/i);0>h&&(h+=360);360<h&&(h-=360)}return[h,j,k]};goog.color.rgbArrayToHsv=function(b){return goog.color.rgbToHsv(b[0],b[1],b[2])};goog.color.hsvArrayToRgb=function(b){return goog.color.hsvToRgb(b[0],b[1],b[2])};goog.color.hexToHsl=function(b){b=goog.color.hexToRgb(b);return goog.color.rgbToHsl(b[0],b[1],b[2])};goog.color.hslToHex=function(e,d,f){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e,d,f))};goog.color.hslArrayToHex=function(b){return goog.color.rgbArrayToHex(goog.color.hslToRgb(b[0],b[1],b[2]))};goog.color.hexToHsv=function(b){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(b))};goog.color.hsvToHex=function(e,d,f){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(e,d,f))};goog.color.hsvArrayToHex=function(b){return goog.color.hsvToHex(b[0],b[1],b[2])};goog.color.hslDistance=function(f,e){var h,g;h=0.5>=f[2]?f[1]*f[2]:f[1]*(1-f[2]);g=0.5>=e[2]?e[1]*e[2]:e[1]*(1-e[2]);return(f[2]-e[2])*(f[2]-e[2])+h*h+g*g-2*h*g*Math.cos(2*(f[0]/360-e[0]/360)*Math.PI)};goog.color.blend=function(e,d,f){f=goog.math.clamp(f,0,1);return[Math.round(f*e[0]+(1-f)*d[0]),Math.round(f*e[1]+(1-f)*d[1]),Math.round(f*e[2]+(1-f)*d[2])]};goog.color.darken=function(d,c){return goog.color.blend([0,0,0],d,c)};goog.color.lighten=function(d,c){return goog.color.blend([255,255,255],d,c)};goog.color.highContrast=function(f,e){for(var h=[],g=0;g<e.length;g++){h.push({color:e[g],diff:goog.color.yiqBrightnessDiff_(e[g],f)+goog.color.colorDiff_(e[g],f)})}h.sort(function(d,c){return c.diff-d.diff});return h[0].color};goog.color.yiqBrightness_=function(b){return Math.round((299*b[0]+587*b[1]+114*b[2])/1000)};goog.color.yiqBrightnessDiff_=function(d,c){return Math.abs(goog.color.yiqBrightness_(d)-goog.color.yiqBrightness_(c))};goog.color.colorDiff_=function(d,c){return Math.abs(d[0]-c[0])+Math.abs(d[1]-c[1])+Math.abs(d[2]-c[2])};goog.ui.ColorMenuButtonRenderer=function(){goog.ui.MenuButtonRenderer.call(this)};goog.inherits(goog.ui.ColorMenuButtonRenderer,goog.ui.MenuButtonRenderer);goog.addSingletonGetter(goog.ui.ColorMenuButtonRenderer);goog.ui.ColorMenuButtonRenderer.CSS_CLASS="goog-color-menu-button";goog.ui.ColorMenuButtonRenderer.prototype.createCaption=function(d,c){return goog.ui.ColorMenuButtonRenderer.superClass_.createCaption.call(this,goog.ui.ColorMenuButtonRenderer.wrapCaption(d,c),c)};goog.ui.ColorMenuButtonRenderer.wrapCaption=function(d,c){return c.createDom("div",goog.ui.ColorMenuButtonRenderer.CSS_CLASS+"-indicator",d)};goog.ui.ColorMenuButtonRenderer.prototype.setValue=function(d,c){d&&goog.ui.ColorMenuButtonRenderer.setCaptionValue(this.getContentElement(d),c)};goog.ui.ColorMenuButtonRenderer.setCaptionValue=function(e,d){if(e&&e.firstChild){var f;f=d&&goog.color.isValidColor(d)?goog.color.parse(d).hex:null;e.firstChild.style.borderBottomColor=f||(goog.userAgent.IE?"":"transparent")}};goog.ui.ColorMenuButtonRenderer.prototype.initializeDom=function(b){this.setValue(b.getElement(),b.getValue());goog.dom.classes.add(b.getElement(),goog.ui.ColorMenuButtonRenderer.CSS_CLASS);goog.ui.ColorMenuButtonRenderer.superClass_.initializeDom.call(this,b)};goog.ui.SelectionModel=function(b){goog.events.EventTarget.call(this);this.items_=[];this.addItems(b)};goog.inherits(goog.ui.SelectionModel,goog.events.EventTarget);goog.ui.SelectionModel.prototype.selectedItem_=null;goog.ui.SelectionModel.prototype.selectionHandler_=null;goog.ui.SelectionModel.prototype.getSelectionHandler=function(){return this.selectionHandler_};goog.ui.SelectionModel.prototype.setSelectionHandler=function(b){this.selectionHandler_=b};goog.ui.SelectionModel.prototype.getItemCount=function(){return this.items_.length};goog.ui.SelectionModel.prototype.indexOfItem=function(b){return b?goog.array.indexOf(this.items_,b):-1};goog.ui.SelectionModel.prototype.getFirst=function(){return this.items_[0]};goog.ui.SelectionModel.prototype.getLast=function(){return this.items_[this.items_.length-1]};goog.ui.SelectionModel.prototype.getItemAt=function(b){return this.items_[b]||null};goog.ui.SelectionModel.prototype.addItems=function(b){b&&(goog.array.forEach(b,function(c){this.selectItem_(c,!1)},this),goog.array.extend(this.items_,b))};goog.ui.SelectionModel.prototype.addItem=function(b){this.addItemAt(b,this.getItemCount())};goog.ui.SelectionModel.prototype.addItemAt=function(d,c){d&&(this.selectItem_(d,!1),goog.array.insertAt(this.items_,d,c))};goog.ui.SelectionModel.prototype.removeItem=function(b){b&&goog.array.remove(this.items_,b)&&b==this.selectedItem_&&(this.selectedItem_=null,this.dispatchEvent(goog.events.EventType.SELECT))};goog.ui.SelectionModel.prototype.removeItemAt=function(b){this.removeItem(this.getItemAt(b))};goog.ui.SelectionModel.prototype.getSelectedItem=function(){return this.selectedItem_};goog.ui.SelectionModel.prototype.getItems=function(){return goog.array.clone(this.items_)};goog.ui.SelectionModel.prototype.setSelectedItem=function(b){b!=this.selectedItem_&&(this.selectItem_(this.selectedItem_,!1),this.selectedItem_=b,this.selectItem_(b,!0));this.dispatchEvent(goog.events.EventType.SELECT)};goog.ui.SelectionModel.prototype.getSelectedIndex=function(){return this.indexOfItem(this.selectedItem_)};goog.ui.SelectionModel.prototype.setSelectedIndex=function(b){this.setSelectedItem(this.getItemAt(b))};goog.ui.SelectionModel.prototype.clear=function(){goog.array.clear(this.items_);this.selectedItem_=null};goog.ui.SelectionModel.prototype.disposeInternal=function(){goog.ui.SelectionModel.superClass_.disposeInternal.call(this);delete this.items_;this.selectedItem_=null};goog.ui.SelectionModel.prototype.selectItem_=function(d,c){d&&("function"==typeof this.selectionHandler_?this.selectionHandler_(d,c):"function"==typeof d.setSelected&&d.setSelected(c))};goog.ui.PaletteRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.PaletteRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.PaletteRenderer);goog.ui.PaletteRenderer.cellId_=0;goog.ui.PaletteRenderer.CSS_CLASS="goog-palette";goog.ui.PaletteRenderer.prototype.createDom=function(d){var c=this.getClassNames(d);return d.getDomHelper().createDom("div",c?c.join(" "):null,this.createGrid(d.getContent(),d.getSize(),d.getDomHelper()))};goog.ui.PaletteRenderer.prototype.createGrid=function(r,q,p){for(var o=[],n=0,m=0;n<q.height;n++){for(var l=[],k=0;k<q.width;k++){var i=r&&r[m++];l.push(this.createCell(i,p))}o.push(this.createRow(l,p))}return this.createTable(o,p)};goog.ui.PaletteRenderer.prototype.createTable=function(e,d){var f=d.createDom("table",this.getCssClass()+"-table",d.createDom("tbody",this.getCssClass()+"-body",e));f.cellSpacing=0;f.cellPadding=0;goog.dom.a11y.setRole(f,"grid");return f};goog.ui.PaletteRenderer.prototype.createRow=function(d,c){return c.createDom("tr",this.getCssClass()+"-row",d)};goog.ui.PaletteRenderer.prototype.createCell=function(e,d){var f=d.createDom("td",{"class":this.getCssClass()+"-cell",id:this.getCssClass()+"-cell-"+goog.ui.PaletteRenderer.cellId_++},e);goog.dom.a11y.setRole(f,"gridcell");return f};goog.ui.PaletteRenderer.prototype.canDecorate=function(){return !1};goog.ui.PaletteRenderer.prototype.decorate=function(){return null};goog.ui.PaletteRenderer.prototype.setContent=function(j,i){if(j){var p=goog.dom.getElementsByTagNameAndClass("tbody",this.getCssClass()+"-body",j)[0];if(p){var o=0;goog.array.forEach(p.rows,function(b){goog.array.forEach(b.cells,function(d){goog.dom.removeChildren(d);if(i){var e=i[o++];e&&goog.dom.appendChild(d,e)}})});if(o<i.length){for(var n=[],m=goog.dom.getDomHelper(j),l=p.rows[0].cells.length;o<i.length;){var k=i[o++];n.push(this.createCell(k,m));n.length==l&&(k=this.createRow(n,m),goog.dom.appendChild(p,k),n.length=0)}if(0<n.length){for(;n.length<l;){n.push(this.createCell("",m))}k=this.createRow(n,m);goog.dom.appendChild(p,k)}}}goog.style.setUnselectable(j,!0,goog.userAgent.GECKO)}};goog.ui.PaletteRenderer.prototype.getContainingItem=function(e,d){for(var f=e.getElement();d&&d.nodeType==goog.dom.NodeType.ELEMENT&&d!=f;){if("TD"==d.tagName&&goog.dom.classes.has(d,this.getCssClass()+"-cell")){return d.firstChild}d=d.parentNode}return null};goog.ui.PaletteRenderer.prototype.highlightCell=function(e,d,f){d&&(d=d.parentNode,goog.dom.classes.enable(d,this.getCssClass()+"-cell-hover",f),e=e.getElement().firstChild,goog.dom.a11y.setState(e,"activedescendent",d.id))};goog.ui.PaletteRenderer.prototype.selectCell=function(e,d,f){d&&goog.dom.classes.enable(d.parentNode,this.getCssClass()+"-cell-selected",f)};goog.ui.PaletteRenderer.prototype.getCssClass=function(){return goog.ui.PaletteRenderer.CSS_CLASS};goog.ui.Palette=function(e,d,f){goog.ui.Control.call(this,e,d||goog.ui.PaletteRenderer.getInstance(),f);this.setAutoStates(goog.ui.Component.State.CHECKED|goog.ui.Component.State.SELECTED|goog.ui.Component.State.OPENED,!1)};goog.inherits(goog.ui.Palette,goog.ui.Control);goog.ui.Palette.EventType={AFTER_HIGHLIGHT:goog.events.getUniqueId("afterhighlight")};goog.ui.Palette.prototype.size_=null;goog.ui.Palette.prototype.highlightedIndex_=-1;goog.ui.Palette.prototype.selectionModel_=null;goog.ui.Palette.prototype.disposeInternal=function(){goog.ui.Palette.superClass_.disposeInternal.call(this);this.selectionModel_&&(this.selectionModel_.dispose(),this.selectionModel_=null);this.size_=null};goog.ui.Palette.prototype.setContentInternal=function(b){goog.ui.Palette.superClass_.setContentInternal.call(this,b);this.adjustSize_();this.selectionModel_?(this.selectionModel_.clear(),this.selectionModel_.addItems(b)):(this.selectionModel_=new goog.ui.SelectionModel(b),this.selectionModel_.setSelectionHandler(goog.bind(this.selectItem_,this)),this.getHandler().listen(this.selectionModel_,goog.events.EventType.SELECT,this.handleSelectionChange));this.highlightedIndex_=-1};goog.ui.Palette.prototype.getCaption=function(){return""};goog.ui.Palette.prototype.setCaption=function(){};goog.ui.Palette.prototype.handleMouseOver=function(d){goog.ui.Palette.superClass_.handleMouseOver.call(this,d);var c=this.getRenderer().getContainingItem(this,d.target);(!c||!d.relatedTarget||!goog.dom.contains(c,d.relatedTarget))&&c!=this.getHighlightedItem()&&this.setHighlightedItem(c)};goog.ui.Palette.prototype.handleMouseOut=function(d){goog.ui.Palette.superClass_.handleMouseOut.call(this,d);var c=this.getRenderer().getContainingItem(this,d.target);(!c||!d.relatedTarget||!goog.dom.contains(c,d.relatedTarget))&&c==this.getHighlightedItem()&&this.getRenderer().highlightCell(this,c,!1)};goog.ui.Palette.prototype.handleMouseDown=function(b){goog.ui.Palette.superClass_.handleMouseDown.call(this,b);this.isActive()&&(b=this.getRenderer().getContainingItem(this,b.target),b!=this.getHighlightedItem()&&this.setHighlightedItem(b))};goog.ui.Palette.prototype.performActionInternal=function(d){var c=this.getHighlightedItem();return c?(this.setSelectedItem(c),goog.ui.Palette.superClass_.performActionInternal.call(this,d)):!1};goog.ui.Palette.prototype.handleKeyEvent=function(f){var e=this.getContent(),e=e?e.length:0,h=this.size_.width;if(0==e||!this.isEnabled()){return !1}if(f.keyCode==goog.events.KeyCodes.ENTER||f.keyCode==goog.events.KeyCodes.SPACE){return this.performActionInternal(f)}if(f.keyCode==goog.events.KeyCodes.HOME){return this.setHighlightedIndex(0),!0}if(f.keyCode==goog.events.KeyCodes.END){return this.setHighlightedIndex(e-1),!0}var g=0>this.highlightedIndex_?this.getSelectedIndex():this.highlightedIndex_;switch(f.keyCode){case goog.events.KeyCodes.LEFT:-1==g&&(g=e);if(0<g){return this.setHighlightedIndex(g-1),f.preventDefault(),!0}break;case goog.events.KeyCodes.RIGHT:if(g<e-1){return this.setHighlightedIndex(g+1),f.preventDefault(),!0}break;case goog.events.KeyCodes.UP:-1==g&&(g=e+h-1);if(g>=h){return this.setHighlightedIndex(g-h),f.preventDefault(),!0}break;case goog.events.KeyCodes.DOWN:if(-1==g&&(g=-h),g<e-h){return this.setHighlightedIndex(g+h),f.preventDefault(),!0}}return !1};goog.ui.Palette.prototype.handleSelectionChange=function(){};goog.ui.Palette.prototype.getSize=function(){return this.size_};goog.ui.Palette.prototype.setSize=function(d,c){if(this.getElement()){throw Error(goog.ui.Component.Error.ALREADY_RENDERED)}this.size_=goog.isNumber(d)?new goog.math.Size(d,c):d;this.adjustSize_()};goog.ui.Palette.prototype.getHighlightedIndex=function(){return this.highlightedIndex_};goog.ui.Palette.prototype.getHighlightedItem=function(){var b=this.getContent();return b&&b[this.highlightedIndex_]};goog.ui.Palette.prototype.setHighlightedIndex=function(b){b!=this.highlightedIndex_&&(this.highlightIndex_(this.highlightedIndex_,!1),this.highlightedIndex_=b,this.highlightIndex_(b,!0),this.dispatchEvent(goog.ui.Palette.EventType.AFTER_HIGHLIGHT))};goog.ui.Palette.prototype.setHighlightedItem=function(d){var c=this.getContent();this.setHighlightedIndex(c?goog.array.indexOf(c,d):-1)};goog.ui.Palette.prototype.getSelectedIndex=function(){return this.selectionModel_?this.selectionModel_.getSelectedIndex():-1};goog.ui.Palette.prototype.getSelectedItem=function(){return this.selectionModel_?this.selectionModel_.getSelectedItem():null};goog.ui.Palette.prototype.setSelectedIndex=function(b){this.selectionModel_&&this.selectionModel_.setSelectedIndex(b)};goog.ui.Palette.prototype.setSelectedItem=function(b){this.selectionModel_&&this.selectionModel_.setSelectedItem(b)};goog.ui.Palette.prototype.highlightIndex_=function(e,d){if(this.getElement()){var f=this.getContent();f&&(0<=e&&e<f.length)&&this.getRenderer().highlightCell(this,f[e],d)}};goog.ui.Palette.prototype.selectItem_=function(d,c){this.getElement()&&this.getRenderer().selectCell(this,d,c)};goog.ui.Palette.prototype.adjustSize_=function(){var b=this.getContent();if(b){if(this.size_&&this.size_.width){if(b=Math.ceil(b.length/this.size_.width),!goog.isNumber(this.size_.height)||this.size_.height<b){this.size_.height=b}}else{b=Math.ceil(Math.sqrt(b.length)),this.size_=new goog.math.Size(b,b)}}else{this.size_=new goog.math.Size(0,0)}};goog.ui.ColorPalette=function(e,d,f){this.colors_=e||[];goog.ui.Palette.call(this,null,d||goog.ui.PaletteRenderer.getInstance(),f);this.setColors(this.colors_)};goog.inherits(goog.ui.ColorPalette,goog.ui.Palette);goog.ui.ColorPalette.prototype.normalizedColors_=null;goog.ui.ColorPalette.prototype.getColors=function(){return this.colors_};goog.ui.ColorPalette.prototype.setColors=function(b){this.colors_=b;this.normalizedColors_=null;this.setContent(this.createColorNodes())};goog.ui.ColorPalette.prototype.getSelectedColor=function(){var b=this.getSelectedItem();return b?(b=goog.style.getStyle(b,"background-color"),goog.ui.ColorPalette.parseColor_(b)):null};goog.ui.ColorPalette.prototype.setSelectedColor=function(b){b=goog.ui.ColorPalette.parseColor_(b);this.normalizedColors_||(this.normalizedColors_=goog.array.map(this.colors_,function(c){return goog.ui.ColorPalette.parseColor_(c)}));this.setSelectedIndex(b?goog.array.indexOf(this.normalizedColors_,b):-1)};goog.ui.ColorPalette.prototype.createColorNodes=function(){return goog.array.map(this.colors_,function(d){var c=this.getDomHelper().createDom("div",{"class":this.getRenderer().getCssClass()+"-colorswatch",style:"background-color:"+d});c.title="#"==d.charAt(0)?"RGB ("+goog.color.hexToRgb(d).join(", ")+")":d;return c},this)};goog.ui.ColorPalette.parseColor_=function(d){if(d){try{return goog.color.parse(d).hex}catch(c){}}return null};goog.ui.ColorMenuButton=function(f,e,h,g){goog.ui.MenuButton.call(this,f,e,h||goog.ui.ColorMenuButtonRenderer.getInstance(),g)};goog.inherits(goog.ui.ColorMenuButton,goog.ui.MenuButton);goog.ui.ColorMenuButton.PALETTES={GRAYSCALE:"#000 #444 #666 #999 #ccc #eee #f3f3f3 #fff".split(" "),SOLID:"#f00 #f90 #ff0 #0f0 #0ff #00f #90f #f0f".split(" "),PASTEL:"#f4cccc #fce5cd #fff2cc #d9ead3 #d0e0e3 #cfe2f3 #d9d2e9 #ead1dc #ea9999 #f9cb9c #ffe599 #b6d7a8 #a2c4c9 #9fc5e8 #b4a7d6 #d5a6bd #e06666 #f6b26b #ffd966 #93c47d #76a5af #6fa8dc #8e7cc3 #c27ba0 #cc0000 #e69138 #f1c232 #6aa84f #45818e #3d85c6 #674ea7 #a64d79 #990000 #b45f06 #bf9000 #38761d #134f5c #0b5394 #351c75 #741b47 #660000 #783f04 #7f6000 #274e13 #0c343d #073763 #20124d #4c1130".split(" ")};goog.ui.ColorMenuButton.NO_COLOR="none";goog.ui.ColorMenuButton.newColorMenu=function(e,d){var f=new goog.ui.Menu(d);e&&goog.array.forEach(e,function(b){f.addChild(b,!0)});goog.object.forEach(goog.ui.ColorMenuButton.PALETTES,function(b){b=new goog.ui.ColorPalette(b,null,d);b.setSize(8);f.addChild(b,!0)});return f};goog.ui.ColorMenuButton.prototype.getSelectedColor=function(){return this.getValue()};goog.ui.ColorMenuButton.prototype.setSelectedColor=function(b){this.setValue(b)};goog.ui.ColorMenuButton.prototype.setValue=function(e){for(var d=0,f;f=this.getItemAt(d);d++){"function"==typeof f.setSelectedColor&&f.setSelectedColor(e)}goog.ui.ColorMenuButton.superClass_.setValue.call(this,e)};goog.ui.ColorMenuButton.prototype.handleMenuAction=function(b){"function"==typeof b.target.getSelectedColor?this.setValue(b.target.getSelectedColor()):b.target.getValue()==goog.ui.ColorMenuButton.NO_COLOR&&this.setValue(null);goog.ui.ColorMenuButton.superClass_.handleMenuAction.call(this,b);b.stopPropagation();this.dispatchEvent(goog.ui.Component.EventType.ACTION)};goog.ui.ColorMenuButton.prototype.setOpen=function(d,c){d&&0==this.getItemCount()&&(this.setMenu(goog.ui.ColorMenuButton.newColorMenu(null,this.getDomHelper())),this.setValue(this.getValue()));goog.ui.ColorMenuButton.superClass_.setOpen.call(this,d,c)};goog.ui.registry.setDecoratorByClassName(goog.ui.ColorMenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.ColorMenuButton(null)});goog.ui.ToolbarMenuButtonRenderer=function(){goog.ui.MenuButtonRenderer.call(this)};goog.inherits(goog.ui.ToolbarMenuButtonRenderer,goog.ui.MenuButtonRenderer);goog.addSingletonGetter(goog.ui.ToolbarMenuButtonRenderer);goog.ui.ToolbarMenuButtonRenderer.CSS_CLASS="goog-toolbar-menu-button";goog.ui.ToolbarMenuButtonRenderer.prototype.getCssClass=function(){return goog.ui.ToolbarMenuButtonRenderer.CSS_CLASS};goog.ui.ToolbarColorMenuButtonRenderer=function(){goog.ui.ToolbarMenuButtonRenderer.call(this)};goog.inherits(goog.ui.ToolbarColorMenuButtonRenderer,goog.ui.ToolbarMenuButtonRenderer);goog.addSingletonGetter(goog.ui.ToolbarColorMenuButtonRenderer);goog.ui.ToolbarColorMenuButtonRenderer.prototype.createCaption=function(d,c){return goog.ui.MenuButtonRenderer.wrapCaption(goog.ui.ColorMenuButtonRenderer.wrapCaption(d,c),this.getCssClass(),c)};goog.ui.ToolbarColorMenuButtonRenderer.prototype.setValue=function(d,c){d&&goog.ui.ColorMenuButtonRenderer.setCaptionValue(this.getContentElement(d),c)};goog.ui.ToolbarColorMenuButtonRenderer.prototype.initializeDom=function(b){this.setValue(b.getElement(),b.getValue());goog.dom.classes.add(b.getElement(),"goog-toolbar-color-menu-button");goog.ui.ToolbarColorMenuButtonRenderer.superClass_.initializeDom.call(this,b)};goog.ui.ToolbarColorMenuButton=function(f,e,h,g){goog.ui.ColorMenuButton.call(this,f,e,h||goog.ui.ToolbarColorMenuButtonRenderer.getInstance(),g)};goog.inherits(goog.ui.ToolbarColorMenuButton,goog.ui.ColorMenuButton);goog.ui.registry.setDecoratorByClassName("goog-toolbar-color-menu-button",function(){return new goog.ui.ToolbarColorMenuButton(null)});goog.ui.ToolbarMenuButton=function(f,e,h,g){goog.ui.MenuButton.call(this,f,e,h||goog.ui.ToolbarMenuButtonRenderer.getInstance(),g)};goog.inherits(goog.ui.ToolbarMenuButton,goog.ui.MenuButton);goog.ui.registry.setDecoratorByClassName(goog.ui.ToolbarMenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.ToolbarMenuButton(null)});goog.ui.Select=function(f,e,h,g){goog.ui.MenuButton.call(this,f,e,h,g);this.setDefaultCaption(f);this.setPreferredAriaRole(goog.dom.a11y.Role.LISTBOX)};goog.inherits(goog.ui.Select,goog.ui.MenuButton);goog.ui.Select.prototype.selectionModel_=null;goog.ui.Select.prototype.defaultCaption_=null;goog.ui.Select.prototype.enterDocument=function(){goog.ui.Select.superClass_.enterDocument.call(this);this.updateCaption();this.listenToSelectionModelEvents_();goog.dom.a11y.setState(this.getElement(),goog.dom.a11y.State.HASPOPUP,"false")};goog.ui.Select.prototype.decorateInternal=function(b){goog.ui.Select.superClass_.decorateInternal.call(this,b);(b=this.getCaption())?this.setDefaultCaption(b):this.setSelectedIndex(0)};goog.ui.Select.prototype.disposeInternal=function(){goog.ui.Select.superClass_.disposeInternal.call(this);this.selectionModel_&&(this.selectionModel_.dispose(),this.selectionModel_=null);this.defaultCaption_=null};goog.ui.Select.prototype.handleMenuAction=function(b){this.setSelectedItem(b.target);goog.ui.Select.superClass_.handleMenuAction.call(this,b);b.stopPropagation();this.dispatchEvent(goog.ui.Component.EventType.ACTION)};goog.ui.Select.prototype.handleSelectionChange=function(){var b=this.getSelectedItem();goog.ui.Select.superClass_.setValue.call(this,b&&b.getValue());this.updateCaption()};goog.ui.Select.prototype.setMenu=function(d){var c=goog.ui.Select.superClass_.setMenu.call(this,d);d!=c&&(this.selectionModel_&&this.selectionModel_.clear(),d&&(this.selectionModel_?d.forEachChild(function(b){this.setCorrectAriaRole_(b);this.selectionModel_.addItem(b)},this):this.createSelectionModel_(d)));return c};goog.ui.Select.prototype.getDefaultCaption=function(){return this.defaultCaption_};goog.ui.Select.prototype.setDefaultCaption=function(b){this.defaultCaption_=b;this.updateCaption()};goog.ui.Select.prototype.addItem=function(b){this.setCorrectAriaRole_(b);goog.ui.Select.superClass_.addItem.call(this,b);this.selectionModel_?this.selectionModel_.addItem(b):this.createSelectionModel_(this.getMenu())};goog.ui.Select.prototype.addItemAt=function(d,c){this.setCorrectAriaRole_(d);goog.ui.Select.superClass_.addItemAt.call(this,d,c);this.selectionModel_?this.selectionModel_.addItemAt(d,c):this.createSelectionModel_(this.getMenu())};goog.ui.Select.prototype.removeItem=function(b){goog.ui.Select.superClass_.removeItem.call(this,b);this.selectionModel_&&this.selectionModel_.removeItem(b)};goog.ui.Select.prototype.removeItemAt=function(b){goog.ui.Select.superClass_.removeItemAt.call(this,b);this.selectionModel_&&this.selectionModel_.removeItemAt(b)};goog.ui.Select.prototype.setSelectedItem=function(d){if(this.selectionModel_){var c=this.getSelectedItem();this.selectionModel_.setSelectedItem(d);d!=c&&this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}};goog.ui.Select.prototype.setSelectedIndex=function(b){this.selectionModel_&&this.setSelectedItem(this.selectionModel_.getItemAt(b))};goog.ui.Select.prototype.setValue=function(e){if(goog.isDefAndNotNull(e)&&this.selectionModel_){for(var d=0,f;f=this.selectionModel_.getItemAt(d);d++){if(f&&"function"==typeof f.getValue&&f.getValue()==e){this.setSelectedItem(f);return}}}this.setSelectedItem(null)};goog.ui.Select.prototype.getSelectedItem=function(){return this.selectionModel_?this.selectionModel_.getSelectedItem():null};goog.ui.Select.prototype.getSelectedIndex=function(){return this.selectionModel_?this.selectionModel_.getSelectedIndex():-1};goog.ui.Select.prototype.getSelectionModel=function(){return this.selectionModel_};goog.ui.Select.prototype.createSelectionModel_=function(b){this.selectionModel_=new goog.ui.SelectionModel;b&&b.forEachChild(function(c){this.setCorrectAriaRole_(c);this.selectionModel_.addItem(c)},this);this.listenToSelectionModelEvents_()};goog.ui.Select.prototype.listenToSelectionModelEvents_=function(){this.selectionModel_&&this.getHandler().listen(this.selectionModel_,goog.events.EventType.SELECT,this.handleSelectionChange)};goog.ui.Select.prototype.updateCaption=function(){var b=this.getSelectedItem();this.setContent(b?b.getCaption():this.defaultCaption_)};goog.ui.Select.prototype.setCorrectAriaRole_=function(b){b.setPreferredAriaRole(b instanceof goog.ui.MenuItem?goog.dom.a11y.Role.OPTION:goog.dom.a11y.Role.SEPARATOR)};goog.ui.Select.prototype.setOpen=function(d,c){goog.ui.Select.superClass_.setOpen.call(this,d,c);this.isOpen()&&this.getMenu().setHighlightedIndex(this.getSelectedIndex())};goog.ui.registry.setDecoratorByClassName("goog-select",function(){return new goog.ui.Select(null)});goog.ui.ToolbarSelect=function(f,e,h,g){goog.ui.Select.call(this,f,e,h||goog.ui.ToolbarMenuButtonRenderer.getInstance(),g)};goog.inherits(goog.ui.ToolbarSelect,goog.ui.Select);goog.ui.registry.setDecoratorByClassName("goog-toolbar-select",function(){return new goog.ui.ToolbarSelect(null)});goog.ui.Option=function(e,d,f){goog.ui.MenuItem.call(this,e,d,f);this.setSelectable(!0)};goog.inherits(goog.ui.Option,goog.ui.MenuItem);goog.ui.Option.prototype.performActionInternal=function(){return this.dispatchEvent(goog.ui.Component.EventType.ACTION)};goog.ui.registry.setDecoratorByClassName("goog-option",function(){return new goog.ui.Option(null)});goog.ui.editor.ToolbarFactory={};goog.ui.editor.ToolbarFactory.getPrimaryFont=function(d){var c=d.indexOf(",");d=(-1!=c?d.substring(0,c):d).toLowerCase();return goog.string.stripQuotes(d,"\"'")};goog.ui.editor.ToolbarFactory.addFonts=function(d,c){goog.array.forEach(c,function(a){goog.ui.editor.ToolbarFactory.addFont(d,a.caption,a.value)})};goog.ui.editor.ToolbarFactory.addFont=function(f,e,h){var g=goog.ui.editor.ToolbarFactory.getPrimaryFont(h);e=new goog.ui.Option(e,h,f.getDomHelper());e.setId(g);f.addItem(e);e.getContentElement().style.fontFamily=h};goog.ui.editor.ToolbarFactory.addFontSizes=function(d,c){goog.array.forEach(c,function(a){goog.ui.editor.ToolbarFactory.addFontSize(d,a.caption,a.value)})};goog.ui.editor.ToolbarFactory.addFontSize=function(e,d,f){d=new goog.ui.Option(d,f,e.getDomHelper());e.addItem(d);e=d.getContentElement();e.style.fontSize=goog.ui.editor.ToolbarFactory.getPxFromLegacySize(f)+"px";e.firstChild.style.height="1.1em"};goog.ui.editor.ToolbarFactory.getPxFromLegacySize=function(b){return goog.ui.editor.ToolbarFactory.LEGACY_SIZE_TO_PX_MAP_[b]||10};goog.ui.editor.ToolbarFactory.getLegacySizeFromPx=function(b){return goog.array.lastIndexOf(goog.ui.editor.ToolbarFactory.LEGACY_SIZE_TO_PX_MAP_,b)};goog.ui.editor.ToolbarFactory.LEGACY_SIZE_TO_PX_MAP_=[10,10,13,16,18,24,32,48];goog.ui.editor.ToolbarFactory.addFormatOptions=function(d,c){goog.array.forEach(c,function(a){goog.ui.editor.ToolbarFactory.addFormatOption(d,a.caption,a.command)})};goog.ui.editor.ToolbarFactory.addFormatOption=function(f,e,h){var g=f.getDomHelper();e=new goog.ui.Option(g.createDom(goog.dom.TagName.DIV,null,e),h,g);e.setId(h);f.addItem(e)};goog.ui.editor.ToolbarFactory.makeToolbar=function(h,g,l){var k=goog.dom.getDomHelper(g),k=new goog.ui.Toolbar(goog.ui.ToolbarRenderer.getInstance(),goog.ui.Container.Orientation.HORIZONTAL,k);l=l||goog.style.isRightToLeft(g);k.setRightToLeft(l);k.setFocusable(!1);for(var j=0,i;i=h[j];j++){i.setSupportedState(goog.ui.Component.State.FOCUSED,!1),i.setRightToLeft(l),k.addChild(i,!0)}k.render(g);return k};goog.ui.editor.ToolbarFactory.makeButton=function(h,g,l,k,j,i){l=new goog.ui.ToolbarButton(goog.ui.editor.ToolbarFactory.createContent_(l,k,i),j,i);l.setId(h);l.setTooltip(g);return l};goog.ui.editor.ToolbarFactory.makeToggleButton=function(h,g,l,k,j,i){h=goog.ui.editor.ToolbarFactory.makeButton(h,g,l,k,j,i);h.setSupportedState(goog.ui.Component.State.CHECKED,!0);return h};goog.ui.editor.ToolbarFactory.makeMenuButton=function(h,g,l,k,j,i){l=new goog.ui.ToolbarMenuButton(goog.ui.editor.ToolbarFactory.createContent_(l,k,i),null,j,i);l.setId(h);l.setTooltip(g);return l};goog.ui.editor.ToolbarFactory.makeSelectButton=function(h,g,l,k,j,i){j=new goog.ui.ToolbarSelect(null,null,j,i);k&&goog.array.forEach(k.split(/\s+/),j.addClassName,j);j.addClassName("goog-toolbar-select");j.setDefaultCaption(l);j.setId(h);j.setTooltip(g);return j};goog.ui.editor.ToolbarFactory.makeColorMenuButton=function(h,g,l,k,j,i){l=new goog.ui.ToolbarColorMenuButton(goog.ui.editor.ToolbarFactory.createContent_(l,k,i),null,j,i);l.setId(h);l.setTooltip(g);return l};goog.ui.editor.ToolbarFactory.createContent_=function(e,d,f){if((!e||""==e)&&goog.userAgent.GECKO&&!goog.userAgent.isVersion("1.9a")){e=goog.string.Unicode.NBSP}return(f||goog.dom.getDomHelper()).createDom(goog.dom.TagName.DIV,d?{"class":d}:null,e)};goog.ui.editor.DefaultToolbar={};goog.ui.editor.DefaultToolbar.MSG_FONT_NORMAL=goog.getMsg("Normal");goog.ui.editor.DefaultToolbar.MSG_FONT_NORMAL_SERIF=goog.getMsg("Normal / serif");goog.ui.editor.DefaultToolbar.FONTS_=[{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_NORMAL,value:"arial,sans-serif"},{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_NORMAL_SERIF,value:"times new roman,serif"},{caption:"Courier New",value:"courier new,monospace"},{caption:"Georgia",value:"georgia,serif"},{caption:"Trebuchet",value:"trebuchet ms,sans-serif"},{caption:"Verdana",value:"verdana,sans-serif"}];goog.ui.editor.DefaultToolbar.I18N_FONTS_={ja:[{caption:"\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af",value:"ms pgothic,sans-serif"},{caption:"\uff2d\uff33 \uff30\u660e\u671d",value:"ms pmincho,serif"},{caption:"\uff2d\uff33 \u30b4\u30b7\u30c3\u30af",value:"ms gothic,monospace"}],ko:[{caption:"\uad74\ub9bc",value:"gulim,sans-serif"},{caption:"\ubc14\ud0d5",value:"batang,serif"},{caption:"\uad74\ub9bc\uccb4",value:"gulimche,monospace"}],"zh-tw":[{caption:"\u65b0\u7d30\u660e\u9ad4",value:"pmingliu,serif"},{caption:"\u7d30\u660e\u9ad4",value:"mingliu,serif"}],"zh-cn":[{caption:"\u5b8b\u4f53",value:"simsun,serif"},{caption:"\u9ed1\u4f53",value:"simhei,sans-serif"},{caption:"MS Song",value:"ms song,monospace"}]};goog.ui.editor.DefaultToolbar.locale_="en-us";goog.ui.editor.DefaultToolbar.setLocale=function(b){goog.ui.editor.DefaultToolbar.locale_=b};goog.ui.editor.DefaultToolbar.addDefaultFonts=function(e){var d=goog.ui.editor.DefaultToolbar.locale_.replace(/_/,"-").toLowerCase(),f=[];d in goog.ui.editor.DefaultToolbar.I18N_FONTS_&&(f=goog.ui.editor.DefaultToolbar.I18N_FONTS_[d]);f.length&&goog.ui.editor.ToolbarFactory.addFonts(e,f);goog.ui.editor.ToolbarFactory.addFonts(e,goog.ui.editor.DefaultToolbar.FONTS_)};goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_SMALL=goog.getMsg("Small");goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_NORMAL=goog.getMsg("Normal");goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_LARGE=goog.getMsg("Large");goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_HUGE=goog.getMsg("Huge");goog.ui.editor.DefaultToolbar.FONT_SIZES_=[{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_SMALL,value:1},{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_NORMAL,value:2},{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_LARGE,value:4},{caption:goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_HUGE,value:6}];goog.ui.editor.DefaultToolbar.addDefaultFontSizes=function(b){goog.ui.editor.ToolbarFactory.addFontSizes(b,goog.ui.editor.DefaultToolbar.FONT_SIZES_)};goog.ui.editor.DefaultToolbar.MSG_FORMAT_HEADING=goog.getMsg("Heading");goog.ui.editor.DefaultToolbar.MSG_FORMAT_SUBHEADING=goog.getMsg("Subheading");goog.ui.editor.DefaultToolbar.MSG_FORMAT_MINOR_HEADING=goog.getMsg("Minor heading");goog.ui.editor.DefaultToolbar.MSG_FORMAT_NORMAL=goog.getMsg("Normal");goog.ui.editor.DefaultToolbar.FORMAT_OPTIONS_=[{caption:goog.ui.editor.DefaultToolbar.MSG_FORMAT_HEADING,command:goog.dom.TagName.H2},{caption:goog.ui.editor.DefaultToolbar.MSG_FORMAT_SUBHEADING,command:goog.dom.TagName.H3},{caption:goog.ui.editor.DefaultToolbar.MSG_FORMAT_MINOR_HEADING,command:goog.dom.TagName.H4},{caption:goog.ui.editor.DefaultToolbar.MSG_FORMAT_NORMAL,command:goog.dom.TagName.P}];goog.ui.editor.DefaultToolbar.addDefaultFormatOptions=function(b){goog.ui.editor.ToolbarFactory.addFormatOptions(b,goog.ui.editor.DefaultToolbar.FORMAT_OPTIONS_)};goog.ui.editor.DefaultToolbar.makeDefaultToolbar=function(e,d){var f=d||goog.style.isRightToLeft(e)?goog.ui.editor.DefaultToolbar.DEFAULT_BUTTONS_RTL:goog.ui.editor.DefaultToolbar.DEFAULT_BUTTONS;return goog.ui.editor.DefaultToolbar.makeToolbar(f,e,d)};goog.ui.editor.DefaultToolbar.makeToolbar=function(i,h,n){for(var m=goog.dom.getDomHelper(h),l=[],k=0,j;j=i[k];k++){goog.isString(j)&&(j=goog.ui.editor.DefaultToolbar.makeBuiltInToolbarButton(j,m)),j&&l.push(j)}return goog.ui.editor.ToolbarFactory.makeToolbar(l,h,n)};goog.ui.editor.DefaultToolbar.makeBuiltInToolbarButton=function(r,q){var p,o=goog.ui.editor.DefaultToolbar.buttons_[r];if(o){p=o.factory||goog.ui.editor.ToolbarFactory.makeToggleButton;var n=o.command,m=o.tooltip,l=o.caption,k=o.classes,i=q||goog.dom.getDomHelper();p=p(n,m,l,k,null,i);o.queryable&&(p.queryable=!0)}return p};goog.ui.editor.DefaultToolbar.DEFAULT_BUTTONS=[goog.editor.Command.IMAGE,goog.editor.Command.LINK,goog.editor.Command.BOLD,goog.editor.Command.ITALIC,goog.editor.Command.UNORDERED_LIST,goog.editor.Command.FONT_COLOR,goog.editor.Command.FONT_FACE,goog.editor.Command.FONT_SIZE,goog.editor.Command.JUSTIFY_LEFT,goog.editor.Command.JUSTIFY_CENTER,goog.editor.Command.JUSTIFY_RIGHT,goog.editor.Command.EDIT_HTML];goog.ui.editor.DefaultToolbar.DEFAULT_BUTTONS_RTL=[goog.editor.Command.IMAGE,goog.editor.Command.LINK,goog.editor.Command.BOLD,goog.editor.Command.ITALIC,goog.editor.Command.UNORDERED_LIST,goog.editor.Command.FONT_COLOR,goog.editor.Command.FONT_FACE,goog.editor.Command.FONT_SIZE,goog.editor.Command.JUSTIFY_RIGHT,goog.editor.Command.JUSTIFY_CENTER,goog.editor.Command.JUSTIFY_LEFT,goog.editor.Command.DIR_RTL,goog.editor.Command.DIR_LTR,goog.editor.Command.EDIT_HTML];goog.ui.editor.DefaultToolbar.rtlButtonFactory_=function(i,h,n,m,l,k){var j=goog.ui.editor.ToolbarFactory.makeToggleButton(i,h,n,m,l,k);j.updateFromValue=function(b){b=!!b;goog.dom.classes.enable(j.getParent().getElement(),"tr-rtl-mode",b);j.setChecked(b)};return j};goog.ui.editor.DefaultToolbar.undoRedoButtonFactory_=function(i,h,n,m,l,k){var j=goog.ui.editor.ToolbarFactory.makeButton(i,h,n,m,l,k);j.updateFromValue=function(b){j.setEnabled(b)};return j};goog.ui.editor.DefaultToolbar.fontFaceFactory_=function(i,h,n,m,l,k){var j=goog.ui.editor.ToolbarFactory.makeSelectButton(i,h,n,m,l,k);goog.ui.editor.DefaultToolbar.addDefaultFonts(j);j.setDefaultCaption(goog.ui.editor.DefaultToolbar.MSG_FONT_NORMAL);goog.dom.classes.add(j.getMenu().getContentElement(),"goog-menu-noaccel");j.updateFromValue=function(d){var c=null;d&&0<d.length&&(c=j.getMenu().getChild(goog.ui.editor.ToolbarFactory.getPrimaryFont(d)));d=j.getSelectedItem();c!=d&&j.setSelectedItem(c)};return j};goog.ui.editor.DefaultToolbar.fontSizeFactory_=function(i,h,n,m,l,k){var j=goog.ui.editor.ToolbarFactory.makeSelectButton(i,h,n,m,l,k);goog.ui.editor.DefaultToolbar.addDefaultFontSizes(j);j.setDefaultCaption(goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_NORMAL);goog.dom.classes.add(j.getMenu().getContentElement(),"goog-menu-noaccel");j.updateFromValue=function(b){goog.isString(b)&&"px"==goog.style.getLengthUnits(b)&&(b=goog.ui.editor.ToolbarFactory.getLegacySizeFromPx(parseInt(b,10)));b=0<b?b:null;b!=j.getValue()&&j.setValue(b)};return j};goog.ui.editor.DefaultToolbar.colorUpdateFromValue_=function(h,g){var l=g;try{if(goog.userAgent.IE){var k="000000"+l.toString(16),j=k.substr(k.length-6,6),l="#"+j.substring(4,6)+j.substring(2,4)+j.substring(0,2)}l!=h.getValue()&&h.setValue(l)}catch(i){}};goog.ui.editor.DefaultToolbar.fontColorFactory_=function(h,g,l,k,j,i){h=goog.ui.editor.ToolbarFactory.makeColorMenuButton(h,g,l,k,j,i);h.setSelectedColor("#000");h.updateFromValue=goog.partial(goog.ui.editor.DefaultToolbar.colorUpdateFromValue_,h);return h};goog.ui.editor.DefaultToolbar.backgroundColorFactory_=function(h,g,l,k,j,i){h=goog.ui.editor.ToolbarFactory.makeColorMenuButton(h,g,l,k,j,i);h.setSelectedColor("#FFF");h.updateFromValue=goog.partial(goog.ui.editor.DefaultToolbar.colorUpdateFromValue_,h);return h};goog.ui.editor.DefaultToolbar.formatBlockFactory_=function(i,h,n,m,l,k){var j=goog.ui.editor.ToolbarFactory.makeSelectButton(i,h,n,m,l,k);goog.ui.editor.DefaultToolbar.addDefaultFormatOptions(j);j.setDefaultCaption(goog.ui.editor.DefaultToolbar.MSG_FORMAT_NORMAL);goog.dom.classes.add(j.getMenu().getContentElement(),"goog-menu-noaccel");j.updateFromValue=function(b){b=b&&0<b.length?b:null;b!=j.getValue()&&j.setValue(b)};return j};goog.ui.editor.DefaultToolbar.MSG_FORMAT_BLOCK_TITLE=goog.getMsg("Format");goog.ui.editor.DefaultToolbar.MSG_FORMAT_BLOCK_CAPTION=goog.getMsg("Format");goog.ui.editor.DefaultToolbar.MSG_UNDO_TITLE=goog.getMsg("Undo");goog.ui.editor.DefaultToolbar.MSG_REDO_TITLE=goog.getMsg("Redo");goog.ui.editor.DefaultToolbar.MSG_FONT_FACE_TITLE=goog.getMsg("Font");goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_TITLE=goog.getMsg("Font size");goog.ui.editor.DefaultToolbar.MSG_FONT_COLOR_TITLE=goog.getMsg("Text color");goog.ui.editor.DefaultToolbar.MSG_BOLD_TITLE=goog.getMsg("Bold");goog.ui.editor.DefaultToolbar.MSG_ITALIC_TITLE=goog.getMsg("Italic");goog.ui.editor.DefaultToolbar.MSG_UNDERLINE_TITLE=goog.getMsg("Underline");goog.ui.editor.DefaultToolbar.MSG_BACKGROUND_COLOR_TITLE=goog.getMsg("Text background color");goog.ui.editor.DefaultToolbar.MSG_LINK_TITLE=goog.getMsg("Add or remove link");goog.ui.editor.DefaultToolbar.MSG_ORDERED_LIST_TITLE=goog.getMsg("Numbered list");goog.ui.editor.DefaultToolbar.MSG_UNORDERED_LIST_TITLE=goog.getMsg("Bullet list");goog.ui.editor.DefaultToolbar.MSG_OUTDENT_TITLE=goog.getMsg("Decrease indent");goog.ui.editor.DefaultToolbar.MSG_INDENT_TITLE=goog.getMsg("Increase indent");goog.ui.editor.DefaultToolbar.MSG_ALIGN_LEFT_TITLE=goog.getMsg("Align left");goog.ui.editor.DefaultToolbar.MSG_ALIGN_CENTER_TITLE=goog.getMsg("Align center");goog.ui.editor.DefaultToolbar.MSG_ALIGN_RIGHT_TITLE=goog.getMsg("Align right");goog.ui.editor.DefaultToolbar.MSG_JUSTIFY_TITLE=goog.getMsg("Justify");goog.ui.editor.DefaultToolbar.MSG_REMOVE_FORMAT_TITLE=goog.getMsg("Remove formatting");goog.ui.editor.DefaultToolbar.MSG_IMAGE_TITLE=goog.getMsg("Insert image");goog.ui.editor.DefaultToolbar.MSG_STRIKE_THROUGH_TITLE=goog.getMsg("Strikethrough");goog.ui.editor.DefaultToolbar.MSG_DIR_LTR_TITLE=goog.getMsg("Left-to-right");goog.ui.editor.DefaultToolbar.MSG_DIR_RTL_TITLE=goog.getMsg("Right-to-left");goog.ui.editor.DefaultToolbar.MSG_BLOCKQUOTE_TITLE=goog.getMsg("Quote");goog.ui.editor.DefaultToolbar.MSG_EDIT_HTML_TITLE=goog.getMsg("Edit HTML source");goog.ui.editor.DefaultToolbar.MSG_SUBSCRIPT=goog.getMsg("Subscript");goog.ui.editor.DefaultToolbar.MSG_SUPERSCRIPT=goog.getMsg("Superscript");goog.ui.editor.DefaultToolbar.MSG_EDIT_HTML_CAPTION=goog.getMsg("Edit HTML");goog.ui.editor.DefaultToolbar.buttons_={};goog.ui.editor.DefaultToolbar.BUTTONS_=[{command:goog.editor.Command.UNDO,tooltip:goog.ui.editor.DefaultToolbar.MSG_UNDO_TITLE,classes:"tr-icon tr-undo",factory:goog.ui.editor.DefaultToolbar.undoRedoButtonFactory_,queryable:!0},{command:goog.editor.Command.REDO,tooltip:goog.ui.editor.DefaultToolbar.MSG_REDO_TITLE,classes:"tr-icon tr-redo",factory:goog.ui.editor.DefaultToolbar.undoRedoButtonFactory_,queryable:!0},{command:goog.editor.Command.FONT_FACE,tooltip:goog.ui.editor.DefaultToolbar.MSG_FONT_FACE_TITLE,classes:"tr-fontName",factory:goog.ui.editor.DefaultToolbar.fontFaceFactory_,queryable:!0},{command:goog.editor.Command.FONT_SIZE,tooltip:goog.ui.editor.DefaultToolbar.MSG_FONT_SIZE_TITLE,classes:"tr-fontSize",factory:goog.ui.editor.DefaultToolbar.fontSizeFactory_,queryable:!0},{command:goog.editor.Command.BOLD,tooltip:goog.ui.editor.DefaultToolbar.MSG_BOLD_TITLE,classes:"tr-icon tr-bold",queryable:!0},{command:goog.editor.Command.ITALIC,tooltip:goog.ui.editor.DefaultToolbar.MSG_ITALIC_TITLE,classes:"tr-icon tr-italic",queryable:!0},{command:goog.editor.Command.UNDERLINE,tooltip:goog.ui.editor.DefaultToolbar.MSG_UNDERLINE_TITLE,classes:"tr-icon tr-underline",queryable:!0},{command:goog.editor.Command.FONT_COLOR,tooltip:goog.ui.editor.DefaultToolbar.MSG_FONT_COLOR_TITLE,classes:"tr-icon tr-foreColor",factory:goog.ui.editor.DefaultToolbar.fontColorFactory_,queryable:!0},{command:goog.editor.Command.BACKGROUND_COLOR,tooltip:goog.ui.editor.DefaultToolbar.MSG_BACKGROUND_COLOR_TITLE,classes:"tr-icon tr-backColor",factory:goog.ui.editor.DefaultToolbar.backgroundColorFactory_,queryable:!0},{command:goog.editor.Command.LINK,tooltip:goog.ui.editor.DefaultToolbar.MSG_LINK_TITLE,caption:goog.ui.editor.messages.MSG_LINK_CAPTION,classes:"tr-link",queryable:!0},{command:goog.editor.Command.ORDERED_LIST,tooltip:goog.ui.editor.DefaultToolbar.MSG_ORDERED_LIST_TITLE,classes:"tr-icon tr-insertOrderedList",queryable:!0},{command:goog.editor.Command.UNORDERED_LIST,tooltip:goog.ui.editor.DefaultToolbar.MSG_UNORDERED_LIST_TITLE,classes:"tr-icon tr-insertUnorderedList",queryable:!0},{command:goog.editor.Command.OUTDENT,tooltip:goog.ui.editor.DefaultToolbar.MSG_OUTDENT_TITLE,classes:"tr-icon tr-outdent",factory:goog.ui.editor.ToolbarFactory.makeButton},{command:goog.editor.Command.INDENT,tooltip:goog.ui.editor.DefaultToolbar.MSG_INDENT_TITLE,classes:"tr-icon tr-indent",factory:goog.ui.editor.ToolbarFactory.makeButton},{command:goog.editor.Command.JUSTIFY_LEFT,tooltip:goog.ui.editor.DefaultToolbar.MSG_ALIGN_LEFT_TITLE,classes:"tr-icon tr-justifyLeft",queryable:!0},{command:goog.editor.Command.JUSTIFY_CENTER,tooltip:goog.ui.editor.DefaultToolbar.MSG_ALIGN_CENTER_TITLE,classes:"tr-icon tr-justifyCenter",queryable:!0},{command:goog.editor.Command.JUSTIFY_RIGHT,tooltip:goog.ui.editor.DefaultToolbar.MSG_ALIGN_RIGHT_TITLE,classes:"tr-icon tr-justifyRight",queryable:!0},{command:goog.editor.Command.JUSTIFY_FULL,tooltip:goog.ui.editor.DefaultToolbar.MSG_JUSTIFY_TITLE,classes:"tr-icon tr-justifyFull",queryable:!0},{command:goog.editor.Command.REMOVE_FORMAT,tooltip:goog.ui.editor.DefaultToolbar.MSG_REMOVE_FORMAT_TITLE,classes:"tr-icon tr-removeFormat",factory:goog.ui.editor.ToolbarFactory.makeButton},{command:goog.editor.Command.IMAGE,tooltip:goog.ui.editor.DefaultToolbar.MSG_IMAGE_TITLE,classes:"tr-icon tr-image",factory:goog.ui.editor.ToolbarFactory.makeButton},{command:goog.editor.Command.STRIKE_THROUGH,tooltip:goog.ui.editor.DefaultToolbar.MSG_STRIKE_THROUGH_TITLE,classes:"tr-icon tr-strikeThrough",queryable:!0},{command:goog.editor.Command.SUBSCRIPT,tooltip:goog.ui.editor.DefaultToolbar.MSG_SUBSCRIPT,classes:"tr-icon tr-subscript",queryable:!0},{command:goog.editor.Command.SUPERSCRIPT,tooltip:goog.ui.editor.DefaultToolbar.MSG_SUPERSCRIPT,classes:"tr-icon tr-superscript",queryable:!0},{command:goog.editor.Command.DIR_LTR,tooltip:goog.ui.editor.DefaultToolbar.MSG_DIR_LTR_TITLE,classes:"tr-icon tr-ltr",queryable:!0},{command:goog.editor.Command.DIR_RTL,tooltip:goog.ui.editor.DefaultToolbar.MSG_DIR_RTL_TITLE,classes:"tr-icon tr-rtl",factory:goog.ui.editor.DefaultToolbar.rtlButtonFactory_,queryable:!0},{command:goog.editor.Command.BLOCKQUOTE,tooltip:goog.ui.editor.DefaultToolbar.MSG_BLOCKQUOTE_TITLE,classes:"tr-icon tr-BLOCKQUOTE",queryable:!0},{command:goog.editor.Command.FORMAT_BLOCK,tooltip:goog.ui.editor.DefaultToolbar.MSG_FORMAT_BLOCK_TITLE,caption:goog.ui.editor.DefaultToolbar.MSG_FORMAT_BLOCK_CAPTION,classes:"tr-formatBlock",factory:goog.ui.editor.DefaultToolbar.formatBlockFactory_,queryable:!0},{command:goog.editor.Command.EDIT_HTML,tooltip:goog.ui.editor.DefaultToolbar.MSG_EDIT_HTML_TITLE,caption:goog.ui.editor.DefaultToolbar.MSG_EDIT_HTML_CAPTION,classes:"tr-editHtml",factory:goog.ui.editor.ToolbarFactory.makeButton}];(function(){for(var d=0,c;c=goog.ui.editor.DefaultToolbar.BUTTONS_[d];d++){goog.ui.editor.DefaultToolbar.buttons_[c.command]=c}delete goog.ui.editor.DefaultToolbar.BUTTONS_})();goog.ui.editor.ToolbarController=function(d,c){goog.events.EventTarget.call(this);this.handler_=new goog.events.EventHandler(this);this.field_=d;this.toolbar_=c;this.queryCommands_=[];this.toolbar_.forEachChild(function(b){b.queryable&&this.queryCommands_.push(this.getComponentId(b.getId()))},this);this.toolbar_.setFocusable(!1);this.handler_.listen(this.field_,goog.editor.Field.EventType.COMMAND_VALUE_CHANGE,this.updateToolbar).listen(this.toolbar_,goog.ui.Component.EventType.ACTION,this.handleAction)};goog.inherits(goog.ui.editor.ToolbarController,goog.events.EventTarget);goog.ui.editor.ToolbarController.prototype.getComponentId=function(b){return b};goog.ui.editor.ToolbarController.prototype.getCommand=function(b){return b};goog.ui.editor.ToolbarController.prototype.getHandler=function(){return this.handler_};goog.ui.editor.ToolbarController.prototype.getField=function(){return this.field_};goog.ui.editor.ToolbarController.prototype.getToolbar=function(){return this.toolbar_};goog.ui.editor.ToolbarController.prototype.isVisible=function(){return this.toolbar_.isVisible()};goog.ui.editor.ToolbarController.prototype.setVisible=function(b){this.toolbar_.setVisible(b)};goog.ui.editor.ToolbarController.prototype.isEnabled=function(){return this.toolbar_.isEnabled()};goog.ui.editor.ToolbarController.prototype.setEnabled=function(b){this.toolbar_.setEnabled(b)};goog.ui.editor.ToolbarController.prototype.blur=function(){this.toolbar_.handleBlur(null)};goog.ui.editor.ToolbarController.prototype.disposeInternal=function(){goog.ui.editor.ToolbarController.superClass_.disposeInternal.call(this);this.handler_&&(this.handler_.dispose(),delete this.handler_);this.toolbar_&&(this.toolbar_.dispose(),delete this.toolbar_);delete this.field_;delete this.queryCommands_};goog.ui.editor.ToolbarController.prototype.updateToolbar=function(e){if(this.toolbar_.isEnabled()&&this.dispatchEvent(goog.ui.Component.EventType.CHANGE)){var d;try{d=this.field_.queryCommandValue(e.commands||this.queryCommands_)}catch(f){d={}}this.updateToolbarFromState(d)}};goog.ui.editor.ToolbarController.prototype.updateToolbarFromState=function(f){for(var e in f){var h=this.toolbar_.getChild(this.getComponentId(e));if(h){var g=f[e];h.updateFromValue?h.updateFromValue(g):h.setChecked(!!g)}}};goog.ui.editor.ToolbarController.prototype.handleAction=function(d){var c=this.getCommand(d.target.getId());this.field_.execCommand(c,d.target.getValue())};goog.Uri=function(e,d){var f;e instanceof goog.Uri?(this.ignoreCase_=goog.isDef(d)?d:e.getIgnoreCase(),this.setScheme(e.getScheme()),this.setUserInfo(e.getUserInfo()),this.setDomain(e.getDomain()),this.setPort(e.getPort()),this.setPath(e.getPath()),this.setQueryData(e.getQueryData().clone()),this.setFragment(e.getFragment())):e&&(f=goog.uri.utils.split(String(e)))?(this.ignoreCase_=!!d,this.setScheme(f[goog.uri.utils.ComponentIndex.SCHEME]||"",!0),this.setUserInfo(f[goog.uri.utils.ComponentIndex.USER_INFO]||"",!0),this.setDomain(f[goog.uri.utils.ComponentIndex.DOMAIN]||"",!0),this.setPort(f[goog.uri.utils.ComponentIndex.PORT]),this.setPath(f[goog.uri.utils.ComponentIndex.PATH]||"",!0),this.setQueryData(f[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",!0),this.setFragment(f[goog.uri.utils.ComponentIndex.FRAGMENT]||"",!0)):(this.ignoreCase_=!!d,this.queryData_=new goog.Uri.QueryData(null,null,this.ignoreCase_))};goog.Uri.preserveParameterTypesCompatibilityFlag=!1;goog.Uri.RANDOM_PARAM=goog.uri.utils.StandardQueryParam.RANDOM;goog.Uri.prototype.scheme_="";goog.Uri.prototype.userInfo_="";goog.Uri.prototype.domain_="";goog.Uri.prototype.port_=null;goog.Uri.prototype.path_="";goog.Uri.prototype.fragment_="";goog.Uri.prototype.isReadOnly_=!1;goog.Uri.prototype.ignoreCase_=!1;goog.Uri.prototype.toString=function(){var e=[],d=this.getScheme();d&&e.push(goog.Uri.encodeSpecialChars_(d,goog.Uri.reDisallowedInSchemeOrUserInfo_),":");if(d=this.getDomain()){e.push("//");var f=this.getUserInfo();f&&e.push(goog.Uri.encodeSpecialChars_(f,goog.Uri.reDisallowedInSchemeOrUserInfo_),"@");e.push(goog.string.urlEncode(d));d=this.getPort();null!=d&&e.push(":",String(d))}if(d=this.getPath()){this.hasDomain()&&"/"!=d.charAt(0)&&e.push("/"),e.push(goog.Uri.encodeSpecialChars_(d,"/"==d.charAt(0)?goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_))}(d=this.getEncodedQuery())&&e.push("?",d);(d=this.getFragment())&&e.push("#",goog.Uri.encodeSpecialChars_(d,goog.Uri.reDisallowedInFragment_));return e.join("")};goog.Uri.prototype.resolve=function(g){var f=this.clone(),j=g.hasScheme();j?f.setScheme(g.getScheme()):j=g.hasUserInfo();j?f.setUserInfo(g.getUserInfo()):j=g.hasDomain();j?f.setDomain(g.getDomain()):j=g.hasPort();var i=g.getPath();if(j){f.setPort(g.getPort())}else{if(j=g.hasPath()){if("/"!=i.charAt(0)){if(this.hasDomain()&&!this.hasPath()){i="/"+i}else{var h=f.getPath().lastIndexOf("/");-1!=h&&(i=f.getPath().substr(0,h+1)+i)}}i=goog.Uri.removeDotSegments(i)}}j?f.setPath(i):j=g.hasQuery();j?f.setQueryData(g.getDecodedQuery()):j=g.hasFragment();j&&f.setFragment(g.getFragment());return f};goog.Uri.prototype.clone=function(){return new goog.Uri(this)};goog.Uri.prototype.getScheme=function(){return this.scheme_};goog.Uri.prototype.setScheme=function(d,c){this.enforceReadOnly();if(this.scheme_=c?goog.Uri.decodeOrEmpty_(d):d){this.scheme_=this.scheme_.replace(/:$/,"")}return this};goog.Uri.prototype.hasScheme=function(){return !!this.scheme_};goog.Uri.prototype.getUserInfo=function(){return this.userInfo_};goog.Uri.prototype.setUserInfo=function(d,c){this.enforceReadOnly();this.userInfo_=c?goog.Uri.decodeOrEmpty_(d):d;return this};goog.Uri.prototype.hasUserInfo=function(){return !!this.userInfo_};goog.Uri.prototype.getDomain=function(){return this.domain_};goog.Uri.prototype.setDomain=function(d,c){this.enforceReadOnly();this.domain_=c?goog.Uri.decodeOrEmpty_(d):d;return this};goog.Uri.prototype.hasDomain=function(){return !!this.domain_};goog.Uri.prototype.getPort=function(){return this.port_};goog.Uri.prototype.setPort=function(b){this.enforceReadOnly();if(b){b=Number(b);if(isNaN(b)||0>b){throw Error("Bad port number "+b)}this.port_=b}else{this.port_=null}return this};goog.Uri.prototype.hasPort=function(){return null!=this.port_};goog.Uri.prototype.getPath=function(){return this.path_};goog.Uri.prototype.setPath=function(d,c){this.enforceReadOnly();this.path_=c?goog.Uri.decodeOrEmpty_(d):d;return this};goog.Uri.prototype.hasPath=function(){return !!this.path_};goog.Uri.prototype.hasQuery=function(){return""!==this.queryData_.toString()};goog.Uri.prototype.setQueryData=function(d,c){this.enforceReadOnly();d instanceof goog.Uri.QueryData?(this.queryData_=d,this.queryData_.setIgnoreCase(this.ignoreCase_)):(c||(d=goog.Uri.encodeSpecialChars_(d,goog.Uri.reDisallowedInQuery_)),this.queryData_=new goog.Uri.QueryData(d,null,this.ignoreCase_));return this};goog.Uri.prototype.setQuery=function(d,c){return this.setQueryData(d,c)};goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()};goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()};goog.Uri.prototype.getQueryData=function(){return this.queryData_};goog.Uri.prototype.getQuery=function(){return this.getEncodedQuery()};goog.Uri.prototype.setParameterValue=function(d,c){this.enforceReadOnly();this.queryData_.set(d,c);return this};goog.Uri.prototype.setParameterValues=function(d,c){this.enforceReadOnly();goog.isArray(c)||(c=[String(c)]);this.queryData_.setValues(d,c);return this};goog.Uri.prototype.getParameterValues=function(b){return this.queryData_.getValues(b)};goog.Uri.prototype.getParameterValue=function(b){return this.queryData_.get(b)};goog.Uri.prototype.getFragment=function(){return this.fragment_};goog.Uri.prototype.setFragment=function(d,c){this.enforceReadOnly();this.fragment_=c?goog.Uri.decodeOrEmpty_(d):d;return this};goog.Uri.prototype.hasFragment=function(){return !!this.fragment_};goog.Uri.prototype.hasSameDomainAs=function(b){return(!this.hasDomain()&&!b.hasDomain()||this.getDomain()==b.getDomain())&&(!this.hasPort()&&!b.hasPort()||this.getPort()==b.getPort())};goog.Uri.prototype.makeUnique=function(){this.enforceReadOnly();this.setParameterValue(goog.Uri.RANDOM_PARAM,goog.string.getRandomString());return this};goog.Uri.prototype.removeParameter=function(b){this.enforceReadOnly();this.queryData_.remove(b);return this};goog.Uri.prototype.setReadOnly=function(b){this.isReadOnly_=b;return this};goog.Uri.prototype.isReadOnly=function(){return this.isReadOnly_};goog.Uri.prototype.enforceReadOnly=function(){if(this.isReadOnly_){throw Error("Tried to modify a read-only Uri")}};goog.Uri.prototype.setIgnoreCase=function(b){this.ignoreCase_=b;this.queryData_&&this.queryData_.setIgnoreCase(b);return this};goog.Uri.prototype.getIgnoreCase=function(){return this.ignoreCase_};goog.Uri.parse=function(d,c){return d instanceof goog.Uri?d.clone():new goog.Uri(d,c)};goog.Uri.create=function(j,i,p,o,n,m,l,k){k=new goog.Uri(null,k);j&&k.setScheme(j);i&&k.setUserInfo(i);p&&k.setDomain(p);o&&k.setPort(o);n&&k.setPath(n);m&&k.setQueryData(m);l&&k.setFragment(l);return k};goog.Uri.resolve=function(d,c){d instanceof goog.Uri||(d=goog.Uri.parse(d));c instanceof goog.Uri||(c=goog.Uri.parse(c));return d.resolve(c)};goog.Uri.removeDotSegments=function(g){if(".."==g||"."==g){return""}if(!goog.string.contains(g,"./")&&!goog.string.contains(g,"/.")){return g}var f=goog.string.startsWith(g,"/");g=g.split("/");for(var j=[],i=0;i<g.length;){var h=g[i++];"."==h?f&&i==g.length&&j.push(""):".."==h?((1<j.length||1==j.length&&""!=j[0])&&j.pop(),f&&i==g.length&&j.push("")):(j.push(h),f=!0)}return j.join("/")};goog.Uri.decodeOrEmpty_=function(b){return b?decodeURIComponent(b):""};goog.Uri.encodeSpecialChars_=function(d,c){return goog.isString(d)?encodeURI(d).replace(c,goog.Uri.encodeChar_):null};goog.Uri.encodeChar_=function(b){b=b.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)};goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g;goog.Uri.reDisallowedInRelativePath_=/[\#\?:]/g;goog.Uri.reDisallowedInAbsolutePath_=/[\#\?]/g;goog.Uri.reDisallowedInQuery_=/[\#\?@]/g;goog.Uri.reDisallowedInFragment_=/#/g;goog.Uri.haveSameDomain=function(f,e){var h=goog.uri.utils.split(f),g=goog.uri.utils.split(e);return h[goog.uri.utils.ComponentIndex.DOMAIN]==g[goog.uri.utils.ComponentIndex.DOMAIN]&&h[goog.uri.utils.ComponentIndex.PORT]==g[goog.uri.utils.ComponentIndex.PORT]};goog.Uri.QueryData=function(e,d,f){this.encodedQuery_=e||null;this.ignoreCase_=!!f};goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_=new goog.structs.Map,this.count_=0,this.encodedQuery_)){for(var g=this.encodedQuery_.split("&"),f=0;f<g.length;f++){var j=g[f].indexOf("="),i=null,h=null;0<=j?(i=g[f].substring(0,j),h=g[f].substring(j+1)):i=g[f];i=goog.string.urlDecode(i);i=this.getKeyName_(i);this.add(i,h?goog.string.urlDecode(h):"")}}};goog.Uri.QueryData.createFromMap=function(h,g,l){g=goog.structs.getKeys(h);if("undefined"==typeof g){throw Error("Keys are undefined")}l=new goog.Uri.QueryData(null,null,l);h=goog.structs.getValues(h);for(var k=0;k<g.length;k++){var j=g[k],i=h[k];goog.isArray(i)?l.setValues(j,i):l.add(j,i)}return l};goog.Uri.QueryData.createFromKeysValues=function(f,e,h,g){if(f.length!=e.length){throw Error("Mismatched lengths for keys/values")}h=new goog.Uri.QueryData(null,null,g);for(g=0;g<f.length;g++){h.add(f[g],e[g])}return h};goog.Uri.QueryData.prototype.keyMap_=null;goog.Uri.QueryData.prototype.count_=null;goog.Uri.QueryData.prototype.getCount=function(){this.ensureKeyMapInitialized_();return this.count_};goog.Uri.QueryData.prototype.add=function(e,d){this.ensureKeyMapInitialized_();this.invalidateCache_();e=this.getKeyName_(e);var f=this.keyMap_.get(e);f||this.keyMap_.set(e,f=[]);f.push(d);this.count_++;return this};goog.Uri.QueryData.prototype.remove=function(b){this.ensureKeyMapInitialized_();b=this.getKeyName_(b);return this.keyMap_.containsKey(b)?(this.invalidateCache_(),this.count_-=this.keyMap_.get(b).length,this.keyMap_.remove(b)):!1};goog.Uri.QueryData.prototype.clear=function(){this.invalidateCache_();this.keyMap_=null;this.count_=0};goog.Uri.QueryData.prototype.isEmpty=function(){this.ensureKeyMapInitialized_();return 0==this.count_};goog.Uri.QueryData.prototype.containsKey=function(b){this.ensureKeyMapInitialized_();b=this.getKeyName_(b);return this.keyMap_.containsKey(b)};goog.Uri.QueryData.prototype.containsValue=function(d){var c=this.getValues();return goog.array.contains(c,d)};goog.Uri.QueryData.prototype.getKeys=function(){this.ensureKeyMapInitialized_();for(var h=this.keyMap_.getValues(),g=this.keyMap_.getKeys(),l=[],k=0;k<g.length;k++){for(var j=h[k],i=0;i<j.length;i++){l.push(g[k])}}return l};goog.Uri.QueryData.prototype.getValues=function(e){this.ensureKeyMapInitialized_();var d=[];if(e){this.containsKey(e)&&(d=goog.array.concat(d,this.keyMap_.get(this.getKeyName_(e))))}else{e=this.keyMap_.getValues();for(var f=0;f<e.length;f++){d=goog.array.concat(d,e[f])}}return d};goog.Uri.QueryData.prototype.set=function(d,c){this.ensureKeyMapInitialized_();this.invalidateCache_();d=this.getKeyName_(d);this.containsKey(d)&&(this.count_-=this.keyMap_.get(d).length);this.keyMap_.set(d,[c]);this.count_++;return this};goog.Uri.QueryData.prototype.get=function(e,d){var f=e?this.getValues(e):[];return goog.Uri.preserveParameterTypesCompatibilityFlag?0<f.length?f[0]:d:0<f.length?String(f[0]):d};goog.Uri.QueryData.prototype.setValues=function(d,c){this.remove(d);0<c.length&&(this.invalidateCache_(),this.keyMap_.set(this.getKeyName_(d),goog.array.clone(c)),this.count_+=c.length)};goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_){return this.encodedQuery_}if(!this.keyMap_){return""}for(var i=[],h=this.keyMap_.getKeys(),n=0;n<h.length;n++){for(var m=h[n],l=goog.string.urlEncode(m),m=this.getValues(m),k=0;k<m.length;k++){var j=l;""!==m[k]&&(j+="="+goog.string.urlEncode(m[k]));i.push(j)}}return this.encodedQuery_=i.join("&")};goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())};goog.Uri.QueryData.prototype.invalidateCache_=function(){this.encodedQuery_=null};goog.Uri.QueryData.prototype.filterKeys=function(b){this.ensureKeyMapInitialized_();goog.structs.forEach(this.keyMap_,function(a,d){goog.array.contains(b,d)||this.remove(d)},this);return this};goog.Uri.QueryData.prototype.clone=function(){var b=new goog.Uri.QueryData;b.encodedQuery_=this.encodedQuery_;this.keyMap_&&(b.keyMap_=this.keyMap_.clone(),b.count_=this.count_);return b};goog.Uri.QueryData.prototype.getKeyName_=function(b){b=String(b);this.ignoreCase_&&(b=b.toLowerCase());return b};goog.Uri.QueryData.prototype.setIgnoreCase=function(b){b&&!this.ignoreCase_&&(this.ensureKeyMapInitialized_(),this.invalidateCache_(),goog.structs.forEach(this.keyMap_,function(e,g){var f=g.toLowerCase();g!=f&&(this.remove(g),this.setValues(f,e))},this));this.ignoreCase_=b};goog.Uri.QueryData.prototype.extend=function(d){for(var c=0;c<arguments.length;c++){goog.structs.forEach(arguments[c],function(f,e){this.add(e,f)},this)}};goog.net={};goog.net.ErrorCode={NO_ERROR:0,ACCESS_DENIED:1,FILE_NOT_FOUND:2,FF_SILENT_ERROR:3,CUSTOM_ERROR:4,EXCEPTION:5,HTTP_ERROR:6,ABORT:7,TIMEOUT:8,OFFLINE:9};goog.net.ErrorCode.getDebugMessage=function(b){switch(b){case goog.net.ErrorCode.NO_ERROR:return"No Error";case goog.net.ErrorCode.ACCESS_DENIED:return"Access denied to content document";case goog.net.ErrorCode.FILE_NOT_FOUND:return"File not found";case goog.net.ErrorCode.FF_SILENT_ERROR:return"Firefox silently errored";case goog.net.ErrorCode.CUSTOM_ERROR:return"Application custom error";case goog.net.ErrorCode.EXCEPTION:return"An exception occurred";case goog.net.ErrorCode.HTTP_ERROR:return"Http response at 400 or 500 level";case goog.net.ErrorCode.ABORT:return"Request was aborted";case goog.net.ErrorCode.TIMEOUT:return"Request timed out";case goog.net.ErrorCode.OFFLINE:return"The resource is not available offline";default:return"Unrecognized error code"}};goog.json={};goog.json.isValid_=function(b){return/^\s*$/.test(b)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(b.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))};goog.json.parse=function(a){a=String(a);if(goog.json.isValid_(a)){try{return eval("("+a+")")}catch(b){}}throw Error("Invalid JSON string: "+a)};goog.json.unsafeParse=function(a){return eval("("+a+")")};goog.json.serialize=function(d,c){return(new goog.json.Serializer(c)).serialize(d)};goog.json.Serializer=function(b){this.replacer_=b};goog.json.Serializer.prototype.serialize=function(d){var c=[];this.serialize_(d,c);return c.join("")};goog.json.Serializer.prototype.serialize_=function(d,c){switch(typeof d){case"string":this.serializeString_(d,c);break;case"number":this.serializeNumber_(d,c);break;case"boolean":c.push(d);break;case"undefined":c.push("null");break;case"object":if(null==d){c.push("null");break}if(goog.isArray(d)){this.serializeArray(d,c);break}this.serializeObject_(d,c);break;case"function":break;default:throw Error("Unknown type: "+typeof d)}};goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"};goog.json.Serializer.charsToReplace_=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;goog.json.Serializer.prototype.serializeString_=function(d,c){c.push('"',d.replace(goog.json.Serializer.charsToReplace_,function(g){if(g in goog.json.Serializer.charToJsonCharCache_){return goog.json.Serializer.charToJsonCharCache_[g]}var f=g.charCodeAt(0),h="\\u";16>f?h+="000":256>f?h+="00":4096>f&&(h+="0");return goog.json.Serializer.charToJsonCharCache_[g]=h+f.toString(16)}),'"')};goog.json.Serializer.prototype.serializeNumber_=function(d,c){c.push(isFinite(d)&&!isNaN(d)?d:"null")};goog.json.Serializer.prototype.serializeArray=function(g,f){var j=g.length;f.push("[");for(var i="",h=0;h<j;h++){f.push(i),i=g[h],this.serialize_(this.replacer_?this.replacer_.call(g,String(h),i):i,f),i=","}f.push("]")};goog.json.Serializer.prototype.serializeObject_=function(g,f){f.push("{");var j="",i;for(i in g){if(Object.prototype.hasOwnProperty.call(g,i)){var h=g[i];"function"!=typeof h&&(f.push(j),this.serializeString_(i,f),f.push(":"),this.serialize_(this.replacer_?this.replacer_.call(g,i,h):h,f),j=",")}}f.push("}")};goog.net.EventType={COMPLETE:"complete",SUCCESS:"success",ERROR:"error",ABORT:"abort",READY:"ready",READY_STATE_CHANGE:"readystatechange",TIMEOUT:"timeout",INCREMENTAL_DATA:"incrementaldata",PROGRESS:"progress"};goog.net.IframeIo=function(){this.name_=goog.net.IframeIo.getNextName_();this.iframesForDisposal_=[];goog.net.IframeIo.instances_[this.name_]=this};goog.inherits(goog.net.IframeIo,goog.events.EventTarget);goog.net.IframeIo.instances_={};goog.net.IframeIo.FRAME_NAME_PREFIX="closure_frame";goog.net.IframeIo.INNER_FRAME_SUFFIX="_inner";goog.net.IframeIo.IFRAME_DISPOSE_DELAY_MS=2000;goog.net.IframeIo.counter_=0;goog.net.IframeIo.send=function(h,g,l,k,j){var i=new goog.net.IframeIo;goog.events.listen(i,goog.net.EventType.READY,i.dispose,!1,i);g&&goog.events.listen(i,goog.net.EventType.COMPLETE,g);i.send(h,l,k,j)};goog.net.IframeIo.getIframeByName=function(b){return window.frames[b]};goog.net.IframeIo.getInstanceByName=function(b){return goog.net.IframeIo.instances_[b]};goog.net.IframeIo.handleIncrementalData=function(f,e){var h=goog.string.endsWith(f.name,goog.net.IframeIo.INNER_FRAME_SUFFIX)?f.parent.name:f.name,g=h.substring(0,h.lastIndexOf("_"));(g=goog.net.IframeIo.getInstanceByName(g))&&h==g.iframeName_?g.handleIncrementalData_(e):goog.debug.Logger.getLogger("goog.net.IframeIo").info("Incremental iframe data routed for unknown iframe")};goog.net.IframeIo.getNextName_=function(){return goog.net.IframeIo.FRAME_NAME_PREFIX+goog.net.IframeIo.counter_++};goog.net.IframeIo.getForm_=function(){if(!goog.net.IframeIo.form_){goog.net.IframeIo.form_=goog.dom.createDom("form");goog.net.IframeIo.form_.acceptCharset="utf-8";var b=goog.net.IframeIo.form_.style;b.position="absolute";b.visibility="hidden";b.top=b.left="-10px";b.width=b.height="10px";b.overflow="hidden";goog.dom.getDocument().body.appendChild(goog.net.IframeIo.form_)}return goog.net.IframeIo.form_};goog.net.IframeIo.addFormInputs_=function(e,d){var f=goog.dom.getDomHelper(e);goog.structs.forEach(d,function(a,g){var c=f.createDom("input",{type:"hidden",name:g,value:a});e.appendChild(c)})};goog.net.IframeIo.prototype.logger_=goog.debug.Logger.getLogger("goog.net.IframeIo");goog.net.IframeIo.prototype.form_=null;goog.net.IframeIo.prototype.iframe_=null;goog.net.IframeIo.prototype.iframeName_=null;goog.net.IframeIo.prototype.nextIframeId_=0;goog.net.IframeIo.prototype.active_=!1;goog.net.IframeIo.prototype.complete_=!1;goog.net.IframeIo.prototype.success_=!1;goog.net.IframeIo.prototype.lastUri_=null;goog.net.IframeIo.prototype.lastContent_=null;goog.net.IframeIo.prototype.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;goog.net.IframeIo.prototype.timeoutInterval_=0;goog.net.IframeIo.prototype.timeoutId_=null;goog.net.IframeIo.prototype.firefoxSilentErrorTimeout_=null;goog.net.IframeIo.prototype.iframeDisposalTimer_=null;goog.net.IframeIo.prototype.send=function(f,e,h,g){if(this.active_){throw Error("[goog.net.IframeIo] Unable to send, already active.")}this.lastUri_=f=new goog.Uri(f);e=e?e.toUpperCase():"GET";h&&f.makeUnique();this.logger_.info("Sending iframe request: "+f+" ["+e+"]");this.form_=goog.net.IframeIo.getForm_();"GET"==e&&goog.net.IframeIo.addFormInputs_(this.form_,f.getQueryData());g&&goog.net.IframeIo.addFormInputs_(this.form_,g);this.form_.action=f.toString();this.form_.method=e;this.sendFormInternal_()};goog.net.IframeIo.prototype.sendFromForm=function(e,d,f){if(this.active_){throw Error("[goog.net.IframeIo] Unable to send, already active.")}d=new goog.Uri(d||e.action);f&&d.makeUnique();this.logger_.info("Sending iframe request from form: "+d);this.lastUri_=d;this.form_=e;this.form_.action=d.toString();this.sendFormInternal_()};goog.net.IframeIo.prototype.abort=function(b){this.active_&&(this.logger_.info("Request aborted"),goog.events.removeAll(this.getRequestIframe_()),this.success_=this.active_=this.complete_=!1,this.lastErrorCode_=b||goog.net.ErrorCode.ABORT,this.dispatchEvent(goog.net.EventType.ABORT),this.makeReady_())};goog.net.IframeIo.prototype.disposeInternal=function(){this.logger_.fine("Disposing iframeIo instance");this.active_&&(this.logger_.fine("Aborting active request"),this.abort());goog.net.IframeIo.superClass_.disposeInternal.call(this);this.iframe_&&this.scheduleIframeDisposal_();this.disposeForm_();delete this.errorChecker_;this.lastUri_=this.lastCustomError_=this.lastContent_=this.lastContentHtml_=this.form_=null;this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;delete goog.net.IframeIo.instances_[this.name_]};goog.net.IframeIo.prototype.isComplete=function(){return this.complete_};goog.net.IframeIo.prototype.isSuccess=function(){return this.success_};goog.net.IframeIo.prototype.isActive=function(){return this.active_};goog.net.IframeIo.prototype.getResponseText=function(){return this.lastContent_};goog.net.IframeIo.prototype.getResponseHtml=function(){return this.lastContentHtml_};goog.net.IframeIo.prototype.getResponseJson=function(){return goog.json.parse(this.lastContent_)};goog.net.IframeIo.prototype.getResponseXml=function(){return !this.iframe_?null:this.getContentDocument_()};goog.net.IframeIo.prototype.getLastUri=function(){return this.lastUri_};goog.net.IframeIo.prototype.getLastErrorCode=function(){return this.lastErrorCode_};goog.net.IframeIo.prototype.getLastError=function(){return goog.net.ErrorCode.getDebugMessage(this.lastErrorCode_)};goog.net.IframeIo.prototype.getLastCustomError=function(){return this.lastCustomError_};goog.net.IframeIo.prototype.setErrorChecker=function(b){this.errorChecker_=b};goog.net.IframeIo.prototype.getErrorChecker=function(){return this.errorChecker_};goog.net.IframeIo.prototype.getTimeoutInterval=function(){return this.timeoutInterval_};goog.net.IframeIo.prototype.setTimeoutInterval=function(b){this.timeoutInterval_=Math.max(0,b)};goog.net.IframeIo.prototype.sendFormInternal_=function(){this.active_=!0;this.complete_=!1;this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR;this.createIframe_();if(goog.userAgent.IE){this.form_.target=this.iframeName_||"";this.appendIframe_();goog.events.listen(this.iframe_,goog.events.EventType.READYSTATECHANGE,this.onIeReadyStateChange_,!1,this);try{this.errorHandled_=!1,this.form_.submit()}catch(z){goog.events.unlisten(this.iframe_,goog.events.EventType.READYSTATECHANGE,this.onIeReadyStateChange_,!1,this),this.handleError_(goog.net.ErrorCode.ACCESS_DENIED)}}else{this.logger_.fine("Setting up iframes and cloning form");this.appendIframe_();var y=this.iframeName_+goog.net.IframeIo.INNER_FRAME_SUFFIX,x=goog.dom.getFrameContentDocument(this.iframe_),w="<body><iframe id="+y+" name="+y+"></iframe>";document.baseURI&&(w='<head><base href="'+goog.string.htmlEscape(document.baseURI)+'"></head>'+w);goog.userAgent.OPERA?x.documentElement.innerHTML=w:x.write(w);goog.events.listen(x.getElementById(y),goog.events.EventType.LOAD,this.onIframeLoaded_,!1,this);for(var v=this.form_.getElementsByTagName("textarea"),w=0,u=v.length;w<u;w++){var t=v[w].value;goog.dom.getRawTextContent(v[w])!=t&&(goog.dom.setTextContent(v[w],t),v[w].value=t)}v=x.importNode(this.form_,!0);v.target=y;v.action=this.form_.action;x.body.appendChild(v);for(var t=this.form_.getElementsByTagName("select"),s=v.getElementsByTagName("select"),w=0,u=t.length;w<u;w++){for(var r=t[w].getElementsByTagName("option"),q=s[w].getElementsByTagName("option"),p=0,o=r.length;p<o;p++){q[p].selected=r[p].selected}}t=this.form_.getElementsByTagName("input");s=v.getElementsByTagName("input");w=0;for(u=t.length;w<u;w++){if("file"==t[w].type&&t[w].value!=s[w].value){this.logger_.fine("File input value not cloned properly.  Will submit using original form.");this.form_.target=y;v=this.form_;break}}this.logger_.fine("Submitting form");try{this.errorHandled_=!1,v.submit(),x.close(),goog.userAgent.GECKO&&(this.firefoxSilentErrorTimeout_=goog.Timer.callOnce(this.testForFirefoxSilentError_,250,this))}catch(i){this.logger_.severe("Error when submitting form: "+goog.debug.exposeException(i)),goog.events.unlisten(x.getElementById(y),goog.events.EventType.LOAD,this.onIframeLoaded_,!1,this),x.close(),this.handleError_(goog.net.ErrorCode.FILE_NOT_FOUND)}}};goog.net.IframeIo.prototype.onIeReadyStateChange_=function(){if("complete"==this.iframe_.readyState){goog.events.unlisten(this.iframe_,goog.events.EventType.READYSTATECHANGE,this.onIeReadyStateChange_,!1,this);var d;try{if(d=goog.dom.getFrameContentDocument(this.iframe_),goog.userAgent.IE&&"about:blank"==d.location&&!navigator.onLine){this.handleError_(goog.net.ErrorCode.OFFLINE);return}}catch(c){this.handleError_(goog.net.ErrorCode.ACCESS_DENIED);return}this.handleLoad_(d)}};goog.net.IframeIo.prototype.onIframeLoaded_=function(){goog.userAgent.OPERA&&"about:blank"==this.getContentDocument_().location||(goog.events.unlisten(this.getRequestIframe_(),goog.events.EventType.LOAD,this.onIframeLoaded_,!1,this),this.handleLoad_(this.getContentDocument_()))};goog.net.IframeIo.prototype.handleLoad_=function(g){this.logger_.fine("Iframe loaded");this.complete_=!0;this.active_=!1;var f;try{var j=g.body;this.lastContent_=j.textContent||j.innerText;this.lastContentHtml_=j.innerHTML}catch(i){f=goog.net.ErrorCode.ACCESS_DENIED}var h;if(!f&&"function"==typeof this.errorChecker_&&(h=this.errorChecker_(g))){f=goog.net.ErrorCode.CUSTOM_ERROR}this.logger_.finer("Last content: "+this.lastContent_);this.logger_.finer("Last uri: "+this.lastUri_);f?(this.logger_.fine("Load event occurred but failed"),this.handleError_(f,h)):(this.logger_.fine("Load succeeded"),this.success_=!0,this.lastErrorCode_=goog.net.ErrorCode.NO_ERROR,this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.SUCCESS),this.makeReady_())};goog.net.IframeIo.prototype.handleError_=function(d,c){this.errorHandled_||(this.active_=this.success_=!1,this.complete_=!0,this.lastErrorCode_=d,d==goog.net.ErrorCode.CUSTOM_ERROR&&(this.lastCustomError_=c),this.dispatchEvent(goog.net.EventType.COMPLETE),this.dispatchEvent(goog.net.EventType.ERROR),this.makeReady_(),this.errorHandled_=!0)};goog.net.IframeIo.prototype.handleIncrementalData_=function(b){this.dispatchEvent(new goog.net.IframeIo.IncrementalDataEvent(b))};goog.net.IframeIo.prototype.makeReady_=function(){this.logger_.info("Ready for new requests");this.scheduleIframeDisposal_();this.disposeForm_();this.dispatchEvent(goog.net.EventType.READY)};goog.net.IframeIo.prototype.createIframe_=function(){this.logger_.fine("Creating iframe");this.iframeName_=this.name_+"_"+(this.nextIframeId_++).toString(36);var b={name:this.iframeName_,id:this.iframeName_};goog.userAgent.IE&&7>goog.userAgent.VERSION&&(b.src='javascript:""');this.iframe_=goog.dom.getDomHelper(this.form_).createDom("iframe",b);b=this.iframe_.style;b.visibility="hidden";b.width=b.height="10px";goog.userAgent.WEBKIT?b.marginTop=b.marginLeft="-10px":(b.position="absolute",b.top=b.left="-10px")};goog.net.IframeIo.prototype.appendIframe_=function(){goog.dom.getDomHelper(this.form_).getDocument().body.appendChild(this.iframe_)};goog.net.IframeIo.prototype.scheduleIframeDisposal_=function(){var b=this.iframe_;b&&(b.onreadystatechange=null,b.onload=null,b.onerror=null,this.iframesForDisposal_.push(b));this.iframeDisposalTimer_&&(goog.Timer.clear(this.iframeDisposalTimer_),this.iframeDisposalTimer_=null);goog.userAgent.GECKO||goog.userAgent.OPERA?this.iframeDisposalTimer_=goog.Timer.callOnce(this.disposeIframes_,goog.net.IframeIo.IFRAME_DISPOSE_DELAY_MS,this):this.disposeIframes_();this.iframeName_=this.iframe_=null};goog.net.IframeIo.prototype.disposeIframes_=function(){this.iframeDisposalTimer_&&(goog.Timer.clear(this.iframeDisposalTimer_),this.iframeDisposalTimer_=null);for(;0!=this.iframesForDisposal_.length;){var b=this.iframesForDisposal_.pop();this.logger_.info("Disposing iframe");goog.dom.removeNode(b)}};goog.net.IframeIo.prototype.disposeForm_=function(){this.form_&&this.form_==goog.net.IframeIo.form_&&goog.dom.removeChildren(this.form_);this.form_=null};goog.net.IframeIo.prototype.getContentDocument_=function(){return this.iframe_?goog.dom.getFrameContentDocument(this.getRequestIframe_()):null};goog.net.IframeIo.prototype.getRequestIframe_=function(){return this.iframe_?goog.userAgent.IE?this.iframe_:goog.dom.getFrameContentDocument(this.iframe_).getElementById(this.iframeName_+goog.net.IframeIo.INNER_FRAME_SUFFIX):null};goog.net.IframeIo.prototype.testForFirefoxSilentError_=function(){if(this.active_){var b=this.getContentDocument_();b&&!goog.reflect.canAccessProperty(b,"documentUri")?(goog.events.unlisten(this.getRequestIframe_(),goog.events.EventType.LOAD,this.onIframeLoaded_,!1,this),navigator.onLine?(this.logger_.warning("Silent Firefox error detected"),this.handleError_(goog.net.ErrorCode.FF_SILENT_ERROR)):(this.logger_.warning("Firefox is offline so report offline error instead of silent error"),this.handleError_(goog.net.ErrorCode.OFFLINE))):this.firefoxSilentErrorTimeout_=goog.Timer.callOnce(this.testForFirefoxSilentError_,250,this)}};goog.net.IframeIo.IncrementalDataEvent=function(b){goog.events.Event.call(this,goog.net.EventType.INCREMENTAL_DATA);this.data=b};goog.inherits(goog.net.IframeIo.IncrementalDataEvent,goog.events.Event);goog.events.ActionHandler=function(b){goog.events.EventTarget.call(this);this.element_=b;goog.events.listen(b,goog.events.ActionHandler.KEY_EVENT_TYPE_,this.handleKeyDown_,!1,this);goog.events.listen(b,goog.events.EventType.CLICK,this.handleClick_,!1,this)};goog.inherits(goog.events.ActionHandler,goog.events.EventTarget);goog.events.ActionHandler.EventType={ACTION:"action",BEFOREACTION:"beforeaction"};goog.events.ActionHandler.KEY_EVENT_TYPE_=goog.userAgent.GECKO?goog.events.EventType.KEYPRESS:goog.events.EventType.KEYDOWN;goog.events.ActionHandler.prototype.handleKeyDown_=function(b){(b.keyCode==goog.events.KeyCodes.ENTER||goog.userAgent.WEBKIT&&b.keyCode==goog.events.KeyCodes.MAC_ENTER)&&this.dispatchEvents_(b)};goog.events.ActionHandler.prototype.handleClick_=function(b){this.dispatchEvents_(b)};goog.events.ActionHandler.prototype.dispatchEvents_=function(d){var c=new goog.events.BeforeActionEvent(d);if(this.dispatchEvent(c)){c=new goog.events.ActionEvent(d);try{this.dispatchEvent(c)}finally{d.stopPropagation()}}};goog.events.ActionHandler.prototype.disposeInternal=function(){goog.events.ActionHandler.superClass_.disposeInternal.call(this);goog.events.unlisten(this.element_,goog.events.ActionHandler.KEY_EVENT_TYPE_,this.handleKeyDown_,!1,this);goog.events.unlisten(this.element_,goog.events.EventType.CLICK,this.handleClick_,!1,this);delete this.element_};goog.events.ActionEvent=function(b){goog.events.BrowserEvent.call(this,b.getBrowserEvent());this.type=goog.events.ActionHandler.EventType.ACTION};goog.inherits(goog.events.ActionEvent,goog.events.BrowserEvent);goog.events.BeforeActionEvent=function(b){goog.events.BrowserEvent.call(this,b.getBrowserEvent());this.type=goog.events.ActionHandler.EventType.BEFOREACTION};goog.inherits(goog.events.BeforeActionEvent,goog.events.BrowserEvent);goog.editor.plugins.ImageDialog=function(d,c){goog.ui.editor.AbstractDialog.call(this,d);this.image_=c;this.eventHandler_=new goog.events.EventHandler(this)};goog.inherits(goog.editor.plugins.ImageDialog,goog.ui.editor.AbstractDialog);var MSG_IMAGE_DIALOG=goog.getMsg("Add an image"),MSG_IMAGE_DIALOG_UPLOAD_INPUT_TAB=goog.getMsg("My Computer"),MSG_IMAGE_DIALOG_UPLOAD_INPUT=goog.getMsg("Upload an image: "),MSG_IMAGE_DIALOG_ON_WEB_INPUT=goog.getMsg("Image URL: "),MSG_IMAGE_DIALOG_ON_UPLOAD_ERROR=goog.getMsg("Upload failed.");goog.editor.plugins.ImageDialog.OkEvent=function(b){goog.events.Event.call(this,goog.ui.editor.AbstractDialog.EventType.OK);this.imageUrl=b};goog.inherits(goog.editor.plugins.ImageDialog.OkEvent,goog.events.Event);goog.editor.plugins.ImageDialog.prototype.show=function(){goog.editor.plugins.ImageDialog.superClass_.show.call(this);this.isNewLink_()?this.tabPane_.setSelectedTabId(goog.editor.plugins.ImageDialog.Id_.UPLOAD_TAB):this.tabPane_.setSelectedTabId(goog.editor.plugins.ImageDialog.Id_.ON_WEB_TAB);this.dom.getElement(goog.editor.plugins.ImageDialog.Id_.ON_WEB_INPUT).value=this.isNewLink_()?"":this.image_.getAttribute("src");this.syncOkButton_()};goog.editor.plugins.ImageDialog.prototype.setConfig=function(b){this.config_=b};goog.editor.plugins.ImageDialog.prototype.createDialogControl=function(){var d=this.dom.createDom(goog.dom.TagName.DIV,null),c=new goog.ui.editor.AbstractDialog.Builder(this);c.setTitle(MSG_IMAGE_DIALOG).setContent(d);this.tabPane_=new goog.ui.editor.TabPane(this.dom);this.tabPane_.addTab(goog.editor.plugins.ImageDialog.Id_.UPLOAD_TAB,MSG_IMAGE_DIALOG_UPLOAD_INPUT_TAB,"",this.buildTabUpload_());this.tabPane_.addTab(goog.editor.plugins.ImageDialog.Id_.ON_WEB_TAB,goog.ui.editor.messages.MSG_ON_THE_WEB,goog.ui.editor.messages.MSG_ON_THE_WEB_TIP,this.buildTabOnTheWeb_());this.tabPane_.render(d);this.eventHandler_.listen(this.tabPane_,goog.ui.Component.EventType.SELECT,this.onChangeTab_);return c.build()};goog.editor.plugins.ImageDialog.prototype.createOkEvent=function(){if(this.tabPane_.getCurrentTabId()==goog.editor.plugins.ImageDialog.Id_.UPLOAD_TAB){var b=this.getUploadedImage_(),b="undefined"==typeof b?"":b.getAttribute("src")}else{b=this.dom.getElement(goog.editor.plugins.ImageDialog.Id_.ON_WEB_INPUT).value,0>b.search(/:/)&&(b="http://"+goog.string.trimLeft(b))}return new goog.editor.plugins.ImageDialog.OkEvent(b)};goog.editor.plugins.ImageDialog.prototype.disposeInternal=function(){this.eventHandler_.dispose();this.eventHandler_=null;this.urlInputHandler_.dispose();this.urlInputHandler_=null;goog.editor.plugins.ImageDialog.superClass_.disposeInternal.call(this)};goog.editor.plugins.ImageDialog.prototype.buildTabOnTheWeb_=function(){var e=this.dom.createElement(goog.dom.TagName.DIV),d=this.dom.createTable(1,2);d.cellSpacing="0";d.cellPadding="0";d.style.fontSize="12pt";d.rows[0].cells[0].innerHTML='<span style="position: relative; bottom: 2px; padding-right: 1px; white-space: nowrap;">'+MSG_IMAGE_DIALOG_ON_WEB_INPUT+"&nbsp;</span>";var f=this.dom.createDom(goog.dom.TagName.INPUT,{id:goog.editor.plugins.ImageDialog.Id_.ON_WEB_INPUT,className:goog.editor.plugins.ImageDialog.TARGET_INPUT_CLASSNAME_});goog.userAgent.IE||(f.type="url");goog.style.setStyle(f,"width","98%");goog.style.setStyle(d.rows[0].cells[1],"width","100%");goog.dom.appendChild(d.rows[0].cells[1],f);this.urlInputHandler_=new goog.events.InputHandler(f);this.eventHandler_.listen(this.urlInputHandler_,goog.events.InputHandler.EventType.INPUT,this.onUrlInputChange_);e.appendChild(d);return e};goog.editor.plugins.ImageDialog.prototype.buildTabUpload_=function(){var g=this.dom.createElement(goog.dom.TagName.DIV);if("undefined"==goog.typeOf(this.config_.actionUrl)){return g}var f=this.dom.createTable(1,2);f.cellSpacing="0";f.cellPadding="0";f.style.fontSize="12pt";f.rows[0].cells[0].innerHTML='<span style="position: relative; bottom: 2px; padding-right: 1px; white-space: nowrap;">'+MSG_IMAGE_DIALOG_UPLOAD_INPUT+"&nbsp;</span>";var j=this.dom.createDom(goog.dom.TagName.INPUT,{id:goog.editor.plugins.ImageDialog.Id_.UPLOAD_INPUT,type:"file",name:"file",className:goog.editor.plugins.ImageDialog.TARGET_INPUT_CLASSNAME_}),i=this.dom.createDom(goog.dom.TagName.FORM,{id:goog.editor.plugins.ImageDialog.Id_.UPLOAD_FORM,method:"post",action:this.config_.actionUrl,enctype:"multipart/form-data",onsubmit:"return false"});i.encoding="multipart/form-data";if(this.config_.extraCode){var h=this.dom.createDom(goog.dom.TagName.DIV,{});h.innerHTML=this.config_.extraCode;i.appendChild(h)}i.appendChild(j);goog.style.setStyle(i,"width","98%");goog.style.setStyle(f.rows[0].cells[1],"width","100%");goog.dom.appendChild(f.rows[0].cells[1],i);this.eventHandler_.listen(j,goog.events.EventType.CHANGE,this.onFileInputChange_);g.appendChild(f);return g};goog.editor.plugins.ImageDialog.prototype.onUrlInputChange_=function(){this.syncOkButton_()};goog.editor.plugins.ImageDialog.prototype.onFileInputChange_=function(){var d=this.dom.getElement(goog.editor.plugins.ImageDialog.Id_.UPLOAD_FORM),c=new goog.net.IframeIo;this.eventHandler_.listen(c,goog.net.EventType.SUCCESS,this.onFileUploadSuccess_);this.eventHandler_.listen(c,goog.net.EventType.ERROR,this.onFileUploadError_);c.sendFromForm(d)};goog.editor.plugins.ImageDialog.prototype.onFileUploadSuccess_=function(d){var c=document.getElementById(goog.editor.plugins.ImageDialog.Id_.UPLOAD_TAB+goog.editor.plugins.ImageDialog.Id_.TAB_SUFFIX);d=d.target.getResponseJson();0==d.status?(d=this.dom.createDom(goog.dom.TagName.IMG,{id:"uploaded-image",src:d.imageUrl}),this.dom.appendChild(c,d),this.syncOkButton_(),this.processOkAndClose()):(d=this.dom.createDom(goog.dom.TagName.SPAN,{style:"color: red;"},this.dom.createTextNode(d.errorMsg)),this.dom.appendChild(c,d))};goog.editor.plugins.ImageDialog.prototype.onFileUploadError_=function(){var d=document.getElementById(goog.editor.plugins.ImageDialog.Id_.UPLOAD_TAB+goog.editor.plugins.ImageDialog.Id_.TAB_SUFFIX),c=this.dom.createDom(goog.dom.TagName.SPAN,{style:"color: red;"},this.dom.createTextNode(MSG_IMAGE_DIALOG_ON_UPLOAD_ERROR));this.dom.appendChild(d,c)};goog.editor.plugins.ImageDialog.prototype.onChangeTab_=function(b){b=this.dom.getElement(b.target.getId()+goog.editor.plugins.ImageDialog.Id_.TAB_INPUT_SUFFIX);this.tabPane_.getCurrentTabId()==goog.editor.plugins.ImageDialog.Id_.ON_WEB_TAB&&goog.editor.focus.focusInputField(b);b&&(b.style.width="",b.style.width=b.offsetWidth+"px");this.syncOkButton_()};goog.editor.plugins.ImageDialog.prototype.syncOkButton_=function(){if(this.tabPane_.getCurrentTabId()==goog.editor.plugins.ImageDialog.Id_.ON_WEB_TAB){b=this.dom.getElement(goog.editor.plugins.ImageDialog.Id_.ON_WEB_INPUT).value}else{if(this.tabPane_.getCurrentTabId()==goog.editor.plugins.ImageDialog.Id_.UPLOAD_TAB){var b=this.getUploadedImage_(),b="undefined"==typeof b?"":b.getAttribute("src")}else{return}}this.getOkButtonElement().disabled=goog.string.isEmpty(b)};goog.editor.plugins.ImageDialog.prototype.getUploadedImage_=function(){var b=this.dom.getElement(goog.editor.plugins.ImageDialog.Id_.UPLOAD_TAB+goog.editor.plugins.ImageDialog.Id_.TAB_SUFFIX),b=goog.dom.getElementsByTagNameAndClass("img",null,b);return 0<b.length?b[0]:void 0};goog.editor.plugins.ImageDialog.prototype.isNewLink_=function(){return null==this.image_?!0:!1};goog.editor.plugins.ImageDialog.Id_={ON_WEB_TAB:"imagedialog-onweb",ON_WEB_INPUT:"imagedialog-onweb-tab-input",UPLOAD_TAB:"imagedialog-upload",UPLOAD_INPUT:"imagedialog-upload-tab-input",UPLOAD_FORM:"imagedialog-upload-tab-form",TAB_SUFFIX:"-tab",TAB_INPUT_SUFFIX:"-tab-input"};goog.editor.plugins.ImageDialog.TARGET_INPUT_CLASSNAME_="tr-link-dialog-target-input";goog.editor.plugins.ImageDialogPlugin=function(b){goog.editor.plugins.AbstractDialogPlugin.call(this,goog.editor.Command.IMAGE);this.config_=b};goog.inherits(goog.editor.plugins.ImageDialogPlugin,goog.editor.plugins.AbstractDialogPlugin);goog.editor.plugins.ImageDialogPlugin.prototype.getTrogClassId=goog.functions.constant("ImageDialogPlugin");goog.editor.plugins.ImageDialogPlugin.prototype.createDialog=function(e,d){var f=new goog.editor.plugins.ImageDialog(e,d);this.config_&&f.setConfig(this.config_);f.addEventListener(goog.ui.editor.AbstractDialog.EventType.OK,this.handleOk_,!1,this);return f};goog.editor.plugins.ImageDialogPlugin.prototype.handleOk_=function(d){this.fieldObject.dispatchBeforeChange();var c=this.getFieldDomHelper().createElement(goog.dom.TagName.IMG);c.src=d.imageUrl;this.restoreOriginalSelection();c=this.fieldObject.getRange().replaceContentsWithNode(c);this.fieldObject.dispatchChange();goog.editor.range.placeCursorNextTo(c,!1);this.fieldObject.dispatchSelectionChangeEvent()};goog.editor.plugins.AbstractTabHandler=function(){goog.editor.Plugin.call(this)};goog.inherits(goog.editor.plugins.AbstractTabHandler,goog.editor.Plugin);goog.editor.plugins.AbstractTabHandler.prototype.handleKeyboardShortcut=function(b){return goog.userAgent.GECKO&&this.getFieldObject().inModalMode()?!1:b.keyCode==goog.events.KeyCodes.TAB&&!b.metaKey&&!b.ctrlKey?this.handleTabKey(b):!1};goog.editor.plugins.ListTabHandler=function(){goog.editor.plugins.AbstractTabHandler.call(this)};goog.inherits(goog.editor.plugins.ListTabHandler,goog.editor.plugins.AbstractTabHandler);goog.editor.plugins.ListTabHandler.prototype.getTrogClassId=function(){return"ListTabHandler"};goog.editor.plugins.ListTabHandler.prototype.handleTabKey=function(d){var c=this.getFieldObject().getRange();return goog.dom.getAncestorByTagNameAndClass(c.getContainerElement(),goog.dom.TagName.LI)||goog.iter.some(c,function(b){return b.tagName==goog.dom.TagName.LI})?(this.getFieldObject().execCommand(d.shiftKey?goog.editor.Command.OUTDENT:goog.editor.Command.INDENT),d.preventDefault(),!0):!1};goog.editor.plugins.RemoveFormatting=function(){goog.editor.Plugin.call(this);this.optRemoveFormattingFunc_=null};goog.inherits(goog.editor.plugins.RemoveFormatting,goog.editor.Plugin);goog.editor.plugins.RemoveFormatting.REMOVE_FORMATTING_COMMAND="+removeFormat";goog.editor.plugins.RemoveFormatting.BLOCK_RE_=/^(DIV|TR|LI|BLOCKQUOTE|H\d|PRE|XMP)/;goog.editor.plugins.RemoveFormatting.appendNewline_=function(b){b.push("<br>")};goog.editor.plugins.RemoveFormatting.createRangeDelimitedByRanges_=function(d,c){return goog.dom.Range.createFromNodes(d.getStartNode(),d.getStartOffset(),c.getEndNode(),c.getEndOffset())};goog.editor.plugins.RemoveFormatting.prototype.getTrogClassId=function(){return"RemoveFormatting"};goog.editor.plugins.RemoveFormatting.prototype.isSupportedCommand=function(b){return b==goog.editor.plugins.RemoveFormatting.REMOVE_FORMATTING_COMMAND};goog.editor.plugins.RemoveFormatting.prototype.execCommandInternal=function(b){b==goog.editor.plugins.RemoveFormatting.REMOVE_FORMATTING_COMMAND&&this.removeFormatting_()};goog.editor.plugins.RemoveFormatting.prototype.handleKeyboardShortcut=function(e,d,f){return !f?!1:" "==d?(this.getFieldObject().execCommand(goog.editor.plugins.RemoveFormatting.REMOVE_FORMATTING_COMMAND),!0):!1};goog.editor.plugins.RemoveFormatting.prototype.removeFormatting_=function(){if(!this.getFieldObject().getRange().isCollapsed()){var b=this.optRemoveFormattingFunc_||goog.bind(this.removeFormattingWorker_,this);this.convertSelectedHtmlText_(b);this.getFieldDomHelper().getDocument().execCommand("RemoveFormat",!1,void 0);goog.editor.BrowserFeature.ADDS_NBSPS_IN_REMOVE_FORMAT&&this.convertSelectedHtmlText_(function(d){var e=goog.userAgent.isVersion("528")?/&nbsp;/g:/\u00A0/g;return d.replace(e," ")})}};goog.editor.plugins.RemoveFormatting.prototype.getTableAncestor_=function(d){for(var c=this.getFieldObject().getElement();d&&d!=c;){if(d.tagName==goog.dom.TagName.TABLE){return d}d=d.parentNode}return null};goog.editor.plugins.RemoveFormatting.prototype.pasteHtml_=function(r){var q=this.getFieldObject().getRange(),p=this.getFieldDomHelper(),o=goog.string.createUniqueString(),n=goog.string.createUniqueString();r='<span id="'+o+'"></span>'+r+'<span id="'+n+'"></span>';var m=goog.string.createUniqueString(),l='<span id="'+m+'"></span>';if(goog.editor.BrowserFeature.HAS_IE_RANGES){var k=q.getTextRange(0).getBrowserRangeObject();k.pasteHTML(l);for(var i;(i=k.parentElement())&&goog.editor.node.isEmpty(i)&&!goog.editor.node.isEditableContainer(i);){q=i.nodeName;if(q==goog.dom.TagName.TD||q==goog.dom.TagName.TR||q==goog.dom.TagName.TH){break}goog.dom.removeNode(i)}k.pasteHTML(r);(m=p.getElement(m))&&goog.dom.removeNode(m)}else{if(goog.editor.BrowserFeature.HAS_W3C_RANGES){p.getDocument().execCommand("insertImage",!1,m);q=RegExp("<[^<]*"+m+"[^>]*>");i=this.getFieldObject().getRange().getContainerElement();i.nodeType==goog.dom.NodeType.TEXT&&(i=i.parentNode);for(;!q.test(i.innerHTML);){i=i.parentNode}if(goog.userAgent.GECKO){goog.editor.node.replaceInnerHtml(i,i.innerHTML.replace(q,r))}else{goog.editor.node.replaceInnerHtml(i,i.innerHTML.replace(q,l));for(i=m=p.getElement(m);(i=m.parentNode)&&goog.editor.node.isEmpty(i)&&!goog.editor.node.isEditableContainer(i);){q=i.nodeName;if(q==goog.dom.TagName.TD||q==goog.dom.TagName.TR||q==goog.dom.TagName.TH){break}goog.dom.insertSiblingAfter(m,i);goog.dom.removeNode(i)}goog.editor.node.replaceInnerHtml(i,i.innerHTML.replace(RegExp(l,"i"),r))}}}r=p.getElement(o);p=p.getElement(n);goog.dom.Range.createFromNodes(r,0,p,p.childNodes.length).select();goog.dom.removeNode(r);goog.dom.removeNode(p)};goog.editor.plugins.RemoveFormatting.prototype.getHtmlText_=function(g){var f=this.getFieldDomHelper().createDom("div"),j=g.getBrowserRangeObject();if(goog.editor.BrowserFeature.HAS_W3C_RANGES){f.appendChild(j.cloneContents())}else{if(goog.editor.BrowserFeature.HAS_IE_RANGES){var i=g.getText(),i=i.replace(/\r\n/g,"\r"),h=i.length;g=h-goog.string.trimLeft(i).length;i=h-goog.string.trimRight(i).length;j.moveStart("character",g);j.moveEnd("character",-i);g=j.htmlText;"Formatted"==j.queryCommandValue("formatBlock")&&(g=goog.string.newLineToBr(j.htmlText));f.innerHTML=g}}return f.innerHTML};goog.editor.plugins.RemoveFormatting.prototype.adjustRangeForTables_=function(r,q,p){var o=goog.editor.range.saveUsingNormalizedCarets(r),n=r.getStartNode(),m=r.getStartOffset(),l=r.getEndNode();r=r.getEndOffset();var k=this.getFieldDomHelper();if(q){var i=k.createTextNode("");goog.dom.insertSiblingAfter(i,q);n=i;m=0}p&&(i=k.createTextNode(""),goog.dom.insertSiblingBefore(i,p),l=i,r=0);goog.dom.Range.createFromNodes(n,m,l,r).select();return o};goog.editor.plugins.RemoveFormatting.prototype.putCaretInCave_=function(e,d){var f=goog.dom.removeNode(e.getCaret(d));d?this.startCaretInCave_=f:this.endCaretInCave_=f};goog.editor.plugins.RemoveFormatting.prototype.restoreCaretsFromCave_=function(){var b=this.getFieldObject().getElement();this.startCaretInCave_&&(b.insertBefore(this.startCaretInCave_,b.firstChild),this.startCaretInCave_=null);this.endCaretInCave_&&(b.appendChild(this.endCaretInCave_),this.endCaretInCave_=null)};goog.editor.plugins.RemoveFormatting.prototype.convertSelectedHtmlText_=function(h){var g=this.getFieldObject().getRange();if(!(1<g.getTextRangeCount())){if(goog.userAgent.GECKO){var l=goog.editor.range.expand(g,this.getFieldObject().getElement()),k=this.getTableAncestor_(l.getStartNode()),j=this.getTableAncestor_(l.getEndNode());if(k||j){if(k==j){return}var i=this.adjustRangeForTables_(g,k,j);k||this.putCaretInCave_(i,!0);j||this.putCaretInCave_(i,!1);g=this.getFieldObject().getRange();l=goog.editor.range.expand(g,this.getFieldObject().getElement())}l.select();g=l}g=this.getHtmlText_(g);this.pasteHtml_(h(g));goog.userAgent.GECKO&&i&&(g=this.getFieldObject().getRange(),this.restoreCaretsFromCave_(),h=i.toAbstractRange(),goog.editor.plugins.RemoveFormatting.createRangeDelimitedByRanges_(k?h:g,j?h:g).select(),i.dispose())}};goog.editor.plugins.RemoveFormatting.prototype.removeFormattingWorker_=function(x){var w=goog.dom.createElement("div");w.innerHTML=x;x=[];for(var w=[w.childNodes,0],v=[],u=0,t=[],s=0,r=0;0<=r;r-=2){for(var q=!1;0<s&&r<=t[s-1];){s--,q=!0}q&&goog.editor.plugins.RemoveFormatting.appendNewline_(x);for(q=!1;0<u&&r<=v[u-1];){u--,q=!0}q&&goog.editor.plugins.RemoveFormatting.appendNewline_(x);for(var q=w[r],p=w[r+1];p<q.length;){var o=q[p++],n=o.nodeName,i=this.getValueForNode(o);if(goog.isDefAndNotNull(i)){x.push(i)}else{switch(n){case"#text":o=0<u?o.nodeValue:goog.string.stripNewlines(o.nodeValue);o=goog.string.htmlEscape(o);x.push(o);continue;case goog.dom.TagName.P:goog.editor.plugins.RemoveFormatting.appendNewline_(x);goog.editor.plugins.RemoveFormatting.appendNewline_(x);break;case goog.dom.TagName.BR:goog.editor.plugins.RemoveFormatting.appendNewline_(x);continue;case goog.dom.TagName.TABLE:goog.editor.plugins.RemoveFormatting.appendNewline_(x);t[s++]=r;break;case goog.dom.TagName.PRE:case"XMP":v[u++]=r;break;case goog.dom.TagName.STYLE:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SELECT:continue;case goog.dom.TagName.A:if(o.href&&""!=o.href){x.push("<a href='");x.push(o.href);x.push("'>");x.push(this.removeFormattingWorker_(o.innerHTML));x.push("</a>");continue}else{break}case goog.dom.TagName.IMG:x.push("<img src='");x.push(o.src);x.push("'");"0"==o.border&&x.push(" border='0'");x.push(">");continue;case goog.dom.TagName.TD:o.previousSibling&&x.push(" ");break;case goog.dom.TagName.TR:o.previousSibling&&goog.editor.plugins.RemoveFormatting.appendNewline_(x);break;case goog.dom.TagName.DIV:if(i=o.parentNode,i.firstChild==o&&goog.editor.plugins.RemoveFormatting.BLOCK_RE_.test(i.tagName)){break}default:goog.editor.plugins.RemoveFormatting.BLOCK_RE_.test(n)&&goog.editor.plugins.RemoveFormatting.appendNewline_(x)}o=o.childNodes;0<o.length&&(w[r++]=q,w[r++]=p,q=o,p=0)}}}return goog.string.normalizeSpaces(x.join(""))};goog.editor.plugins.RemoveFormatting.prototype.getValueForNode=function(){return null};goog.editor.plugins.RemoveFormatting.prototype.setRemoveFormattingFunc=function(b){this.optRemoveFormattingFunc_=b};goog.events.ActionEventWrapper_=function(){};goog.events.actionEventWrapper=new goog.events.ActionEventWrapper_;goog.events.ActionEventWrapper_.EVENT_TYPES_=[goog.events.EventType.CLICK,goog.userAgent.GECKO?goog.events.EventType.KEYPRESS:goog.events.EventType.KEYDOWN];goog.events.ActionEventWrapper_.prototype.listen=function(g,f,j,i,h){j=function(b){if(b.type==goog.events.EventType.CLICK&&b.isMouseActionButton()){f.call(i,b)}else{if(b.keyCode==goog.events.KeyCodes.ENTER||b.keyCode==goog.events.KeyCodes.MAC_ENTER){b.type=goog.events.EventType.KEYPRESS,f.call(i,b)}}};j.listener_=f;j.scope_=i;h?h.listen(g,goog.events.ActionEventWrapper_.EVENT_TYPES_,j):goog.events.listen(g,goog.events.ActionEventWrapper_.EVENT_TYPES_,j)};goog.events.ActionEventWrapper_.prototype.unlisten=function(r,q,p,o,n){for(var m=0;p=goog.events.ActionEventWrapper_.EVENT_TYPES_[m];m++){for(var l=goog.events.getListeners(r,p,!1),k,i=0;k=l[i];i++){if(k.listener.listener_==q&&k.listener.scope_==o){n?n.unlisten(r,p,k.listener):goog.events.unlisten(r,p,k.listener);break}}}};goog.dom.ViewportSizeMonitor=function(b){goog.events.EventTarget.call(this);this.window_=b||window;this.listenerKey_=goog.events.listen(this.window_,goog.events.EventType.RESIZE,this.handleResize_,!1,this);this.size_=goog.dom.getViewportSize(this.window_);this.isPollingRequired_()&&(this.windowSizePollInterval_=window.setInterval(goog.bind(this.checkForSizeChange_,this),goog.dom.ViewportSizeMonitor.WINDOW_SIZE_POLL_RATE))};goog.inherits(goog.dom.ViewportSizeMonitor,goog.events.EventTarget);goog.dom.ViewportSizeMonitor.getInstanceForWindow=function(d){d=d||window;var c=goog.getUid(d);return goog.dom.ViewportSizeMonitor.windowInstanceMap_[c]=goog.dom.ViewportSizeMonitor.windowInstanceMap_[c]||new goog.dom.ViewportSizeMonitor(d)};goog.dom.ViewportSizeMonitor.removeInstanceForWindow=function(b){b=goog.getUid(b||window);goog.dispose(goog.dom.ViewportSizeMonitor.windowInstanceMap_[b]);delete goog.dom.ViewportSizeMonitor.windowInstanceMap_[b]};goog.dom.ViewportSizeMonitor.windowInstanceMap_={};goog.dom.ViewportSizeMonitor.WINDOW_SIZE_POLL_RATE=500;goog.dom.ViewportSizeMonitor.prototype.listenerKey_=null;goog.dom.ViewportSizeMonitor.prototype.window_=null;goog.dom.ViewportSizeMonitor.prototype.size_=null;goog.dom.ViewportSizeMonitor.prototype.windowSizePollInterval_=null;goog.dom.ViewportSizeMonitor.prototype.isPollingRequired_=function(){return goog.userAgent.WEBKIT&&goog.userAgent.WINDOWS||goog.userAgent.OPERA&&this.window_.self!=this.window_.top};goog.dom.ViewportSizeMonitor.prototype.getSize=function(){return this.size_?this.size_.clone():null};goog.dom.ViewportSizeMonitor.prototype.disposeInternal=function(){goog.dom.ViewportSizeMonitor.superClass_.disposeInternal.call(this);this.listenerKey_&&(goog.events.unlistenByKey(this.listenerKey_),this.listenerKey_=null);this.windowSizePollInterval_&&(window.clearInterval(this.windowSizePollInterval_),this.windowSizePollInterval_=null);this.size_=this.window_=null};goog.dom.ViewportSizeMonitor.prototype.handleResize_=function(){this.checkForSizeChange_()};goog.dom.ViewportSizeMonitor.prototype.checkForSizeChange_=function(){var b=goog.dom.getViewportSize(this.window_);goog.math.Size.equals(b,this.size_)||(this.size_=b,this.dispatchEvent(goog.events.EventType.RESIZE))};goog.ui.editor.Bubble=function(d,c){goog.events.EventTarget.call(this);this.dom_=goog.dom.getDomHelper(d);this.eventHandler_=new goog.events.EventHandler(this);this.viewPortSizeMonitor_=new goog.dom.ViewportSizeMonitor(this.dom_.getWindow());this.panels_={};this.bubbleContainer_=this.dom_.createDom(goog.dom.TagName.DIV,{className:goog.ui.editor.Bubble.BUBBLE_CLASSNAME});goog.style.showElement(this.bubbleContainer_,!1);goog.dom.appendChild(d,this.bubbleContainer_);goog.style.setStyle(this.bubbleContainer_,"zIndex",c);this.bubbleContents_=this.createBubbleDom(this.dom_,this.bubbleContainer_);this.closeBox_=this.dom_.createDom(goog.dom.TagName.DIV,{className:"tr_bubble_closebox",innerHTML:"&nbsp;"});this.bubbleContents_.appendChild(this.closeBox_);goog.editor.style.makeUnselectable(this.bubbleContainer_,this.eventHandler_);this.popup_=new goog.ui.PopupBase(this.bubbleContainer_)};goog.inherits(goog.ui.editor.Bubble,goog.events.EventTarget);goog.ui.editor.Bubble.BUBBLE_CLASSNAME="tr_bubble";goog.ui.editor.Bubble.prototype.createBubbleDom=function(d,c){return c};goog.ui.editor.Bubble.prototype.logger=goog.debug.Logger.getLogger("goog.ui.editor.Bubble");goog.ui.editor.Bubble.prototype.disposeInternal=function(){goog.ui.editor.Bubble.superClass_.disposeInternal.call(this);goog.dom.removeNode(this.bubbleContainer_);this.bubbleContainer_=null;this.eventHandler_.dispose();this.eventHandler_=null;this.viewPortSizeMonitor_.dispose();this.viewPortSizeMonitor_=null};goog.ui.editor.Bubble.prototype.getContentElement=function(){return this.bubbleContents_};goog.ui.editor.Bubble.prototype.getContainerElement=function(){return this.bubbleContainer_};goog.ui.editor.Bubble.prototype.getEventHandler=function(){return this.eventHandler_};goog.ui.editor.Bubble.prototype.handleWindowResize_=function(){this.isVisible()&&this.reposition()};goog.ui.editor.Bubble.prototype.hasPanelOfType=function(b){return goog.object.some(this.panels_,function(a){return a.type==b})};goog.ui.editor.Bubble.prototype.addPanel=function(j,i,p,o,n){var m=goog.string.createUniqueString();i=new goog.ui.editor.Bubble.Panel_(this.dom_,m,j,i,p,!n);this.panels_[m]=i;var l;p=0;for(n=this.bubbleContents_.childNodes.length-1;p<n;p++){var k=this.bubbleContents_.childNodes[p];if(this.panels_[k.id].type>j){l=k;break}}goog.dom.insertSiblingBefore(i.element,l||this.bubbleContents_.lastChild);o(i.getContentElement());goog.editor.style.makeUnselectable(i.element,this.eventHandler_);j=goog.object.getCount(this.panels_);1==j?this.openBubble_():2==j&&goog.dom.classes.add(this.bubbleContainer_,"tr_multi_bubble");this.reposition();return m};goog.ui.editor.Bubble.prototype.removePanel=function(b){goog.dom.removeNode(this.panels_[b].element);delete this.panels_[b];b=goog.object.getCount(this.panels_);1>=b&&goog.dom.classes.remove(this.bubbleContainer_,"tr_multi_bubble");0==b?this.closeBubble_():this.reposition()};goog.ui.editor.Bubble.prototype.openBubble_=function(){this.eventHandler_.listen(this.closeBox_,goog.events.EventType.CLICK,this.closeBubble_).listen(this.viewPortSizeMonitor_,goog.events.EventType.RESIZE,this.handleWindowResize_).listen(this.popup_,goog.ui.PopupBase.EventType.HIDE,this.handlePopupHide);this.popup_.setVisible(!0);this.reposition()};goog.ui.editor.Bubble.prototype.closeBubble_=function(){this.popup_.setVisible(!1)};goog.ui.editor.Bubble.prototype.handlePopupHide=function(){for(var b in this.panels_){goog.dom.removeNode(this.panels_[b].element)}this.panels_={};goog.dom.classes.remove(this.bubbleContainer_,"tr_multi_bubble");this.eventHandler_.removeAll();this.dispatchEvent(goog.ui.Component.EventType.HIDE)};goog.ui.editor.Bubble.prototype.isVisible=function(){return this.popup_.isVisible()};goog.ui.editor.Bubble.VERTICAL_CLEARANCE_=goog.userAgent.IE?4:2;goog.ui.editor.Bubble.MARGIN_BOX_=new goog.math.Box(goog.ui.editor.Bubble.VERTICAL_CLEARANCE_,0,goog.ui.editor.Bubble.VERTICAL_CLEARANCE_,0);goog.ui.editor.Bubble.prototype.reposition=function(){var f=null,e=!0,h;for(h in this.panels_){var g=this.panels_[h],f=g.targetElement,e=e&&g.preferBottomPosition}h=goog.positioning.OverflowStatus.FAILED;f=goog.style.isRightToLeft(this.bubbleContainer_)!=goog.style.isRightToLeft(f);e&&(h=this.positionAtAnchor_(f?goog.positioning.Corner.BOTTOM_END:goog.positioning.Corner.BOTTOM_START,goog.positioning.Corner.TOP_START,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y));h&goog.positioning.OverflowStatus.FAILED&&(h=this.positionAtAnchor_(f?goog.positioning.Corner.TOP_END:goog.positioning.Corner.TOP_START,goog.positioning.Corner.BOTTOM_START,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y));h&goog.positioning.OverflowStatus.FAILED&&(h=this.positionAtAnchor_(f?goog.positioning.Corner.BOTTOM_END:goog.positioning.Corner.BOTTOM_START,goog.positioning.Corner.TOP_START,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y),h&goog.positioning.OverflowStatus.FAILED&&this.logger.warning("reposition(): positionAtAnchor() failed with "+h))};goog.ui.editor.Bubble.prototype.positionAtAnchor_=function(h,g,l){var k=null,j;for(j in this.panels_){var i=this.panels_[j].targetElement;if(!k||goog.dom.contains(i,k)){k=this.panels_[j].targetElement}}return goog.positioning.positionAtAnchor(k,h,this.bubbleContainer_,g,null,goog.ui.editor.Bubble.MARGIN_BOX_,l)};goog.ui.editor.Bubble.Panel_=function(h,g,l,k,j,i){this.type=l;this.targetElement=j;this.preferBottomPosition=i;this.element=h.createDom(goog.dom.TagName.DIV,{className:"tr_bubble_panel",id:g},h.createDom(goog.dom.TagName.DIV,{className:"tr_bubble_panel_title"},k+":"),h.createDom(goog.dom.TagName.DIV,{className:"tr_bubble_panel_content"}))};goog.ui.editor.Bubble.Panel_.prototype.getContentElement=function(){return this.element.lastChild};goog.editor.plugins.AbstractBubblePlugin=function(){goog.editor.Plugin.call(this);this.eventRegister=new goog.events.EventHandler(this)};goog.inherits(goog.editor.plugins.AbstractBubblePlugin,goog.editor.Plugin);goog.editor.plugins.AbstractBubblePlugin.OPTION_LINK_CLASSNAME_="tr_option-link";goog.editor.plugins.AbstractBubblePlugin.LINK_CLASSNAME_="tr_bubble_link";goog.editor.plugins.AbstractBubblePlugin.DASH_NBSP_STRING=goog.string.Unicode.NBSP+"-"+goog.string.Unicode.NBSP;goog.editor.plugins.AbstractBubblePlugin.defaultBubbleFactory_=function(d,c){return new goog.ui.editor.Bubble(d,c)};goog.editor.plugins.AbstractBubblePlugin.bubbleFactory_=goog.editor.plugins.AbstractBubblePlugin.defaultBubbleFactory_;goog.editor.plugins.AbstractBubblePlugin.setBubbleFactory=function(b){goog.editor.plugins.AbstractBubblePlugin.bubbleFactory_=b};goog.editor.plugins.AbstractBubblePlugin.bubbleMap_={};goog.editor.plugins.AbstractBubblePlugin.prototype.panelId_=null;goog.editor.plugins.AbstractBubblePlugin.prototype.keyboardNavigationEnabled_=!1;goog.editor.plugins.AbstractBubblePlugin.prototype.enableKeyboardNavigation=function(b){this.keyboardNavigationEnabled_=b};goog.editor.plugins.AbstractBubblePlugin.prototype.setBubbleParent=function(b){this.bubbleParent_=b};goog.editor.plugins.AbstractBubblePlugin.prototype.getBubbleDom=function(){return this.dom_};goog.editor.plugins.AbstractBubblePlugin.prototype.getTrogClassId=goog.functions.constant("AbstractBubblePlugin");goog.editor.plugins.AbstractBubblePlugin.prototype.getTargetElement=function(){return this.targetElement_};goog.editor.plugins.AbstractBubblePlugin.prototype.handleKeyUp=function(){this.isVisible()&&this.handleSelectionChange();return !1};goog.editor.plugins.AbstractBubblePlugin.prototype.handleSelectionChange=function(j,i){var p;if(j){p=j.target}else{if(i){p=i}else{var o=this.getFieldObject().getRange();if(o){var n=o.getStartNode(),m=o.getEndNode(),l=o.getStartOffset(),k=o.getEndOffset();goog.userAgent.IE&&(o.isCollapsed()&&n!=m)&&(o=goog.dom.Range.createCaret(n,l));n.nodeType==goog.dom.NodeType.ELEMENT&&(n==m&&l==k-1)&&(n=n.childNodes[l],n.nodeType==goog.dom.NodeType.ELEMENT&&(p=n))}p=p||o&&o.getContainerElement()}}return this.handleSelectionChangeInternal(p)};goog.editor.plugins.AbstractBubblePlugin.prototype.handleSelectionChangeInternal=function(b){if(b&&(b=this.getBubbleTargetFromSelection(b))){if(b!=this.targetElement_||!this.panelId_){this.panelId_&&this.closeBubble(),this.createBubble(b)}return !1}this.panelId_&&this.closeBubble();return !1};goog.editor.plugins.AbstractBubblePlugin.prototype.disable=function(d){if(d.isUneditable()){var c=goog.editor.plugins.AbstractBubblePlugin.bubbleMap_[d.id];c&&(c.dispose(),delete goog.editor.plugins.AbstractBubblePlugin.bubbleMap_[d.id])}};goog.editor.plugins.AbstractBubblePlugin.prototype.getSharedBubble_=function(){var d=this.bubbleParent_||this.getFieldObject().getAppWindow().document.body;this.dom_=goog.dom.getDomHelper(d);var c=goog.editor.plugins.AbstractBubblePlugin.bubbleMap_[this.getFieldObject().id];c||(c=goog.editor.plugins.AbstractBubblePlugin.bubbleFactory_.call(null,d,this.getFieldObject().getBaseZindex()),goog.editor.plugins.AbstractBubblePlugin.bubbleMap_[this.getFieldObject().id]=c);return c};goog.editor.plugins.AbstractBubblePlugin.prototype.createBubble=function(d){var c=this.getSharedBubble_();c.hasPanelOfType(this.getBubbleType())||(this.targetElement_=d,this.panelId_=c.addPanel(this.getBubbleType(),this.getBubbleTitle(),d,goog.bind(this.createBubbleContents,this),this.shouldPreferBubbleAboveElement()),this.eventRegister.listen(c,goog.ui.Component.EventType.HIDE,this.handlePanelClosed_),this.onShow(),this.keyboardNavigationEnabled_&&this.eventRegister.listen(c.getContentElement(),goog.events.EventType.KEYDOWN,this.onBubbleKey_))};goog.editor.plugins.AbstractBubblePlugin.prototype.getBubbleType=function(){return""};goog.editor.plugins.AbstractBubblePlugin.prototype.getBubbleTitle=function(){return""};goog.editor.plugins.AbstractBubblePlugin.prototype.shouldPreferBubbleAboveElement=goog.functions.FALSE;goog.editor.plugins.AbstractBubblePlugin.prototype.registerClickHandler=function(d,c){this.registerActionHandler(d,c)};goog.editor.plugins.AbstractBubblePlugin.prototype.registerActionHandler=function(d,c){this.eventRegister.listenWithWrapper(d,goog.events.actionEventWrapper,c)};goog.editor.plugins.AbstractBubblePlugin.prototype.closeBubble=function(){this.panelId_&&(this.getSharedBubble_().removePanel(this.panelId_),this.handlePanelClosed_())};goog.editor.plugins.AbstractBubblePlugin.prototype.onShow=goog.nullFunction;goog.editor.plugins.AbstractBubblePlugin.prototype.handlePanelClosed_=function(){this.panelId_=this.targetElement_=null;this.eventRegister.removeAll()};goog.editor.plugins.AbstractBubblePlugin.prototype.handleKeyDown=function(d){if(this.keyboardNavigationEnabled_&&this.isVisible()&&d.keyCode==goog.events.KeyCodes.TAB&&!d.shiftKey){var c=this.getSharedBubble_().getContentElement();if(c=goog.dom.getElementByClass(goog.editor.plugins.AbstractBubblePlugin.LINK_CLASSNAME_,c)){return c.focus(),d.preventDefault(),!0}}return !1};goog.editor.plugins.AbstractBubblePlugin.prototype.onBubbleKey_=function(d){if(this.isVisible()&&d.keyCode==goog.events.KeyCodes.TAB){var c=this.getSharedBubble_().getContentElement(),c=goog.dom.getElementsByClass(goog.editor.plugins.AbstractBubblePlugin.LINK_CLASSNAME_,c);if(d.shiftKey?c[0]==d.target:c.length&&c[c.length-1]==d.target){this.getFieldObject().focus(),d.preventDefault()}}};goog.editor.plugins.AbstractBubblePlugin.prototype.isVisible=function(){return !!this.panelId_};goog.editor.plugins.AbstractBubblePlugin.prototype.reposition=function(){var b=this.getSharedBubble_();b&&b.reposition()};goog.editor.plugins.AbstractBubblePlugin.prototype.createLinkOption=function(b){return this.dom_.createDom(goog.dom.TagName.SPAN,{id:b,className:goog.editor.plugins.AbstractBubblePlugin.OPTION_LINK_CLASSNAME_},this.dom_.createTextNode(goog.editor.plugins.AbstractBubblePlugin.DASH_NBSP_STRING))};goog.editor.plugins.AbstractBubblePlugin.prototype.createLink=function(f,e,h,g){f=this.createLinkHelper(f,e,!1,g);h&&this.registerActionHandler(f,h);return f};goog.editor.plugins.AbstractBubblePlugin.prototype.createLinkHelper=function(f,e,h,g){e=this.dom_.createDom(h?goog.dom.TagName.A:goog.dom.TagName.SPAN,{className:goog.editor.plugins.AbstractBubblePlugin.LINK_CLASSNAME_},e);this.keyboardNavigationEnabled_&&e.setAttribute("tabindex",0);e.setAttribute("role","link");this.setupLink(e,f,g);goog.editor.style.makeUnselectable(e,this.eventRegister);return e};goog.editor.plugins.AbstractBubblePlugin.prototype.setupLink=function(e,d,f){f?f.appendChild(e):(f=this.dom_.getElement(d))&&goog.dom.replaceNode(e,f);e.id=d};goog.editor.plugins.LinkBubble=function(b){goog.editor.plugins.AbstractBubblePlugin.call(this);this.extraActions_=goog.array.toArray(arguments);this.actionSpans_=[];this.safeToOpenSchemes_=["http","https","ftp"]};goog.inherits(goog.editor.plugins.LinkBubble,goog.editor.plugins.AbstractBubblePlugin);goog.editor.plugins.LinkBubble.LINK_TEXT_ID_="tr_link-text";goog.editor.plugins.LinkBubble.TEST_LINK_SPAN_ID_="tr_test-link-span";goog.editor.plugins.LinkBubble.TEST_LINK_ID_="tr_test-link";goog.editor.plugins.LinkBubble.CHANGE_LINK_SPAN_ID_="tr_change-link-span";goog.editor.plugins.LinkBubble.CHANGE_LINK_ID_="tr_change-link";goog.editor.plugins.LinkBubble.DELETE_LINK_SPAN_ID_="tr_delete-link-span";goog.editor.plugins.LinkBubble.DELETE_LINK_ID_="tr_delete-link";goog.editor.plugins.LinkBubble.LINK_DIV_ID_="tr_link-div";var MSG_LINK_BUBBLE_TEST_LINK=goog.getMsg("Go to link: "),MSG_LINK_BUBBLE_CHANGE=goog.getMsg("Change"),MSG_LINK_BUBBLE_REMOVE=goog.getMsg("Remove");goog.editor.plugins.LinkBubble.prototype.stopReferrerLeaks_=!1;goog.editor.plugins.LinkBubble.prototype.blockOpeningUnsafeSchemes_=!0;goog.editor.plugins.LinkBubble.prototype.stopReferrerLeaks=function(){this.stopReferrerLeaks_=!0};goog.editor.plugins.LinkBubble.prototype.setBlockOpeningUnsafeSchemes=function(b){this.blockOpeningUnsafeSchemes_=b};goog.editor.plugins.LinkBubble.prototype.setSafeToOpenSchemes=function(b){this.safeToOpenSchemes_=b};goog.editor.plugins.LinkBubble.prototype.getTrogClassId=function(){return"LinkBubble"};goog.editor.plugins.LinkBubble.prototype.isSupportedCommand=function(b){return b==goog.editor.Command.UPDATE_LINK_BUBBLE};goog.editor.plugins.LinkBubble.prototype.execCommandInternal=function(b){b==goog.editor.Command.UPDATE_LINK_BUBBLE&&this.updateLink_()};goog.editor.plugins.LinkBubble.prototype.updateLink_=function(){var b=this.getTargetElement();this.closeBubble();this.createBubble(b)};goog.editor.plugins.LinkBubble.prototype.getBubbleTargetFromSelection=function(d){d=goog.dom.getAncestorByTagNameAndClass(d,goog.dom.TagName.A);if(!d){var c=this.getFieldObject().getRange();c&&c.isCollapsed()&&0==c.getStartOffset()&&(c=c.getStartNode().previousSibling)&&c.tagName==goog.dom.TagName.A&&(d=c)}return d};goog.editor.plugins.LinkBubble.prototype.setTestLinkUrlFn=function(b){this.testLinkUrlFn_=b};goog.editor.plugins.LinkBubble.prototype.getTargetUrl=function(){return this.getTargetElement().getAttribute("href")||""};goog.editor.plugins.LinkBubble.prototype.getBubbleType=function(){return goog.dom.TagName.A};goog.editor.plugins.LinkBubble.prototype.getBubbleTitle=function(){return goog.ui.editor.messages.MSG_LINK_CAPTION};goog.editor.plugins.LinkBubble.prototype.createBubbleContents=function(i){var h=this.getLinkToTextObj_(),n=h.valid?"black":"red",m=this.shouldOpenUrl(h.linkText);if(goog.editor.Link.isLikelyEmailAddress(h.linkText)||!h.valid||!m){n=this.dom_.createDom(goog.dom.TagName.SPAN,{id:goog.editor.plugins.LinkBubble.LINK_TEXT_ID_,style:"color:"+n},this.dom_.createTextNode(h.linkText))}else{var l=this.dom_.createDom(goog.dom.TagName.SPAN,{id:goog.editor.plugins.LinkBubble.TEST_LINK_SPAN_ID_},MSG_LINK_BUBBLE_TEST_LINK),n=this.dom_.createDom(goog.dom.TagName.SPAN,{id:goog.editor.plugins.LinkBubble.LINK_TEXT_ID_,style:"color:"+n},""),h=goog.string.truncateMiddle(h.linkText,48);this.createLink(goog.editor.plugins.LinkBubble.TEST_LINK_ID_,this.dom_.createTextNode(h).data,this.testLink,n)}m=this.createLinkOption(goog.editor.plugins.LinkBubble.CHANGE_LINK_SPAN_ID_);this.createLink(goog.editor.plugins.LinkBubble.CHANGE_LINK_ID_,MSG_LINK_BUBBLE_CHANGE,this.showLinkDialog_,m);this.actionSpans_=[];for(h=0;h<this.extraActions_.length;h++){var k=this.extraActions_[h],j=this.createLinkOption(k.spanId_);this.actionSpans_.push(j);this.createLink(k.linkId_,k.message_,function(){k.actionFn_(this.getTargetUrl())},j)}j=this.createLinkOption(goog.editor.plugins.LinkBubble.DELETE_LINK_SPAN_ID_);this.createLink(goog.editor.plugins.LinkBubble.DELETE_LINK_ID_,MSG_LINK_BUBBLE_REMOVE,this.deleteLink_,j);this.onShow();l=this.dom_.createDom(goog.dom.TagName.DIV,{id:goog.editor.plugins.LinkBubble.LINK_DIV_ID_},l||"",n,m);for(h=0;h<this.actionSpans_.length;h++){l.appendChild(this.actionSpans_[h])}l.appendChild(j);goog.dom.appendChild(i,l)};goog.editor.plugins.LinkBubble.prototype.testLink=function(){goog.window.open(this.getTestLinkAction_(),{target:"_blank",noreferrer:this.stopReferrerLeaks_},this.getFieldObject().getAppWindow())};goog.editor.plugins.LinkBubble.prototype.isInvalidUrl=goog.functions.FALSE;goog.editor.plugins.LinkBubble.prototype.getLinkToTextObj_=function(){var d,c=this.getTargetUrl();this.isInvalidUrl(c)?(c=goog.getMsg("invalid url"),d=!0):goog.editor.Link.isMailto(c)&&(c=c.substring(7));return{linkText:c,valid:!d}};goog.editor.plugins.LinkBubble.prototype.showLinkDialog_=function(b){b.preventDefault();this.getFieldObject().execCommand(goog.editor.Command.MODAL_LINK_EDITOR,new goog.editor.Link(this.getTargetElement(),!1));this.closeBubble()};goog.editor.plugins.LinkBubble.prototype.deleteLink_=function(){this.getFieldObject().dispatchBeforeChange();var d=this.getTargetElement(),c=d.lastChild;goog.dom.flattenElement(d);goog.editor.range.placeCursorNextTo(c,!1);this.closeBubble();this.getFieldObject().dispatchChange();this.getFieldObject().focus()};goog.editor.plugins.LinkBubble.prototype.onShow=function(){if(this.dom_.getElement(goog.editor.plugins.LinkBubble.LINK_DIV_ID_)){var e=this.dom_.getElement(goog.editor.plugins.LinkBubble.TEST_LINK_SPAN_ID_);if(e){var d=this.getTargetUrl();goog.style.showElement(e,!goog.editor.Link.isMailto(d))}for(e=0;e<this.extraActions_.length;e++){var d=this.extraActions_[e],f=this.dom_.getElement(d.spanId_);f&&goog.style.showElement(f,d.toShowFn_(this.getTargetUrl()))}}};goog.editor.plugins.LinkBubble.prototype.getTestLinkAction_=function(){var b=this.getTargetUrl();return this.testLinkUrlFn_?this.testLinkUrlFn_(b):b};goog.editor.plugins.LinkBubble.prototype.shouldOpenUrl=function(b){return !this.blockOpeningUnsafeSchemes_||this.isSafeSchemeToOpen_(b)};goog.editor.plugins.LinkBubble.prototype.isSafeSchemeToOpen_=function(b){b=goog.uri.utils.getScheme(b)||"http";return goog.array.contains(this.safeToOpenSchemes_,b.toLowerCase())};goog.editor.plugins.LinkBubble.Action=function(g,f,j,i,h){this.spanId_=g;this.linkId_=f;this.message_=j;this.toShowFn_=i;this.actionFn_=h};goog.dom.NodeOffset=function(f,e){goog.Disposable.call(this);this.offsetStack_=[];for(this.nameStack_=[];f&&f.nodeName!=goog.dom.TagName.BODY&&f!=e;){for(var h=0,g=f.previousSibling;g;){g=g.previousSibling,++h}this.offsetStack_.unshift(h);this.nameStack_.unshift(f.nodeName);f=f.parentNode}};goog.inherits(goog.dom.NodeOffset,goog.Disposable);goog.dom.NodeOffset.prototype.toString=function(){for(var e=[],d,f=0;d=this.nameStack_[f];f++){e.push(this.offsetStack_[f]+","+d)}return e.join("\n")};goog.dom.NodeOffset.prototype.findTargetNode=function(e){for(var d=e,f=0;e=this.nameStack_[f];++f){if(d=d.childNodes[this.offsetStack_[f]],!d||d.nodeName!=e){return null}}return d};goog.dom.NodeOffset.prototype.disposeInternal=function(){delete this.offsetStack_;delete this.nameStack_};goog.editor.plugins.Blockquote=function(d,c){goog.editor.Plugin.call(this);this.requiresClassNameToSplit_=d;this.className_=c||"tr_bq"};goog.inherits(goog.editor.plugins.Blockquote,goog.editor.Plugin);goog.editor.plugins.Blockquote.SPLIT_COMMAND="+splitBlockquote";goog.editor.plugins.Blockquote.CLASS_ID="Blockquote";goog.editor.plugins.Blockquote.prototype.logger=goog.debug.Logger.getLogger("goog.editor.plugins.Blockquote");goog.editor.plugins.Blockquote.prototype.getTrogClassId=function(){return goog.editor.plugins.Blockquote.CLASS_ID};goog.editor.plugins.Blockquote.prototype.isSilentCommand=goog.functions.TRUE;goog.editor.plugins.Blockquote.isBlockquote=function(f,e,h,g){if(f.tagName!=goog.dom.TagName.BLOCKQUOTE){return !1}if(!h){return e}f=goog.dom.classes.has(f,g);return e?f:!f};goog.editor.plugins.Blockquote.prototype.isSplittableBlockquote=function(b){return b.tagName!=goog.dom.TagName.BLOCKQUOTE?!1:!this.requiresClassNameToSplit_?!0:goog.dom.classes.has(b,this.className_)};goog.editor.plugins.Blockquote.prototype.isSetupBlockquote=function(b){return b.tagName==goog.dom.TagName.BLOCKQUOTE&&goog.dom.classes.has(b,this.className_)};goog.editor.plugins.Blockquote.prototype.isUnsetupBlockquote=function(b){return b.tagName==goog.dom.TagName.BLOCKQUOTE&&!this.isSetupBlockquote(b)};goog.editor.plugins.Blockquote.prototype.getBlockquoteClassName=function(){return this.className_};goog.editor.plugins.Blockquote.findAndRemoveSingleChildAncestor_=function(e,d){var f=goog.editor.node.findHighestMatchingAncestor(e,function(b){return b!=d&&1==b.childNodes.length});f||(f=e);goog.dom.removeNode(f)};goog.editor.plugins.Blockquote.removeAllWhiteSpaceNodes_=function(d){for(var c=0;c<d.length;++c){goog.editor.node.isEmpty(d[c],!0)&&goog.dom.removeNode(d[c])}};goog.editor.plugins.Blockquote.prototype.isSupportedCommand=function(b){return b==goog.editor.plugins.Blockquote.SPLIT_COMMAND};goog.editor.plugins.Blockquote.prototype.execCommandInternal=function(d,c){if(d==goog.editor.plugins.Blockquote.SPLIT_COMMAND&&c&&(this.className_||!this.requiresClassNameToSplit_)){return goog.editor.BrowserFeature.HAS_W3C_RANGES?this.splitQuotedBlockW3C_(c):this.splitQuotedBlockIE_(c)}};goog.editor.plugins.Blockquote.prototype.splitQuotedBlockW3C_=function(h){var g=h.node,l=goog.editor.node.findTopMostEditableAncestor(g.parentNode,goog.bind(this.isSplittableBlockquote,this)),k,j,i=!1;l?g.nodeType==goog.dom.NodeType.TEXT?h.offset==g.length?(k=g.nextSibling)&&k.tagName==goog.dom.TagName.BR?(g=k,k=k.nextSibling):k=j=g.splitText(h.offset):k=g.splitText(h.offset):g.tagName==goog.dom.TagName.BR?k=g.nextSibling:i=!0:this.isSetupBlockquote(g)&&(l=g,i=!0);i&&(g=this.insertEmptyTextNodeBeforeRange_(),k=this.insertEmptyTextNodeBeforeRange_());if(!l){return !1}k=goog.editor.node.splitDomTreeAt(g,k,l);goog.dom.insertSiblingAfter(k,l);h=this.getFieldDomHelper();g=this.getFieldObject().queryCommandValue(goog.editor.Command.DEFAULT_TAG)||goog.dom.TagName.DIV;g=h.createElement(g);g.innerHTML="&nbsp;";l.parentNode.insertBefore(g,k);h.getWindow().getSelection().collapse(g,0);j&&goog.editor.plugins.Blockquote.findAndRemoveSingleChildAncestor_(j,k);goog.editor.plugins.Blockquote.removeAllWhiteSpaceNodes_([l,k]);return !0};goog.editor.plugins.Blockquote.prototype.insertEmptyTextNodeBeforeRange_=function(){var d=this.getFieldObject().getRange(),c=this.getFieldDomHelper().createTextNode("");d.insertNode(c,!0);return c};goog.editor.plugins.Blockquote.prototype.splitQuotedBlockIE_=function(h){var g=this.getFieldDomHelper(),l=goog.editor.node.findTopMostEditableAncestor(h.parentNode,goog.bind(this.isSplittableBlockquote,this));if(!l){return !1}var k=h.cloneNode(!1);h.nextSibling&&h.nextSibling.tagName==goog.dom.TagName.BR&&(h=h.nextSibling);var j=goog.editor.node.splitDomTreeAt(h,k,l);goog.dom.insertSiblingAfter(j,l);var i=this.getFieldObject().queryCommandValue(goog.editor.Command.DEFAULT_TAG)||goog.dom.TagName.DIV,i=g.createElement(i);l.parentNode.insertBefore(i,j);i.innerHTML="&nbsp;";g=g.getDocument().selection.createRange();g.moveToElementText(h);g.move("character",2);g.select();i.innerHTML="";g.pasteHTML("");goog.editor.plugins.Blockquote.findAndRemoveSingleChildAncestor_(k,j);goog.editor.plugins.Blockquote.removeAllWhiteSpaceNodes_([l,j]);return !0};goog.editor.plugins.EnterHandler=function(){goog.editor.Plugin.call(this)};goog.inherits(goog.editor.plugins.EnterHandler,goog.editor.Plugin);goog.editor.plugins.EnterHandler.prototype.tag=goog.dom.TagName.DIV;goog.editor.plugins.EnterHandler.prototype.getTrogClassId=function(){return"EnterHandler"};goog.editor.plugins.EnterHandler.prototype.enable=function(b){goog.editor.plugins.EnterHandler.superClass_.enable.call(this,b);goog.editor.BrowserFeature.SUPPORTS_OPERA_DEFAULTBLOCK_COMMAND&&(this.tag==goog.dom.TagName.P||this.tag==goog.dom.TagName.DIV)&&this.getFieldDomHelper().getDocument().execCommand("opera-defaultBlock",!1,this.tag)};goog.editor.plugins.EnterHandler.prototype.prepareContentsHtml=function(b){return !b||goog.string.isBreakingWhitespace(b)?goog.editor.BrowserFeature.COLLAPSES_EMPTY_NODES?this.getNonCollapsingBlankHtml():"":b};goog.editor.plugins.EnterHandler.prototype.getNonCollapsingBlankHtml=goog.functions.constant("<br>");goog.editor.plugins.EnterHandler.prototype.handleBackspaceInternal=function(f,e){var h=this.getFieldObject().getElement(),g=e&&e.getStartNode();h.firstChild==g&&goog.editor.node.isEmpty(g)&&(f.preventDefault(),f.stopPropagation())};goog.editor.plugins.EnterHandler.prototype.processParagraphTagsInternal=function(g,f){if(goog.userAgent.IE||goog.userAgent.OPERA){this.ensureBlockIeOpera(goog.dom.TagName.DIV)}else{if(!f&&goog.userAgent.WEBKIT){var j=this.getFieldObject().getRange();if(j&&goog.editor.plugins.EnterHandler.isDirectlyInBlockquote(j.getContainerElement())){var i=this.getFieldDomHelper(),h=i.createElement(goog.dom.TagName.BR);j.insertNode(h,!0);goog.editor.node.isBlockTag(h.parentNode)&&!goog.editor.node.skipEmptyTextNodes(h.nextSibling)&&goog.dom.insertSiblingBefore(i.createElement(goog.dom.TagName.BR),h);goog.editor.range.placeCursorNextTo(h,!1);g.preventDefault()}}}};goog.editor.plugins.EnterHandler.isDirectlyInBlockquote=function(b){for(;b;b=b.parentNode){if(goog.editor.node.isBlockTag(b)){return b.tagName==goog.dom.TagName.BLOCKQUOTE}}return !1};goog.editor.plugins.EnterHandler.prototype.handleDeleteGecko=function(b){this.deleteBrGecko(b)};goog.editor.plugins.EnterHandler.prototype.deleteBrGecko=function(g){var f=this.getFieldObject().getRange();if(f.isCollapsed()){var j=f.getEndNode();if(j.nodeType==goog.dom.NodeType.ELEMENT&&(f=j.childNodes[f.getEndOffset()])&&f.tagName==goog.dom.TagName.BR){var i=goog.editor.node.getPreviousSibling(f),h=f.nextSibling;j.removeChild(f);g.preventDefault();h&&goog.editor.node.isBlockTag(h)&&(i&&!(i.tagName==goog.dom.TagName.BR||goog.editor.node.isBlockTag(i))?goog.dom.Range.createCaret(i,goog.editor.node.getLength(i)).select():(g=goog.editor.node.getLeftMostLeaf(h),goog.dom.Range.createCaret(g,0).select()))}}};goog.editor.plugins.EnterHandler.prototype.handleKeyPress=function(e){if(goog.userAgent.GECKO&&this.getFieldObject().inModalMode()){return !1}if(e.keyCode==goog.events.KeyCodes.BACKSPACE){this.handleBackspaceInternal(e,this.getFieldObject().getRange())}else{if(e.keyCode==goog.events.KeyCodes.ENTER){if(goog.userAgent.GECKO){e.shiftKey||this.handleEnterGecko_(e)}else{this.getFieldObject().dispatchBeforeChange();var d=this.deleteCursorSelection_(),f=!!this.getFieldObject().execCommand(goog.editor.plugins.Blockquote.SPLIT_COMMAND,d);f&&(e.preventDefault(),e.stopPropagation());this.releasePositionObject_(d);goog.userAgent.WEBKIT&&this.handleEnterWebkitInternal(e);this.processParagraphTagsInternal(e,f);this.getFieldObject().dispatchChange()}}else{goog.userAgent.GECKO&&e.keyCode==goog.events.KeyCodes.DELETE&&this.handleDeleteGecko(e)}}return !1};goog.editor.plugins.EnterHandler.prototype.handleKeyUp=function(b){if(goog.userAgent.GECKO&&this.getFieldObject().inModalMode()){return !1}this.handleKeyUpInternal(b);return !1};goog.editor.plugins.EnterHandler.prototype.handleKeyUpInternal=function(b){(goog.userAgent.IE||goog.userAgent.OPERA)&&b.keyCode==goog.events.KeyCodes.ENTER&&this.ensureBlockIeOpera(goog.dom.TagName.DIV,!0)};goog.editor.plugins.EnterHandler.prototype.handleEnterGecko_=function(g){var f=this.getFieldObject().getRange(),j=!f||f.isCollapsed(),i=this.deleteCursorSelection_(),h=this.getFieldObject().execCommand(goog.editor.plugins.Blockquote.SPLIT_COMMAND,i);h&&(g.preventDefault(),g.stopPropagation());this.releasePositionObject_(i);h||this.handleEnterAtCursorGeckoInternal(g,j,f)};goog.editor.plugins.EnterHandler.prototype.handleEnterWebkitInternal=goog.nullFunction;goog.editor.plugins.EnterHandler.prototype.handleEnterAtCursorGeckoInternal=goog.nullFunction;goog.editor.plugins.EnterHandler.DO_NOT_ENSURE_BLOCK_NODES_=goog.object.createSet(goog.dom.TagName.LI,goog.dom.TagName.DIV,goog.dom.TagName.H1,goog.dom.TagName.H2,goog.dom.TagName.H3,goog.dom.TagName.H4,goog.dom.TagName.H5,goog.dom.TagName.H6);goog.editor.plugins.EnterHandler.isBrElem=function(b){return goog.editor.node.isEmpty(b)&&1==b.getElementsByTagName(goog.dom.TagName.BR).length};goog.editor.plugins.EnterHandler.prototype.ensureBlockIeOpera=function(j,i){for(var p=this.getFieldObject().getRange(),o=p.getContainer(),n=this.getFieldObject().getElement(),m;o&&o!=n;){var l=o.nodeName;if(l==j||goog.editor.plugins.EnterHandler.DO_NOT_ENSURE_BLOCK_NODES_[l]&&(!i||!goog.editor.plugins.EnterHandler.isBrElem(o))){if(goog.userAgent.OPERA&&m){l==j&&(m==o.lastChild&&goog.editor.node.isEmpty(m))&&(goog.dom.insertSiblingAfter(m,o),goog.dom.Range.createFromNodeContents(m).select());break}return}goog.userAgent.OPERA&&(i&&l==goog.dom.TagName.P&&l!=j)&&(m=o);o=o.parentNode}if(goog.userAgent.IE&&!goog.userAgent.isVersion(9)){var k=!1,p=p.getBrowserRangeObject(),o=p.duplicate();o.moveEnd("character",1);if(o.text.length&&(k=o.parentElement(),o=o.duplicate(),o.collapse(!1),o=o.parentElement(),k=k!=o&&o!=p.parentElement())){p.move("character",-1),p.select()}}this.getFieldObject().getEditableDomHelper().getDocument().execCommand("FormatBlock",!1,"<"+j+">");k&&(p.move("character",1),p.select())};goog.editor.plugins.EnterHandler.prototype.deleteCursorSelection_=function(){return goog.editor.BrowserFeature.HAS_W3C_RANGES?this.deleteCursorSelectionW3C_():this.deleteCursorSelectionIE_()};goog.editor.plugins.EnterHandler.prototype.releasePositionObject_=function(b){goog.editor.BrowserFeature.HAS_W3C_RANGES||b.removeNode(!0)};goog.editor.plugins.EnterHandler.prototype.deleteCursorSelectionIE_=function(){var e=this.getFieldDomHelper().getDocument(),d=e.selection.createRange(),f=goog.string.createUniqueString();d.pasteHTML('<span id="'+f+'"></span>');e=e.getElementById(f);e.id="";return e};goog.editor.plugins.EnterHandler.prototype.deleteCursorSelectionW3C_=function(){var f=this.getFieldObject().getRange();if(!f.isCollapsed()){var e=!0;if(goog.userAgent.OPERA){var h=f.getStartNode(),g=f.getStartOffset();h==f.getEndNode()&&(h.lastChild&&h.lastChild.tagName==goog.dom.TagName.BR&&g==h.childNodes.length-1)&&(e=!1)}e&&goog.editor.plugins.EnterHandler.deleteW3cRange_(f)}return goog.editor.range.getDeepEndPoint(f,!0)};goog.editor.plugins.EnterHandler.deleteW3cRange_=function(i){if(i&&!i.isCollapsed()){var h=!0,n=i.getContainerElement(),m=new goog.dom.NodeOffset(i.getStartNode(),n),l=i.getStartOffset(),k=goog.editor.plugins.EnterHandler.isInOneContainerW3c_(i),j=!k&&goog.editor.plugins.EnterHandler.isPartialEndW3c_(i);i.removeContents();(i=m.findTargetNode(n))?i=goog.dom.Range.createCaret(i,l):(i=goog.dom.Range.createCaret(n,n.childNodes.length),h=!1);i.select();k&&(k=goog.editor.style.getContainer(i.getStartNode()),goog.editor.node.isEmpty(k,!0)&&(h="&nbsp;",goog.userAgent.OPERA&&k.tagName==goog.dom.TagName.LI&&(h="<br>"),goog.editor.node.replaceInnerHtml(k,h),goog.editor.range.selectNodeStart(k.firstChild),h=!1));j&&(j=goog.editor.style.getContainer(i.getStartNode()),k=goog.editor.node.getNextSibling(j),j&&k&&(goog.dom.append(j,k.childNodes),goog.dom.removeNode(k)));h&&(i=goog.dom.Range.createCaret(m.findTargetNode(n),l),i.select())}return i};goog.editor.plugins.EnterHandler.isInOneContainerW3c_=function(e){var d=e.getStartNode();goog.editor.style.isContainer(d)&&(d=d.childNodes[e.getStartOffset()]||d);var d=goog.editor.style.getContainer(d),f=e.getEndNode();goog.editor.style.isContainer(f)&&(f=f.childNodes[e.getEndOffset()]||f);f=goog.editor.style.getContainer(f);return d==f};goog.editor.plugins.EnterHandler.isPartialEndW3c_=function(f){var e=f.getEndNode();f=f.getEndOffset();var h=e;if(goog.editor.style.isContainer(h)){var g=h.childNodes[f];if(!g||g.nodeType==goog.dom.NodeType.ELEMENT&&goog.editor.style.isContainer(g)){return !1}}for(g=goog.editor.style.getContainer(h);g!=h;){if(goog.editor.node.getNextSibling(h)){return !0}h=h.parentNode}return f!=goog.editor.node.getLength(e)};goog.editor.plugins.LoremIpsum=function(b){goog.editor.Plugin.call(this);this.message_=b};goog.inherits(goog.editor.plugins.LoremIpsum,goog.editor.Plugin);goog.editor.plugins.LoremIpsum.prototype.getTrogClassId=goog.functions.constant("LoremIpsum");goog.editor.plugins.LoremIpsum.prototype.activeOnUneditableFields=goog.functions.TRUE;goog.editor.plugins.LoremIpsum.prototype.usingLorem_=!1;goog.editor.plugins.LoremIpsum.prototype.queryCommandValue=function(b){return b==goog.editor.Command.USING_LOREM&&this.usingLorem_};goog.editor.plugins.LoremIpsum.prototype.execCommand=function(d,c){d==goog.editor.Command.CLEAR_LOREM?this.clearLorem_(!!c):d==goog.editor.Command.UPDATE_LOREM&&this.updateLorem_()};goog.editor.plugins.LoremIpsum.prototype.isSupportedCommand=function(b){return b==goog.editor.Command.CLEAR_LOREM||b==goog.editor.Command.UPDATE_LOREM||b==goog.editor.Command.USING_LOREM};goog.editor.plugins.LoremIpsum.prototype.updateLorem_=function(){var d=this.getFieldObject();if(!this.usingLorem_&&!d.inModalMode()&&goog.editor.Field.getActiveFieldId()!=d.id){var c=d.getElement();c||(c=d.getOriginalElement());goog.asserts.assert(c);goog.editor.node.isEmpty(c)&&(this.usingLorem_=!0,this.oldFontStyle_=c.style.fontStyle,c.style.fontStyle="italic",d.setHtml(!0,this.message_,!0))}};goog.editor.plugins.LoremIpsum.prototype.clearLorem_=function(e){var d=this.getFieldObject();if(this.usingLorem_&&!d.inModalMode()){var f=d.getElement();f||(f=d.getOriginalElement());goog.asserts.assert(f);this.usingLorem_=!1;f.style.fontStyle=this.oldFontStyle_;d.setHtml(!0,null,!0);e&&d.isLoaded()&&(goog.userAgent.WEBKIT?(goog.dom.getOwnerDocument(d.getElement()).body.focus(),d.focusAndPlaceCursorAtStart()):goog.userAgent.OPERA&&d.placeCursorAtStart())}};goog.editor.plugins.UndoRedoState=function(b){this.asynchronous_=b};goog.inherits(goog.editor.plugins.UndoRedoState,goog.events.EventTarget);goog.editor.plugins.UndoRedoState.ACTION_COMPLETED="action_completed";goog.editor.plugins.UndoRedoState.prototype.isAsynchronous=function(){return this.asynchronous_};goog.editor.plugins.UndoRedoManager=function(){goog.events.EventTarget.call(this);this.maxUndoDepth_=100;this.undoStack_=[];this.redoStack_=[];this.pendingActions_=[]};goog.inherits(goog.editor.plugins.UndoRedoManager,goog.events.EventTarget);goog.editor.plugins.UndoRedoManager.EventType={STATE_CHANGE:"state_change",STATE_ADDED:"state_added",BEFORE_UNDO:"before_undo",BEFORE_REDO:"before_redo"};goog.editor.plugins.UndoRedoManager.prototype.inProgressActionKey_=null;goog.editor.plugins.UndoRedoManager.prototype.setMaxUndoDepth=function(b){this.maxUndoDepth_=b};goog.editor.plugins.UndoRedoManager.prototype.addState=function(d){if(0==this.undoStack_.length||!d.equals(this.undoStack_[this.undoStack_.length-1])){this.undoStack_.push(d);this.undoStack_.length>this.maxUndoDepth_&&this.undoStack_.shift();var c=this.redoStack_.length;this.redoStack_.length=0;this.dispatchEvent({type:goog.editor.plugins.UndoRedoManager.EventType.STATE_ADDED,state:d});(1==this.undoStack_.length||c)&&this.dispatchStateChange_()}};goog.editor.plugins.UndoRedoManager.prototype.dispatchStateChange_=function(){this.dispatchEvent(goog.editor.plugins.UndoRedoManager.EventType.STATE_CHANGE)};goog.editor.plugins.UndoRedoManager.prototype.undo=function(){this.shiftState_(this.undoStack_,this.redoStack_)};goog.editor.plugins.UndoRedoManager.prototype.redo=function(){this.shiftState_(this.redoStack_,this.undoStack_)};goog.editor.plugins.UndoRedoManager.prototype.hasUndoState=function(){return 0<this.undoStack_.length};goog.editor.plugins.UndoRedoManager.prototype.hasRedoState=function(){return 0<this.redoStack_.length};goog.editor.plugins.UndoRedoManager.prototype.shiftState_=function(e,d){if(e.length){var f=e.pop();d.push(f);this.addAction_({type:e==this.undoStack_?goog.editor.plugins.UndoRedoManager.EventType.BEFORE_UNDO:goog.editor.plugins.UndoRedoManager.EventType.BEFORE_REDO,func:e==this.undoStack_?f.undo:f.redo,state:f});(0==e.length||1==d.length)&&this.dispatchStateChange_()}};goog.editor.plugins.UndoRedoManager.prototype.addAction_=function(b){this.pendingActions_.push(b);1==this.pendingActions_.length&&this.doAction_()};goog.editor.plugins.UndoRedoManager.prototype.doAction_=function(){if(!(this.inProgressActionKey_||0==this.pendingActions_.length)){var b=this.pendingActions_.shift();this.dispatchEvent({type:b.type,state:b.state})&&(b.state.isAsynchronous()?(this.inProgressActionKey_=goog.events.listen(b.state,goog.editor.plugins.UndoRedoState.ACTION_COMPLETED,this.finishAction_,!1,this),b.func.call(b.state)):(b.func.call(b.state),this.doAction_()))}};goog.editor.plugins.UndoRedoManager.prototype.finishAction_=function(){goog.events.unlistenByKey(this.inProgressActionKey_);this.inProgressActionKey_=null;this.doAction_()};goog.editor.plugins.UndoRedoManager.prototype.clearHistory=function(){if(0<this.undoStack_.length||0<this.redoStack_.length){this.undoStack_.length=0,this.redoStack_.length=0,this.dispatchStateChange_()}};goog.editor.plugins.UndoRedoManager.prototype.undoPeek=function(){return this.undoStack_[this.undoStack_.length-1]};goog.editor.plugins.UndoRedoManager.prototype.redoPeek=function(){return this.redoStack_[this.redoStack_.length-1]};goog.editor.plugins.UndoRedo=function(b){goog.editor.Plugin.call(this);this.setUndoRedoManager(b||new goog.editor.plugins.UndoRedoManager);this.eventHandlers_={};this.currentStates_={};this.initialFieldChange_=null;this.boundRestoreState_=goog.bind(this.restoreState,this)};goog.inherits(goog.editor.plugins.UndoRedo,goog.editor.Plugin);goog.editor.plugins.UndoRedo.prototype.logger=goog.debug.Logger.getLogger("goog.editor.plugins.UndoRedo");goog.editor.plugins.UndoRedo.prototype.inProgressUndo_=null;goog.editor.plugins.UndoRedo.COMMAND={UNDO:"+undo",REDO:"+redo"};goog.editor.plugins.UndoRedo.SUPPORTED_COMMANDS_=goog.object.transpose(goog.editor.plugins.UndoRedo.COMMAND);goog.editor.plugins.UndoRedo.prototype.setMaxUndoDepth=function(b){this.undoManager_.setMaxUndoDepth(b)};goog.editor.plugins.UndoRedo.prototype.setUndoRedoManager=function(b){this.managerStateChangeKey_&&goog.events.unlistenByKey(this.managerStateChangeKey_);this.undoManager_=b;this.managerStateChangeKey_=goog.events.listen(this.undoManager_,goog.editor.plugins.UndoRedoManager.EventType.STATE_CHANGE,this.dispatchCommandValueChange_,!1,this)};goog.editor.plugins.UndoRedo.prototype.isSupportedCommand=function(b){return b in goog.editor.plugins.UndoRedo.SUPPORTED_COMMANDS_};goog.editor.plugins.UndoRedo.prototype.unregisterFieldObject=function(b){this.disable(b);this.setFieldObject(null)};goog.editor.plugins.UndoRedo.prototype.getCurrentFieldObject=function(){return this.getFieldObject()};goog.editor.plugins.UndoRedo.prototype.getFieldObjectForHash=function(){return this.getFieldObject()};goog.editor.plugins.UndoRedo.prototype.getCurrentEventTarget=function(){return this.getFieldObject()};goog.editor.plugins.UndoRedo.prototype.enable=function(d){if(!this.isEnabled(d)){d.clearDelayedChange();var c=new goog.events.EventHandler(this);goog.editor.BrowserFeature.USE_MUTATION_EVENTS||c.listen(d,goog.editor.Field.EventType.BEFORECHANGE,this.handleBeforeChange_);c.listen(d,goog.editor.Field.EventType.DELAYEDCHANGE,this.handleDelayedChange_);c.listen(d,goog.editor.Field.EventType.BLUR,this.handleBlur_);this.eventHandlers_[d.getHashCode()]=c;this.updateCurrentState_(d)}};goog.editor.plugins.UndoRedo.prototype.disable=function(d){d.clearDelayedChange();var c=this.eventHandlers_[d.getHashCode()];c&&(c.dispose(),delete this.eventHandlers_[d.getHashCode()]);this.currentStates_[d.getHashCode()]&&delete this.currentStates_[d.getHashCode()]};goog.editor.plugins.UndoRedo.prototype.isEnabled=function(b){return !!this.eventHandlers_[b.getHashCode()]};goog.editor.plugins.UndoRedo.prototype.disposeInternal=function(){goog.editor.plugins.UndoRedo.superClass_.disposeInternal.call(this);for(var b in this.eventHandlers_){this.eventHandlers_[b].dispose(),delete this.eventHandlers_[b]}this.setFieldObject(null);this.undoManager_&&(this.undoManager_.dispose(),delete this.undoManager_)};goog.editor.plugins.UndoRedo.prototype.getTrogClassId=function(){return"UndoRedo"};goog.editor.plugins.UndoRedo.prototype.execCommand=function(b){b==goog.editor.plugins.UndoRedo.COMMAND.UNDO?this.undoManager_.undo():b==goog.editor.plugins.UndoRedo.COMMAND.REDO&&this.undoManager_.redo()};goog.editor.plugins.UndoRedo.prototype.queryCommandValue=function(d){var c=null;d==goog.editor.plugins.UndoRedo.COMMAND.UNDO?c=this.undoManager_.hasUndoState():d==goog.editor.plugins.UndoRedo.COMMAND.REDO&&(c=this.undoManager_.hasRedoState());return c};goog.editor.plugins.UndoRedo.prototype.dispatchCommandValueChange_=function(){this.getCurrentEventTarget().dispatchEvent({type:goog.editor.Field.EventType.COMMAND_VALUE_CHANGE,commands:[goog.editor.plugins.UndoRedo.COMMAND.REDO,goog.editor.plugins.UndoRedo.COMMAND.UNDO]})};goog.editor.plugins.UndoRedo.prototype.restoreState=function(h,g,l){var k=this.getFieldObjectForHash(h.fieldHashCode);if(k){k.stopChangeEvents(!0,!0);try{k.dispatchBeforeChange();k.execCommand(goog.editor.Command.CLEAR_LOREM,!0);goog.editor.node.replaceInnerHtml(k.getElement(),g);l&&l.select();var j=this.getCurrentFieldObject();k.focus();j&&j.getHashCode()!=h.fieldHashCode&&j.execCommand(goog.editor.Command.UPDATE_LOREM);this.currentStates_[h.fieldHashCode].setUndoState(g,l)}catch(i){this.logger.severe("Error while restoring undo state",i)}finally{this.inProgressUndo_=h,k.dispatchChange(),k.dispatchSelectionChangeEvent()}}};goog.editor.plugins.UndoRedo.prototype.handleKeyboardShortcut=function(f,e,h){if(h){var g;"z"==e?g=f.shiftKey?goog.editor.plugins.UndoRedo.COMMAND.REDO:goog.editor.plugins.UndoRedo.COMMAND.UNDO:"y"==e&&(g=goog.editor.plugins.UndoRedo.COMMAND.REDO);if(g){return(f=g==goog.editor.plugins.UndoRedo.COMMAND.UNDO?this.undoManager_.undoPeek():this.undoManager_.redoPeek())&&f.fieldHashCode?this.getCurrentFieldObject().execCommand(g):this.execCommand(g),!0}}return !1};goog.editor.plugins.UndoRedo.prototype.clearHistory=function(){this.getFieldObject().stopChangeEvents(!0,!0);this.undoManager_.clearHistory();this.getFieldObject().startChangeEvents()};goog.editor.plugins.UndoRedo.prototype.refreshCurrentState=function(b){this.isEnabled(b)&&(this.currentStates_[b.getHashCode()]&&delete this.currentStates_[b.getHashCode()],this.updateCurrentState_(b))};goog.editor.plugins.UndoRedo.prototype.handleBeforeChange_=function(d){if(!this.inProgressUndo_){d=d.target;var c=d.getHashCode();this.initialFieldChange_!=c&&(this.initialFieldChange_=c,this.updateCurrentState_(d))}};goog.editor.plugins.UndoRedo.prototype.handleDelayedChange_=function(b){this.inProgressUndo_?(b=this.inProgressUndo_,this.inProgressUndo_=null,b.dispatchEvent(goog.editor.plugins.UndoRedoState.ACTION_COMPLETED)):this.updateCurrentState_(b.target)};goog.editor.plugins.UndoRedo.prototype.handleBlur_=function(b){(b=b.target)&&b.clearDelayedChange()};goog.editor.plugins.UndoRedo.prototype.getCursorPosition_=function(b){b=new goog.editor.plugins.UndoRedo.CursorPosition_(b);return !b.isValid()?null:b};goog.editor.plugins.UndoRedo.prototype.updateCurrentState_=function(g){var f=g.getHashCode(),j,i;g.queryCommandValue(goog.editor.Command.USING_LOREM)?(j="",i=null):(j=g.getElement().innerHTML,i=this.getCursorPosition_(g));var h=this.currentStates_[f];if(h){if(h.undoContent_==j){return}if(""==j||""==h.undoContent_){if(g=g.getInjectableContents("",{}),j==g&&""==h.undoContent_||h.undoContent_==g&&""==j){return}}h.setRedoState(j,i);this.undoManager_.addState(h)}this.currentStates_[f]=new goog.editor.plugins.UndoRedo.UndoState_(f,j,i,this.boundRestoreState_)};goog.editor.plugins.UndoRedo.UndoState_=function(f,e,h,g){goog.editor.plugins.UndoRedoState.call(this,!0);this.fieldHashCode=f;this.restore_=g;this.setUndoState(e,h)};goog.inherits(goog.editor.plugins.UndoRedo.UndoState_,goog.editor.plugins.UndoRedoState);goog.editor.plugins.UndoRedo.UndoState_.prototype.undo=function(){this.restore_(this,this.undoContent_,this.undoCursorPosition_)};goog.editor.plugins.UndoRedo.UndoState_.prototype.redo=function(){this.restore_(this,this.redoContent_,this.redoCursorPosition_)};goog.editor.plugins.UndoRedo.UndoState_.prototype.setUndoState=function(d,c){this.undoContent_=d;this.undoCursorPosition_=c};goog.editor.plugins.UndoRedo.UndoState_.prototype.setRedoState=function(d,c){this.redoContent_=d;this.redoCursorPosition_=c};goog.editor.plugins.UndoRedo.UndoState_.prototype.equals=function(b){return this.fieldHashCode==b.fieldHashCode&&this.undoContent_==b.undoContent_&&this.redoContent_==b.redoContent_};goog.editor.plugins.UndoRedo.CursorPosition_=function(d){this.field_=d;var c=d.getEditableDomHelper().getWindow();d=(d=d.getRange())&&d.isRangeInDocument()&&d.getWindow()==c?d:null;goog.editor.BrowserFeature.HAS_W3C_RANGES?this.initW3C_(d):goog.editor.BrowserFeature.HAS_IE_RANGES&&this.initIE_(d)};goog.editor.plugins.UndoRedo.CursorPosition_.prototype.initW3C_=function(g){this.isValid_=!1;if(g){var f=g.getAnchorNode(),j=g.getFocusNode();if(f&&j){var i=g.getAnchorOffset(),f=new goog.dom.NodeOffset(f,this.field_.getElement()),h=g.getFocusOffset(),j=new goog.dom.NodeOffset(j,this.field_.getElement());g.isReversed()?(this.startOffset_=j,this.startChildOffset_=h,this.endOffset_=f,this.endChildOffset_=i):(this.startOffset_=f,this.startChildOffset_=i,this.endOffset_=j,this.endChildOffset_=h);this.isValid_=!0}}};goog.editor.plugins.UndoRedo.CursorPosition_.prototype.initIE_=function(e){this.isValid_=!1;if(e){var d=e.getTextRange(0).getBrowserRangeObject();if(goog.dom.contains(this.field_.getElement(),d.parentElement())){e=this.field_.getEditableDomHelper().getDocument().body.createTextRange();e.moveToElementText(this.field_.getElement());var f=d.duplicate();f.collapse(!0);f.setEndPoint("StartToStart",e);this.startOffset_=goog.editor.plugins.UndoRedo.CursorPosition_.computeEndOffsetIE_(f);d=d.duplicate();d.setEndPoint("StartToStart",e);this.endOffset_=goog.editor.plugins.UndoRedo.CursorPosition_.computeEndOffsetIE_(d);this.isValid_=!0}}};goog.editor.plugins.UndoRedo.CursorPosition_.prototype.isValid=function(){return this.isValid_};goog.editor.plugins.UndoRedo.CursorPosition_.prototype.toString=function(){return goog.editor.BrowserFeature.HAS_W3C_RANGES?"W3C:"+this.startOffset_.toString()+"\n"+this.startChildOffset_+":"+this.endOffset_.toString()+"\n"+this.endChildOffset_:"IE:"+this.startOffset_+","+this.endOffset_};goog.editor.plugins.UndoRedo.CursorPosition_.prototype.select=function(){var b=this.getRange_(this.field_.getElement());b&&(goog.editor.BrowserFeature.HAS_IE_RANGES&&this.field_.getElement().focus(),goog.dom.Range.createFromBrowserRange(b).select())};goog.editor.plugins.UndoRedo.CursorPosition_.prototype.getRange_=function(d){if(goog.editor.BrowserFeature.HAS_W3C_RANGES){var c=this.startOffset_.findTargetNode(d);d=this.endOffset_.findTargetNode(d);return !c||!d?null:goog.dom.Range.createFromNodes(c,this.startChildOffset_,d,this.endChildOffset_).getBrowserRangeObject()}c=d.ownerDocument.body.createTextRange();c.moveToElementText(d);c.collapse(!0);c.moveEnd("character",this.endOffset_);c.moveStart("character",this.startOffset_);return c};goog.editor.plugins.UndoRedo.CursorPosition_.computeEndOffsetIE_=function(h){var g=h.duplicate(),l=h.text,k=l.length;g.collapse(!0);g.moveEnd("character",k);for(var j,i=10;(j=g.compareEndPoints("EndToEnd",h))&&!(k-=j,g.moveEnd("character",-j),--i,0==i);){}h=0;for(g=l.indexOf("\n\r");-1!=g;){++h,g=l.indexOf("\n\r",g+1)}return k+h};goog.editor.plugins.SpacesTabHandler=function(){goog.editor.plugins.AbstractTabHandler.call(this)};goog.inherits(goog.editor.plugins.SpacesTabHandler,goog.editor.plugins.AbstractTabHandler);goog.editor.plugins.SpacesTabHandler.prototype.getTrogClassId=function(){return"SpacesTabHandler"};goog.editor.plugins.SpacesTabHandler.prototype.handleTabKey=function(e){var d=this.getFieldDomHelper(),f=this.getFieldObject().getRange();return !goog.editor.range.intersectsTag(f,goog.dom.TagName.LI)?(e.shiftKey||(this.getFieldObject().stopChangeEvents(!0,!0),f.isCollapsed()||(d.getDocument().execCommand("delete",!1,null),f=this.getFieldObject().getRange()),d=d.createDom("span",null,"\u00a0\u00a0 \u00a0"),d=f.insertNode(d,!1),this.getFieldObject().dispatchChange(),goog.editor.range.placeCursorNextTo(d,!1),this.getFieldObject().dispatchSelectionChangeEvent()),e.preventDefault(),!0):!1};(function(){goog.rally={}})();(function(){var b=window.Ext4||window.Ext;goog.ui.Dialog.ButtonSet.prototype.getAllButtons=function(){return this.element_.getElementsByClassName(b.baseCSSPrefix+"btn")};goog.ui.Dialog.ButtonSet.prototype.render=function(){if(this.element_){this.element_.innerHTML="";goog.structs.forEach(this,function(d,g){var f;var e={text:d,disabled:true,height:22,cls:"primary small"};if(d==="Cancel"){e.disabled=false;e.ui="link";e.cls="secondary small"}f=b.create("Rally.ui.Button",e);f.render(this.element_);f.getEl().dom.name=g},this)}};var c=goog.ui.editor.LinkDialog.prototype.syncOkButton_;goog.ui.editor.LinkDialog.prototype.syncOkButton_=function(){c.call(this);var d=b.ComponentManager.get(this.dialogInternal_.getButtonElement().children[0].id);d.setDisabled(this.getOkButtonElement().disabled)};var a=goog.editor.plugins.ImageDialog.prototype.syncOkButton_;goog.editor.plugins.ImageDialog.prototype.syncOkButton_=function(){a.call(this);var d=b.ComponentManager.get(this.dialogInternal_.getButtonElement().children[0].id);d.setDisabled(this.getOkButtonElement().disabled)};goog.ui.Dialog.prototype.onButtonClick_=function(h){var g=this.findParentButton_((h.target));if(g&&!b.fly(g).hasCls("x4-btn-disabled")){var f=g.name;var d=(this.getButtonSet().get(f));if(this.dispatchEvent(new goog.ui.Dialog.Event(f,d))){this.setVisible(false)}}};goog.ui.Dialog.prototype.findParentButton_=function(d){var e=d;while(e!=null&&e!=this.buttonEl_){if(b.fly(e).hasCls("x4-btn")){return(e)}e=e.parentNode}return null}})();(function(){var a=window.Ext4||window.Ext;if(!goog.getObjectByName("Rally.lib.closure.richtext")){goog.provide("Rally.lib.closure.richtext")}Rally.lib.closure.richtext.Field=function(c,b){goog.base(this,c,b);this.cssStyles="body{margin:4px;font:12px arial,sans-serif;}"};goog.inherits(Rally.lib.closure.richtext.Field,goog.editor.Field);Rally.lib.closure.richtext.Field.prototype.STYLE_CLASS_PREFIX="rally-rte-class-";Rally.lib.closure.richtext.Field.prototype.getCleanContents=function(){var b=goog.editor.Field.prototype.getCleanContents.call(this);return this.clean(b,true)};Rally.lib.closure.richtext.Field.prototype.clean=function(c,g){var d=this.convertStylesToInlineStyles(c);d=this.removeComments(d);d=this.fixWordPaste(d);d=this.fixMacTextPaste(d);d=this.fixPreTagPaste(d);d=d.replace(/[\r\n]/g," ");if(g){if(d.length!=c.length){this.setHtml(false,d,true,false);if(this.isLoaded()){this.focusAndPlaceCursorAtStart()}}}d=this._makeImagesStoredAsAttachmentsUseRelativeUrls(d);var b=this.convertInlineStylesToStyleTag(d);d=b.length<d.length?b:d;var f=/^[ ]*<br[ ]*[\/]?>[ ]*$/;if(this._stripRallyStyleTag(d).value.match(f)){d=""}d=this._stripTrailingLinebreak(d);var e=document.createElement("div");e.innerHTML=d;_.forEach(e.getElementsByTagName("img"),function(h){h.removeAttribute("id")});d=e.innerHTML;return d};Rally.lib.closure.richtext.Field.prototype.convertStylesToInlineStyles=function(m){var h=this._stripRallyStyleTag(m);m=h.value;var d=h.rallyTag;if(d){var k=m.match(new RegExp('<(\\w|\\s|"|=)+?[^>]*?class="[^"]*?'+this.STYLE_CLASS_PREFIX+'(\\w)+?[^"]*?"[^>]*?>',"gi"));if(k){var l=this._getStyleClassesMapFromStyleTag(d);for(var g=0;g<k.length;g++){var p=k[g];var c=p.match(new RegExp('class="[^"]*?'+this.STYLE_CLASS_PREFIX+'(\\w)+?[^"]*?"',"gi"))[0];var b=c;var f=p.match(/style="[^"]+?"/gi);f=f?f[0]:f;var o=f?f.replace(/(")$/gi,""):'style="';var n=c.match(new RegExp(this.STYLE_CLASS_PREFIX+"(\\w)+","gi"));for(var e=0;e<n.length;e++){b=b.replace(n[e],"");if(l[n[e]]){o+=l[n[e]].replace(/(\{|\})/gi,"")}}if(b.replace(/(^(class=")|(")$)/gi,"").match(/\S/gi)){p=p.replace(c,b)}else{p=p.replace(c,"")}o+='"';p=f?p.replace(f,o):p.replace(/(\/?>)$/gi," "+o+p.match(/(\/?>)$/)[0]);m=m.replace(k[g],p.replace(/\s{2,}/gi," "))}}}return m};Rally.lib.closure.richtext.Field.prototype._getStyleClassesMapFromStyleTag=function(f){var b={};var g=f.match(new RegExp("\\."+this.STYLE_CLASS_PREFIX+"(\\w)+\\{(.|\\s)*?\\}","gi"));if(g){for(var d=0;d<g.length;d++){var c=g[d].match(new RegExp(this.STYLE_CLASS_PREFIX+"(\\w)+","gi"))[0];var e=g[d].match(/\{[\s\S]*\}/gi)[0].replace(/(\{|\})/gi,"");b[c]=e}}return b};Rally.lib.closure.richtext.Field.prototype._stripRallyStyleTag=function(d){var c=d.match(new RegExp(this._getNewStyleStartTag()+"(.|\\s)*?(<\\/style>)+?","gi"));var b=c?c[0]:undefined;if(b){d=d.replace(b,"")}return{rallyTag:b,value:d}};Rally.lib.closure.richtext.Field.prototype._getNewStyleStartTag=function(){var b=window.RALLY&&RALLY.STYLE_TAG_DELETE_ATTR||"rallydeleteme";return"<style "+b+'="false" type="text/css">'};Rally.lib.closure.richtext.Field.prototype.convertInlineStylesToStyleTag=function(j){j=this.convertStylesToInlineStyles(j).replace(/<style[^>]*>[^<<]*(<\/style>)+?/gi,"");var g={};var k=j.match(/<[^>]+?(\s)+?style="[^>]+?>/gi);var m=false;if(k){for(var e=0;e<k.length;e++){var h=k[e];var l=h;var b=l.match(/style="[\s\S]*?"/gi)[0];l=l.replace(b,"");b=b.replace(/^(style=")/gi,"").replace(/(")$/gi,"");if(b.match(/(\S)/gi)){var d=l.match(/class="[\s\S]*?"/gi);if(d){d=d[0];l=l.replace(d,"")}var f=this._findExistingStyleClassNameForStyle(b,g);if(!f){f=this._generateStyleClassName();g[f]=b}if(d){f=d.replace(/^(class=")/gi,"").replace(/(")$/gi,"")+" "+f}var c=l.match(/(\/?>)$/)[0];l=l.replace(/(\/?>)$/gi,' class="'+f+'"'+c);m=true}j=j.replace(h,l.replace(/\s{2,}/gi," "))}}return m?this._generateStyleTag(g)+j:j};Rally.lib.closure.richtext.Field.prototype._generateStyleTag=function(b){var d=this._getNewStyleStartTag();for(var c in b){if(c&&b[c]){d+="."+c+"{"+b[c].replace(/\s{2,}/gi," ")+"}"}}return d+"</style>"};Rally.lib.closure.richtext.Field.prototype._generateStyleClassName=function(){return this.STYLE_CLASS_PREFIX+Math.random().toString(16).replace(".","")};Rally.lib.closure.richtext.Field.prototype._findExistingStyleClassNameForStyle=function(d,b){for(var c in b){if(b[c]===d){return c}}return undefined};Rally.lib.closure.richtext.Field.prototype.fixPreTagPaste=function(h){var l=h.match(/<pre[^>]*>[\s\S]*?<\/pre>/gi);if(l){for(var f=0;f<l.length;f++){var e=l[f];e=e.replace(/\t/gi,"      ");var g=e.match(/( ){2,}/gi);if(g){for(var d=0;d<g.length;d++){e=e.replace(g[d],g[d].replace(/( ){2}/gi,"&nbsp; ").replace(/( ){2}$/gi," &nbsp;"))}}var b=e.match(/(\r|\n|(\r\n)|(\n\r))[\u00A0|\u0020]+/gi);if(b){for(var c=0;c<b.length;c++){e=e.replace(b[c],b[c].replace(/[\u00A0|\u0020]/gi,"&nbsp;"))}}e=e.replace(/((\r\n)|(\n\r)|\r|\n)/gi,"<br>");e=e.replace(/(&nbsp;| )+<br *\/?>/gi,"<br>");e=e.replace(/((<pre[^>]*>)|(<\/pre>))/gi,"");h=h.replace(l[f],e)}}return h};Rally.lib.closure.richtext.Field.prototype.fixMacTextPaste=function(b){if(goog.userAgent.MAC){b=b.replace(/Version:(.+)\sStartHTML:[0-9]+\sEndHTML:[0-9]+\sStartFragment:[0-9]+\sEndFragment:[0-9]+(\sSourceURL:(.*))?(\n|\b)+?/gi,"")}return b};Rally.lib.closure.richtext.Field.prototype.fixWordPaste=function(b){b=this.fixWordTablePaste(b);b=this.fixWordListPaste(b);b=this.fixLineBreaksAndEmptySpans(b);b=this.removeInvalidWordPasteTagAttributes(b);b=this.removeInvalidWordPasteTags(b);return b};Rally.lib.closure.richtext.Field.prototype.fixLineBreaksAndEmptySpans=function(f){var b=f.match(/<span[^>|goog_\d*]*>(\s|&nbsp;)*?<\/span>/gi);if(b){for(var d=0;d<b.length;d++){var h=b[d].replace(/^<span[^>]*>/gi,"");h=h.replace(/<\/span>$/gi,"");f=f.replace(b[d],h)}}f=f.replace(/<p[^>]*>(\s|&nbsp;)*?<\/p>/gi,"<br>");var c=f.match(/<p class="MsoNormal"( style="margin-bottom: 0.0001pt; line-height: normal;")?>[\s\S]*?<\/p>/gi);if(c){for(var e=0;e<c.length;e++){var g=c[e].replace(/^<p[^>]*>/gi,"");g=g.replace(/<\/p>$/gi,"<br>");f=f.replace(c[e],g)}}return f};Rally.lib.closure.richtext.Field.prototype.fixWordListPaste=function(e){var k=goog.dom.createDom("div");var c=e.match(/<p[^>]+?class=\"?MsoListParagraph(\"|\s|>)[\s\S]*?>[\s\S]*?<\/p>/gi);if(c){for(var d=0;d<c.length;d++){var h=this._createSingleBulletList(k,c[d]);e=e.replace(c[d],h)}}var g=e.match(/<p[^>]+?class=\"?MsoListParagraphCxSpFirst[\s\S]*?<p[^>]+?class=\"?MsoListParagraphCxSpLast[\s\S]*?<\/p>/gi);if(g){for(var b=0;b<g.length;b++){var f=this._createBulletList(k,g[b]);e=e.replace(g[b],f)}}k.innerHTML="";return e};Rally.lib.closure.richtext.Field.prototype._createSingleBulletList=function(e,d){e.innerHTML=d;var c=e.childNodes[0];if(c.childNodes.length===0){return""}var b=this._isElementOrdered(c);return(b?"<ol>":"<ul>")+this._generateListElement(c,b)+(b?"</ol>":"</ul>")};Rally.lib.closure.richtext.Field.prototype._createBulletList=function(b,c){b.innerHTML=c;var f=b.children;var j=this._isElementOrdered(f[0]);var g=(j?"<ol>":"<ul>")+this._generateListElement(f[0],j);var h=this._convertToPx(f[0].style.marginLeft);var l=[{marginLeft:h,closeTag:(j?"</ol>":"</ul>")}];for(var e=1;e<f.length;e++){var k=f[e];j=this._isElementOrdered(k);if(k.innerHTML){var d=this._convertToPx(k.style.marginLeft);if(d>h){g+=(j?"<ol>":"<ul>");l.push({marginLeft:d,closeTag:(j?"</ol>":"</ul>")})}else{if(d<h){while(l.length>1&&l[l.length-1].marginLeft>d){g+=l[l.length-1].closeTag;l.pop()}}}h=d;g+=this._generateListElement(k,j)}}while(l.length>0){g+=l[l.length-1].closeTag;l.pop()}return g};Rally.lib.closure.richtext.Field.prototype._isElementOrdered=function(d){var b=d.childNodes[0];if(!b){return false}var c=b.textContent?b.textContent:b.outerText;if(c){return c.match(/^(\s)*[a-zA-Z0-9](\w|\.)*(\.|\))\s{1,1}?/gi)?true:false}else{return false}};Rally.lib.closure.richtext.Field.prototype._generateListElement=function(e,d){while(e.childNodes.length===1){e=e.childNodes[0]}var c=/mso-list:\s?Ignore/;if(e.childNodes.length!==0&&e.childNodes[0].innerHTML&&e.childNodes[0].innerHTML.match(c)){e.removeChild(e.childNodes[0])}var b=e.innerHTML;if(!b&&!d){b=e.textContent}return"<li>"+(typeof b!=="undefined"?b:"")+"</li>"};Rally.lib.closure.richtext.Field.prototype._pullTableFromList=function(d){var c=d.match(/<p[^>]+?class=\"?MsoListParagraph\w*/gi);if(c){for(var b=0;b<c.length;b++){var e=c[b].replace(/MsoListParagraph\w*/gi,"");d=d.replace(c[b],e)}d='<p class="MsoListParagraphCxSpLast">&nbsp;</p>'+d+'<p class="MsoListParagraphCxSpFirst">&nbsp;</p>'}return d};Rally.lib.closure.richtext.Field.prototype.fixWordTablePaste=function(d){var c=d.match(/<\s*table[^>]+?class=\"?(MsoNormalTable|MsoTableGrid)[^>]*>[\s\S]*?<\s*\/\s*table\s*>/gi);if(c){for(var b=0;b<c.length;b++){var e=c[b].replace(/<\s*table[^>]*>/gi,'<table style="border-collapse: collapse;">');e=e.replace(/<\s*tbody[^>]*>/gi,"<tbody>");e=e.replace(/<\s*tr[^>]*>/gi,"<tr>");e=this._pullTableFromList(e);d=d.replace(c[b],e)}}return d};Rally.lib.closure.richtext.Field.prototype.removeComments=function(b){b=b.replace(/<!--\[if(.*?)>(.|\r|\n)*?<!\[endif\]-->/gi,"");b=b.replace(/<!--(.|\r|\n)*?-->/gi,"");return b};Rally.lib.closure.richtext.Field.prototype.removeInvalidWordPasteTagAttributes=function(b){var h=window.RALLY&&RALLY.STYLE_TAG_DELETE_ATTR||"rallydeleteme";var k=b.match(/<[^\/][\s\S]*?>/gi);if(k){for(var g=0;g<k.length;g++){var l=k[g];var e=l.match(new RegExp("<style(.|\\s)*"+h+'=".*"[^>]*?>',"gi"));var d=k[g].match(/(\w+)={1,1}\"{1,1}[\s\S]+?\"{1,1}/gi);if(d&&!e){for(var f=0;f<d.length;f++){var c=d[f].match(/(^href|^src|^style|^id|^color|^face|^class|^height|^width|^border|^size)/gi)?d[f]:"";l=l.replace(d[f],c)}}b=b.replace(k[g],l)}}return b};Rally.lib.closure.richtext.Field.prototype.removeInvalidWordPasteTags=function(b){b=b.replace(/<\/?link[^>]*>/gi,"");b=b.replace(/<\/?meta[^>]*>/gi,"");b=b.replace(/<\/?xml[^>]*>/gi,"");b=b.replace(/<\?xml[^>]*\/>/gi,"");b=b.replace(/<\/?\w+:[^>]*>/gi,"");b=b.replace(/<\w+:[^>]*\/>/gi,"");b=b.replace(/<wordPasteong><\/wordPasteong>/gi,"");b=b.replace(/<hr>/gi,"");return b};Rally.lib.closure.richtext.Field.prototype._stripTrailingLinebreak=function(b){return b.replace(/(<br[ ]*[\/]?>)$/,"")};Rally.lib.closure.richtext.Field.prototype._convertToPx=function(d){var b=goog.dom.createDom("div",{style:"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"});goog.dom.appendChild(document.body,b);b.style.width=d;var c=b.clientWidth;document.body.removeChild(b);return c};Rally.lib.closure.richtext.Field.prototype._makeImagesStoredAsAttachmentsUseRelativeUrls=function(b){return b.replace(new RegExp("(<img[^>]*?src=[\"']?)https?://[^>]*?("+Rally.environment.getServer().getContextUrl()+"/attachment/[0-9]+?/)","gi"),"$1$2")}})();(function(){var a=window.Ext4||window.Ext;if(!goog.getObjectByName("Rally.lib.closure.richtext")){goog.provide("Rally.lib.closure.richtext")}Rally.lib.closure.richtext.ToolbarFontSizeMenuButtonRenderer=function(){goog.base(this)};goog.inherits(Rally.lib.closure.richtext.ToolbarFontSizeMenuButtonRenderer,goog.ui.ToolbarMenuButtonRenderer);goog.addSingletonGetter(Rally.lib.closure.richtext.ToolbarFontSizeMenuButtonRenderer);Rally.lib.closure.richtext.ToolbarFontSizeMenuButtonRenderer.prototype.setContent=function(b,c){}})();(function(){var a=window.Ext4||window.Ext;if(!goog.getObjectByName("Rally.lib.closure.richtext")){goog.provide("Rally.lib.closure.richtext")}Rally.lib.closure.richtext.fontSizeFactory=function(h,e,b,f,g,c){f+=" "+goog.getCssName("tr-icon");var d=new goog.ui.ToolbarSelect(goog.ui.editor.ToolbarFactory.createContent_(b,f,c),null,Rally.lib.closure.richtext.ToolbarFontSizeMenuButtonRenderer.getInstance(),c);d.setId(h);d.setTooltip(e);goog.ui.editor.DefaultToolbar.addDefaultFontSizes(d);return d};goog.ui.editor.DefaultToolbar.buttons_[goog.editor.Command.FONT_SIZE].factory=Rally.lib.closure.richtext.fontSizeFactory})();(function(){var a=window.Ext4||window.Ext;if(!goog.getObjectByName("Rally.lib.closure.richtext")){goog.provide("Rally.lib.closure.richtext")}window.MSG_IMAGE_DIALOG="Insert an Image";window.MSG_IMAGE_DIALOG_UPLOAD_INPUT="";Rally.lib.closure.richtext.RallyImageDialog=function(b,e,c,d){goog.base(this,b,e);this.oid=c;this.onImageUploadSuccess=d};goog.inherits(Rally.lib.closure.richtext.RallyImageDialog,goog.editor.plugins.ImageDialog);Rally.lib.closure.richtext.RallyImageDialog.prototype.createDialogControl=function(){var b=goog.ui.editor.AbstractDialog.Builder.prototype.addOkButton;try{goog.ui.editor.AbstractDialog.Builder.prototype.addOkButton=function(c){return b.call(this,"Insert")};this.dialogControl=goog.editor.plugins.ImageDialog.prototype.createDialogControl.call(this)}finally{goog.ui.editor.AbstractDialog.Builder.prototype.addOkButton=b}this.dialogControl.setDraggable(false);goog.dom.classes.add(this.dialogControl.getDialogElement(),"non-draggable");goog.dom.classes.remove(this.dialogControl.getDialogElement(),"modal-dialog");goog.dom.classes.add(this.dialogControl.getDialogElement(),"rly-modal-dialog");return this.dialogControl};Rally.lib.closure.richtext.RallyImageDialog.prototype.show=function(){var b=window.Ext4||window.Ext;goog.editor.plugins.ImageDialog.prototype.show.call(this);goog.style.setSize(this.dialogControl.getBackgroundElement(),b.Element.getViewportWidth(),b.Element.getViewportHeight());this.shadow=new b.Shadow();this.shadow.show(this.dialogControl.getElement());if(window.addRefreshWindowListener){window.addRefreshWindowListener(this.hide,this)}b.get(this.dialogControl.getTitleCloseElement()).addCls("icon-cancel")};Rally.lib.closure.richtext.RallyImageDialog.prototype.hide=function(){goog.editor.plugins.ImageDialog.prototype.hide.call(this);if(this.shadow){this.shadow.hide()}};Rally.lib.closure.richtext.RallyImageDialog.prototype.onFileUploadSuccess_=function(c){var b=c.target.getResponseJson();if(b.imageUrl){if(window.RALLY&&RALLY.ui&&RALLY.ui.Attachment){RALLY.ui.Attachment.onImageUploadSuccess({fileName:b.fileName,oid:b.oid})}if(this.onImageUploadSuccess){this.onImageUploadSuccess(b)}goog.editor.plugins.ImageDialog.prototype.onFileUploadSuccess_.call(this,c)}else{this._showErrorMessage(b.errors.message)}};Rally.lib.closure.richtext.RallyImageDialog.prototype.processOkAndClose=function(){goog.editor.plugins.ImageDialog.prototype.processOkAndClose.call(this);if(window.RALLY&&RALLY.ui&&RALLY.ui.Attachment){RALLY.ui.Attachment.reloadAttachmentForm(this.oid)}};Rally.lib.closure.richtext.RallyImageDialog.prototype.onFileInputChange_=function(){var c=this._getFileNameElement().value;var b=/\.(jpg|gif|jpeg|png|bmp|tiff|tif)$/i;if(b.test(c)){goog.editor.plugins.ImageDialog.prototype.onFileInputChange_.call(this)}else{this._showErrorMessage("Invalid file type, allowed types are: gif, jpg, jpeg, bmp, png, tif, or tiff.")}};Rally.lib.closure.richtext.RallyImageDialog.prototype._showErrorMessage=function(f){var d="image-upload-error-msg";var b=document.getElementById(d);if(b){this.dom.removeNode(b)}var e=this.dom.createDom(goog.dom.TagName.SPAN,{id:d,style:"color: red;"},this.dom.createTextNode(f));var c=document.getElementById(goog.editor.plugins.ImageDialog.Id_.UPLOAD_TAB+goog.editor.plugins.ImageDialog.Id_.TAB_SUFFIX);this.dom.appendChild(c,e);this._getFileNameElement().form.reset()};Rally.lib.closure.richtext.RallyImageDialog.prototype._getFileNameElement=function(){return this.dom.getElement(goog.editor.plugins.ImageDialog.Id_.UPLOAD_INPUT)}})();(function(){var a=window.Ext4||window.Ext;if(!goog.getObjectByName("Rally.lib.closure.richtext")){goog.provide("Rally.lib.closure.richtext")}Rally.lib.closure.richtext.RallyImageDialogPlugin=function(e,b,f,c){var d=Rally.environment.getServer().getContextUrl()+"/ax/richTextUploadAttachment.sp";if(c&&Rally.util.Ref.isRefUri(c._ref)&&c._ref.indexOf("project")!==-1){d+="?cpoid="+Rally.util.Ref.getOidFromRef(c._ref)}else{if(c&&c.get&&c.get("Project")){d=this.buildActionUrl(c)}else{if(c&&Rally.util.Ref.isRefUri(c)&&c.indexOf("project")!==-1){d+="?cpoid="+Rally.util.Ref.getOidFromRef(c)}}}goog.base(this,{actionUrl:d});this.oid=e;this.onImageUploadSuccess=f};goog.inherits(Rally.lib.closure.richtext.RallyImageDialogPlugin,goog.editor.plugins.ImageDialogPlugin);Rally.lib.closure.richtext.RallyImageDialogPlugin.prototype.createDialog=function(b,d){var c=new Rally.lib.closure.richtext.RallyImageDialog(b,d,this.oid,this.onImageUploadSuccess);if(this.config_){c.setConfig(this.config_)}c.addEventListener(goog.ui.editor.AbstractDialog.EventType.OK,this.handleOk_,false,this);return c};Rally.lib.closure.richtext.RallyImageDialogPlugin.prototype.handleOk_=function(d){goog.editor.plugins.ImageDialogPlugin.prototype.handleOk_.call(this,d);var f=this.getFieldDomHelper().getDocument().getElementsByTagName("img");for(var c=0;c<f.length;c++){var b=f[c];if(b.parentNode.tagName==="IMG"){this.getFieldDomHelper().insertSiblingAfter(b,b.parentNode)}b.style.maxWidth="100%"}};Rally.lib.closure.richtext.RallyImageDialogPlugin.prototype.buildActionUrl=function(c){var b=(c&&c.get("Project"))?Rally.util.Ref.getRefObject(c.get("Project")).getOid():null;var d=b?"?cpoid="+b:"";return Rally.environment.getServer().getContextUrl()+"/ax/richTextUploadAttachment.sp"+d};Rally.lib.closure.richtext.RallyImageDialogPlugin.prototype.updateActionUrl=function(b){this.config_.actionUrl=this.buildActionUrl(b)}})();(function(){var a=window.Ext4||window.Ext;if(!goog.getObjectByName("Rally.lib.closure.richtext")){goog.provide("Rally.lib.closure.richtext")}Rally.lib.closure.richtext.RallyLinkBubblePlugin=function(){goog.editor.plugins.LinkBubble.apply(this,arguments)};goog.inherits(Rally.lib.closure.richtext.RallyLinkBubblePlugin,goog.editor.plugins.LinkBubble);Rally.lib.closure.richtext.RallyLinkBubblePlugin.prototype.createBubbleContents=function(f){var e=this.getLinkToTextObj_();var d=goog.editor.Link.isLikelyEmailAddress(e.linkText);if(d){c(goog.editor.Link,"isLikelyEmailAddress",function(){return false})}try{goog.editor.plugins.LinkBubble.prototype.createBubbleContents.apply(this,arguments)}finally{if(d){b(goog.editor.Link,"isLikelyEmailAddress")}}};function c(d,f,e){d["tmp_"+f]=d[f];d[f]=e}function b(d,e){d[e]=d["tmp_"+e];delete d["tmp_"+e]}})();(function(){var a=window.Ext4||window.Ext;if(!goog.getObjectByName("Rally.lib.closure.richtext")){goog.provide("Rally.lib.closure.richtext")}goog.ui.editor.messages.MSG_EDIT_LINK="Insert a Link";Rally.lib.closure.richtext.RallyLinkDialog=function(b,c){goog.base(this,b,c)};goog.inherits(Rally.lib.closure.richtext.RallyLinkDialog,goog.ui.editor.LinkDialog);Rally.lib.closure.richtext.RallyLinkDialog.prototype.createDialogControl=function(){var b=goog.ui.editor.AbstractDialog.Builder.prototype.addOkButton;try{goog.ui.editor.AbstractDialog.Builder.prototype.addOkButton=function(c){return b.call(this,"Insert")};this.dialogControl=goog.ui.editor.LinkDialog.prototype.createDialogControl.call(this)}finally{goog.ui.editor.AbstractDialog.Builder.prototype.addOkButton=b}this.dialogControl.setDraggable(false);goog.dom.classes.add(this.dialogControl.getDialogElement(),"non-draggable");goog.dom.classes.remove(this.dialogControl.getDialogElement(),"modal-dialog");goog.dom.classes.add(this.dialogControl.getDialogElement(),"rly-modal-dialog");return this.dialogControl};Rally.lib.closure.richtext.RallyLinkDialog.prototype.show=function(){var b=window.Ext4||window.Ext;goog.ui.editor.LinkDialog.prototype.show.call(this);goog.style.setSize(this.dialogControl.getBackgroundElement(),Math.max(b.Element.getViewportWidth(),b.Element.getDocumentWidth()),Math.max(b.Element.getViewportHeight(),b.Element.getDocumentHeight()));this.shadow=new b.Shadow();this.shadow.show(this.dialogControl.getElement());if(window.addRefreshWindowListener){window.addRefreshWindowListener(this.hide,this)}b.get(this.dialogControl.getTitleCloseElement()).addCls("icon-cancel")};Rally.lib.closure.richtext.RallyLinkDialog.prototype.hide=function(){goog.ui.editor.LinkDialog.prototype.hide.call(this);if(this.shadow){this.shadow.hide()}}})();(function(){var a=window.Ext4||window.Ext;if(!goog.getObjectByName("Rally.lib.closure.richtext")){goog.provide("Rally.lib.closure.richtext")}Rally.lib.closure.richtext.RallyLinkDialogPlugin=function(){goog.base(this)};goog.inherits(Rally.lib.closure.richtext.RallyLinkDialogPlugin,goog.editor.plugins.LinkDialogPlugin);Rally.lib.closure.richtext.RallyLinkDialogPlugin.prototype.createDialog=function(b,d){var c=new Rally.lib.closure.richtext.RallyLinkDialog(b,(d));if(this.emailWarning_){c.setEmailWarning(this.emailWarning_)}c.setStopReferrerLeaks(this.stopReferrerLeaks_);this.eventHandler_.listen(c,goog.ui.editor.AbstractDialog.EventType.OK,this.handleOk_||this.handleOk).listen(c,goog.ui.editor.AbstractDialog.EventType.CANCEL,this.handleCancel_);return c}})();(function(){var a=window.Ext4||window.Ext;if(!goog.getObjectByName("Rally.lib.closure.richtext")){goog.provide("Rally.lib.closure.richtext")}Rally.lib.closure.richtext.RallyEscapeKeyPressedPlugin=function(b){this.richTextEditorComponent=b;goog.base(this)};goog.inherits(Rally.lib.closure.richtext.RallyEscapeKeyPressedPlugin,goog.editor.Plugin);Rally.lib.closure.richtext.RallyEscapeKeyPressedPlugin.prototype.getTrogClassId=function(){return"RallyEscapeKeyPressedPlugin"};Rally.lib.closure.richtext.RallyEscapeKeyPressedPlugin.prototype.handleKeyUp=function(c,b){if(c.keyCode===a.EventObject.ESC){this.richTextEditorComponent.fireEvent("tappedescape")}return false}})();